import{b as kx,c as Nx,f as hF,g as Lx}from"./chunk-AQT7K737.js";import{a as W,b as re,c as ey,d as ty,f as Ti,h as ny,i as fF,j as D}from"./chunk-TWZW5B45.js";var FC=Ti(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});var NC=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};LC.default=NC});var jC=Ti(dd=>{"use strict";var mR=dd&&dd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(dd,"__esModule",{value:!0});var r5=mR((Lx(),fF(hF))),o5=mR(FC()),VC=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=r5.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch,r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>D(this,null,function*(){var s,l,c;let d=null,h=null,p=null,y=o.status,_=o.statusText;if(o.ok){if(this.method!=="HEAD"){let T=yield o.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=T:h=JSON.parse(T))}let I=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");I&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,y=406,_="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{let I=yield o.text();try{d=JSON.parse(I),Array.isArray(d)&&o.status===404&&(h=[],d=null,y=200,_="OK")}catch{o.status===404&&I===""?(y=204,_="No Content"):d={message:I}}if(d&&this.isMaybeSingle&&(!((c=d?.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,y=200,_="OK"),d&&this.shouldThrowOnError)throw new o5.default(d)}return{error:d,data:h,count:p,status:y,statusText:_}}));return this.shouldThrowOnError||(r=r.catch(o=>{var s,l,c;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(l=o?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};dd.default=VC});var zC=Ti(fd=>{"use strict";var s5=fd&&fd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fd,"__esModule",{value:!0});var a5=s5(jC()),BC=class extends a5.default{select(e){let t=!1,i=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:o=r}={}){let s=o?`${o}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){let r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:r=i}={}){let o=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:o=!1,format:s="text"}={}){var l;let c=[e?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${d}"; options=${c};`,s==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fd.default=BC});var lm=Ti(hd=>{"use strict";var l5=hd&&hd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(hd,"__esModule",{value:!0});var c5=l5(zC()),UC=class extends c5.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let i=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");let s=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${o}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){let r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};hd.default=UC});var $C=Ti(gd=>{"use strict";var u5=gd&&gd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gd,"__esModule",{value:!0});var pd=u5(lm()),HC=class{constructor(e,{headers:t={},schema:i,fetch:r}){this.url=e,this.headers=t,this.schema=i,this.fetch=r}select(e,{head:t=!1,count:i}={}){let r=t?"HEAD":"GET",o=!1,s=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",s),i&&(this.headers.Prefer=`count=${i}`),new pd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:i=!0}={}){let r="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),t&&o.push(`count=${t}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){let s=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(s.length>0){let l=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new pd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:o=!0}={}){let s="POST",l=[`resolution=${i?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){let c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){let d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new pd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new pd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new pd.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};gd.default=HC});var _R=Ti(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.version=void 0;cm.version="0.0.0-automated"});var vR=Ti(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.DEFAULT_HEADERS=void 0;var d5=_R();um.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${d5.version}`}});var bR=Ti(md=>{"use strict";var yR=md&&md.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(md,"__esModule",{value:!0});var f5=yR($C()),h5=yR(lm()),p5=vR(),WC=class n{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},p5.DEFAULT_HEADERS),t),this.schemaName=i,this.fetch=r}from(e){let t=new URL(`${this.url}/${e}`);return new f5.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:o}={}){let s,l=new URL(`${this.url}/rpc/${e}`),c;i||r?(s=i?"HEAD":"GET",Object.entries(t).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{l.searchParams.append(h,p)})):(s="POST",c=t);let d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new h5.default({method:s,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};md.default=WC});var IR=Ti(mn=>{"use strict";var $l=mn&&mn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(mn,"__esModule",{value:!0});mn.PostgrestError=mn.PostgrestBuilder=mn.PostgrestTransformBuilder=mn.PostgrestFilterBuilder=mn.PostgrestQueryBuilder=mn.PostgrestClient=void 0;var wR=$l(bR());mn.PostgrestClient=wR.default;var CR=$l($C());mn.PostgrestQueryBuilder=CR.default;var ER=$l(lm());mn.PostgrestFilterBuilder=ER.default;var SR=$l(zC());mn.PostgrestTransformBuilder=SR.default;var DR=$l(jC());mn.PostgrestBuilder=DR.default;var xR=$l(FC());mn.PostgrestError=xR.default;mn.default={PostgrestClient:wR.default,PostgrestQueryBuilder:CR.default,PostgrestFilterBuilder:ER.default,PostgrestTransformBuilder:SR.default,PostgrestBuilder:DR.default,PostgrestError:xR.default}});var kL=Ti((lv,OL)=>{"use strict";(function(n,e){typeof lv=="object"&&typeof OL<"u"?e(lv):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(lv,function(n){"use strict";var e="1.9.4";function t(a){var u,f,g,b;for(f=1,g=arguments.length;f<g;f++){b=arguments[f];for(u in b)a[u]=b[u]}return a}var i=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function r(a,u){var f=Array.prototype.slice;if(a.bind)return a.bind.apply(a,f.call(arguments,1));var g=f.call(arguments,2);return function(){return a.apply(u,g.length?g.concat(f.call(arguments)):arguments)}}var o=0;function s(a){return"_leaflet_id"in a||(a._leaflet_id=++o),a._leaflet_id}function l(a,u,f){var g,b,E,P;return P=function(){g=!1,b&&(E.apply(f,b),b=!1)},E=function(){g?b=arguments:(a.apply(f,arguments),setTimeout(P,u),g=!0)},E}function c(a,u,f){var g=u[1],b=u[0],E=g-b;return a===g&&f?a:((a-b)%E+E)%E+b}function d(){return!1}function h(a,u){if(u===!1)return a;var f=Math.pow(10,u===void 0?6:u);return Math.round(a*f)/f}function p(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function y(a){return p(a).split(/\s+/)}function _(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var f in u)a.options[f]=u[f];return a.options}function S(a,u,f){var g=[];for(var b in a)g.push(encodeURIComponent(f?b.toUpperCase():b)+"="+encodeURIComponent(a[b]));return(!u||u.indexOf("?")===-1?"?":"&")+g.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function x(a,u){return a.replace(I,function(f,g){var b=u[g];if(b===void 0)throw new Error("No value provided for variable "+f);return typeof b=="function"&&(b=b(u)),b})}var T=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function H(a,u){for(var f=0;f<a.length;f++)if(a[f]===u)return f;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var ae=0;function $e(a){var u=+new Date,f=Math.max(0,16-(u-ae));return ae=u+f,window.setTimeout(a,f)}var pe=window.requestAnimationFrame||U("RequestAnimationFrame")||$e,le=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function It(a,u,f){if(f&&pe===$e)a.call(u);else return pe.call(window,r(a,u))}function yn(a){a&&le.call(window,a)}var BL={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:s,throttle:l,wrapNum:c,falseFn:d,formatNum:h,trim:p,splitWords:y,setOptions:_,getParamString:S,template:x,isArray:T,indexOf:H,emptyImageUrl:q,requestFn:pe,cancelFn:le,requestAnimFrame:It,cancelAnimFrame:yn};function jr(){}jr.extend=function(a){var u=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,g=i(f);g.constructor=u,u.prototype=g;for(var b in this)Object.prototype.hasOwnProperty.call(this,b)&&b!=="prototype"&&b!=="__super__"&&(u[b]=this[b]);return a.statics&&t(u,a.statics),a.includes&&(zL(a.includes),t.apply(null,[g].concat(a.includes))),t(g,a),delete g.statics,delete g.includes,g.options&&(g.options=f.options?i(f.options):{},t(g.options,a.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,P=g._initHooks.length;E<P;E++)g._initHooks[E].call(this)}},u},jr.include=function(a){var u=this.prototype.options;return t(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},jr.mergeOptions=function(a){return t(this.prototype.options,a),this},jr.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),f=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function zL(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=T(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Xn={on:function(a,u,f){if(typeof a=="object")for(var g in a)this._on(g,a[g],u);else{a=y(a);for(var b=0,E=a.length;b<E;b++)this._on(a[b],u,f)}return this},off:function(a,u,f){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var g in a)this._off(g,a[g],u);else{a=y(a);for(var b=arguments.length===1,E=0,P=a.length;E<P;E++)b?this._off(a[E]):this._off(a[E],u,f)}return this},_on:function(a,u,f,g){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,f)===!1){f===this&&(f=void 0);var b={fn:u,ctx:f};g&&(b.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)}},_off:function(a,u,f){var g,b,E;if(this._events&&(g=this._events[a],!!g)){if(arguments.length===1){if(this._firingCount)for(b=0,E=g.length;b<E;b++)g[b].fn=d;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var P=this._listens(a,u,f);if(P!==!1){var O=g[P];this._firingCount&&(O.fn=d,this._events[a]=g=g.slice()),g.splice(P,1)}}},fire:function(a,u,f){if(!this.listens(a,f))return this;var g=t({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var b=this._events[a];if(b){this._firingCount=this._firingCount+1||1;for(var E=0,P=b.length;E<P;E++){var O=b[E],j=O.fn;O.once&&this.off(a,j,O.ctx),j.call(O.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(a,u,f,g){typeof a!="string"&&console.warn('"string" type argument expected');var b=u;typeof u!="function"&&(g=!!u,b=void 0,f=void 0);var E=this._events&&this._events[a];if(E&&E.length&&this._listens(a,b,f)!==!1)return!0;if(g){for(var P in this._eventParents)if(this._eventParents[P].listens(a,u,f,g))return!0}return!1},_listens:function(a,u,f){if(!this._events)return!1;var g=this._events[a]||[];if(!u)return!!g.length;f===this&&(f=void 0);for(var b=0,E=g.length;b<E;b++)if(g[b].fn===u&&g[b].ctx===f)return b;return!1},once:function(a,u,f){if(typeof a=="object")for(var g in a)this._on(g,a[g],u,!0);else{a=y(a);for(var b=0,E=a.length;b<E;b++)this._on(a[b],u,f,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[s(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[s(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,t({layer:a.target,propagatedFrom:a.target},a),!0)}};Xn.addEventListener=Xn.on,Xn.removeEventListener=Xn.clearAllEventListeners=Xn.off,Xn.addOneTimeEventListener=Xn.once,Xn.fireEvent=Xn.fire,Xn.hasEventListeners=Xn.listens;var wc=jr.extend(Xn);function Ie(a,u,f){this.x=f?Math.round(a):a,this.y=f?Math.round(u):u}var ED=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Ie.prototype={clone:function(){return new Ie(this.x,this.y)},add:function(a){return this.clone()._add(ye(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ye(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Ie(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Ie(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ED(this.x),this.y=ED(this.y),this},distanceTo:function(a){a=ye(a);var u=a.x-this.x,f=a.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(a){return a=ye(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ye(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function ye(a,u,f){return a instanceof Ie?a:T(a)?new Ie(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Ie(a.x,a.y):new Ie(a,u,f)}function bt(a,u){if(a)for(var f=u?[a,u]:a,g=0,b=f.length;g<b;g++)this.extend(f[g])}bt.prototype={extend:function(a){var u,f;if(!a)return this;if(a instanceof Ie||typeof a[0]=="number"||"x"in a)u=f=ye(a);else if(a=Bn(a),u=a.min,f=a.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(a){return ye((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ye(this.min.x,this.max.y)},getTopRight:function(){return ye(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,f;return typeof a[0]=="number"||a instanceof Ie?a=ye(a):a=Bn(a),a instanceof bt?(u=a.min,f=a.max):u=f=a,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=Bn(a);var u=this.min,f=this.max,g=a.min,b=a.max,E=b.x>=u.x&&g.x<=f.x,P=b.y>=u.y&&g.y<=f.y;return E&&P},overlaps:function(a){a=Bn(a);var u=this.min,f=this.max,g=a.min,b=a.max,E=b.x>u.x&&g.x<f.x,P=b.y>u.y&&g.y<f.y;return E&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,f=this.max,g=Math.abs(u.x-f.x)*a,b=Math.abs(u.y-f.y)*a;return Bn(ye(u.x-g,u.y-b),ye(f.x+g,f.y+b))},equals:function(a){return a?(a=Bn(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Bn(a,u){return!a||a instanceof bt?a:new bt(a,u)}function zn(a,u){if(a)for(var f=u?[a,u]:a,g=0,b=f.length;g<b;g++)this.extend(f[g])}zn.prototype={extend:function(a){var u=this._southWest,f=this._northEast,g,b;if(a instanceof tt)g=a,b=a;else if(a instanceof zn){if(g=a._southWest,b=a._northEast,!g||!b)return this}else return a?this.extend(Be(a)||Ft(a)):this;return!u&&!f?(this._southWest=new tt(g.lat,g.lng),this._northEast=new tt(b.lat,b.lng)):(u.lat=Math.min(g.lat,u.lat),u.lng=Math.min(g.lng,u.lng),f.lat=Math.max(b.lat,f.lat),f.lng=Math.max(b.lng,f.lng)),this},pad:function(a){var u=this._southWest,f=this._northEast,g=Math.abs(u.lat-f.lat)*a,b=Math.abs(u.lng-f.lng)*a;return new zn(new tt(u.lat-g,u.lng-b),new tt(f.lat+g,f.lng+b))},getCenter:function(){return new tt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new tt(this.getNorth(),this.getWest())},getSouthEast:function(){return new tt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof tt||"lat"in a?a=Be(a):a=Ft(a);var u=this._southWest,f=this._northEast,g,b;return a instanceof zn?(g=a.getSouthWest(),b=a.getNorthEast()):g=b=a,g.lat>=u.lat&&b.lat<=f.lat&&g.lng>=u.lng&&b.lng<=f.lng},intersects:function(a){a=Ft(a);var u=this._southWest,f=this._northEast,g=a.getSouthWest(),b=a.getNorthEast(),E=b.lat>=u.lat&&g.lat<=f.lat,P=b.lng>=u.lng&&g.lng<=f.lng;return E&&P},overlaps:function(a){a=Ft(a);var u=this._southWest,f=this._northEast,g=a.getSouthWest(),b=a.getNorthEast(),E=b.lat>u.lat&&g.lat<f.lat,P=b.lng>u.lng&&g.lng<f.lng;return E&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=Ft(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ft(a,u){return a instanceof zn?a:new zn(a,u)}function tt(a,u,f){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,f!==void 0&&(this.alt=+f)}tt.prototype={equals:function(a,u){if(!a)return!1;a=Be(a);var f=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return f<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+h(this.lat,a)+", "+h(this.lng,a)+")"},distanceTo:function(a){return mo.distance(this,Be(a))},wrap:function(){return mo.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,f=u/Math.cos(Math.PI/180*this.lat);return Ft([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new tt(this.lat,this.lng,this.alt)}};function Be(a,u,f){return a instanceof tt?a:T(a)&&typeof a[0]!="object"?a.length===3?new tt(a[0],a[1],a[2]):a.length===2?new tt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new tt(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new tt(a,u,f)}var Br={latLngToPoint:function(a,u){var f=this.projection.project(a),g=this.scale(u);return this.transformation._transform(f,g)},pointToLatLng:function(a,u){var f=this.scale(u),g=this.transformation.untransform(a,f);return this.projection.unproject(g)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(a),g=this.transformation.transform(u.min,f),b=this.transformation.transform(u.max,f);return new bt(g,b)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?c(a.lng,this.wrapLng,!0):a.lng,f=this.wrapLat?c(a.lat,this.wrapLat,!0):a.lat,g=a.alt;return new tt(f,u,g)},wrapLatLngBounds:function(a){var u=a.getCenter(),f=this.wrapLatLng(u),g=u.lat-f.lat,b=u.lng-f.lng;if(g===0&&b===0)return a;var E=a.getSouthWest(),P=a.getNorthEast(),O=new tt(E.lat-g,E.lng-b),j=new tt(P.lat-g,P.lng-b);return new zn(O,j)}},mo=t({},Br,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var f=Math.PI/180,g=a.lat*f,b=u.lat*f,E=Math.sin((u.lat-a.lat)*f/2),P=Math.sin((u.lng-a.lng)*f/2),O=E*E+Math.cos(g)*Math.cos(b)*P*P,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),SD=6378137,bv={R:SD,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,a.lat),-f),b=Math.sin(g*u);return new Ie(this.R*a.lng*u,this.R*Math.log((1+b)/(1-b))/2)},unproject:function(a){var u=180/Math.PI;return new tt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=SD*Math.PI;return new bt([-a,-a],[a,a])}()};function wv(a,u,f,g){if(T(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=f,this._d=g}wv.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new Ie((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function Cc(a,u,f,g){return new wv(a,u,f,g)}var Cv=t({},mo,{code:"EPSG:3857",projection:bv,transformation:function(){var a=.5/(Math.PI*bv.R);return Cc(a,.5,-a,.5)}()}),UL=t({},Cv,{code:"EPSG:900913"});function DD(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function xD(a,u){var f="",g,b,E,P,O,j;for(g=0,E=a.length;g<E;g++){for(O=a[g],b=0,P=O.length;b<P;b++)j=O[b],f+=(b?"L":"M")+j.x+" "+j.y;f+=u?ce.svg?"z":"x":""}return f||"M0 0"}var Ev=document.documentElement.style,Ef="ActiveXObject"in window,HL=Ef&&!document.addEventListener,ID="msLaunchUri"in navigator&&!("documentMode"in document),Sv=er("webkit"),MD=er("android"),TD=er("android 2")||er("android 3"),$L=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),WL=MD&&er("Google")&&$L<537&&!("AudioNode"in window),Dv=!!window.opera,PD=!ID&&er("chrome"),AD=er("gecko")&&!Sv&&!Dv&&!Ef,GL=!PD&&er("safari"),RD=er("phantom"),OD="OTransition"in Ev,qL=navigator.platform.indexOf("Win")===0,kD=Ef&&"transition"in Ev,xv="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!TD,ND="MozPerspective"in Ev,ZL=!window.L_DISABLE_3D&&(kD||xv||ND)&&!OD&&!RD,Ec=typeof orientation<"u"||er("mobile"),YL=Ec&&Sv,QL=Ec&&xv,LD=!window.PointerEvent&&window.MSPointerEvent,FD=!!(window.PointerEvent||LD),VD="ontouchstart"in window||!!window.TouchEvent,KL=!window.L_NO_TOUCH&&(VD||FD),JL=Ec&&Dv,XL=Ec&&AD,e2=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,t2=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",d,u),window.removeEventListener("testPassiveEventSupport",d,u)}catch{}return a}(),n2=function(){return!!document.createElement("canvas").getContext}(),Iv=!!(document.createElementNS&&DD("svg").createSVGRect),i2=!!Iv&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),r2=!Iv&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),o2=navigator.platform.indexOf("Mac")===0,s2=navigator.platform.indexOf("Linux")===0;function er(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ce={ie:Ef,ielt9:HL,edge:ID,webkit:Sv,android:MD,android23:TD,androidStock:WL,opera:Dv,chrome:PD,gecko:AD,safari:GL,phantom:RD,opera12:OD,win:qL,ie3d:kD,webkit3d:xv,gecko3d:ND,any3d:ZL,mobile:Ec,mobileWebkit:YL,mobileWebkit3d:QL,msPointer:LD,pointer:FD,touch:KL,touchNative:VD,mobileOpera:JL,mobileGecko:XL,retina:e2,passiveEvents:t2,canvas:n2,svg:Iv,vml:r2,inlineSvg:i2,mac:o2,linux:s2},jD=ce.msPointer?"MSPointerDown":"pointerdown",BD=ce.msPointer?"MSPointerMove":"pointermove",zD=ce.msPointer?"MSPointerUp":"pointerup",UD=ce.msPointer?"MSPointerCancel":"pointercancel",Mv={touchstart:jD,touchmove:BD,touchend:zD,touchcancel:UD},HD={touchstart:f2,touchmove:Sf,touchend:Sf,touchcancel:Sf},Ea={},$D=!1;function a2(a,u,f){return u==="touchstart"&&d2(),HD[u]?(f=HD[u].bind(this,f),a.addEventListener(Mv[u],f,!1),f):(console.warn("wrong event specified:",u),d)}function l2(a,u,f){if(!Mv[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Mv[u],f,!1)}function c2(a){Ea[a.pointerId]=a}function u2(a){Ea[a.pointerId]&&(Ea[a.pointerId]=a)}function WD(a){delete Ea[a.pointerId]}function d2(){$D||(document.addEventListener(jD,c2,!0),document.addEventListener(BD,u2,!0),document.addEventListener(zD,WD,!0),document.addEventListener(UD,WD,!0),$D=!0)}function Sf(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in Ea)u.touches.push(Ea[f]);u.changedTouches=[u],a(u)}}function f2(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&cn(u),Sf(a,u)}function h2(a){var u={},f,g;for(g in a)f=a[g],u[g]=f&&f.bind?f.bind(a):f;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var p2=200;function g2(a,u){a.addEventListener("dblclick",u);var f=0,g;function b(E){if(E.detail!==1){g=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var P=QD(E);if(!(P.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!P.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-f<=p2?(g++,g===2&&u(h2(E))):g=1,f=O}}}return a.addEventListener("click",b),{dblclick:u,simDblclick:b}}function m2(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var Tv=If(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sc=If(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),GD=Sc==="webkitTransition"||Sc==="OTransition"?Sc+"End":"transitionend";function qD(a){return typeof a=="string"?document.getElementById(a):a}function Dc(a,u){var f=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(a,null);f=g?g[u]:null}return f==="auto"?null:f}function Ge(a,u,f){var g=document.createElement(a);return g.className=u||"",f&&f.appendChild(g),g}function wt(a){var u=a.parentNode;u&&u.removeChild(a)}function Df(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Sa(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function Da(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function Pv(a,u){if(a.classList!==void 0)return a.classList.contains(u);var f=xf(a);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function Oe(a,u){if(a.classList!==void 0)for(var f=y(u),g=0,b=f.length;g<b;g++)a.classList.add(f[g]);else if(!Pv(a,u)){var E=xf(a);Av(a,(E?E+" ":"")+u)}}function Mt(a,u){a.classList!==void 0?a.classList.remove(u):Av(a,p((" "+xf(a)+" ").replace(" "+u+" "," ")))}function Av(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function xf(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function di(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&_2(a,u)}function _2(a,u){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=a.filters.item(g)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):a.style.filter+=" progid:"+g+"(opacity="+u+")"}function If(a){for(var u=document.documentElement.style,f=0;f<a.length;f++)if(a[f]in u)return a[f];return!1}function es(a,u,f){var g=u||new Ie(0,0);a.style[Tv]=(ce.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}function Vt(a,u){a._leaflet_pos=u,ce.any3d?es(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function ts(a){return a._leaflet_pos||new Ie(0,0)}var xc,Ic,Rv;if("onselectstart"in document)xc=function(){Me(window,"selectstart",cn)},Ic=function(){ot(window,"selectstart",cn)};else{var Mc=If(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xc=function(){if(Mc){var a=document.documentElement.style;Rv=a[Mc],a[Mc]="none"}},Ic=function(){Mc&&(document.documentElement.style[Mc]=Rv,Rv=void 0)}}function Ov(){Me(window,"dragstart",cn)}function kv(){ot(window,"dragstart",cn)}var Mf,Nv;function Lv(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Tf(),Mf=a,Nv=a.style.outlineStyle,a.style.outlineStyle="none",Me(window,"keydown",Tf))}function Tf(){Mf&&(Mf.style.outlineStyle=Nv,Mf=void 0,Nv=void 0,ot(window,"keydown",Tf))}function ZD(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Fv(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var v2={__proto__:null,TRANSFORM:Tv,TRANSITION:Sc,TRANSITION_END:GD,get:qD,getStyle:Dc,create:Ge,remove:wt,empty:Df,toFront:Sa,toBack:Da,hasClass:Pv,addClass:Oe,removeClass:Mt,setClass:Av,getClass:xf,setOpacity:di,testProp:If,setTransform:es,setPosition:Vt,getPosition:ts,get disableTextSelection(){return xc},get enableTextSelection(){return Ic},disableImageDrag:Ov,enableImageDrag:kv,preventOutline:Lv,restoreOutline:Tf,getSizedParentNode:ZD,getScale:Fv};function Me(a,u,f,g){if(u&&typeof u=="object")for(var b in u)jv(a,b,u[b],f);else{u=y(u);for(var E=0,P=u.length;E<P;E++)jv(a,u[E],f,g)}return this}var tr="_leaflet_events";function ot(a,u,f,g){if(arguments.length===1)YD(a),delete a[tr];else if(u&&typeof u=="object")for(var b in u)Bv(a,b,u[b],f);else if(u=y(u),arguments.length===2)YD(a,function(O){return H(u,O)!==-1});else for(var E=0,P=u.length;E<P;E++)Bv(a,u[E],f,g);return this}function YD(a,u){for(var f in a[tr]){var g=f.split(/\d/)[0];(!u||u(g))&&Bv(a,g,null,null,f)}}var Vv={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function jv(a,u,f,g){var b=u+s(f)+(g?"_"+s(g):"");if(a[tr]&&a[tr][b])return this;var E=function(O){return f.call(g||a,O||window.event)},P=E;!ce.touchNative&&ce.pointer&&u.indexOf("touch")===0?E=a2(a,u,E):ce.touch&&u==="dblclick"?E=g2(a,E):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Vv[u]||u,E,ce.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(E=function(O){O=O||window.event,Uv(a,O)&&P(O)},a.addEventListener(Vv[u],E,!1)):a.addEventListener(u,P,!1):a.attachEvent("on"+u,E),a[tr]=a[tr]||{},a[tr][b]=E}function Bv(a,u,f,g,b){b=b||u+s(f)+(g?"_"+s(g):"");var E=a[tr]&&a[tr][b];if(!E)return this;!ce.touchNative&&ce.pointer&&u.indexOf("touch")===0?l2(a,u,E):ce.touch&&u==="dblclick"?m2(a,E):"removeEventListener"in a?a.removeEventListener(Vv[u]||u,E,!1):a.detachEvent("on"+u,E),a[tr][b]=null}function ns(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function zv(a){return jv(a,"wheel",ns),this}function Tc(a){return Me(a,"mousedown touchstart dblclick contextmenu",ns),a._leaflet_disable_click=!0,this}function cn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function is(a){return cn(a),ns(a),this}function QD(a){if(a.composedPath)return a.composedPath();for(var u=[],f=a.target;f;)u.push(f),f=f.parentNode;return u}function KD(a,u){if(!u)return new Ie(a.clientX,a.clientY);var f=Fv(u),g=f.boundingClientRect;return new Ie((a.clientX-g.left)/f.x-u.clientLeft,(a.clientY-g.top)/f.y-u.clientTop)}var y2=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function JD(a){return ce.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/y2:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Uv(a,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==a;)f=f.parentNode}catch{return!1}return f!==a}var b2={__proto__:null,on:Me,off:ot,stopPropagation:ns,disableScrollPropagation:zv,disableClickPropagation:Tc,preventDefault:cn,stop:is,getPropagationPath:QD,getMousePosition:KD,getWheelDelta:JD,isExternalTarget:Uv,addListener:Me,removeListener:ot},XD=wc.extend({run:function(a,u,f,g){this.stop(),this._el=a,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=ts(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=It(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var f=this._startPos.add(this._offset.multiplyBy(a));u&&f._round(),Vt(this._el,f),this.fire("step")},_complete:function(){yn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),ze=wc.extend({options:{crs:Cv,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=_(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Be(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sc&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Me(this._proxy,GD,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(Be(a),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=t({animate:f.animate},f.zoom),f.pan=t({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,f.zoom):this._tryAnimatedPan(a,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,f){var g=this.getZoomScale(u),b=this.getSize().divideBy(2),E=a instanceof Ie?a:this.latLngToContainerPoint(a),P=E.subtract(b).multiplyBy(1-1/g),O=this.containerPointToLatLng(b.add(P));return this.setView(O,u,{zoom:f})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():Ft(a);var f=ye(u.paddingTopLeft||u.padding||[0,0]),g=ye(u.paddingBottomRight||u.padding||[0,0]),b=this.getBoundsZoom(a,!1,f.add(g));if(b=typeof u.maxZoom=="number"?Math.min(u.maxZoom,b):b,b===1/0)return{center:a.getCenter(),zoom:b};var E=g.subtract(f).divideBy(2),P=this.project(a.getSouthWest(),b),O=this.project(a.getNorthEast(),b),j=this.unproject(P.add(O).divideBy(2).add(E),b);return{center:j,zoom:b}},fitBounds:function(a,u){if(a=Ft(a),!a.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(a,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=ye(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new XD,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Oe(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,f){if(f=f||{},f.animate===!1||!ce.any3d)return this.setView(a,u,f);this._stop();var g=this.project(this.getCenter()),b=this.project(a),E=this.getSize(),P=this._zoom;a=Be(a),u=u===void 0?P:u;var O=Math.max(E.x,E.y),j=O*this.getZoomScale(P,u),G=b.distanceTo(g)||1,te=1.42,ge=te*te;function Fe(jt){var zf=jt?-1:1,lF=jt?j:O,cF=j*j-O*O+zf*ge*ge*G*G,uF=2*lF*ge*G,Xv=cF/uF,Ox=Math.sqrt(Xv*Xv+1)-Xv,dF=Ox<1e-9?-18:Math.log(Ox);return dF}function xn(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function en(jt){return(Math.exp(jt)+Math.exp(-jt))/2}function hi(jt){return xn(jt)/en(jt)}var Un=Fe(0);function Aa(jt){return O*(en(Un)/en(Un+te*jt))}function rF(jt){return O*(en(Un)*hi(Un+te*jt)-xn(Un))/ge}function oF(jt){return 1-Math.pow(1-jt,1.5)}var sF=Date.now(),Ax=(Fe(1)-Un)/te,aF=f.duration?1e3*f.duration:1e3*Ax*.8;function Rx(){var jt=(Date.now()-sF)/aF,zf=oF(jt)*Ax;jt<=1?(this._flyToFrame=It(Rx,this),this._move(this.unproject(g.add(b.subtract(g).multiplyBy(rF(zf)/G)),P),this.getScaleZoom(O/Aa(zf),P),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Rx.call(this),this},flyToBounds:function(a,u){var f=this._getBoundsCenterZoom(a,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(a){return a=Ft(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,Ft(a));return f.equals(g)||this.panTo(g,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var f=ye(u.paddingTopLeft||u.padding||[0,0]),g=ye(u.paddingBottomRight||u.padding||[0,0]),b=this.project(this.getCenter()),E=this.project(a),P=this.getPixelBounds(),O=Bn([P.min.add(f),P.max.subtract(g)]),j=O.getSize();if(!O.contains(E)){this._enforcingBounds=!0;var G=E.subtract(O.getCenter()),te=O.extend(E).getSize().subtract(j);b.x+=G.x<0?-te.x:te.x,b.y+=G.y<0?-te.y:te.y,this.panTo(this.unproject(b),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=t({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=u.divideBy(2).round(),b=f.divideBy(2).round(),E=g.subtract(b);return!E.x&&!E.y?this:(a.animate&&a.pan?this.panBy(E):(a.pan&&this._rawPanBy(E),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=t({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=r(this._handleGeolocationResponse,this),f=r(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,a):navigator.geolocation.getCurrentPosition(u,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,f=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,f=a.coords.longitude,g=new tt(u,f),b=g.toBounds(a.coords.accuracy*2),E=this._locateOptions;if(E.setView){var P=this.getBoundsZoom(b);this.setView(g,E.maxZoom?Math.min(P,E.maxZoom):P)}var O={latlng:g,bounds:b,timestamp:a.timestamp};for(var j in a.coords)typeof a.coords[j]=="number"&&(O[j]=a.coords[j]);this.fire("locationfound",O)}},addHandler:function(a,u){if(!u)return this;var f=this[a]=new u(this);return this._handlers.push(f),this.options[a]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(yn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)wt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var f="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),g=Ge("div",f,u||this._mapPane);return a&&(this._panes[a]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),f=this.unproject(a.getTopRight());return new zn(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,f){a=Ft(a),f=ye(f||[0,0]);var g=this.getZoom()||0,b=this.getMinZoom(),E=this.getMaxZoom(),P=a.getNorthWest(),O=a.getSouthEast(),j=this.getSize().subtract(f),G=Bn(this.project(O,g),this.project(P,g)).getSize(),te=ce.any3d?this.options.zoomSnap:1,ge=j.x/G.x,Fe=j.y/G.y,xn=u?Math.max(ge,Fe):Math.min(ge,Fe);return g=this.getScaleZoom(xn,g),te&&(g=Math.round(g/(te/100))*(te/100),g=u?Math.ceil(g/te)*te:Math.floor(g/te)*te),Math.max(b,Math.min(E,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var f=this._getTopLeftPoint(a,u);return new bt(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(a)/f.scale(u)},getScaleZoom:function(a,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var g=f.zoom(a*f.scale(u));return isNaN(g)?1/0:g},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Be(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ye(a),u)},layerPointToLatLng:function(a){var u=ye(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(Be(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Be(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Ft(a))},distance:function(a,u){return this.options.crs.distance(Be(a),Be(u))},containerPointToLayerPoint:function(a){return ye(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ye(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(ye(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Be(a)))},mouseEventToContainerPoint:function(a){return KD(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=qD(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Me(u,"scroll",this._onScroll,this),this._containerId=s(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,Oe(a,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Dc(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Vt(this._mapPane,new Ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Oe(a.markerPane,"leaflet-zoom-hide"),Oe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,f){Vt(this._mapPane,new Ie(0,0));var g=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var b=this._zoom!==u;this._moveStart(b,f)._move(a,u)._moveEnd(b),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,f,g){u===void 0&&(u=this._zoom);var b=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),g?f&&f.pinch&&this.fire("zoom",f):((b||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return yn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Vt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[s(this._container)]=this;var u=a?ot:Me;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){yn(this._resizeRequest),this._resizeRequest=It(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var f=[],g,b=u==="mouseout"||u==="mouseover",E=a.target||a.srcElement,P=!1;E;){if(g=this._targets[s(E)],g&&(u==="click"||u==="preclick")&&this._draggableMoved(g)){P=!0;break}if(g&&g.listens(u,!0)&&(b&&!Uv(E,a)||(f.push(g),b))||E===this._container)break;E=E.parentNode}return!f.length&&!P&&!b&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var f=a.type;f==="mousedown"&&Lv(u),this._fireDOMEvent(a,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,f){if(a.type==="click"){var g=t({},a);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var b=this._findEventTargets(a,u);if(f){for(var E=[],P=0;P<f.length;P++)f[P].listens(u,!0)&&E.push(f[P]);b=E.concat(b)}if(b.length){u==="contextmenu"&&cn(a);var O=b[0],j={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var G=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=G?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(a),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=G?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(P=0;P<b.length;P++)if(b[P].fire(u,j,!0),j.originalEvent._stopped||b[P].options.bubblingMouseEvents===!1&&H(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return ts(this._mapPane)||new Ie(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var f=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var f=this.getSize()._divideBy(2);return this.project(a,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,f){var g=this._getNewPixelOrigin(f,u);return this.project(a,u)._subtract(g)},_latLngBoundsToNewLayerBounds:function(a,u,f){var g=this._getNewPixelOrigin(f,u);return Bn([this.project(a.getSouthWest(),u)._subtract(g),this.project(a.getNorthWest(),u)._subtract(g),this.project(a.getSouthEast(),u)._subtract(g),this.project(a.getNorthEast(),u)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,f){if(!f)return a;var g=this.project(a,u),b=this.getSize().divideBy(2),E=new bt(g.subtract(b),g.add(b)),P=this._getBoundsOffset(E,f,u);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?a:this.unproject(g.add(P),u)},_limitOffset:function(a,u){if(!u)return a;var f=this.getPixelBounds(),g=new bt(f.min.add(a),f.max.add(a));return a.add(this._getBoundsOffset(g,u))},_getBoundsOffset:function(a,u,f){var g=Bn(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),b=g.min.subtract(a.min),E=g.max.subtract(a.max),P=this._rebound(b.x,-E.x),O=this._rebound(b.y,-E.y);return new Ie(P,O)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),f=this.getMaxZoom(),g=ce.any3d?this.options.zoomSnap:1;return g&&(a=Math.round(a/g)*g),Math.max(u,Math.min(f,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var f=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var a=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var f=Tv,g=this._proxy.style[f];es(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();es(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(u),b=this._getCenterOffset(a)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(b)?!1:(It(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,Oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function w2(a,u){return new ze(a,u)}var Ii=jr.extend({options:{position:"topright"},initialize:function(a){_(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),f=this.getPosition(),g=a._controlCorners[f];return Oe(u,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Pc=function(a){return new Ii(a)};ze.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",f=this._controlContainer=Ge("div",u+"control-container",this._container);function g(b,E){var P=u+b+" "+u+E;a[b+E]=Ge("div",P,f)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)wt(this._controlCorners[a]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ex=Ii.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,f,g){return f<g?-1:g<f?1:0}},initialize:function(a,u,f){_(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in a)this._addLayer(a[g],g);for(g in u)this._addLayer(u[g],g,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Ii.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(s(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=Ge("div",a),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Tc(u),zv(u);var g=this._section=Ge("section",a+"-list");f&&(this._map.on("click",this.collapse,this),Me(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var b=this._layersLink=Ge("a",a+"-toggle",u);b.href="#",b.title="Layers",b.setAttribute("role","button"),Me(b,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){cn(E),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Ge("div",a+"-base",g),this._separator=Ge("div",a+"-separator",g),this._overlaysList=Ge("div",a+"-overlays",g),u.appendChild(g)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&s(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,f){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(r(function(g,b){return this.options.sortFunction(g.layer,b.layer,g.name,b.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Df(this._baseLayersList),Df(this._overlaysList),this._layerControlInputs=[];var a,u,f,g,b=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),u=u||g.overlay,a=a||!g.overlay,b+=g.overlay?0:1;return this.options.hideSingleBase&&(a=a&&b>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(s(a.target)),f=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(a,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(a){var u=document.createElement("label"),f=this._map.hasLayer(a.layer),g;a.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+s(this),f),this._layerControlInputs.push(g),g.layerId=s(a.layer),Me(g,"click",this._onInputClick,this);var b=document.createElement("span");b.innerHTML=" "+a.name;var E=document.createElement("span");u.appendChild(E),E.appendChild(g),E.appendChild(b);var P=a.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,f,g=[],b=[];this._handlingClick=!0;for(var E=a.length-1;E>=0;E--)u=a[E],f=this._getLayer(u.layerId).layer,u.checked?g.push(f):u.checked||b.push(f);for(E=0;E<b.length;E++)this._map.hasLayer(b[E])&&this._map.removeLayer(b[E]);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])||this._map.addLayer(g[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,f,g=this._map.getZoom(),b=a.length-1;b>=0;b--)u=a[b],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Me(a,"click",cn),this.expand();var u=this;setTimeout(function(){ot(a,"click",cn),u._preventClick=!1})}}),C2=function(a,u,f){return new ex(a,u,f)},Hv=Ii.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",f=Ge("div",u+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,f,g,b){var E=Ge("a",f,g);return E.innerHTML=a,E.href="#",E.title=u,E.setAttribute("role","button"),E.setAttribute("aria-label",u),Tc(E),Me(E,"click",is),Me(E,"click",b,this),Me(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";Mt(this._zoomInButton,u),Mt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Oe(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Oe(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});ze.mergeOptions({zoomControl:!0}),ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Hv,this.addControl(this.zoomControl))});var E2=function(a){return new Hv(a)},tx=Ii.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",f=Ge("div",u),g=this.options;return this._addScales(g,u+"-line",f),a.on(g.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),f},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,f){a.metric&&(this._mScale=Ge("div",u,f)),a.imperial&&(this._iScale=Ge("div",u,f))},_update:function(){var a=this._map,u=a.getSize().y/2,f=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/a)},_updateImperial:function(a){var u=a*3.2808399,f,g,b;u>5280?(f=u/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(b=this._getRoundNum(u),this._updateScale(this._iScale,b+" ft",b/u))},_updateScale:function(a,u,f){a.style.width=Math.round(this.options.maxWidth*f)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),f=a/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),S2=function(a){return new tx(a)},D2='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$v=Ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?D2+" ":"")+"Leaflet</a>"},initialize:function(a){_(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),Tc(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),a.length&&f.push(a.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});ze.mergeOptions({attributionControl:!0}),ze.addInitHook(function(){this.options.attributionControl&&new $v().addTo(this)});var x2=function(a){return new $v(a)};Ii.Layers=ex,Ii.Zoom=Hv,Ii.Scale=tx,Ii.Attribution=$v,Pc.layers=C2,Pc.zoom=E2,Pc.scale=S2,Pc.attribution=x2;var nr=jr.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nr.addTo=function(a,u){return a.addHandler(u,this),this};var I2={Events:Xn},nx=ce.touch?"touchstart mousedown":"mousedown",_o=wc.extend({options:{clickTolerance:3},initialize:function(a,u,f,g){_(this,g),this._element=a,this._dragStartTarget=u||a,this._preventOutline=f},enable:function(){this._enabled||(Me(this._dragStartTarget,nx,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_o._dragging===this&&this.finishDrag(!0),ot(this._dragStartTarget,nx,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Pv(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){_o._dragging===this&&this.finishDrag();return}if(!(_o._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(_o._dragging=this,this._preventOutline&&Lv(this._element),Ov(),xc(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,f=ZD(this._element);this._startPoint=new Ie(u.clientX,u.clientY),this._startPos=ts(this._element),this._parentScale=Fv(f);var g=a.type==="mousedown";Me(document,g?"mousemove":"touchmove",this._onMove,this),Me(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,f=new Ie(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,cn(a),this._moved||(this.fire("dragstart"),this._moved=!0,Oe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Vt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Mt(document.body,"leaflet-dragging"),this._lastTarget&&(Mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ot(document,"mousemove touchmove",this._onMove,this),ot(document,"mouseup touchend touchcancel",this._onUp,this),kv(),Ic();var u=this._moved&&this._moving;this._moving=!1,_o._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function ix(a,u,f){var g,b=[1,4,2,8],E,P,O,j,G,te,ge,Fe;for(E=0,te=a.length;E<te;E++)a[E]._code=rs(a[E],u);for(O=0;O<4;O++){for(ge=b[O],g=[],E=0,te=a.length,P=te-1;E<te;P=E++)j=a[E],G=a[P],j._code&ge?G._code&ge||(Fe=Pf(G,j,ge,u,f),Fe._code=rs(Fe,u),g.push(Fe)):(G._code&ge&&(Fe=Pf(G,j,ge,u,f),Fe._code=rs(Fe,u),g.push(Fe)),g.push(j));a=g}return a}function rx(a,u){var f,g,b,E,P,O,j,G,te;if(!a||a.length===0)throw new Error("latlngs not passed");fi(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ge=Be([0,0]),Fe=Ft(a),xn=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());xn<1700&&(ge=Wv(a));var en=a.length,hi=[];for(f=0;f<en;f++){var Un=Be(a[f]);hi.push(u.project(Be([Un.lat-ge.lat,Un.lng-ge.lng])))}for(O=j=G=0,f=0,g=en-1;f<en;g=f++)b=hi[f],E=hi[g],P=b.y*E.x-E.y*b.x,j+=(b.x+E.x)*P,G+=(b.y+E.y)*P,O+=P*3;O===0?te=hi[0]:te=[j/O,G/O];var Aa=u.unproject(ye(te));return Be([Aa.lat+ge.lat,Aa.lng+ge.lng])}function Wv(a){for(var u=0,f=0,g=0,b=0;b<a.length;b++){var E=Be(a[b]);u+=E.lat,f+=E.lng,g++}return Be([u/g,f/g])}var M2={__proto__:null,clipPolygon:ix,polygonCenter:rx,centroid:Wv};function ox(a,u){if(!u||!a.length)return a.slice();var f=u*u;return a=A2(a,f),a=P2(a,f),a}function sx(a,u,f){return Math.sqrt(Ac(a,u,f,!0))}function T2(a,u,f){return Ac(a,u,f)}function P2(a,u){var f=a.length,g=typeof Uint8Array<"u"?Uint8Array:Array,b=new g(f);b[0]=b[f-1]=1,Gv(a,b,u,0,f-1);var E,P=[];for(E=0;E<f;E++)b[E]&&P.push(a[E]);return P}function Gv(a,u,f,g,b){var E=0,P,O,j;for(O=g+1;O<=b-1;O++)j=Ac(a[O],a[g],a[b],!0),j>E&&(P=O,E=j);E>f&&(u[P]=1,Gv(a,u,f,g,P),Gv(a,u,f,P,b))}function A2(a,u){for(var f=[a[0]],g=1,b=0,E=a.length;g<E;g++)R2(a[g],a[b])>u&&(f.push(a[g]),b=g);return b<E-1&&f.push(a[E-1]),f}var ax;function lx(a,u,f,g,b){var E=g?ax:rs(a,f),P=rs(u,f),O,j,G;for(ax=P;;){if(!(E|P))return[a,u];if(E&P)return!1;O=E||P,j=Pf(a,u,O,f,b),G=rs(j,f),O===E?(a=j,E=G):(u=j,P=G)}}function Pf(a,u,f,g,b){var E=u.x-a.x,P=u.y-a.y,O=g.min,j=g.max,G,te;return f&8?(G=a.x+E*(j.y-a.y)/P,te=j.y):f&4?(G=a.x+E*(O.y-a.y)/P,te=O.y):f&2?(G=j.x,te=a.y+P*(j.x-a.x)/E):f&1&&(G=O.x,te=a.y+P*(O.x-a.x)/E),new Ie(G,te,b)}function rs(a,u){var f=0;return a.x<u.min.x?f|=1:a.x>u.max.x&&(f|=2),a.y<u.min.y?f|=4:a.y>u.max.y&&(f|=8),f}function R2(a,u){var f=u.x-a.x,g=u.y-a.y;return f*f+g*g}function Ac(a,u,f,g){var b=u.x,E=u.y,P=f.x-b,O=f.y-E,j=P*P+O*O,G;return j>0&&(G=((a.x-b)*P+(a.y-E)*O)/j,G>1?(b=f.x,E=f.y):G>0&&(b+=P*G,E+=O*G)),P=a.x-b,O=a.y-E,g?P*P+O*O:new Ie(b,E)}function fi(a){return!T(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function cx(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fi(a)}function ux(a,u){var f,g,b,E,P,O,j,G;if(!a||a.length===0)throw new Error("latlngs not passed");fi(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var te=Be([0,0]),ge=Ft(a),Fe=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());Fe<1700&&(te=Wv(a));var xn=a.length,en=[];for(f=0;f<xn;f++){var hi=Be(a[f]);en.push(u.project(Be([hi.lat-te.lat,hi.lng-te.lng])))}for(f=0,g=0;f<xn-1;f++)g+=en[f].distanceTo(en[f+1])/2;if(g===0)G=en[0];else for(f=0,E=0;f<xn-1;f++)if(P=en[f],O=en[f+1],b=P.distanceTo(O),E+=b,E>g){j=(E-g)/b,G=[O.x-j*(O.x-P.x),O.y-j*(O.y-P.y)];break}var Un=u.unproject(ye(G));return Be([Un.lat+te.lat,Un.lng+te.lng])}var O2={__proto__:null,simplify:ox,pointToSegmentDistance:sx,closestPointOnSegment:T2,clipSegment:lx,_getEdgeIntersection:Pf,_getBitCode:rs,_sqClosestPointOnSegment:Ac,isFlat:fi,_flat:cx,polylineCenter:ux},qv={project:function(a){return new Ie(a.lng,a.lat)},unproject:function(a){return new tt(a.y,a.x)},bounds:new bt([-180,-90],[180,90])},Zv={R:6378137,R_MINOR:6356752314245179e-9,bounds:new bt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,f=this.R,g=a.lat*u,b=this.R_MINOR/f,E=Math.sqrt(1-b*b),P=E*Math.sin(g),O=Math.tan(Math.PI/4-g/2)/Math.pow((1-P)/(1+P),E/2);return g=-f*Math.log(Math.max(O,1e-10)),new Ie(a.lng*u*f,g)},unproject:function(a){for(var u=180/Math.PI,f=this.R,g=this.R_MINOR/f,b=Math.sqrt(1-g*g),E=Math.exp(-a.y/f),P=Math.PI/2-2*Math.atan(E),O=0,j=.1,G;O<15&&Math.abs(j)>1e-7;O++)G=b*Math.sin(P),G=Math.pow((1-G)/(1+G),b/2),j=Math.PI/2-2*Math.atan(E*G)-P,P+=j;return new tt(P*u,a.x*u/f)}},k2={__proto__:null,LonLat:qv,Mercator:Zv,SphericalMercator:bv},N2=t({},mo,{code:"EPSG:3395",projection:Zv,transformation:function(){var a=.5/(Math.PI*Zv.R);return Cc(a,.5,-a,.5)}()}),dx=t({},mo,{code:"EPSG:4326",projection:qv,transformation:Cc(1/180,1,-1/180,.5)}),L2=t({},Br,{projection:qv,transformation:Cc(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var f=u.lng-a.lng,g=u.lat-a.lat;return Math.sqrt(f*f+g*g)},infinite:!0});Br.Earth=mo,Br.EPSG3395=N2,Br.EPSG3857=Cv,Br.EPSG900913=UL,Br.EPSG4326=dx,Br.Simple=L2;var Mi=wc.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[s(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[s(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});ze.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=s(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=s(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return s(a)in this._layers},eachLayer:function(a,u){for(var f in this._layers)a.call(u,this._layers[f]);return this},_addLayers:function(a){a=a?T(a)?a:[a]:[];for(var u=0,f=a.length;u<f;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[s(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=s(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var b=this._zoomBoundLayers[g].options;a=b.minZoom===void 0?a:Math.min(a,b.minZoom),u=b.maxZoom===void 0?u:Math.max(u,b.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xa=Mi.extend({initialize:function(a,u){_(this,u),this._layers={};var f,g;if(a)for(f=0,g=a.length;f<g;f++)this.addLayer(a[f])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[a]&&g[a].apply(g,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var f in this._layers)a.call(u,this._layers[f]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return s(a)}}),F2=function(a,u){return new xa(a,u)},zr=xa.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),xa.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),xa.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new zn;for(var u in this._layers){var f=this._layers[u];a.extend(f.getBounds?f.getBounds():f.getLatLng())}return a}}),V2=function(a,u){return new zr(a,u)},Ia=jr.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){_(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var f=this._getIconUrl(a);if(!f){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(g,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(a,u){var f=this.options,g=f[u+"Size"];typeof g=="number"&&(g=[g,g]);var b=ye(g),E=ye(u==="shadow"&&f.shadowAnchor||f.iconAnchor||b&&b.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(f.className||""),E&&(a.style.marginLeft=-E.x+"px",a.style.marginTop=-E.y+"px"),b&&(a.style.width=b.x+"px",a.style.height=b.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return ce.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function j2(a){return new Ia(a)}var Rc=Ia.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Rc.imagePath!="string"&&(Rc.imagePath=this._detectIconPath()),(this.options.imagePath||Rc.imagePath)+Ia.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(f,g,b){var E=g.exec(f);return E&&E[b]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Ge("div","leaflet-default-icon-path",document.body),u=Dc(a,"background-image")||Dc(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),fx=nr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new _o(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Oe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,f=u._map,g=this._marker.options.autoPanSpeed,b=this._marker.options.autoPanPadding,E=ts(u._icon),P=f.getPixelBounds(),O=f.getPixelOrigin(),j=Bn(P.min._subtract(O).add(b),P.max._subtract(O).subtract(b));if(!j.contains(E)){var G=ye((Math.max(j.max.x,E.x)-j.max.x)/(P.max.x-j.max.x)-(Math.min(j.min.x,E.x)-j.min.x)/(P.min.x-j.min.x),(Math.max(j.max.y,E.y)-j.max.y)/(P.max.y-j.max.y)-(Math.min(j.min.y,E.y)-j.min.y)/(P.min.y-j.min.y)).multiplyBy(g);f.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),Vt(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=It(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(yn(this._panRequest),this._panRequest=It(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,f=u._shadow,g=ts(u._icon),b=u._map.layerPointToLatLng(g);f&&Vt(f,g),u._latlng=b,a.latlng=b,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){yn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Af=Mi.extend({options:{icon:new Rc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){_(this,u),this._latlng=Be(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=Be(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=a.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(f.title=a.title),f.tagName==="IMG"&&(f.alt=a.alt||"")),Oe(f,u),a.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(f,"focus",this._panOnFocus,this);var b=a.icon.createShadow(this._shadow),E=!1;b!==this._shadow&&(this._removeShadow(),E=!0),b&&(Oe(b,u),b.alt=""),this._shadow=b,a.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),b&&E&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ot(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Vt(this._icon,a),this._shadow&&Vt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fx)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fx(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&di(this._icon,a),this._shadow&&di(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,f=u.iconSize?ye(u.iconSize):ye(0,0),g=u.iconAnchor?ye(u.iconAnchor):ye(0,0);a.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function B2(a,u){return new Af(a,u)}var vo=Mi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return _(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Rf=vo.extend({options:{fill:!0,radius:10},initialize:function(a,u){_(this,u),this._latlng=Be(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=Be(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return vo.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,f=this._clickTolerance(),g=[a+f,u+f];this._pxBounds=new bt(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function z2(a,u){return new Rf(a,u)}var Yv=Rf.extend({initialize:function(a,u,f){if(typeof u=="number"&&(u=t({},f,{radius:u})),_(this,u),this._latlng=Be(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new zn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:vo.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===mo.distance){var b=Math.PI/180,E=this._mRadius/mo.R/b,P=f.project([u+E,a]),O=f.project([u-E,a]),j=P.add(O).divideBy(2),G=f.unproject(j).lat,te=Math.acos((Math.cos(E*b)-Math.sin(u*b)*Math.sin(G*b))/(Math.cos(u*b)*Math.cos(G*b)))/b;(isNaN(te)||te===0)&&(te=E/Math.cos(Math.PI/180*u)),this._point=j.subtract(f.getPixelOrigin()),this._radius=isNaN(te)?0:j.x-f.project([G,a-te]).x,this._radiusY=j.y-P.y}else{var ge=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(ge).x}this._updateBounds()}});function U2(a,u,f){return new Yv(a,u,f)}var Ur=vo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){_(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,f=null,g=Ac,b,E,P=0,O=this._parts.length;P<O;P++)for(var j=this._parts[P],G=1,te=j.length;G<te;G++){b=j[G-1],E=j[G];var ge=g(a,b,E,!0);ge<u&&(u=ge,f=g(a,b,E))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ux(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=Be(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new zn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],f=fi(a),g=0,b=a.length;g<b;g++)f?(u[g]=Be(a[g]),this._bounds.extend(u[g])):u[g]=this._convertLatLngs(a[g]);return u},_project:function(){var a=new bt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new Ie(a,a);this._rawPxBounds&&(this._pxBounds=new bt([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,f){var g=a[0]instanceof tt,b=a.length,E,P;if(g){for(P=[],E=0;E<b;E++)P[E]=this._map.latLngToLayerPoint(a[E]),f.extend(P[E]);u.push(P)}else for(E=0;E<b;E++)this._projectLatlngs(a[E],u,f)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,g,b,E,P,O,j;for(f=0,b=0,E=this._rings.length;f<E;f++)for(j=this._rings[f],g=0,P=j.length;g<P-1;g++)O=lx(j[g],j[g+1],a,g,!0),O&&(u[b]=u[b]||[],u[b].push(O[0]),(O[1]!==j[g+1]||g===P-2)&&(u[b].push(O[1]),b++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,f=0,g=a.length;f<g;f++)a[f]=ox(a[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var f,g,b,E,P,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,E=this._parts.length;f<E;f++)for(O=this._parts[f],g=0,P=O.length,b=P-1;g<P;b=g++)if(!(!u&&g===0)&&sx(a,O[b],O[g])<=j)return!0;return!1}});function H2(a,u){return new Ur(a,u)}Ur._flat=cx;var Ma=Ur.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rx(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Ur.prototype._convertLatLngs.call(this,a),f=u.length;return f>=2&&u[0]instanceof tt&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(a){Ur.prototype._setLatLngs.call(this,a),fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,f=new Ie(u,u);if(a=new bt(a.min.subtract(f),a.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,b=this._rings.length,E;g<b;g++)E=ix(this._rings[g],a,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,f,g,b,E,P,O,j,G;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(E=0,j=this._parts.length;E<j;E++)for(f=this._parts[E],P=0,G=f.length,O=G-1;P<G;O=P++)g=f[P],b=f[O],g.y>a.y!=b.y>a.y&&a.x<(b.x-g.x)*(a.y-g.y)/(b.y-g.y)+g.x&&(u=!u);return u||Ur.prototype._containsPoint.call(this,a,!0)}});function $2(a,u){return new Ma(a,u)}var Hr=zr.extend({initialize:function(a,u){_(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=T(a)?a:a.features,f,g,b;if(u){for(f=0,g=u.length;f<g;f++)b=u[f],(b.geometries||b.geometry||b.features||b.coordinates)&&this.addData(b);return this}var E=this.options;if(E.filter&&!E.filter(a))return this;var P=Of(a,E);return P?(P.feature=Lf(a),P.defaultOptions=P.options,this.resetStyle(P),E.onEachFeature&&E.onEachFeature(a,P),this.addLayer(P)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=t({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Of(a,u){var f=a.type==="Feature"?a.geometry:a,g=f?f.coordinates:null,b=[],E=u&&u.pointToLayer,P=u&&u.coordsToLatLng||Qv,O,j,G,te;if(!g&&!f)return null;switch(f.type){case"Point":return O=P(g),hx(E,a,O,u);case"MultiPoint":for(G=0,te=g.length;G<te;G++)O=P(g[G]),b.push(hx(E,a,O,u));return new zr(b);case"LineString":case"MultiLineString":return j=kf(g,f.type==="LineString"?0:1,P),new Ur(j,u);case"Polygon":case"MultiPolygon":return j=kf(g,f.type==="Polygon"?1:2,P),new Ma(j,u);case"GeometryCollection":for(G=0,te=f.geometries.length;G<te;G++){var ge=Of({geometry:f.geometries[G],type:"Feature",properties:a.properties},u);ge&&b.push(ge)}return new zr(b);case"FeatureCollection":for(G=0,te=f.features.length;G<te;G++){var Fe=Of(f.features[G],u);Fe&&b.push(Fe)}return new zr(b);default:throw new Error("Invalid GeoJSON object.")}}function hx(a,u,f,g){return a?a(u,f):new Af(f,g&&g.markersInheritOptions&&g)}function Qv(a){return new tt(a[1],a[0],a[2])}function kf(a,u,f){for(var g=[],b=0,E=a.length,P;b<E;b++)P=u?kf(a[b],u-1,f):(f||Qv)(a[b]),g.push(P);return g}function Kv(a,u){return a=Be(a),a.alt!==void 0?[h(a.lng,u),h(a.lat,u),h(a.alt,u)]:[h(a.lng,u),h(a.lat,u)]}function Nf(a,u,f,g){for(var b=[],E=0,P=a.length;E<P;E++)b.push(u?Nf(a[E],fi(a[E])?0:u-1,f,g):Kv(a[E],g));return!u&&f&&b.length>0&&b.push(b[0].slice()),b}function Ta(a,u){return a.feature?t({},a.feature,{geometry:u}):Lf(u)}function Lf(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Jv={toGeoJSON:function(a){return Ta(this,{type:"Point",coordinates:Kv(this.getLatLng(),a)})}};Af.include(Jv),Yv.include(Jv),Rf.include(Jv),Ur.include({toGeoJSON:function(a){var u=!fi(this._latlngs),f=Nf(this._latlngs,u?1:0,!1,a);return Ta(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),Ma.include({toGeoJSON:function(a){var u=!fi(this._latlngs),f=u&&!fi(this._latlngs[0]),g=Nf(this._latlngs,f?2:u?1:0,!0,a);return u||(g=[g]),Ta(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),xa.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(a).geometry.coordinates)}),Ta(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var f=u==="GeometryCollection",g=[];return this.eachLayer(function(b){if(b.toGeoJSON){var E=b.toGeoJSON(a);if(f)g.push(E.geometry);else{var P=Lf(E);P.type==="FeatureCollection"?g.push.apply(g,P.features):g.push(P)}}}),f?Ta(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function px(a,u){return new Hr(a,u)}var W2=px,Ff=Mi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,f){this._url=a,this._bounds=Ft(u),_(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Sa(this._image),this},bringToBack:function(){return this._map&&Da(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Ft(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:Ge("img");if(Oe(u,"leaflet-image-layer"),this._zoomAnimated&&Oe(u,"leaflet-zoom-animated"),this.options.className&&Oe(u,this.options.className),u.onselectstart=d,u.onmousemove=d,u.onload=r(this.fire,this,"load"),u.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;es(this._image,f,u)},_reset:function(){var a=this._image,u=new bt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();Vt(a,u.min),a.style.width=f.x+"px",a.style.height=f.y+"px"},_updateOpacity:function(){di(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),G2=function(a,u,f){return new Ff(a,u,f)},gx=Ff.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:Ge("video");if(Oe(u,"leaflet-image-layer"),this._zoomAnimated&&Oe(u,"leaflet-zoom-animated"),this.options.className&&Oe(u,this.options.className),u.onselectstart=d,u.onmousemove=d,u.onloadeddata=r(this.fire,this,"load"),a){for(var f=u.getElementsByTagName("source"),g=[],b=0;b<f.length;b++)g.push(f[b].src);this._url=f.length>0?g:[u.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var P=Ge("source");P.src=this._url[E],u.appendChild(P)}}});function q2(a,u,f){return new gx(a,u,f)}var mx=Ff.extend({_initImage:function(){var a=this._image=this._url;Oe(a,"leaflet-image-layer"),this._zoomAnimated&&Oe(a,"leaflet-zoom-animated"),this.options.className&&Oe(a,this.options.className),a.onselectstart=d,a.onmousemove=d}});function Z2(a,u,f){return new mx(a,u,f)}var ir=Mi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof tt||T(a))?(this._latlng=Be(a),_(this,u)):(_(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&di(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&di(this._container,1),this.bringToFront(),this.options.interactive&&(Oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(di(this._container,0),this._removeTimeout=setTimeout(r(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(Mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Be(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Sa(this._container),this},bringToBack:function(){return this._map&&Da(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof zr){u=null;var f=this._source._layers;for(var g in f)if(f[g]._map){u=f[g];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=ye(this.options.offset),f=this._getAnchor();this._zoomAnimated?Vt(this._container,a.add(f)):u=u.add(a).add(f);var g=this._containerBottom=-u.y,b=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=g+"px",this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});ze.include({_initOverlay:function(a,u,f,g){var b=u;return b instanceof a||(b=new a(g).setContent(u)),f&&b.setLatLng(f),b}}),Mi.include({_initOverlay:function(a,u,f,g){var b=f;return b instanceof a?(_(b,g),b._source=this):(b=u&&!g?u:new a(g,this),b.setContent(f)),b}});var Vf=ir.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,ir.prototype.openOn.call(this,a)},onAdd:function(a){ir.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vo||this._source.on("preclick",ns))},onRemove:function(a){ir.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vo||this._source.off("preclick",ns))},getEvents:function(){var a=ir.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=Ge("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Ge("div",a+"-content-wrapper",u);if(this._contentNode=Ge("div",a+"-content",f),Tc(u),zv(this._contentNode),Me(u,"contextmenu",ns),this._tipContainer=Ge("div",a+"-tip-container",u),this._tip=Ge("div",a+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=Ge("a",a+"-close-button",u);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Me(g,"click",function(b){cn(b),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var g=a.offsetHeight,b=this.options.maxHeight,E="leaflet-popup-scrolled";b&&g>b?(u.height=b+"px",Oe(a,E)):Mt(a,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();Vt(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(Dc(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,g=this._containerWidth,b=new Ie(this._containerLeft,-f-this._containerBottom);b._add(ts(this._container));var E=a.layerPointToContainerPoint(b),P=ye(this.options.autoPanPadding),O=ye(this.options.autoPanPaddingTopLeft||P),j=ye(this.options.autoPanPaddingBottomRight||P),G=a.getSize(),te=0,ge=0;E.x+g+j.x>G.x&&(te=E.x+g-G.x+j.x),E.x-te-O.x<0&&(te=E.x-O.x),E.y+f+j.y>G.y&&(ge=E.y+f-G.y+j.y),E.y-ge-O.y<0&&(ge=E.y-O.y),(te||ge)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([te,ge]))}},_getAnchor:function(){return ye(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Y2=function(a,u){return new Vf(a,u)};ze.mergeOptions({closePopupOnClick:!0}),ze.include({openPopup:function(a,u,f){return this._initOverlay(Vf,a,u,f).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Mi.include({bindPopup:function(a,u){return this._popup=this._initOverlay(Vf,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof zr||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){is(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof vo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var jf=ir.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){ir.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){ir.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=ir.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,f,g=this._map,b=this._container,E=g.latLngToContainerPoint(g.getCenter()),P=g.layerPointToContainerPoint(a),O=this.options.direction,j=b.offsetWidth,G=b.offsetHeight,te=ye(this.options.offset),ge=this._getAnchor();O==="top"?(u=j/2,f=G):O==="bottom"?(u=j/2,f=0):O==="center"?(u=j/2,f=G/2):O==="right"?(u=0,f=G/2):O==="left"?(u=j,f=G/2):P.x<E.x?(O="right",u=0,f=G/2):(O="left",u=j+(te.x+ge.x)*2,f=G/2),a=a.subtract(ye(u,f,!0)).add(te).add(ge),Mt(b,"leaflet-tooltip-right"),Mt(b,"leaflet-tooltip-left"),Mt(b,"leaflet-tooltip-top"),Mt(b,"leaflet-tooltip-bottom"),Oe(b,"leaflet-tooltip-"+O),Vt(b,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&di(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return ye(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Q2=function(a,u){return new jf(a,u)};ze.include({openTooltip:function(a,u,f){return this._initOverlay(jf,a,u,f).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Mi.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(jf,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof zr||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(Me(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Me(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,f,g;this._tooltip.options.sticky&&a.originalEvent&&(f=this._map.mouseEventToContainerPoint(a.originalEvent),g=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(u)}});var _x=Ia.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Df(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=ye(f.bgPos);u.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function K2(a){return new _x(a)}Ia.Default=Rc;var Oc=Mi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){_(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),wt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Sa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Da(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Ie?a:new Ie(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,f=-a(-1/0,1/0),g=0,b=u.length,E;g<b;g++)E=u[g].style.zIndex,u[g]!==this._container&&E&&(f=a(f,+E));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){di(this._container,this.options.opacity);var a=+new Date,u=!1,f=!1;for(var g in this._tiles){var b=this._tiles[g];if(!(!b.current||!b.loaded)){var E=Math.min(1,(a-b.loaded)/200);di(b.el,E),E<1?u=!0:(b.active?f=!0:this._onOpaqueTile(b),b.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&(yn(this._fadeFrame),this._fadeFrame=It(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===a?(this._levels[f].el.style.zIndex=u-Math.abs(a-f),this._onUpdateLevel(f)):(wt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[a],b=this._map;return g||(g=this._levels[a]={},g.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=u,g.origin=b.project(b.unproject(b.getPixelOrigin()),a).round(),g.zoom=a,this._setZoomTransform(g,b.getCenter(),b.getZoom()),d(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var a,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var g=u.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)wt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,f,g){var b=Math.floor(a/2),E=Math.floor(u/2),P=f-1,O=new Ie(+b,+E);O.z=+P;var j=this._tileCoordsToKey(O),G=this._tiles[j];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),P>g?this._retainParent(b,E,P,g):!1)},_retainChildren:function(a,u,f,g){for(var b=2*a;b<2*a+2;b++)for(var E=2*u;E<2*u+2;E++){var P=new Ie(b,E);P.z=f+1;var O=this._tileCoordsToKey(P),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);f+1<g&&this._retainChildren(b,E,f+1,g)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,f,g){var b=Math.round(u);this.options.maxZoom!==void 0&&b>this.options.maxZoom||this.options.minZoom!==void 0&&b<this.options.minZoom?b=void 0:b=this._clampZoom(b);var E=this.options.updateWhenZooming&&b!==this._tileZoom;(!g||E)&&(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==void 0&&this._update(a),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],a,u)},_setZoomTransform:function(a,u,f){var g=this._map.getZoomScale(f,a.zoom),b=a.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(u,f)).round();ce.any3d?es(a.el,b,g):Vt(a.el,b)},_resetGrid:function(){var a=this._map,u=a.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],g).x/f.x),Math.ceil(a.project([0,u.wrapLng[1]],g).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],g).y/f.x),Math.ceil(a.project([u.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),g=u.getZoomScale(f,this._tileZoom),b=u.project(a,this._tileZoom).floor(),E=u.getSize().divideBy(g*2);return new bt(b.subtract(E),b.add(E))},_update:function(a){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(a),b=this._pxBoundsToTileRange(g),E=b.getCenter(),P=[],O=this.options.keepBuffer,j=new bt(b.getBottomLeft().subtract([O,-O]),b.getTopRight().add([O,-O]));if(!(isFinite(b.min.x)&&isFinite(b.min.y)&&isFinite(b.max.x)&&isFinite(b.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var te=this._tiles[G].coords;(te.z!==this._tileZoom||!j.contains(new Ie(te.x,te.y)))&&(this._tiles[G].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(a,f);return}for(var ge=b.min.y;ge<=b.max.y;ge++)for(var Fe=b.min.x;Fe<=b.max.x;Fe++){var xn=new Ie(Fe,ge);if(xn.z=this._tileZoom,!!this._isValidTile(xn)){var en=this._tiles[this._tileCoordsToKey(xn)];en?en.current=!0:P.push(xn)}}if(P.sort(function(Un,Aa){return Un.distanceTo(E)-Aa.distanceTo(E)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hi=document.createDocumentFragment();for(Fe=0;Fe<P.length;Fe++)this._addTile(P[Fe],hi);this._level.el.appendChild(hi)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(a.x<f.min.x||a.x>f.max.x)||!u.wrapLat&&(a.y<f.min.y||a.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(a);return Ft(this.options.bounds).overlaps(g)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,f=this.getTileSize(),g=a.scaleBy(f),b=g.add(f),E=u.unproject(g,a.z),P=u.unproject(b,a.z);return[E,P]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),f=new zn(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),f=new Ie(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(a){var u=this._tiles[a];u&&(wt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Oe(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=d,a.onmousemove=d,ce.ielt9&&this.options.opacity<1&&di(a,this.options.opacity)},_addTile:function(a,u){var f=this._getTilePos(a),g=this._tileCoordsToKey(a),b=this.createTile(this._wrapCoords(a),r(this._tileReady,this,a));this._initTile(b),this.createTile.length<2&&It(r(this._tileReady,this,a,null,b)),Vt(b,f),this._tiles[g]={el:b,coords:a,current:!0},u.appendChild(b),this.fire("tileloadstart",{tile:b,coords:a})},_tileReady:function(a,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:a});var g=this._tileCoordsToKey(a);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(di(f.el,0),yn(this._fadeFrame),this._fadeFrame=It(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(Oe(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?It(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new Ie(this._wrapX?c(a.x,this._wrapX):a.x,this._wrapY?c(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new bt(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function J2(a){return new Oc(a)}var Pa=Oc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=_(this,u),u.detectRetina&&ce.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var f=document.createElement("img");return Me(f,"load",r(this._tileOnLoad,this,u,f)),Me(f,"error",r(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(a),f},getTileUrl:function(a){var u={r:ce.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=f),u["-y"]=f}return x(this._url,t(u,this.options))},_tileOnLoad:function(a,u){ce.ielt9?setTimeout(r(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,f){var g=this.options.errorTileUrl;g&&u.getAttribute("src")!==g&&(u.src=g),a(f,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(a=u-a),a+g},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=d,u.onerror=d,!u.complete)){u.src=q;var f=this._tiles[a].coords;wt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",q),Oc.prototype._removeTile.call(this,a)},_tileReady:function(a,u,f){if(!(!this._map||f&&f.getAttribute("src")===q))return Oc.prototype._tileReady.call(this,a,u,f)}});function vx(a,u){return new Pa(a,u)}var yx=Pa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var f=t({},this.defaultWmsParams);for(var g in u)g in this.options||(f[g]=u[g]);u=_(this,u);var b=u.detectRetina&&ce.retina?2:1,E=this.getTileSize();f.width=E.x*b,f.height=E.y*b,this.wmsParams=f},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Pa.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),f=this._crs,g=Bn(f.project(u[0]),f.project(u[1])),b=g.min,E=g.max,P=(this._wmsVersion>=1.3&&this._crs===dx?[b.y,b.x,E.y,E.x]:[b.x,b.y,E.x,E.y]).join(","),O=Pa.prototype.getTileUrl.call(this,a);return O+S(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(a,u){return t(this.wmsParams,a),u||this.redraw(),this}});function X2(a,u){return new yx(a,u)}Pa.WMS=yx,vx.wms=X2;var $r=Mi.extend({options:{padding:.1},initialize:function(a){_(this,a),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var f=this._map.getZoomScale(u,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,u),E=g.multiplyBy(-f).add(b).subtract(this._map._getNewPixelOrigin(a,u));ce.any3d?es(this._container,E,f):Vt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new bt(f,f.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bx=$r.extend({options:{tolerance:0},getEvents:function(){var a=$r.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$r.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Me(a,"mousemove",this._onMouseMove,this),Me(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Me(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){yn(this._redrawRequest),delete this._ctx,wt(this._container),ot(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$r.prototype._update.call(this);var a=this._bounds,u=this._container,f=a.getSize(),g=ce.retina?2:1;Vt(u,a.min),u.width=g*f.x,u.height=g*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){$r.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[s(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,f=u.next,g=u.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete a._order,delete this._layers[s(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),f=[],g,b;for(b=0;b<u.length;b++){if(g=Number(u[b]),isNaN(g))return;f.push(g)}a.options._dashArray=f}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||It(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new bt,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)a=g.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var f,g,b,E,P=a._parts,O=P.length,j=this._ctx;if(O){for(j.beginPath(),f=0;f<O;f++){for(g=0,b=P[f].length;g<b;g++)E=P[f][g],j[g?"lineTo":"moveTo"](E.x,E.y);u&&j.closePath()}this._fillStroke(j,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,f=this._ctx,g=Math.max(Math.round(a._radius),1),b=(Math.max(Math.round(a._radiusY),1)||g)/g;b!==1&&(f.save(),f.scale(1,b)),f.beginPath(),f.arc(u.x,u.y/b,g,0,Math.PI*2,!1),b!==1&&f.restore(),this._fillStroke(f,a)}},_fillStroke:function(a,u){var f=u.options;f.fill&&(a.globalAlpha=f.fillOpacity,a.fillStyle=f.fillColor||f.color,a.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=f.opacity,a.lineWidth=f.weight,a.strokeStyle=f.color,a.lineCap=f.lineCap,a.lineJoin=f.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),f,g,b=this._drawFirst;b;b=b.next)f=b.layer,f.options.interactive&&f._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(Mt(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var f,g,b=this._drawFirst;b;b=b.next)f=b.layer,f.options.interactive&&f._containsPoint(u)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(a),g&&(Oe(this._container,"leaflet-interactive"),this._fireEvent([g],a,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,f){this._map._fireDOMEvent(u,f||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var f=u.next,g=u.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var f=u.next,g=u.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function wx(a){return ce.canvas?new bx(a):null}var kc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),eF={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($r.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=kc("shape");Oe(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=kc("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;wt(u),a.removeInteractiveTarget(u),delete this._layers[s(a)]},_updateStyle:function(a){var u=a._stroke,f=a._fill,g=a.options,b=a._container;b.stroked=!!g.stroke,b.filled=!!g.fill,g.stroke?(u||(u=a._stroke=kc("stroke")),b.appendChild(u),u.weight=g.weight+"px",u.color=g.color,u.opacity=g.opacity,g.dashArray?u.dashStyle=T(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=g.lineCap.replace("butt","flat"),u.joinstyle=g.lineJoin):u&&(b.removeChild(u),a._stroke=null),g.fill?(f||(f=a._fill=kc("fill")),b.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(b.removeChild(f),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),f=Math.round(a._radius),g=Math.round(a._radiusY||f);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Sa(a._container)},_bringToBack:function(a){Da(a._container)}},Bf=ce.vml?kc:DD,Nc=$r.extend({_initContainer:function(){this._container=Bf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),ot(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$r.prototype._update.call(this);var a=this._bounds,u=a.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),Vt(f,a.min),f.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=Bf("path");a.options.className&&Oe(u,a.options.className),a.options.interactive&&Oe(u,"leaflet-interactive"),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){wt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[s(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,f=a.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,xD(a._parts,u))},_updateCircle:function(a){var u=a._point,f=Math.max(Math.round(a._radius),1),g=Math.max(Math.round(a._radiusY),1)||f,b="a"+f+","+g+" 0 1,0 ",E=a._empty()?"M0 0":"M"+(u.x-f)+","+u.y+b+f*2+",0 "+b+-f*2+",0 ";this._setPath(a,E)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Sa(a._path)},_bringToBack:function(a){Da(a._path)}});ce.vml&&Nc.include(eF);function Cx(a){return ce.svg||ce.vml?new Nc(a):null}ze.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&wx(a)||Cx(a)}});var Ex=Ma.extend({initialize:function(a,u){Ma.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Ft(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function tF(a,u){return new Ex(a,u)}Nc.create=Bf,Nc.pointsToPath=xD,Hr.geometryToLayer=Of,Hr.coordsToLatLng=Qv,Hr.coordsToLatLngs=kf,Hr.latLngToCoords=Kv,Hr.latLngsToCoords=Nf,Hr.getFeature=Ta,Hr.asFeature=Lf,ze.mergeOptions({boxZoom:!0});var Sx=nr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ot(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xc(),Ov(),this._startPoint=this._map.mouseEventToContainerPoint(a),Me(document,{contextmenu:is,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),Oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new bt(this._point,this._startPoint),f=u.getSize();Vt(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(wt(this._box),Mt(this._container,"leaflet-crosshair")),Ic(),kv(),ot(document,{contextmenu:is,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var u=new zn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ze.addInitHook("addHandler","boxZoom",Sx),ze.mergeOptions({doubleClickZoom:!0});var Dx=nr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,f=u.getZoom(),g=u.options.zoomDelta,b=a.originalEvent.shiftKey?f-g:f+g;u.options.doubleClickZoom==="center"?u.setZoom(b):u.setZoomAround(a.containerPoint,b)}});ze.addInitHook("addHandler","doubleClickZoom",Dx),ze.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xx=nr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new _o(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Mt(this._map._container,"leaflet-grab"),Mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Ft(this._map.options.maxBounds);this._offsetLimit=Bn(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,b=(g-u+f)%a+u-f,E=(g+u+f)%a-u-f,P=Math.abs(b+f)<Math.abs(E+f)?b:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(a){var u=this._map,f=u.options,g=!f.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),g)u.fire("moveend");else{this._prunePositions(+new Date);var b=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,P=f.easeLinearity,O=b.multiplyBy(P/E),j=O.distanceTo([0,0]),G=Math.min(f.inertiaMaxSpeed,j),te=O.multiplyBy(G/j),ge=G/(f.inertiaDeceleration*P),Fe=te.multiplyBy(-ge/2).round();!Fe.x&&!Fe.y?u.fire("moveend"):(Fe=u._limitOffset(Fe,u.options.maxBounds),It(function(){u.panBy(Fe,{duration:ge,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});ze.addInitHook("addHandler","dragging",xx),ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ix=nr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Me(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ot(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,f=a.scrollTop||u.scrollTop,g=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},f=this.keyCodes,g,b;for(g=0,b=f.left.length;g<b;g++)u[f.left[g]]=[-1*a,0];for(g=0,b=f.right.length;g<b;g++)u[f.right[g]]=[a,0];for(g=0,b=f.down.length;g<b;g++)u[f.down[g]]=[0,a];for(g=0,b=f.up.length;g<b;g++)u[f.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},f=this.keyCodes,g,b;for(g=0,b=f.zoomIn.length;g<b;g++)u[f.zoomIn[g]]=a;for(g=0,b=f.zoomOut.length;g<b;g++)u[f.zoomOut[g]]=-a},_addHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ot(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,f=this._map,g;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[u],a.shiftKey&&(g=ye(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(ye(g),f.options.maxBounds)),f.options.worldCopyJump){var b=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(b)}else f.panBy(g)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;is(a)}}});ze.addInitHook("addHandler","keyboard",Ix),ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Mx=nr.extend({addHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ot(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=JD(a),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),g),is(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),f=this._map.options.zoomSnap||0;a._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),b=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,E=f?Math.ceil(b/f)*f:b,P=a._limitZoom(u+(this._delta>0?E:-E))-u;this._delta=0,this._startTime=null,P&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+P):a.setZoomAround(this._lastMousePos,u+P))}});ze.addInitHook("addHandler","scrollWheelZoom",Mx);var nF=600;ze.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var Tx=nr.extend({addHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ot(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new Ie(u.clientX,u.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Me(document,"touchend",cn),Me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),nF),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){ot(document,"touchend",cn),ot(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),ot(document,"touchend touchcancel contextmenu",this._cancel,this),ot(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new Ie(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var f=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});ze.addInitHook("addHandler","tapHold",Tx),ze.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var Px=nr.extend({addHooks:function(){Oe(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Mt(this._map._container,"leaflet-touch-zoom"),ot(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(a.touches[0]),g=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),cn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(a.touches[0]),g=u.mouseEventToContainerPoint(a.touches[1]),b=f.distanceTo(g)/this._startDist;if(this._zoom=u.getScaleZoom(b,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&b<1||this._zoom>u.getMaxZoom()&&b>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,b===1)return}else{var E=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(b===1&&E.x===0&&E.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),yn(this._animRequest);var P=r(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=It(P,this,!0),cn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,yn(this._animRequest),ot(document,"touchmove",this._onTouchMove,this),ot(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ze.addInitHook("addHandler","touchZoom",Px),ze.BoxZoom=Sx,ze.DoubleClickZoom=Dx,ze.Drag=xx,ze.Keyboard=Ix,ze.ScrollWheelZoom=Mx,ze.TapHold=Tx,ze.TouchZoom=Px,n.Bounds=bt,n.Browser=ce,n.CRS=Br,n.Canvas=bx,n.Circle=Yv,n.CircleMarker=Rf,n.Class=jr,n.Control=Ii,n.DivIcon=_x,n.DivOverlay=ir,n.DomEvent=b2,n.DomUtil=v2,n.Draggable=_o,n.Evented=wc,n.FeatureGroup=zr,n.GeoJSON=Hr,n.GridLayer=Oc,n.Handler=nr,n.Icon=Ia,n.ImageOverlay=Ff,n.LatLng=tt,n.LatLngBounds=zn,n.Layer=Mi,n.LayerGroup=xa,n.LineUtil=O2,n.Map=ze,n.Marker=Af,n.Mixin=I2,n.Path=vo,n.Point=Ie,n.PolyUtil=M2,n.Polygon=Ma,n.Polyline=Ur,n.Popup=Vf,n.PosAnimation=XD,n.Projection=k2,n.Rectangle=Ex,n.Renderer=$r,n.SVG=Nc,n.SVGOverlay=mx,n.TileLayer=Pa,n.Tooltip=jf,n.Transformation=wv,n.Util=BL,n.VideoOverlay=gx,n.bind=r,n.bounds=Bn,n.canvas=wx,n.circle=U2,n.circleMarker=z2,n.control=Pc,n.divIcon=K2,n.extend=t,n.featureGroup=V2,n.geoJSON=px,n.geoJson=W2,n.gridLayer=J2,n.icon=j2,n.imageOverlay=G2,n.latLng=Be,n.latLngBounds=Ft,n.layerGroup=F2,n.map=w2,n.marker=B2,n.point=ye,n.polygon=$2,n.polyline=H2,n.popup=Y2,n.rectangle=tF,n.setOptions=_,n.stamp=s,n.svg=Cx,n.svgOverlay=Z2,n.tileLayer=vx,n.tooltip=Q2,n.transformation=Cc,n.version=e,n.videoOverlay=q2;var iF=window.L;n.noConflict=function(){return window.L=iF,this},window.L=n})});var LL=Ti((cv,NL)=>{"use strict";(function(n,e){typeof cv=="object"&&typeof NL<"u"?e(cv):typeof define=="function"&&define.amd?define(["exports"],e):(n=n||self,e((n.Leaflet=n.Leaflet||{},n.Leaflet.markercluster={})))})(cv,function(n){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(i){L.Util.setOptions(this,i),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var r=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,r?this._withAnimation:this._noAnimation),this._markerCluster=r?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(i){if(i instanceof L.LayerGroup)return this.addLayers([i]);if(!i.getLatLng)return this._nonPointGroup.addLayer(i),this.fire("layeradd",{layer:i}),this;if(!this._map)return this._needsClustering.push(i),this.fire("layeradd",{layer:i}),this;if(this.hasLayer(i))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(i,this._maxZoom),this.fire("layeradd",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var r=i,o=this._zoom;if(i.__parent)for(;r.__parent._zoom>=o;)r=r.__parent;return this._currentShownBounds.contains(r.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(i,r):this._animationAddLayerNonAnimated(i,r)),this},removeLayer:function(i){return i instanceof L.LayerGroup?this.removeLayers([i]):i.getLatLng?this._map?i.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(i)),this._removeLayer(i,!0),this.fire("layerremove",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),i.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(i)&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,i)&&this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}),this):(this._nonPointGroup.removeLayer(i),this.fire("layerremove",{layer:i}),this)},addLayers:function(i,r){if(!L.Util.isArray(i))return this.addLayer(i);var o=this._featureGroup,s=this._nonPointGroup,l=this.options.chunkedLoading,c=this.options.chunkInterval,d=this.options.chunkProgress,h=i.length,p=0,y=!0,_;if(this._map){var S=new Date().getTime(),I=L.bind(function(){var T=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();p<h;p++){if(l&&p%200===0){var H=new Date().getTime()-T;if(H>c)break}if(_=i[p],_ instanceof L.LayerGroup){y&&(i=i.slice(),y=!1),this._extractNonGroupLayers(_,i),h=i.length;continue}if(!_.getLatLng){s.addLayer(_),r||this.fire("layeradd",{layer:_});continue}if(!this.hasLayer(_)&&(this._addLayer(_,this._maxZoom),r||this.fire("layeradd",{layer:_}),_.__parent&&_.__parent.getChildCount()===2)){var q=_.__parent.getAllChildMarkers(),U=q[0]===_?q[1]:q[0];o.removeLayer(U)}}d&&d(p,h,new Date().getTime()-S),p===h?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(I,this.options.chunkDelay)},this);I()}else for(var x=this._needsClustering;p<h;p++){if(_=i[p],_ instanceof L.LayerGroup){y&&(i=i.slice(),y=!1),this._extractNonGroupLayers(_,i),h=i.length;continue}if(!_.getLatLng){s.addLayer(_);continue}this.hasLayer(_)||x.push(_)}return this},removeLayers:function(i){var r,o,s=i.length,l=this._featureGroup,c=this._nonPointGroup,d=!0;if(!this._map){for(r=0;r<s;r++){if(o=i[r],o instanceof L.LayerGroup){d&&(i=i.slice(),d=!1),this._extractNonGroupLayers(o,i),s=i.length;continue}this._arraySplice(this._needsClustering,o),c.removeLayer(o),this.hasLayer(o)&&this._needsRemoving.push({layer:o,latlng:o._latlng}),this.fire("layerremove",{layer:o})}return this}if(this._unspiderfy){this._unspiderfy();var h=i.slice(),p=s;for(r=0;r<p;r++){if(o=h[r],o instanceof L.LayerGroup){this._extractNonGroupLayers(o,h),p=h.length;continue}this._unspiderfyLayer(o)}}for(r=0;r<s;r++){if(o=i[r],o instanceof L.LayerGroup){d&&(i=i.slice(),d=!1),this._extractNonGroupLayers(o,i),s=i.length;continue}if(!o.__parent){c.removeLayer(o),this.fire("layerremove",{layer:o});continue}this._removeLayer(o,!0,!0),this.fire("layerremove",{layer:o}),l.hasLayer(o)&&(l.removeLayer(o),o.clusterShow&&o.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(i){i.off(this._childMarkerEventHandlers,this),delete i.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var i=new L.LatLngBounds;this._topClusterLevel&&i.extend(this._topClusterLevel._bounds);for(var r=this._needsClustering.length-1;r>=0;r--)i.extend(this._needsClustering[r].getLatLng());return i.extend(this._nonPointGroup.getBounds()),i},eachLayer:function(i,r){var o=this._needsClustering.slice(),s=this._needsRemoving,l,c,d;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),c=o.length-1;c>=0;c--){for(l=!0,d=s.length-1;d>=0;d--)if(s[d].layer===o[c]){l=!1;break}l&&i.call(r,o[c])}this._nonPointGroup.eachLayer(i,r)},getLayers:function(){var i=[];return this.eachLayer(function(r){i.push(r)}),i},getLayer:function(i){var r=null;return i=parseInt(i,10),this.eachLayer(function(o){L.stamp(o)===i&&(r=o)}),r},hasLayer:function(i){if(!i)return!1;var r,o=this._needsClustering;for(r=o.length-1;r>=0;r--)if(o[r]===i)return!0;for(o=this._needsRemoving,r=o.length-1;r>=0;r--)if(o[r].layer===i)return!1;return!!(i.__parent&&i.__parent._group===this)||this._nonPointGroup.hasLayer(i)},zoomToShowLayer:function(i,r){var o=this._map;typeof r!="function"&&(r=function(){});var s=function(){(o.hasLayer(i)||o.hasLayer(i.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",s,this),this.off("animationend",s,this),o.hasLayer(i)?r():i.__parent._icon&&(this.once("spiderfied",r,this),i.__parent.spiderfy()))};i._icon&&this._map.getBounds().contains(i.getLatLng())?r():i.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",s,this),this._map.panTo(i.getLatLng())):(this._map.on("moveend",s,this),this.on("animationend",s,this),i.__parent.zoomToBounds())},onAdd:function(i){this._map=i;var r,o,s;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(i),this._nonPointGroup.addTo(i),this._gridClusters||this._generateInitialClusters(),this._maxLat=i.options.crs.projection.MAX_LATITUDE,r=0,o=this._needsRemoving.length;r<o;r++)s=this._needsRemoving[r],s.newlatlng=s.layer._latlng,s.layer._latlng=s.latlng;for(r=0,o=this._needsRemoving.length;r<o;r++)s=this._needsRemoving[r],this._removeLayer(s.layer,!0),s.layer._latlng=s.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),o=this._needsClustering,this._needsClustering=[],this.addLayers(o,!0)},onRemove:function(i){i.off("zoomend",this._zoomEnd,this),i.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(i){for(var r=i;r&&!r._icon;)r=r.__parent;return r||null},_arraySplice:function(i,r){for(var o=i.length-1;o>=0;o--)if(i[o]===r)return i.splice(o,1),!0},_removeFromGridUnclustered:function(i,r){for(var o=this._map,s=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());r>=l&&s[r].removeObject(i,o.project(i.getLatLng(),r));r--);},_childMarkerDragStart:function(i){i.target.__dragStart=i.target._latlng},_childMarkerMoved:function(i){if(!this._ignoreMove&&!i.target.__dragStart){var r=i.target._popup&&i.target._popup.isOpen();this._moveChild(i.target,i.oldLatLng,i.latlng),r&&i.target.openPopup()}},_moveChild:function(i,r,o){i._latlng=r,this.removeLayer(i),i._latlng=o,this.addLayer(i)},_childMarkerDragEnd:function(i){var r=i.target.__dragStart;delete i.target.__dragStart,r&&this._moveChild(i.target,r,i.target._latlng)},_removeLayer:function(i,r,o){var s=this._gridClusters,l=this._gridUnclustered,c=this._featureGroup,d=this._map,h=Math.floor(this._map.getMinZoom());r&&this._removeFromGridUnclustered(i,this._maxZoom);var p=i.__parent,y=p._markers,_;for(this._arraySplice(y,i);p&&(p._childCount--,p._boundsNeedUpdate=!0,!(p._zoom<h));)r&&p._childCount<=1?(_=p._markers[0]===i?p._markers[1]:p._markers[0],s[p._zoom].removeObject(p,d.project(p._cLatLng,p._zoom)),l[p._zoom].addObject(_,d.project(_.getLatLng(),p._zoom)),this._arraySplice(p.__parent._childClusters,p),p.__parent._markers.push(_),_.__parent=p.__parent,p._icon&&(c.removeLayer(p),o||c.addLayer(_))):p._iconNeedsUpdate=!0,p=p.__parent;delete i.__parent},_isOrIsParent:function(i,r){for(;r;){if(i===r)return!0;r=r.parentNode}return!1},fire:function(i,r,o){if(r&&r.layer instanceof L.MarkerCluster){if(r.originalEvent&&this._isOrIsParent(r.layer._icon,r.originalEvent.relatedTarget))return;i="cluster"+i}L.FeatureGroup.prototype.fire.call(this,i,r,o)},listens:function(i,r){return L.FeatureGroup.prototype.listens.call(this,i,r)||L.FeatureGroup.prototype.listens.call(this,"cluster"+i,r)},_defaultIconCreateFunction:function(i){var r=i.getChildCount(),o=" marker-cluster-";return r<10?o+="small":r<100?o+="medium":o+="large",new L.DivIcon({html:"<div><span>"+r+"</span></div>",className:"marker-cluster"+o,iconSize:new L.Point(40,40)})},_bindEvents:function(){var i=this._map,r=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(r||s||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),i.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(i){var r=i.layer,o=r;if(!(i.type==="clusterkeypress"&&i.originalEvent&&i.originalEvent.keyCode!==13)){for(;o._childClusters.length===1;)o=o._childClusters[0];o._zoom===this._maxZoom&&o._childCount===r._childCount&&this.options.spiderfyOnMaxZoom?r.spiderfy():this.options.zoomToBoundsOnClick&&r.zoomToBounds(),this.options.spiderfyOnEveryZoom&&r.spiderfy(),i.originalEvent&&i.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(i){var r=this._map;this._inZoomAnimation||(this._shownPolygon&&r.removeLayer(this._shownPolygon),i.layer.getChildCount()>2&&i.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(i.layer.getConvexHull(),this.options.polygonOptions),r.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var i=this.options.spiderfyOnMaxZoom,r=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom,l=this._map;(i||o||s)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),r&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var i=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,i),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),i),this._currentShownBounds=i}},_generateInitialClusters:function(){var i=Math.ceil(this._map.getMaxZoom()),r=Math.floor(this._map.getMinZoom()),o=this.options.maxClusterRadius,s=o;typeof o!="function"&&(s=function(){return o}),this.options.disableClusteringAtZoom!==null&&(i=this.options.disableClusteringAtZoom-1),this._maxZoom=i,this._gridClusters={},this._gridUnclustered={};for(var l=i;l>=r;l--)this._gridClusters[l]=new L.DistanceGrid(s(l)),this._gridUnclustered[l]=new L.DistanceGrid(s(l));this._topClusterLevel=new this._markerCluster(this,r-1)},_addLayer:function(i,r){var o=this._gridClusters,s=this._gridUnclustered,l=Math.floor(this._map.getMinZoom()),c,d;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(i),i.on(this._childMarkerEventHandlers,this);r>=l;r--){c=this._map.project(i.getLatLng(),r);var h=o[r].getNearObject(c);if(h){h._addChild(i),i.__parent=h;return}if(h=s[r].getNearObject(c),h){var p=h.__parent;p&&this._removeLayer(h,!1);var y=new this._markerCluster(this,r,h,i);o[r].addObject(y,this._map.project(y._cLatLng,r)),h.__parent=y,i.__parent=y;var _=y;for(d=r-1;d>p._zoom;d--)_=new this._markerCluster(this,d,_),o[d].addObject(_,this._map.project(h.getLatLng(),d));p._addChild(_),this._removeFromGridUnclustered(h,r);return}s[r].addObject(i,c)}this._topClusterLevel._addChild(i),i.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(i){i instanceof L.MarkerCluster&&i._iconNeedsUpdate&&i._updateIcon()})},_enqueue:function(i){this._queue.push(i),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var i=0;i<this._queue.length;i++)this._queue[i].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var i=Math.round(this._map._zoom);this._processQueue(),this._zoom<i&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,i)):this._zoom>i?(this._animationStart(),this._animationZoomOut(this._zoom,i)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(i){var r=this._maxLat;return r!==void 0&&(i.getNorth()>=r&&(i._northEast.lat=1/0),i.getSouth()<=-r&&(i._southWest.lat=-1/0)),i},_animationAddLayerNonAnimated:function(i,r){if(r===i)this._featureGroup.addLayer(i);else if(r._childCount===2){r._addToMap();var o=r.getAllChildMarkers();this._featureGroup.removeLayer(o[0]),this._featureGroup.removeLayer(o[1])}else r._updateIcon()},_extractNonGroupLayers:function(i,r){var o=i.getLayers(),s=0,l;for(r=r||[];s<o.length;s++){if(l=o[s],l instanceof L.LayerGroup){this._extractNonGroupLayers(l,r);continue}r.push(l)}return r},_overrideMarkerIcon:function(i){var r=i.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[i]}});return r}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(i,r){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,r,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(i,r){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,r,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(i,r){this._animationAddLayerNonAnimated(i,r)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,r){var o=this._getExpandedVisibleBounds(),s=this._featureGroup,l=Math.floor(this._map.getMinZoom()),c;this._ignoreMove=!0,this._topClusterLevel._recursively(o,i,l,function(d){var h=d._latlng,p=d._markers,y;for(o.contains(h)||(h=null),d._isSingleParent()&&i+1===r?(s.removeLayer(d),d._recursivelyAddChildrenToMap(null,r,o)):(d.clusterHide(),d._recursivelyAddChildrenToMap(h,r,o)),c=p.length-1;c>=0;c--)y=p[c],o.contains(y._latlng)||s.removeLayer(y)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,r),s.eachLayer(function(d){!(d instanceof L.MarkerCluster)&&d._icon&&d.clusterShow()}),this._topClusterLevel._recursively(o,i,r,function(d){d._recursivelyRestoreChildPositions(r)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,i,l,function(d){s.removeLayer(d),d.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(i,r){this._animationZoomOutSingle(this._topClusterLevel,i-1,r),this._topClusterLevel._recursivelyAddChildrenToMap(null,r,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i,this._getExpandedVisibleBounds())},_animationAddLayer:function(i,r){var o=this,s=this._featureGroup;s.addLayer(i),r!==i&&(r._childCount>2?(r._updateIcon(),this._forceLayout(),this._animationStart(),i._setPos(this._map.latLngToLayerPoint(r.getLatLng())),i.clusterHide(),this._enqueue(function(){s.removeLayer(i),i.clusterShow(),o._animationEnd()})):(this._forceLayout(),o._animationStart(),o._animationZoomOutSingle(r,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(i,r,o){var s=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());i._recursivelyAnimateChildrenInAndAddSelfToMap(s,l,r+1,o);var c=this;this._forceLayout(),i._recursivelyBecomeVisible(s,o),this._enqueue(function(){if(i._childCount===1){var d=i._markers[0];this._ignoreMove=!0,d.setLatLng(d.getLatLng()),this._ignoreMove=!1,d.clusterShow&&d.clusterShow()}else i._recursively(s,o,l,function(h){h._recursivelyRemoveChildrenFromMap(s,l,r+1)});c._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(i){return new L.MarkerClusterGroup(i)};var t=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(i,r,o,s){L.Marker.prototype.initialize.call(this,o?o._cLatLng||o.getLatLng():new L.LatLng(0,0),{icon:this,pane:i.options.clusterPane}),this._group=i,this._zoom=r,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,o&&this._addChild(o),s&&this._addChild(s)},getAllChildMarkers:function(i,r){i=i||[];for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o].getAllChildMarkers(i,r);for(var s=this._markers.length-1;s>=0;s--)r&&this._markers[s].__dragStart||i.push(this._markers[s]);return i},getChildCount:function(){return this._childCount},zoomToBounds:function(i){for(var r=this._childClusters.slice(),o=this._group._map,s=o.getBoundsZoom(this._bounds),l=this._zoom+1,c=o.getZoom(),d;r.length>0&&s>l;){l++;var h=[];for(d=0;d<r.length;d++)h=h.concat(r[d]._childClusters);r=h}s>l?this._group._map.setView(this._latlng,l):s<=c?this._group._map.setView(this._latlng,c+1):this._group._map.fitBounds(this._bounds,i)},getBounds:function(){var i=new L.LatLngBounds;return i.extend(this._bounds),i},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(i,r){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(i),i instanceof L.MarkerCluster?(r||(this._childClusters.push(i),i.__parent=this),this._childCount+=i._childCount):(r||this._markers.push(i),this._childCount++),this.__parent&&this.__parent._addChild(i,!0)},_setClusterCenter:function(i){this._cLatLng||(this._cLatLng=i._cLatLng||i._latlng)},_resetBounds:function(){var i=this._bounds;i._southWest&&(i._southWest.lat=1/0,i._southWest.lng=1/0),i._northEast&&(i._northEast.lat=-1/0,i._northEast.lng=-1/0)},_recalculateBounds:function(){var i=this._markers,r=this._childClusters,o=0,s=0,l=this._childCount,c,d,h,p;if(l!==0){for(this._resetBounds(),c=0;c<i.length;c++)h=i[c]._latlng,this._bounds.extend(h),o+=h.lat,s+=h.lng;for(c=0;c<r.length;c++)d=r[c],d._boundsNeedUpdate&&d._recalculateBounds(),this._bounds.extend(d._bounds),h=d._wLatLng,p=d._childCount,o+=h.lat*p,s+=h.lng*p;this._latlng=this._wLatLng=new L.LatLng(o/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(i){i&&(this._backupLatlng=this._latlng,this.setLatLng(i)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(i,r,o){this._recursively(i,this._group._map.getMinZoom(),o-1,function(s){var l=s._markers,c,d;for(c=l.length-1;c>=0;c--)d=l[c],d._icon&&(d._setPos(r),d.clusterHide())},function(s){var l=s._childClusters,c,d;for(c=l.length-1;c>=0;c--)d=l[c],d._icon&&(d._setPos(r),d.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(i,r,o,s){this._recursively(i,s,r,function(l){l._recursivelyAnimateChildrenIn(i,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),o),l._isSingleParent()&&o-1===s?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(i,r,o)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(i,r){this._recursively(i,this._group._map.getMinZoom(),r,null,function(o){o.clusterShow()})},_recursivelyAddChildrenToMap:function(i,r,o){this._recursively(o,this._group._map.getMinZoom()-1,r,function(s){if(r!==s._zoom)for(var l=s._markers.length-1;l>=0;l--){var c=s._markers[l];o.contains(c._latlng)&&(i&&(c._backupLatlng=c.getLatLng(),c.setLatLng(i),c.clusterHide&&c.clusterHide()),s._group._featureGroup.addLayer(c))}},function(s){s._addToMap(i)})},_recursivelyRestoreChildPositions:function(i){for(var r=this._markers.length-1;r>=0;r--){var o=this._markers[r];o._backupLatlng&&(o.setLatLng(o._backupLatlng),delete o._backupLatlng)}if(i-1===this._zoom)for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s]._restorePosition();else for(var l=this._childClusters.length-1;l>=0;l--)this._childClusters[l]._recursivelyRestoreChildPositions(i)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(i,r,o,s){var l,c;this._recursively(i,r-1,o-1,function(d){for(c=d._markers.length-1;c>=0;c--)l=d._markers[c],(!s||!s.contains(l._latlng))&&(d._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(d){for(c=d._childClusters.length-1;c>=0;c--)l=d._childClusters[c],(!s||!s.contains(l._latlng))&&(d._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(i,r,o,s,l){var c=this._childClusters,d=this._zoom,h,p;if(r<=d&&(s&&s(this),l&&d===o&&l(this)),d<r||d<o)for(h=c.length-1;h>=0;h--)p=c[h],p._boundsNeedUpdate&&p._recalculateBounds(),i.intersects(p._bounds)&&p._recursively(i,r,o,s,l)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var i=this.options.opacity;return this.setOpacity(0),this.options.opacity=i,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(i){this._cellSize=i,this._sqCellSize=i*i,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(i,r){var o=this._getCoord(r.x),s=this._getCoord(r.y),l=this._grid,c=l[s]=l[s]||{},d=c[o]=c[o]||[],h=L.Util.stamp(i);this._objectPoint[h]=r,d.push(i)},updateObject:function(i,r){this.removeObject(i),this.addObject(i,r)},removeObject:function(i,r){var o=this._getCoord(r.x),s=this._getCoord(r.y),l=this._grid,c=l[s]=l[s]||{},d=c[o]=c[o]||[],h,p;for(delete this._objectPoint[L.Util.stamp(i)],h=0,p=d.length;h<p;h++)if(d[h]===i)return d.splice(h,1),p===1&&delete c[o],!0},eachObject:function(i,r){var o,s,l,c,d,h,p,y=this._grid;for(o in y){d=y[o];for(s in d)for(h=d[s],l=0,c=h.length;l<c;l++)p=i.call(r,h[l]),p&&(l--,c--)}},getNearObject:function(i){var r=this._getCoord(i.x),o=this._getCoord(i.y),s,l,c,d,h,p,y,_,S=this._objectPoint,I=this._sqCellSize,x=null;for(s=o-1;s<=o+1;s++)if(d=this._grid[s],d){for(l=r-1;l<=r+1;l++)if(h=d[l],h)for(c=0,p=h.length;c<p;c++)y=h[c],_=this._sqDist(S[L.Util.stamp(y)],i),(_<I||_<=I&&x===null)&&(I=_,x=y)}return x},_getCoord:function(i){var r=Math.floor(i/this._cellSize);return isFinite(r)?r:i},_sqDist:function(i,r){var o=r.x-i.x,s=r.y-i.y;return o*o+s*s}},function(){L.QuickHull={getDistant:function(i,r){var o=r[1].lat-r[0].lat,s=r[0].lng-r[1].lng;return s*(i.lat-r[0].lat)+o*(i.lng-r[0].lng)},findMostDistantPointFromBaseLine:function(i,r){var o=0,s=null,l=[],c,d,h;for(c=r.length-1;c>=0;c--){if(d=r[c],h=this.getDistant(d,i),h>0)l.push(d);else continue;h>o&&(o=h,s=d)}return{maxPoint:s,newPoints:l}},buildConvexHull:function(i,r){var o=[],s=this.findMostDistantPointFromBaseLine(i,r);return s.maxPoint?(o=o.concat(this.buildConvexHull([i[0],s.maxPoint],s.newPoints)),o=o.concat(this.buildConvexHull([s.maxPoint,i[1]],s.newPoints)),o):[i[0]]},getConvexHull:function(i){var r=!1,o=!1,s=!1,l=!1,c=null,d=null,h=null,p=null,y=null,_=null,S;for(S=i.length-1;S>=0;S--){var I=i[S];(r===!1||I.lat>r)&&(c=I,r=I.lat),(o===!1||I.lat<o)&&(d=I,o=I.lat),(s===!1||I.lng>s)&&(h=I,s=I.lng),(l===!1||I.lng<l)&&(p=I,l=I.lng)}o!==r?(_=d,y=c):(_=p,y=h);var x=[].concat(this.buildConvexHull([_,y],i),this.buildConvexHull([y,_],i));return x}}}(),L.MarkerCluster.include({getConvexHull:function(){var i=this.getAllChildMarkers(),r=[],o,s;for(s=i.length-1;s>=0;s--)o=i[s].getLatLng(),r.push(o);return L.QuickHull.getConvexHull(r)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var i=this.getAllChildMarkers(null,!0),r=this._group,o=r._map,s=o.latLngToLayerPoint(this._latlng),l;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?l=this._group.options.spiderfyShapePositions(i.length,s):i.length>=this._circleSpiralSwitchover?l=this._generatePointsSpiral(i.length,s):(s.y+=10,l=this._generatePointsCircle(i.length,s)),this._animationSpiderfy(i,l)}},unspiderfy:function(i){this._group._inZoomAnimation||(this._animationUnspiderfy(i),this._group._spiderfied=null)},_generatePointsCircle:function(i,r){var o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+i),s=o/this._2PI,l=this._2PI/i,c=[],d,h;for(s=Math.max(s,35),c.length=i,d=0;d<i;d++)h=this._circleStartAngle+d*l,c[d]=new L.Point(r.x+s*Math.cos(h),r.y+s*Math.sin(h))._round();return c},_generatePointsSpiral:function(i,r){var o=this._group.options.spiderfyDistanceMultiplier,s=o*this._spiralLengthStart,l=o*this._spiralFootSeparation,c=o*this._spiralLengthFactor*this._2PI,d=0,h=[],p;for(h.length=i,p=i;p>=0;p--)p<i&&(h[p]=new L.Point(r.x+s*Math.cos(d),r.y+s*Math.sin(d))._round()),d+=l/s+p*5e-4,s+=c/d;return h},_noanimationUnspiderfy:function(){var i=this._group,r=i._map,o=i._featureGroup,s=this.getAllChildMarkers(null,!0),l,c;for(i._ignoreMove=!0,this.setOpacity(1),c=s.length-1;c>=0;c--)l=s[c],o.removeLayer(l),l._preSpiderfyLatlng&&(l.setLatLng(l._preSpiderfyLatlng),delete l._preSpiderfyLatlng),l.setZIndexOffset&&l.setZIndexOffset(0),l._spiderLeg&&(r.removeLayer(l._spiderLeg),delete l._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:s}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(i,r){var o=this._group,s=o._map,l=o._featureGroup,c=this._group.options.spiderLegPolylineOptions,d,h,p,y;for(o._ignoreMove=!0,d=0;d<i.length;d++)y=s.layerPointToLatLng(r[d]),h=i[d],p=new L.Polyline([this._latlng,y],c),s.addLayer(p),h._spiderLeg=p,h._preSpiderfyLatlng=h._latlng,h.setLatLng(y),h.setZIndexOffset&&h.setZIndexOffset(1e6),l.addLayer(h);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:i})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(i,r){var o=this,s=this._group,l=s._map,c=s._featureGroup,d=this._latlng,h=l.latLngToLayerPoint(d),p=L.Path.SVG,y=L.extend({},this._group.options.spiderLegPolylineOptions),_=y.opacity,S,I,x,T,H,q;for(_===void 0&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(y.opacity=0,y.className=(y.className||"")+" leaflet-cluster-spider-leg"):y.opacity=_,s._ignoreMove=!0,S=0;S<i.length;S++)I=i[S],q=l.layerPointToLatLng(r[S]),x=new L.Polyline([d,q],y),l.addLayer(x),I._spiderLeg=x,p&&(T=x._path,H=T.getTotalLength()+.1,T.style.strokeDasharray=H,T.style.strokeDashoffset=H),I.setZIndexOffset&&I.setZIndexOffset(1e6),I.clusterHide&&I.clusterHide(),c.addLayer(I),I._setPos&&I._setPos(h);for(s._forceLayout(),s._animationStart(),S=i.length-1;S>=0;S--)q=l.layerPointToLatLng(r[S]),I=i[S],I._preSpiderfyLatlng=I._latlng,I.setLatLng(q),I.clusterShow&&I.clusterShow(),p&&(x=I._spiderLeg,T=x._path,T.style.strokeDashoffset=0,x.setStyle({opacity:_}));this.setOpacity(.3),s._ignoreMove=!1,setTimeout(function(){s._animationEnd(),s.fire("spiderfied",{cluster:o,markers:i})},200)},_animationUnspiderfy:function(i){var r=this,o=this._group,s=o._map,l=o._featureGroup,c=i?s._latLngToNewLayerPoint(this._latlng,i.zoom,i.center):s.latLngToLayerPoint(this._latlng),d=this.getAllChildMarkers(null,!0),h=L.Path.SVG,p,y,_,S,I,x;for(o._ignoreMove=!0,o._animationStart(),this.setOpacity(1),y=d.length-1;y>=0;y--)p=d[y],p._preSpiderfyLatlng&&(p.closePopup(),p.setLatLng(p._preSpiderfyLatlng),delete p._preSpiderfyLatlng,x=!0,p._setPos&&(p._setPos(c),x=!1),p.clusterHide&&(p.clusterHide(),x=!1),x&&l.removeLayer(p),h&&(_=p._spiderLeg,S=_._path,I=S.getTotalLength()+.1,S.style.strokeDashoffset=I,_.setStyle({opacity:0})));o._ignoreMove=!1,setTimeout(function(){var T=0;for(y=d.length-1;y>=0;y--)p=d[y],p._spiderLeg&&T++;for(y=d.length-1;y>=0;y--)p=d[y],p._spiderLeg&&(p.clusterShow&&p.clusterShow(),p.setZIndexOffset&&p.setZIndexOffset(0),T>1&&l.removeLayer(p),s.removeLayer(p._spiderLeg),delete p._spiderLeg);o._animationEnd(),o.fire("unspiderfied",{cluster:r,markers:d})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(i){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(i))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(i){this._spiderfied&&this._spiderfied.unspiderfy(i)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(i){i._spiderLeg&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow(),i.setZIndexOffset&&i.setZIndexOffset(0),this._map.removeLayer(i._spiderLeg),delete i._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(i){return i?i instanceof L.MarkerClusterGroup?i=i._topClusterLevel.getAllChildMarkers():i instanceof L.LayerGroup?i=i._layers:i instanceof L.MarkerCluster?i=i.getAllChildMarkers():i instanceof L.Marker&&(i=[i]):i=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(i),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(i),this},_flagParentsIconsNeedUpdate:function(i){var r,o;for(r in i)for(o=i[r].__parent;o;)o._iconNeedsUpdate=!0,o=o.__parent},_refreshSingleMarkerModeMarkers:function(i){var r,o;for(r in i)o=i[r],this.hasLayer(o)&&o.setIcon(this._overrideMarkerIcon(o))}}),L.Marker.include({refreshIconOptions:function(i,r){var o=this.options.icon;return L.setOptions(o,i),this.setIcon(o),r&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=e,n.MarkerCluster=t,Object.defineProperty(n,"__esModule",{value:!0})})});var iy;function Uf(){return iy}function rr(n){let e=iy;return iy=n,e}var Fx=Symbol("NotFound");function Ra(n){return n===Fx||n?.name==="\u0275NotFound"}function qf(n,e){return Object.is(n,e)}var Wt=null,Hf=!1,ry=1,pF=null,bn=Symbol("SIGNAL");function Re(n){let e=Wt;return Wt=n,e}function Zf(){return Wt}var os={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Oa(n){if(Hf)throw new Error("");if(Wt===null)return;Wt.consumerOnSignalRead(n);let e=Wt.nextProducerIndex++;if(Jf(Wt),e<Wt.producerNode.length&&Wt.producerNode[e]!==n&&Fc(Wt)){let t=Wt.producerNode[e];Kf(t,Wt.producerIndexOfThis[e])}Wt.producerNode[e]!==n&&(Wt.producerNode[e]=n,Wt.producerIndexOfThis[e]=Fc(Wt)?jx(n,Wt,e):0),Wt.producerLastReadVersion[e]=n.version}function Vx(){ry++}function Yf(n){if(!(Fc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ry)){if(!n.producerMustRecompute(n)&&!Vc(n)){Gf(n);return}n.producerRecomputeValue(n),Gf(n)}}function oy(n){if(n.liveConsumerNode===void 0)return;let e=Hf;Hf=!0;try{for(let t of n.liveConsumerNode)t.dirty||gF(t)}finally{Hf=e}}function sy(){return Wt?.consumerAllowSignalWrites!==!1}function gF(n){n.dirty=!0,oy(n),n.consumerMarkedDirty?.(n)}function Gf(n){n.dirty=!1,n.lastCleanEpoch=ry}function ss(n){return n&&(n.nextProducerIndex=0),Re(n)}function ka(n,e){if(Re(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Fc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Kf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Vc(n){Jf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Yf(t),i!==t.version))return!0}return!1}function Qf(n){if(Jf(n),Fc(n))for(let e=0;e<n.producerNode.length;e++)Kf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function jx(n,e,t){if(Bx(n),n.liveConsumerNode.length===0&&zx(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=jx(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Kf(n,e){if(Bx(n),n.liveConsumerNode.length===1&&zx(n))for(let i=0;i<n.producerNode.length;i++)Kf(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Jf(r),r.producerIndexOfThis[i]=e}}function Fc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Jf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Bx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function zx(n){return n.producerNode!==void 0}function Xf(n){pF?.(n)}function eh(n,e){let t=Object.create(mF);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(Yf(t),Oa(t),t.value===Lc)throw t.error;return t.value};return i[bn]=t,Xf(t),i}var $f=Symbol("UNSET"),Wf=Symbol("COMPUTING"),Lc=Symbol("ERRORED"),mF=re(W({},os),{value:$f,dirty:!0,error:null,equal:qf,kind:"computed",producerMustRecompute(n){return n.value===$f||n.value===Wf},producerRecomputeValue(n){if(n.value===Wf)throw new Error("");let e=n.value;n.value=Wf;let t=ss(n),i,r=!1;try{i=n.computation(),Re(null),r=e!==$f&&e!==Lc&&i!==Lc&&n.equal(e,i)}catch(o){i=Lc,n.error=o}finally{ka(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function _F(){throw new Error}var Ux=_F;function Hx(n){Ux(n)}function ay(n){Ux=n}var vF=null;function ly(n,e){let t=Object.create(th);t.value=n,e!==void 0&&(t.equal=e);let i=()=>$x(t);return i[bn]=t,Xf(t),[i,s=>Na(t,s),s=>cy(t,s)]}function $x(n){return Oa(n),n.value}function Na(n,e){sy()||Hx(n),n.equal(n.value,e)||(n.value=e,yF(n))}function cy(n,e){sy()||Hx(n),Na(n,e(n.value))}var th=re(W({},os),{equal:qf,value:void 0,kind:"signal"});function yF(n){n.version++,Vx(),oy(n),vF?.(n)}function Ce(n){return typeof n=="function"}function La(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var nh=La(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function as(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ce(i))try{i()}catch(o){e=o instanceof nh?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{Wx(o)}catch(s){e=e??[],s instanceof nh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new nh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&as(t,e)}remove(e){let{_finalizers:t}=this;t&&as(t,e),e instanceof n&&e._removeParent(this)}};qe.EMPTY=(()=>{let n=new qe;return n.closed=!0,n})();var uy=qe.EMPTY;function ih(n){return n instanceof qe||n&&"closed"in n&&Ce(n.remove)&&Ce(n.add)&&Ce(n.unsubscribe)}function Wx(n){Ce(n)?n():n.unsubscribe()}var Pi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fa={setTimeout(n,e,...t){let{delegate:i}=Fa;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Fa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rh(n){Fa.setTimeout(()=>{let{onUnhandledError:e}=Pi;if(e)e(n);else throw n})}function jc(){}var Gx=dy("C",void 0,void 0);function qx(n){return dy("E",void 0,n)}function Zx(n){return dy("N",n,void 0)}function dy(n,e,t){return{kind:n,value:e,error:t}}var ls=null;function Va(n){if(Pi.useDeprecatedSynchronousErrorHandling){let e=!ls;if(e&&(ls={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=ls;if(ls=null,t)throw i}}else n()}function Yx(n){Pi.useDeprecatedSynchronousErrorHandling&&ls&&(ls.errorThrown=!0,ls.error=n)}var cs=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ih(e)&&e.add(this)):this.destination=CF}static create(e,t,i){return new yo(e,t,i)}next(e){this.isStopped?hy(Zx(e),this):this._next(e)}error(e){this.isStopped?hy(qx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hy(Gx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bF=Function.prototype.bind;function fy(n,e){return bF.call(n,e)}var py=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){oh(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){oh(i)}else oh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){oh(t)}}},yo=class extends cs{constructor(e,t,i){super();let r;if(Ce(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Pi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&fy(e.next,o),error:e.error&&fy(e.error,o),complete:e.complete&&fy(e.complete,o)}):r=e}this.destination=new py(r)}};function oh(n){Pi.useDeprecatedSynchronousErrorHandling?Yx(n):rh(n)}function wF(n){throw n}function hy(n,e){let{onStoppedNotification:t}=Pi;t&&Fa.setTimeout(()=>t(n,e))}var CF={closed:!0,next:jc,error:wF,complete:jc};var ja=typeof Symbol=="function"&&Symbol.observable||"@@observable";function In(n){return n}function gy(...n){return my(n)}function my(n){return n.length===0?In:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=SF(t)?t:new yo(t,i,r);return Va(()=>{let{operator:s,source:l}=this;o.add(s?s.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Qx(i),new i((r,o)=>{let s=new yo({next:l=>{try{t(l)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ja](){return this}pipe(...t){return my(t)(this)}toPromise(t){return t=Qx(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Qx(n){var e;return(e=n??Pi.Promise)!==null&&e!==void 0?e:Promise}function EF(n){return n&&Ce(n.next)&&Ce(n.error)&&Ce(n.complete)}function SF(n){return n&&n instanceof cs||EF(n)&&ih(n)}function _y(n){return Ce(n?.lift)}function ke(n){return e=>{if(_y(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,i,r){return new vy(n,e,t,i,r)}var vy=class extends cs{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(l){try{t(l)}catch(c){e.error(c)}}:super._next,this._error=r?function(l){try{r(l)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ba(){return ke((n,e)=>{let t=null;n._refCount++;let i=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var za=class extends be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,_y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qe;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qe.EMPTY)}return e}refCount(){return Ba()(this)}};var Ua={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:i}=Ua;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);let r=e(o=>{t=void 0,n(o)});return new qe(()=>t?.(r))},requestAnimationFrame(...n){let{delegate:e}=Ua;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Ua;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var Kx=La(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=(()=>{class n extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new sh(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Kx}next(t){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Va(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?uy:(this.currentObservers=null,o.push(t),new qe(()=>{this.currentObservers=null,as(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new be;return t.source=this,t}}return n.create=(e,t)=>new sh(e,t),n})(),sh=class extends fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:uy}};var Tt=class extends fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var yy={now(){return(yy.delegate||Date).now()},delegate:void 0};var ah=class extends qe{constructor(e,t){super()}schedule(e,t=0){return this}};var Bc={setInterval(n,e,...t){let{delegate:i}=Bc;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Bc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ha=class extends ah{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Bc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Bc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,as(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var $a=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};$a.now=yy.now;var Wa=class extends $a{constructor(e,t=$a.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var us=new Wa(Ha),Jx=us;var lh=class extends Ha{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return i!==null&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Ua.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);let{actions:o}=e;t!=null&&t===e._scheduled&&((r=o[o.length-1])===null||r===void 0?void 0:r.id)!==t&&(Ua.cancelAnimationFrame(t),e._scheduled=void 0)}};var ch=class extends Wa{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}};var uh=new ch(lh);var wn=new be(n=>n.complete());function dh(n){return n&&Ce(n.schedule)}function by(n){return n[n.length-1]}function fh(n){return Ce(by(n))?n.pop():void 0}function or(n){return dh(by(n))?n.pop():void 0}function Xx(n,e){return typeof by(n)=="number"?n.pop():e}function tI(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})}function eI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ds(n){return this instanceof ds?(this.v=n,this):new ds(n)}function nI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(_){return function(S){return Promise.resolve(S).then(_,p)}}function l(_,S){i[_]&&(r[_]=function(I){return new Promise(function(x,T){o.push([_,I,x,T])>1||c(_,I)})},S&&(r[_]=S(r[_])))}function c(_,S){try{d(i[_](S))}catch(I){y(o[0][3],I)}}function d(_){_.value instanceof ds?Promise.resolve(_.value.v).then(h,p):y(o[0][2],_)}function h(_){c("next",_)}function p(_){c("throw",_)}function y(_,S){_(S),o.shift(),o.length&&c(o[0][0],o[0][1])}}function iI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eI=="function"?eI(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(l,c){s=n[o](s),r(l,c,s.done,s.value)})}}function r(o,s,l,c){Promise.resolve(c).then(function(d){o({value:d,done:l})},s)}}var hh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ph(n){return Ce(n?.then)}function gh(n){return Ce(n[ja])}function mh(n){return Symbol.asyncIterator&&Ce(n?.[Symbol.asyncIterator])}function _h(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function DF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vh=DF();function yh(n){return Ce(n?.[vh])}function bh(n){return nI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ds(t.read());if(r)return yield ds(void 0);yield yield ds(i)}}finally{t.releaseLock()}})}function wh(n){return Ce(n?.getReader)}function gt(n){if(n instanceof be)return n;if(n!=null){if(gh(n))return xF(n);if(hh(n))return IF(n);if(ph(n))return MF(n);if(mh(n))return rI(n);if(yh(n))return TF(n);if(wh(n))return PF(n)}throw _h(n)}function xF(n){return new be(e=>{let t=n[ja]();if(Ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IF(n){return new be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function MF(n){return new be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rh)})}function TF(n){return new be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function rI(n){return new be(e=>{AF(n,e).catch(t=>e.error(t))})}function PF(n){return rI(bh(n))}function AF(n,e){var t,i,r,o;return tI(this,void 0,void 0,function*(){try{for(t=iI(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Hn(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ch(n,e=0){return ke((t,i)=>{t.subscribe(Ee(i,r=>Hn(i,n,()=>i.next(r),e),()=>Hn(i,n,()=>i.complete(),e),r=>Hn(i,n,()=>i.error(r),e)))})}function Eh(n,e=0){return ke((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function oI(n,e){return gt(n).pipe(Eh(e),Ch(e))}function sI(n,e){return gt(n).pipe(Eh(e),Ch(e))}function aI(n,e){return new be(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function lI(n,e){return new be(t=>{let i;return Hn(t,e,()=>{i=n[vh](),Hn(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Ce(i?.return)&&i.return()})}function Sh(n,e){if(!n)throw new Error("Iterable cannot be null");return new be(t=>{Hn(t,e,()=>{let i=n[Symbol.asyncIterator]();Hn(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function cI(n,e){return Sh(bh(n),e)}function uI(n,e){if(n!=null){if(gh(n))return oI(n,e);if(hh(n))return aI(n,e);if(ph(n))return sI(n,e);if(mh(n))return Sh(n,e);if(yh(n))return lI(n,e);if(wh(n))return cI(n,e)}throw _h(n)}function We(n,e){return e?uI(n,e):gt(n)}function ue(...n){let e=or(n);return We(n,e)}function Ga(n,e){let t=Ce(n)?n:()=>n,i=r=>r.error(t());return new be(e?r=>e.schedule(i,0,r):i)}function Dh(n){return!!n&&(n instanceof be||Ce(n.lift)&&Ce(n.subscribe))}var Ai=La(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function qa(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new yo({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Ai)}});n.subscribe(o)})}function dI(n){return n instanceof Date&&!isNaN(n)}function Se(n,e){return ke((t,i)=>{let r=0;t.subscribe(Ee(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:RF}=Array;function OF(n,e){return RF(e)?n(...e):n(e)}function xh(n){return Se(e=>OF(n,e))}var{isArray:kF}=Array,{getPrototypeOf:NF,prototype:LF,keys:FF}=Object;function Ih(n){if(n.length===1){let e=n[0];if(kF(e))return{args:e,keys:null};if(VF(e)){let t=FF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function VF(n){return n&&typeof n=="object"&&NF(n)===LF}function Mh(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function fs(...n){let e=or(n),t=fh(n),{args:i,keys:r}=Ih(n);if(i.length===0)return We([],e);let o=new be(jF(i,e,r?s=>Mh(r,s):In));return t?o.pipe(xh(t)):o}function jF(n,e,t=In){return i=>{fI(e,()=>{let{length:r}=n,o=new Array(r),s=r,l=r;for(let c=0;c<r;c++)fI(e,()=>{let d=We(n[c],e),h=!1;d.subscribe(Ee(i,p=>{o[c]=p,h||(h=!0,l--),l||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function fI(n,e,t){n?Hn(t,n,e):e()}function hI(n,e,t,i,r,o,s,l){let c=[],d=0,h=0,p=!1,y=()=>{p&&!c.length&&!d&&e.complete()},_=I=>d<i?S(I):c.push(I),S=I=>{o&&e.next(I),d++;let x=!1;gt(t(I,h++)).subscribe(Ee(e,T=>{r?.(T),o?_(T):e.next(T)},()=>{x=!0},void 0,()=>{if(x)try{for(d--;c.length&&d<i;){let T=c.shift();s?Hn(e,s,()=>S(T)):S(T)}y()}catch(T){e.error(T)}}))};return n.subscribe(Ee(e,_,()=>{p=!0,y()})),()=>{l?.()}}function Pt(n,e,t=1/0){return Ce(e)?Pt((i,r)=>Se((o,s)=>e(i,o,r,s))(gt(n(i,r))),t):(typeof e=="number"&&(t=e),ke((i,r)=>hI(i,r,n,t)))}function sr(n=1/0){return Pt(In,n)}function pI(){return sr(1)}function Za(...n){return pI()(We(n,or(n)))}function zc(n){return new be(e=>{gt(n()).subscribe(e)})}function wy(...n){let e=fh(n),{args:t,keys:i}=Ih(n),r=new be(o=>{let{length:s}=t;if(!s){o.complete();return}let l=new Array(s),c=s,d=s;for(let h=0;h<s;h++){let p=!1;gt(t[h]).subscribe(Ee(o,y=>{p||(p=!0,d--),l[h]=y},()=>c--,void 0,()=>{(!c||!p)&&(d||o.next(i?Mh(i,l):l),o.complete())}))}});return e?r.pipe(xh(e)):r}function Th(n=0,e,t=Jx){let i=-1;return e!=null&&(dh(e)?t=e:i=e),new be(r=>{let o=dI(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Cy(n=0,e=us){return n<0&&(n=0),Th(n,n,e)}function Uc(...n){let e=or(n),t=Xx(n,1/0),i=n;return i.length?i.length===1?gt(i[0]):sr(t)(We(i,e)):wn}function tn(n,e){return ke((t,i)=>{let r=0;t.subscribe(Ee(i,o=>n.call(e,o,r++)&&i.next(o)))})}function gI(n){return ke((e,t)=>{let i=!1,r=null,o=null,s=!1,l=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let d=r;r=null,t.next(d)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(Ee(t,d=>{i=!0,r=d,o||gt(n(d)).subscribe(o=Ee(t,l,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}function Ph(n,e=us){return gI(()=>Th(n,e))}function Wr(n){return ke((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Ee(t,void 0,void 0,s=>{o=gt(n(s,Wr(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function mI(n,e,t,i,r){return(o,s)=>{let l=t,c=e,d=0;o.subscribe(Ee(s,h=>{let p=d++;c=l?n(c,h,p):(l=!0,h),i&&s.next(c)},r&&(()=>{l&&s.next(c),s.complete()})))}}function ar(n,e){return Ce(e)?Pt(n,e,1):Pt(n,1)}function Hc(n,e=us){return ke((t,i)=>{let r=null,o=null,s=null,l=()=>{if(r){r.unsubscribe(),r=null;let d=o;o=null,i.next(d)}};function c(){let d=s+n,h=e.now();if(h<d){r=this.schedule(void 0,d-h),i.add(r);return}l()}t.subscribe(Ee(i,d=>{o=d,s=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{l(),i.complete()},void 0,()=>{o=r=null}))})}function bo(n){return ke((e,t)=>{let i=!1;e.subscribe(Ee(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Ri(n){return n<=0?()=>wn:ke((e,t)=>{let i=0;e.subscribe(Ee(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Ya(n,e=In){return n=n??BF,ke((t,i)=>{let r,o=!0;t.subscribe(Ee(i,s=>{let l=e(s);(o||!n(r,l))&&(o=!1,r=l,i.next(s))}))})}function BF(n,e){return n===e}function Ah(n=zF){return ke((e,t)=>{let i=!1;e.subscribe(Ee(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function zF(){return new Ai}function wo(n){return ke((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gr(n,e){let t=arguments.length>=2;return i=>i.pipe(n?tn((r,o)=>n(r,o,i)):In,Ri(1),t?bo(e):Ah(()=>new Ai))}function Qa(n){return n<=0?()=>wn:ke((e,t)=>{let i=[];e.subscribe(Ee(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Ey(n,e){let t=arguments.length>=2;return i=>i.pipe(n?tn((r,o)=>n(r,o,i)):In,Qa(1),t?bo(e):Ah(()=>new Ai))}function Sy(n,e){return ke(mI(n,e,arguments.length>=2,!0))}function Oi(...n){let e=or(n);return ke((t,i)=>{(e?Za(n,t,e):Za(n,t)).subscribe(i)})}function nn(n,e){return ke((t,i)=>{let r=null,o=0,s=!1,l=()=>s&&!r&&i.complete();t.subscribe(Ee(i,c=>{r?.unsubscribe();let d=0,h=o++;gt(n(c,h)).subscribe(r=Ee(i,p=>i.next(e?e(c,p,h,d++):p),()=>{r=null,l()}))},()=>{s=!0,l()}))})}function Mn(n){return ke((e,t)=>{gt(n).subscribe(Ee(t,()=>t.complete(),jc)),!t.closed&&e.subscribe(t)})}function Bt(n,e,t){let i=Ce(n)||e||t?{next:n,error:e,complete:t}:n;return i?ke((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let l=!0;r.subscribe(Ee(o,c=>{var d;(d=i.next)===null||d===void 0||d.call(i,c),o.next(c)},()=>{var c;l=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var d;l=!1,(d=i.error)===null||d===void 0||d.call(i,c),o.error(c)},()=>{var c,d;l&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(d=i.finalize)===null||d===void 0||d.call(i)}))}):In}function _I(n){let e=Re(null);try{return n()}finally{Re(e)}}var Lh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",X=class extends Error{code;constructor(e,t){super(So(e,t)),this.code=e}};function UF(n){return`NG0${Math.abs(n)}`}function So(n,e){return`${UF(n)}${e?": "+e:""}`}var Qr=globalThis;function Ye(n){for(let e in n)if(n[e]===Ye)return e;throw Error("")}function bI(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Zr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Zr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function Fh(n,e){return n?e?`${n} ${e}`:n:e||""}var HF=Ye({__forward_ref__:Ye});function mt(n){return n.__forward_ref__=mt,n.toString=function(){return Zr(this())},n}function un(n){return Fy(n)?n():n}function Fy(n){return typeof n=="function"&&n.hasOwnProperty(HF)&&n.__forward_ref__===mt}function wI(n,e){n==null&&Vy(e,n,null,"!=")}function Vy(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zc(n){return $F(n,Vh)}function jy(n){return Zc(n)!==null}function $F(n,e){return n.hasOwnProperty(e)&&n[e]||null}function WF(n){let e=n?.[Vh]??null;return e||null}function xy(n){return n&&n.hasOwnProperty(Oh)?n[Oh]:null}var Vh=Ye({\u0275prov:Ye}),Oh=Ye({\u0275inj:Ye}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function By(n){return n&&!!n.\u0275providers}var zy=Ye({\u0275cmp:Ye}),Uy=Ye({\u0275dir:Ye}),Hy=Ye({\u0275pipe:Ye}),$y=Ye({\u0275mod:Ye}),Gc=Ye({\u0275fac:Ye}),_s=Ye({__NG_ELEMENT_ID__:Ye}),vI=Ye({__NG_ENV_ID__:Ye});function vs(n){return typeof n=="string"?n:n==null?"":String(n)}function kh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vs(n)}var Wy=Ye({ngErrorCode:Ye}),CI=Ye({ngErrorMessage:Ye}),Wc=Ye({ngTokenPath:Ye});function Gy(n,e){return EI("",-200,e)}function jh(n,e){throw new X(-201,!1)}function GF(n,e){n[Wc]??=[];let t=n[Wc],i;typeof e=="object"&&"multi"in e&&e?.multi===!0?(wI(e.provide,"Token with multi: true should have a provide property"),i=kh(e.provide)):i=kh(e),t[0]!==i&&n[Wc].unshift(i)}function qF(n,e){let t=n[Wc],i=n[Wy],r=n[CI]||n.message;return n.message=YF(r,i,t,e),n}function EI(n,e,t){let i=new X(e,n);return i[Wy]=e,i[CI]=n,t&&(i[Wc]=t),i}function ZF(n){return n[Wy]}function YF(n,e,t=[],i=null){let r="";t&&t.length>1&&(r=` Path: ${t.join(" -> ")}.`);let o=i?` Source: ${i}.`:"";return So(e,`${n}${o}${r}`)}var Iy;function SI(){return Iy}function Tn(n){let e=Iy;return Iy=n,e}function qy(n,e,t){let i=Zc(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;jh(n,"Injector")}var QF={},hs=QF,My="__NG_DI_FLAG__",Ty=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=ps(t)||0;try{return this.injector.get(e,i&8?null:hs,i)}catch(r){if(Ra(r))return r;throw r}}};function KF(n,e=0){let t=Uf();if(t===void 0)throw new X(-203,!1);if(t===null)return qy(n,void 0,e);{let i=JF(e),r=t.retrieve(n,i);if(Ra(r)){if(i.optional)return null;throw r}return r}}function ne(n,e=0){return(SI()||KF)(un(n),e)}function R(n,e){return ne(n,ps(e))}function ps(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function JF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Py(n){let e=[];for(let t=0;t<n.length;t++){let i=un(n[t]);if(Array.isArray(i)){if(i.length===0)throw new X(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let l=i[s],c=XF(l);typeof c=="number"?c===-1?r=l.token:o|=c:r=l}e.push(ne(r,o))}else e.push(ne(i))}return e}function Zy(n,e){return n[My]=e,n.prototype[My]=e,n}function XF(n){return n[My]}function Co(n,e){let t=n.hasOwnProperty(Gc);return t?n[Gc]:null}function DI(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function xI(n){return n.flat(Number.POSITIVE_INFINITY)}function Bh(n,e){n.forEach(t=>Array.isArray(t)?Bh(t,e):e(t))}function Yy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function II(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function MI(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function zh(n,e,t){let i=Ja(n,e);return i>=0?n[i|1]=t:(i=~i,MI(n,i,e,t)),i}function Uh(n,e){let t=Ja(n,e);if(t>=0)return n[t|1]}function Ja(n,e){return eV(n,e,1)}function eV(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var Do={},Pn=[],Kr=new J(""),Qy=new J("",-1),Ky=new J(""),qc=class{get(e,t=hs){if(t===hs){let r=EI("",-201);throw r.name="\u0275NotFound",r}return t}};function Jy(n){return n[$y]||null}function lr(n){return n[zy]||null}function Xy(n){return n[Uy]||null}function TI(n){return n[Hy]||null}function cr(n){return{\u0275providers:n}}function PI(n){return cr([{provide:Kr,multi:!0,useValue:n}])}function AI(...n){return{\u0275providers:e0(!0,n),\u0275fromNgModule:!0}}function e0(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return Bh(e,s=>{let l=s;Nh(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&RI(r,o),t}function RI(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];t0(r,o=>{e(o,i)})}}function Nh(n,e,t,i){if(n=un(n),!n)return!1;let r=null,o=xy(n),s=!o&&lr(n);if(!o&&!s){let c=n.ngModule;if(o=xy(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let l=i.has(r);if(s){if(l)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)Nh(d,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let d;try{Bh(o.imports,h=>{Nh(h,e,t,i)&&(d||=[],d.push(h))})}finally{}d!==void 0&&RI(d,e)}if(!l){let d=Co(r)||(()=>new r);e({provide:r,useFactory:d,deps:Pn},r),e({provide:Ky,useValue:r,multi:!0},r),e({provide:Kr,useValue:()=>ne(r),multi:!0},r)}let c=o.providers;if(c!=null&&!l){let d=n;t0(c,h=>{e(h,d)})}}else return!1;return r!==n&&n.providers!==void 0}function t0(n,e){for(let t of n)By(t)&&(t=t.\u0275providers),Array.isArray(t)?t0(t,e):e(t)}var tV=Ye({provide:String,useValue:Ye});function OI(n){return n!==null&&typeof n=="object"&&tV in n}function nV(n){return!!(n&&n.useExisting)}function iV(n){return!!(n&&n.useFactory)}function gs(n){return typeof n=="function"}function kI(n){return!!n.useClass}var Qc=new J(""),Rh={},yI={},Dy;function Xa(){return Dy===void 0&&(Dy=new qc),Dy}var Ct=class{},ms=class extends Ct{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Ry(e,s=>this.processProvider(s)),this.records.set(Qy,Ka(void 0,this)),r.has("environment")&&this.records.set(Ct,Ka(void 0,this));let o=this.records.get(Qc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ky,Pn,{self:!0}))}retrieve(e,t){let i=ps(t)||0;try{return this.get(e,hs,i)}catch(r){if(Ra(r))return r;throw r}}destroy(){$c(this),this._destroyed=!0;let e=Re(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return $c(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){$c(this);let t=rr(this),i=Tn(void 0),r;try{return e()}finally{rr(t),Tn(i)}}get(e,t=hs,i){if($c(this),e.hasOwnProperty(vI))return e[vI](this);let r=ps(i),o,s=rr(this),l=Tn(void 0);try{if(!(r&4)){let d=this.records.get(e);if(d===void 0){let h=lV(e)&&Zc(e);h&&this.injectableDefInScope(h)?d=Ka(Ay(e),Rh):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,r)}let c=r&2?Xa():this.parent;return t=r&8&&t===hs?null:t,c.get(e,t)}catch(c){let d=ZF(c);throw d===-200||d===-201?new X(d,null):c}finally{Tn(l),rr(s)}}resolveInjectorInitializers(){let e=Re(null),t=rr(this),i=Tn(void 0),r;try{let o=this.get(Kr,Pn,{self:!0});for(let s of o)s()}finally{rr(t),Tn(i),Re(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Zr(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=un(e);let t=gs(e)?e:un(e&&e.provide),i=oV(e);if(!gs(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Ka(void 0,Rh,!0),r.factory=()=>Py(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=Re(null);try{if(t.value===yI)throw Gy(Zr(e));return t.value===Rh&&(t.value=yI,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&aV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=un(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ay(n){let e=Zc(n),t=e!==null?e.factory:Co(n);if(t!==null)return t;if(n instanceof J)throw new X(204,!1);if(n instanceof Function)return rV(n);throw new X(204,!1)}function rV(n){if(n.length>0)throw new X(204,!1);let t=WF(n);return t!==null?()=>t.factory(n):()=>new n}function oV(n){if(OI(n))return Ka(void 0,n.useValue);{let e=n0(n);return Ka(e,Rh)}}function n0(n,e,t){let i;if(gs(n)){let r=un(n);return Co(r)||Ay(r)}else if(OI(n))i=()=>un(n.useValue);else if(iV(n))i=()=>n.useFactory(...Py(n.deps||[]));else if(nV(n))i=(r,o)=>ne(un(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=un(n&&(n.useClass||n.provide));if(sV(n))i=()=>new r(...Py(n.deps));else return Co(r)||Ay(r)}return i}function $c(n){if(n.destroyed)throw new X(205,!1)}function Ka(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function sV(n){return!!n.deps}function aV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lV(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Ry(n,e){for(let t of n)Array.isArray(t)?Ry(t,e):t&&By(t)?Ry(t.\u0275providers,e):e(t)}function on(n,e){let t;n instanceof ms?($c(n),t=n):t=new Ty(n);let i,r=rr(t),o=Tn(void 0);try{return e()}finally{rr(r),Tn(o)}}function NI(){return SI()!==void 0||Uf()!=null}var Ni=0,me=1,_e=2,rn=3,pi=4,An=5,el=6,tl=7,Cn=8,ys=9,ur=10,ct=11,nl=12,i0=13,bs=14,$n=15,xo=16,ws=17,dr=18,Kc=19,r0=20,qr=21,Hh=22,Jc=23,ei=24,Cs=25,At=26,LI=1;var Io=7,Xc=8,Es=9,Rn=10;function fr(n){return Array.isArray(n)&&typeof n[LI]=="object"}function Li(n){return Array.isArray(n)&&n[LI]===!0}function o0(n){return(n.flags&4)!==0}function Mo(n){return n.componentOffset>-1}function il(n){return(n.flags&1)===1}function hr(n){return!!n.template}function rl(n){return(n[_e]&512)!==0}function Ss(n){return(n[_e]&256)===256}var s0="svg",FI="math";function gi(n){for(;Array.isArray(n);)n=n[Ni];return n}function a0(n,e){return gi(e[n])}function Fi(n,e){return gi(e[n.index])}function $h(n,e){return n.data[e]}function l0(n,e){return n[e]}function c0(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function mi(n,e){let t=e[n];return fr(t)?t:t[Ni]}function VI(n){return(n[_e]&4)===4}function Wh(n){return(n[_e]&128)===128}function jI(n){return Li(n[rn])}function To(n,e){return e==null?null:n[e]}function u0(n){n[ws]=0}function d0(n){n[_e]&1024||(n[_e]|=1024,Wh(n)&&ol(n))}function BI(n,e){for(;n>0;)e=e[bs],n--;return e}function eu(n){return!!(n[_e]&9216||n[ei]?.dirty)}function Gh(n){n[ur].changeDetectionScheduler?.notify(8),n[_e]&64&&(n[_e]|=1024),eu(n)&&ol(n)}function ol(n){n[ur].changeDetectionScheduler?.notify(0);let e=Eo(n);for(;e!==null&&!(e[_e]&8192||(e[_e]|=8192,!Wh(e)));)e=Eo(e)}function f0(n,e){if(Ss(n))throw new X(911,!1);n[qr]===null&&(n[qr]=[]),n[qr].push(e)}function zI(n,e){if(n[qr]===null)return;let t=n[qr].indexOf(e);t!==-1&&n[qr].splice(t,1)}function Eo(n){let e=n[rn];return Li(e)?e[rn]:e}function h0(n){return n[tl]??=[]}function p0(n){return n.cleanup??=[]}function UI(n,e,t,i){let r=h0(e);r.push(t),n.firstCreatePass&&p0(n).push(i,r.length-1)}var Te={lFrame:eM(null),bindingsEnabled:!0,skipHydrationRootTNode:null},tu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(tu||{}),cV=0,Oy=!1;function HI(){return Te.lFrame.elementDepthCount}function $I(){Te.lFrame.elementDepthCount++}function g0(){Te.lFrame.elementDepthCount--}function qh(){return Te.bindingsEnabled}function m0(){return Te.skipHydrationRootTNode!==null}function _0(n){return Te.skipHydrationRootTNode===n}function v0(){Te.skipHydrationRootTNode=null}function De(){return Te.lFrame.lView}function Ut(){return Te.lFrame.tView}function k(n){return Te.lFrame.contextLView=n,n[Cn]}function N(n){return Te.lFrame.contextLView=null,n}function qt(){let n=y0();for(;n!==null&&n.type===64;)n=n.parent;return n}function y0(){return Te.lFrame.currentTNode}function WI(){let n=Te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function sl(n,e){let t=Te.lFrame;t.currentTNode=n,t.isParent=e}function b0(){return Te.lFrame.isParent}function w0(){Te.lFrame.isParent=!1}function GI(){return Te.lFrame.contextLView}function C0(n){Vy("Must never be called in production mode"),cV=n}function E0(){return Oy}function S0(n){let e=Oy;return Oy=n,e}function Zh(){let n=Te.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qI(){return Te.lFrame.bindingIndex}function ZI(n){return Te.lFrame.bindingIndex=n}function nu(){return Te.lFrame.bindingIndex++}function Yh(n){let e=Te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function YI(){return Te.lFrame.inI18n}function QI(n,e){let t=Te.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qh(e)}function KI(){return Te.lFrame.currentDirectiveIndex}function Qh(n){Te.lFrame.currentDirectiveIndex=n}function JI(n){let e=Te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function D0(){return Te.lFrame.currentQueryIndex}function Kh(n){Te.lFrame.currentQueryIndex=n}function uV(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[An]:null}function x0(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=uV(o),r===null||(o=o[bs],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Te.lFrame=XI();return i.currentTNode=e,i.lView=n,!0}function Jh(n){let e=XI(),t=n[me];Te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function XI(){let n=Te.lFrame,e=n===null?null:n.child;return e===null?eM(n):e}function eM(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function tM(){let n=Te.lFrame;return Te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var I0=tM;function Xh(){let n=tM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nM(n){return(Te.lFrame.contextLView=BI(n,Te.lFrame.contextLView))[Cn]}function Jr(){return Te.lFrame.selectedIndex}function Po(n){Te.lFrame.selectedIndex=n}function ep(){let n=Te.lFrame;return $h(n.tView,n.selectedIndex)}function pr(){Te.lFrame.currentNamespace=s0}function gr(){dV()}function dV(){Te.lFrame.currentNamespace=null}function iM(){return Te.lFrame.currentNamespace}var rM=!0;function tp(){return rM}function iu(n){rM=n}function ky(n,e=null,t=null,i){let r=M0(n,e,t,i);return r.resolveInjectorInitializers(),r}function M0(n,e=null,t=null,i,r=new Set){let o=[t||Pn,AI(n)];return i=i||(typeof n=="object"?void 0:Zr(n)),new ms(o,e||Xa(),i||null,r)}var Gt=class n{static THROW_IF_NOT_FOUND=hs;static NULL=new qc;static create(e,t){if(Array.isArray(e))return ky({name:""},t,e,"");{let i=e.name??"";return ky({name:i},e.parent,e.providers,i)}}static \u0275prov=Z({token:n,providedIn:"any",factory:()=>ne(Qy)});static __NG_ELEMENT_ID__=-1},Qe=new J(""),ti=(()=>{class n{static __NG_ELEMENT_ID__=fV;static __NG_ENV_ID__=t=>t}return n})(),Ny=class extends ti{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ss(this._lView)}onDestroy(e){let t=this._lView;return f0(t,e),()=>zI(t,e)}};function fV(){return new Ny(De())}var ki=class{_console=console;handleError(e){this._console.error("ERROR",e)}},On=new J("",{providedIn:"root",factory:()=>{let n=R(Ct),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ki),e.handleError(t))}}}),oM={provide:Kr,useValue:()=>void R(ki),multi:!0},hV=new J("",{providedIn:"root",factory:()=>{let n=R(Qe).defaultView;if(!n)return;let e=R(On),t=o=>{e(o.reason),o.preventDefault()},i=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),R(ti).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function T0(){return cr([PI(()=>void R(hV))])}function P0(n){return typeof n=="function"&&n[bn]!==void 0}function En(n,e){let[t,i,r]=ly(n,e?.equal),o=t,s=o[bn];return o.set=i,o.update=r,o.asReadonly=sM.bind(o),o}function sM(){let n=this[bn];if(n.readonlyFn===void 0){let e=()=>this();e[bn]=n,n.readonlyFn=e}return n.readonlyFn}function A0(n){return P0(n)&&typeof n.set=="function"}var Yr=class{},ru=new J("",{providedIn:"root",factory:()=>!1});var R0=new J(""),O0=new J("");var np=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=pV}return n})();function pV(){return new np(De(),qt())}var mr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Tt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new be(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),ou=(()=>{class n{internalPendingTasks=R(mr);scheduler=R(Yr);errorHandler=R(On);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})();function su(...n){}var k0=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new Ly})}return n})(),Ly=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function fl(n){return{toString:n}.toString()}var ip="__parameters__";function bV(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function kM(n,e,t){return fl(()=>{let i=bV(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return l.annotation=s,l;function l(c,d,h){let p=c.hasOwnProperty(ip)?c[ip]:Object.defineProperty(c,ip,{value:[]})[ip];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Tp=Zy(kM("Optional"),8);var yb=Zy(kM("SkipSelf"),4);function wV(n){return typeof n=="function"}var up=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function NM(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var sn=(()=>{let n=()=>LM;return n.ngInherit=!0,n})();function LM(n){return n.type.prototype.ngOnChanges&&(n.setInput=EV),CV}function CV(){let n=VM(this),e=n?.current;if(e){let t=n.previous;if(t===Do)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function EV(n,e,t,i,r){let o=this.declaredInputs[i],s=VM(n)||SV(n,{previous:Do,current:null}),l=s.current||(s.current={}),c=s.previous,d=c[o];l[o]=new up(d&&d.currentValue,t,c===Do),NM(n,e,r,t)}var FM="__ngSimpleChanges__";function VM(n){return n[FM]||null}function SV(n,e){return n[FM]=e}var aM=[];var Ke=function(n,e=null,t){for(let i=0;i<aM.length;i++){let r=aM[i];r(n,e,t)}};function DV(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=LM(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function jM(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function sp(n,e,t){BM(n,e,3,t)}function ap(n,e,t,i){(n[_e]&3)===t&&BM(n,e,t,i)}function N0(n,e){let t=n[_e];(t&3)===e&&(t&=16383,t+=1,n[_e]=t)}function BM(n,e,t,i){let r=i!==void 0?n[ws]&65535:0,o=i??-1,s=e.length-1,l=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(l=e[c],i!=null&&l>=i)break}else e[c]<0&&(n[ws]+=65536),(l<o||o==-1)&&(xV(n,t,e,c),n[ws]=(n[ws]&4294901760)+c+2),c++}function lM(n,e){Ke(4,n,e);let t=Re(null);try{e.call(n)}finally{Re(t),Ke(5,n,e)}}function xV(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],l=n[s];r?n[_e]>>14<n[ws]>>16&&(n[_e]&3)===e&&(n[_e]+=16384,lM(l,o)):lM(l,o)}var ll=-1,Is=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function IV(n){return(n.flags&8)!==0}function MV(n){return(n.flags&16)!==0}function TV(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],l=t[i++];n.setAttribute(e,s,l,o)}else{let o=r,s=t[++i];PV(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function zM(n){return n===3||n===4||n===6}function PV(n){return n.charCodeAt(0)===64}function cl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?cM(n,t,r,null,e[++i]):cM(n,t,r,null,null))}}return n}function cM(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){s=-1;break}else if(l>e){s=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function UM(n){return n!==ll}function dp(n){return n&32767}function AV(n){return n>>16}function fp(n,e){let t=AV(n),i=e;for(;t>0;)i=i[bs],t--;return i}var G0=!0;function hp(n){let e=G0;return G0=n,e}var RV=256,HM=RV-1,$M=5,OV=0,_r={};function kV(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(_s)&&(i=t[_s]),i==null&&(i=t[_s]=OV++);let r=i&HM,o=1<<r;e.data[n+(r>>$M)]|=o}function pp(n,e){let t=WM(n,e);if(t!==-1)return t;let i=e[me];i.firstCreatePass&&(n.injectorIndex=e.length,L0(i.data,n),L0(e,null),L0(i.blueprint,null));let r=bb(n,e),o=n.injectorIndex;if(UM(r)){let s=dp(r),l=fp(r,e),c=l[me].data;for(let d=0;d<8;d++)e[o+d]=l[s+d]|c[s+d]}return e[o+8]=r,o}function L0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function WM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function bb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=QM(r),i===null)return ll;if(t++,r=r[bs],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return ll}function q0(n,e,t){kV(n,e,t)}function NV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(zM(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function GM(n,e,t){if(t&8||n!==void 0)return n;jh(e,"NodeInjector")}function qM(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[ys],o=Tn(void 0);try{return r?r.get(e,i,t&8):qy(e,i,t&8)}finally{Tn(o)}}return GM(i,e,t)}function ZM(n,e,t,i=0,r){if(n!==null){if(e[_e]&2048&&!(i&2)){let s=jV(n,e,t,i,_r);if(s!==_r)return s}let o=YM(n,e,t,i,_r);if(o!==_r)return o}return qM(e,t,i,r)}function YM(n,e,t,i,r){let o=FV(t);if(typeof o=="function"){if(!x0(e,n,i))return i&1?GM(r,t,i):qM(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))jh(t);else return s}finally{I0()}}else if(typeof o=="number"){let s=null,l=WM(n,e),c=ll,d=i&1?e[$n][An]:null;for((l===-1||i&4)&&(c=l===-1?bb(n,e):e[l+8],c===ll||!dM(i,!1)?l=-1:(s=e[me],l=dp(c),e=fp(c,e)));l!==-1;){let h=e[me];if(uM(o,l,h.data)){let p=LV(l,e,t,s,i,d);if(p!==_r)return p}c=e[l+8],c!==ll&&dM(i,e[me].data[l+8]===d)&&uM(o,l,e)?(s=h,l=dp(c),e=fp(c,e)):l=-1}}return r}function LV(n,e,t,i,r,o){let s=e[me],l=s.data[n+8],c=i==null?Mo(l)&&G0:i!=s&&(l.type&3)!==0,d=r&1&&o===l,h=lp(l,s,t,c,d);return h!==null?cu(e,s,h,l,r):_r}function lp(n,e,t,i,r){let o=n.providerIndexes,s=e.data,l=o&1048575,c=n.directiveStart,d=n.directiveEnd,h=o>>20,p=i?l:l+h,y=r?l+h:d;for(let _=p;_<y;_++){let S=s[_];if(_<c&&t===S||_>=c&&S.type===t)return _}if(r){let _=s[c];if(_&&hr(_)&&_.type===t)return c}return null}function cu(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof Is){let l=o;if(l.resolving){let _=kh(s[t]);throw Gy(_)}let c=hp(l.canSeeViewProviders);l.resolving=!0;let d=s[t].type||s[t],h,p=l.injectImpl?Tn(l.injectImpl):null,y=x0(n,i,0);try{o=n[t]=l.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&DV(t,s[t],e)}finally{p!==null&&Tn(p),hp(c),l.resolving=!1,I0()}}return o}function FV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_s)?n[_s]:void 0;return typeof e=="number"?e>=0?e&HM:VV:e}function uM(n,e,t){let i=1<<n;return!!(t[e+(n>>$M)]&i)}function dM(n,e){return!(n&2)&&!(n&1&&e)}var xs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return ZM(this._tNode,this._lView,e,ps(i),t)}};function VV(){return new xs(qt(),De())}function an(n){return fl(()=>{let e=n.prototype.constructor,t=e[Gc]||Z0(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Gc]||Z0(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Z0(n){return Fy(n)?()=>{let e=Z0(un(n));return e&&e()}:Co(n)}function jV(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[_e]&2048&&!rl(s);){let l=YM(o,s,t,i|2,_r);if(l!==_r)return l;let c=o.parent;if(!c){let d=s[r0];if(d){let h=d.get(t,_r,i);if(h!==_r)return h}c=QM(s),s=s[bs]}o=c}return r}function QM(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[An]:null}function hu(n){return NV(qt(),n)}function BV(){return hl(qt(),De())}function hl(n,e){return new Xe(Fi(n,e))}var Xe=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=BV}return n})();function zV(n){return n instanceof Xe?n.nativeElement:n}function UV(){return this._results[Symbol.iterator]()}var gp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new fe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=xI(e);(this._changesDetected=!DI(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=UV};function KM(n){return(n.flags&128)===128}var wb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wb||{}),JM=new Map,HV=0;function $V(){return HV++}function WV(n){JM.set(n[Kc],n)}function Y0(n){JM.delete(n[Kc])}var fM="__ngContext__";function ul(n,e){fr(e)?(n[fM]=e[Kc],WV(e)):n[fM]=e}function XM(n){return tT(n[nl])}function eT(n){return tT(n[pi])}function tT(n){for(;n!==null&&!Li(n);)n=n[pi];return n}var Q0;function Cb(n){Q0=n}function nT(){if(Q0!==void 0)return Q0;if(typeof document<"u")return document;throw new X(210,!1)}var pl=new J("",{providedIn:"root",factory:()=>GV}),GV="ng",Pp=new J(""),Oo=new J("",{providedIn:"platform",factory:()=>"unknown"});var Ap=new J("",{providedIn:"root",factory:()=>nT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qV="h",ZV="b";var iT=!1,rT=new J("",{providedIn:"root",factory:()=>iT});var YV=(n,e,t,i)=>{};function QV(n,e,t,i){YV(n,e,t,i)}function Rp(n){return(n.flags&32)===32}var KV=()=>null;function oT(n,e,t=!1){return KV(n,e,t)}function sT(n,e){let t=n.contentQueries;if(t!==null){let i=Re(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let l=n.data[s];Kh(o),l.contentQueries(2,e[s],s)}}}finally{Re(i)}}}function K0(n,e,t){Kh(0);let i=Re(null);try{e(n,t)}finally{Re(i)}}function Eb(n,e,t){if(o0(e)){let i=Re(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let l=n.data[s];if(l.contentQueries){let c=t[s];l.contentQueries(1,c,s)}}}finally{Re(i)}}}var Xr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xr||{});var rp;function JV(){if(rp===void 0&&(rp=null,Qr.trustedTypes))try{rp=Qr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rp}function hM(n){return JV()?.createScriptURL(n)||n}var mp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lh})`}};function gl(n){return n instanceof mp?n.changingThisBreaksApplicationSecurity:n}function Sb(n,e){let t=aT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Lh})`)}return t===e}function aT(n){return n instanceof mp&&n.getTypeName()||null}var XV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function lT(n){return n=String(n),n.match(XV)?n:"unsafe:"+n}var Op=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Op||{});function _t(n){let e=uT();return e?e.sanitize(Op.URL,n)||"":Sb(n,"URL")?gl(n):lT(vs(n))}function cT(n){let e=uT();if(e)return hM(e.sanitize(Op.RESOURCE_URL,n)||"");if(Sb(n,"ResourceURL"))return hM(gl(n));throw new X(904,!1)}function ej(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?cT:_t}function Db(n,e,t){return ej(e,t)(n)}function uT(){let n=De();return n&&n[ur].sanitizer}var tj=/^>|^->|<!--|-->|--!>|<!-$/g,nj=/(<|>)/g,ij="\u200B$1\u200B";function rj(n){return n.replace(tj,e=>e.replace(nj,ij))}function dT(n){return n instanceof Function?n():n}function oj(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var fT="ng-template";function sj(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&oj(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(xb(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function xb(n){return n.type===4&&n.value!==fT}function aj(n,e,t){let i=n.type===4&&!t?fT:n.value;return e===i}function lj(n,e,t){let i=4,r=n.attrs,o=r!==null?dj(r):0,s=!1;for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="number"){if(!s&&!Vi(i)&&!Vi(c))return!1;if(s&&Vi(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!aj(n,c,t)||c===""&&e.length===1){if(Vi(i))return!1;s=!0}}else if(i&8){if(r===null||!sj(n,r,c,t)){if(Vi(i))return!1;s=!0}}else{let d=e[++l],h=cj(c,r,xb(n),t);if(h===-1){if(Vi(i))return!1;s=!0;continue}if(d!==""){let p;if(h>o?p="":p=r[h+1].toLowerCase(),i&2&&d!==p){if(Vi(i))return!1;s=!0}}}}return Vi(i)||s}function Vi(n){return(n&1)===0}function cj(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return fj(e,n)}function hT(n,e,t=!1){for(let i=0;i<e.length;i++)if(lj(n,e[i],t))return!0;return!1}function uj(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function dj(n){for(let e=0;e<n.length;e++){let t=n[e];if(zM(t))return e}return n.length}function fj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function hj(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function pM(n,e){return n?":not("+e.trim()+")":e}function pj(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let l=n[++t];r+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Vi(s)&&(e+=pM(o,r),r=""),i=s,o=o||!Vi(i);t++}return r!==""&&(e+=pM(o,r)),e}function gj(n){return n.map(pj).join(",")}function mj(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Vi(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Wn={};function _j(n,e){return n.createText(e)}function vj(n,e,t){n.setValue(e,t)}function yj(n,e){return n.createComment(rj(e))}function pT(n,e,t){return n.createElement(e,t)}function _p(n,e,t,i,r){n.insertBefore(e,t,i,r)}function gT(n,e,t){n.appendChild(e,t)}function gM(n,e,t,i,r){i!==null?_p(n,e,t,i,r):gT(n,e,t)}function bj(n,e,t){n.removeChild(null,e,t)}function wj(n,e,t){n.setAttribute(e,"style",t)}function Cj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mT(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&TV(n,e,i),r!==null&&Cj(n,e,r),o!==null&&wj(n,e,o)}function Ib(n,e,t,i,r,o,s,l,c,d,h){let p=At+i,y=p+r,_=Ej(p,y),S=typeof d=="function"?d():d;return _[me]={type:n,blueprint:_,template:t,queries:null,viewQuery:l,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:h}}function Ej(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Wn);return t}function Sj(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ib(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Mb(n,e,t,i,r,o,s,l,c,d,h){let p=e.blueprint.slice();return p[Ni]=r,p[_e]=i|4|128|8|64|1024,(d!==null||n&&n[_e]&2048)&&(p[_e]|=2048),u0(p),p[rn]=p[bs]=n,p[Cn]=t,p[ur]=s||n&&n[ur],p[ct]=l||n&&n[ct],p[ys]=c||n&&n[ys]||null,p[An]=o,p[Kc]=$V(),p[el]=h,p[r0]=d,p[$n]=e.type==2?n[$n]:p,p}function Dj(n,e,t){let i=Fi(e,n),r=Sj(t),o=n[ur].rendererFactory,s=Tb(n,Mb(n,r,null,_T(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function _T(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function vT(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Tb(n,e){return n[nl]?n[i0][pi]=e:n[nl]=e,n[i0]=e,e}function C(n=1){yT(Ut(),De(),Jr()+n,!1)}function yT(n,e,t,i){if(!i)if((e[_e]&3)===3){let o=n.preOrderCheckHooks;o!==null&&sp(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ap(e,o,0,t)}Po(t)}var kp=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(kp||{});function J0(n,e,t,i){let r=Re(null);try{let[o,s,l]=n.inputs[t],c=null;(s&kp.SignalBased)!==0&&(c=e[o][bn]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):l!==null&&(i=l.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,o):NM(e,c,o,i)}finally{Re(r)}}var Bi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Bi||{}),xj;function Pb(n,e){return xj(n,e)}function al(n,e,t,i,r){if(i!=null){let o,s=!1;Li(i)?o=i:fr(i)&&(s=!0,i=i[Ni]);let l=gi(i);n===0&&t!==null?r==null?gT(e,t,l):_p(e,t,l,r||null,!0):n===1&&t!==null?_p(e,t,l,r||null,!0):n===2?bj(e,l,s):n===3&&e.destroyNode(l),o!=null&&Lj(e,n,o,t,r)}}function Ij(n,e){bT(n,e),e[Ni]=null,e[An]=null}function Mj(n,e,t,i,r,o){i[Ni]=r,i[An]=e,Np(n,i,t,1,r,o)}function bT(n,e){e[ur].changeDetectionScheduler?.notify(9),Np(n,e,e[ct],2,null,null)}function Tj(n){let e=n[nl];if(!e)return F0(n[me],n);for(;e;){let t=null;if(fr(e))t=e[nl];else{let i=e[Rn];i&&(t=i)}if(!t){for(;e&&!e[pi]&&e!==n;)fr(e)&&F0(e[me],e),e=e[rn];e===null&&(e=n),fr(e)&&F0(e[me],e),t=e&&e[pi]}e=t}}function Ab(n,e){let t=n[Es],i=t.indexOf(e);t.splice(i,1)}function wT(n,e){if(Ss(e))return;let t=e[ct];t.destroyNode&&Np(n,e,t,3,null,null),Tj(e)}function F0(n,e){if(Ss(e))return;let t=Re(null);try{e[_e]&=-129,e[_e]|=256,e[ei]&&Qf(e[ei]),Aj(n,e),Pj(n,e),e[me].type===1&&e[ct].destroy();let i=e[xo];if(i!==null&&Li(e[rn])){i!==e[rn]&&Ab(i,e);let r=e[dr];r!==null&&r.detachView(n)}Y0(e)}finally{Re(t)}}function Pj(n,e){let t=n.cleanup,i=e[tl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let l=t[s+3];l>=0?i[l]():i[-l].unsubscribe(),s+=2}else{let l=i[t[s+1]];t[s].call(l)}i!==null&&(e[tl]=null);let r=e[qr];if(r!==null){e[qr]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}let o=e[Jc];if(o!==null){e[Jc]=null;for(let s of o)s.destroy()}}function Aj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Is)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let l=r[o[s]],c=o[s+1];Ke(4,l,c);try{c.call(l)}finally{Ke(5,l,c)}}else{Ke(4,r,o);try{o.call(r)}finally{Ke(5,r,o)}}}}}function CT(n,e,t){return Rj(n,e.parent,t)}function Rj(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Ni];if(Mo(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Xr.None||r===Xr.Emulated)return null}return Fi(i,t)}function ET(n,e,t){return kj(n,e,t)}function Oj(n,e,t){return n.type&40?Fi(n,t):null}var kj=Oj,mM;function Rb(n,e,t,i){let r=CT(n,i,e),o=e[ct],s=i.parent||e[An],l=ET(s,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)gM(o,r,t[c],l,!1);else gM(o,r,t,l,!1);mM!==void 0&&mM(o,i,e,t,r)}function au(n,e){if(e!==null){let t=e.type;if(t&3)return Fi(e,n);if(t&4)return X0(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return au(n,i);{let r=n[e.index];return Li(r)?X0(-1,r):gi(r)}}else{if(t&128)return au(n,e.next);if(t&32)return Pb(e,n)()||gi(n[e.index]);{let i=ST(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Eo(n[$n]);return au(r,i)}else return au(n,e.next)}}}return null}function ST(n,e){if(e!==null){let i=n[$n][An],r=e.projection;return i.projection[r]}return null}function X0(n,e){let t=Rn+n+1;if(t<e.length){let i=e[t],r=i[me].firstChild;if(r!==null)return au(i,r)}return e[Io]}function Ob(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let l=i[t.index],c=t.type;if(s&&e===0&&(l&&ul(gi(l),i),t.flags|=2),!Rp(t))if(c&8)Ob(n,e,t.child,i,r,o,!1),al(e,n,r,l,o);else if(c&32){let d=Pb(t,i),h;for(;h=d();)al(e,n,r,h,o);al(e,n,r,l,o)}else c&16?DT(n,e,i,t,r,o):al(e,n,r,l,o);t=s?t.projectionNext:t.next}}function Np(n,e,t,i,r,o){Ob(t,i,n.firstChild,e,r,o,!1)}function Nj(n,e,t){let i=e[ct],r=CT(n,t,e),o=t.parent||e[An],s=ET(o,t,e);DT(i,0,e,t,r,s)}function DT(n,e,t,i,r,o){let s=t[$n],c=s[An].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];al(e,n,r,h,o)}else{let d=c,h=s[rn];KM(i)&&(d.flags|=128),Ob(n,e,d,h,r,o,!0)}}function Lj(n,e,t,i,r){let o=t[Io],s=gi(t);o!==s&&al(e,n,i,o,r);for(let l=Rn;l<t.length;l++){let c=t[l];Np(c[me],c,n,e,i,o)}}function Fj(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Bi.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Bi.Important),n.setStyle(t,i,r,o))}}function xT(n,e,t,i,r){let o=Jr(),s=i&2;try{Po(-1),s&&e.length>At&&yT(n,e,At,!1),Ke(s?2:0,r,t),t(i,r)}finally{Po(o),Ke(s?3:1,r,t)}}function Lp(n,e,t){$j(n,e,t),(t.flags&64)===64&&Wj(n,e,t)}function pu(n,e,t=Fi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],l=s===-1?t(e,n):n[s];n[r++]=l}}}function Vj(n,e,t,i){let o=i.get(rT,iT)||t===Xr.ShadowDom,s=n.selectRootElement(e,o);return jj(s),s}function jj(n){Bj(n)}var Bj=()=>null;function zj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function IT(n,e,t,i,r,o){let s=e[me];if(Fb(n,s,e,t,i)){Mo(n)&&Hj(e,n.index);return}n.type&3&&(t=zj(t)),Uj(n,e,t,i,r,o)}function Uj(n,e,t,i,r,o){if(n.type&3){let s=Fi(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function Hj(n,e){let t=mi(e,n);t[_e]&16||(t[_e]|=64)}function $j(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Mo(t)&&Dj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||pp(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let l=n.data[s],c=cu(e,n,s,t);if(ul(c,e),o!==null&&Yj(e,s-i,c,l,t,o),hr(l)){let d=mi(t.index,e);d[Cn]=cu(e,n,s,t)}}}function Wj(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=KI();try{Po(o);for(let l=i;l<r;l++){let c=n.data[l],d=e[l];Qh(l),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Gj(c,d)}}finally{Po(-1),Qh(s)}}function Gj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kb(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];hT(e,o.selectors,!1)&&(i??=[],hr(o)?i.unshift(o):i.push(o))}return i}function qj(n,e,t,i,r,o){let s=Fi(n,e);Zj(e[ct],s,o,n.value,t,i,r)}function Zj(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let l=s==null?vs(o):s(o,i||"",r);n.setAttribute(e,r,l,t)}}function Yj(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1];J0(i,t,c,d)}}function Nb(n,e,t,i,r){let o=At+t,s=e[me],l=r(s,e,n,i,t);e[o]=l,sl(n,!0);let c=n.type===2;return c?(mT(e[ct],l,n),(HI()===0||il(n))&&ul(l,e),$I()):ul(l,e),tp()&&(!c||!Rp(n))&&Rb(s,e,l,n),n}function Lb(n){let e=n;return b0()?w0():(e=e.parent,sl(e,!1)),e}function Qj(n,e){let t=n[ys];if(!t)return;t.get(On,null)?.(e)}function Fb(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],l=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],h=s[c+1],p=e.data[d];J0(p,t[d],h,r),l=!0}if(o)for(let c of o){let d=t[c],h=e.data[c];J0(h,d,i,r),l=!0}return l}function Kj(n,e){let t=mi(e,n),i=t[me];Jj(i,t);let r=t[Ni];r!==null&&t[el]===null&&(t[el]=oT(r,t[ys])),Ke(18),Vb(i,t,t[Cn]),Ke(19,t[Cn])}function Jj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Vb(n,e,t){Jh(e);try{let i=n.viewQuery;i!==null&&K0(1,i,t);let r=n.template;r!==null&&xT(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[dr]?.finishViewCreation(n),n.staticContentQueries&&sT(n,e),n.staticViewQueries&&K0(2,n.viewQuery,t);let o=n.components;o!==null&&Xj(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[_e]&=-5,Xh()}}function Xj(n,e){for(let t=0;t<e.length;t++)Kj(n,e[t])}function MT(n,e,t,i){let r=Re(null);try{let o=e.tView,l=n[_e]&4096?4096:16,c=Mb(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),d=n[e.index];c[xo]=d;let h=n[dr];return h!==null&&(c[dr]=h.createEmbeddedView(o)),Vb(o,c,t),c}finally{Re(r)}}function eb(n,e){return!e||e.firstChild===null||KM(n)}var _M=!1,eB=new J("");function uu(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(gi(o)),Li(o)&&TT(o,i);let s=t.type;if(s&8)uu(n,e,t.child,i);else if(s&32){let l=Pb(t,e),c;for(;c=l();)i.push(c)}else if(s&16){let l=ST(e,t);if(Array.isArray(l))i.push(...l);else{let c=Eo(e[$n]);uu(c[me],c,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function TT(n,e){for(let t=Rn;t<n.length;t++){let i=n[t],r=i[me].firstChild;r!==null&&uu(i[me],i,r,e)}n[Io]!==n[Ni]&&e.push(n[Io])}function PT(n){if(n[Cs]!==null){for(let e of n[Cs])e.impl.addSequence(e);n[Cs].length=0}}var AT=[];function tB(n){return n[ei]??nB(n)}function nB(n){let e=AT.pop()??Object.create(rB);return e.lView=n,e}function iB(n){n.lView[ei]!==n&&(n.lView=null,AT.push(n))}var rB=re(W({},os),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ol(n.lView)},consumerOnSignalRead(){this.lView[ei]=this}});function oB(n){let e=n[ei]??Object.create(sB);return e.lView=n,e}var sB=re(W({},os),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Eo(n.lView);for(;e&&!RT(e[me]);)e=Eo(e);e&&d0(e)},consumerOnSignalRead(){this.lView[ei]=this}});function RT(n){return n.type!==2}function OT(n){if(n[Jc]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Jc])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[_e]&8192)}}var aB=100;function jb(n,e=0){let i=n[ur].rendererFactory,r=!1;r||i.begin?.();try{lB(n,e)}finally{r||i.end?.()}}function lB(n,e){let t=E0();try{S0(!0),tb(n,e);let i=0;for(;eu(n);){if(i===aB)throw new X(103,!1);i++,tb(n,1)}}finally{S0(t)}}function kT(n,e){C0(e?tu.Exhaustive:tu.OnlyDirtyViews);try{jb(n)}finally{C0(tu.Off)}}function cB(n,e,t,i){if(Ss(e))return;let r=e[_e],o=!1,s=!1;Jh(e);let l=!0,c=null,d=null;o||(RT(n)?(d=tB(e),c=ss(d)):Zf()===null?(l=!1,d=oB(e),c=ss(d)):e[ei]&&(Qf(e[ei]),e[ei]=null));try{u0(e),ZI(n.bindingStartIndex),t!==null&&xT(n,e,t,2,i);let h=(r&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&sp(e,_,null)}else{let _=n.preOrderHooks;_!==null&&ap(e,_,0,null),N0(e,0)}if(s||uB(e),OT(e),NT(e,0),n.contentQueries!==null&&sT(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&sp(e,_)}else{let _=n.contentHooks;_!==null&&ap(e,_,1),N0(e,1)}fB(n,e);let p=n.components;p!==null&&FT(e,p,0);let y=n.viewQuery;if(y!==null&&K0(2,y,i),!o)if(h){let _=n.viewCheckHooks;_!==null&&sp(e,_)}else{let _=n.viewHooks;_!==null&&ap(e,_,2),N0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Hh]){for(let _ of e[Hh])_();e[Hh]=null}o||(PT(e),e[_e]&=-73)}catch(h){throw o||ol(e),h}finally{d!==null&&(ka(d,c),l&&iB(d)),Xh()}}function NT(n,e){for(let t=XM(n);t!==null;t=eT(t))for(let i=Rn;i<t.length;i++){let r=t[i];LT(r,e)}}function uB(n){for(let e=XM(n);e!==null;e=eT(e)){if(!(e[_e]&2))continue;let t=e[Es];for(let i=0;i<t.length;i++){let r=t[i];d0(r)}}}function dB(n,e,t){Ke(18);let i=mi(e,n);LT(i,t),Ke(19,i[Cn])}function LT(n,e){Wh(n)&&tb(n,e)}function tb(n,e){let i=n[me],r=n[_e],o=n[ei],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Vc(o)),s||=!1,o&&(o.dirty=!1),n[_e]&=-9217,s)cB(i,n,i.template,n[Cn]);else if(r&8192){let l=Re(null);try{OT(n),NT(n,1);let c=i.components;c!==null&&FT(n,c,1),PT(n)}finally{Re(l)}}}function FT(n,e,t){for(let i=0;i<e.length;i++)dB(n,e[i],t)}function fB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Po(~r);else{let o=r,s=t[++i],l=t[++i];QI(s,o);let c=e[o];Ke(24,c),l(2,c),Ke(25,c)}}}finally{Po(-1)}}function Bb(n,e){let t=E0()?64:1088;for(n[ur].changeDetectionScheduler?.notify(e);n;){n[_e]|=t;let i=Eo(n);if(rl(n)&&!i)return n;n=i}return null}function VT(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function jT(n,e,t,i=!0){let r=e[me];if(hB(r,e,n,t),i){let s=X0(t,n),l=e[ct],c=l.parentNode(n[Io]);c!==null&&Mj(r,n[An],l,e,c,s)}let o=e[el];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function nb(n,e){if(n.length<=Rn)return;let t=Rn+e,i=n[t];if(i){let r=i[xo];r!==null&&r!==n&&Ab(r,i),e>0&&(n[t-1][pi]=i[pi]);let o=Yc(n,Rn+e);Ij(i[me],i);let s=o[dr];s!==null&&s.detachView(o[me]),i[rn]=null,i[pi]=null,i[_e]&=-129}return i}function hB(n,e,t,i){let r=Rn+i,o=t.length;i>0&&(t[r-1][pi]=e),i<o-Rn?(e[pi]=t[r],Yy(t,Rn+i,e)):(t.push(e),e[pi]=null),e[rn]=t;let s=e[xo];s!==null&&t!==s&&BT(s,e);let l=e[dr];l!==null&&l.insertView(n),Gh(e),e[_e]|=128}function BT(n,e){let t=n[Es],i=e[rn];if(fr(i))n[_e]|=2;else{let r=i[rn][$n];e[$n]!==r&&(n[_e]|=2)}t===null?n[Es]=[e]:t.push(e)}var Ao=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[me];return uu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Cn]}set context(e){this._lView[Cn]=e}get destroyed(){return Ss(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rn];if(Li(e)){let t=e[Xc],i=t?t.indexOf(this):-1;i>-1&&(nb(e,i),Yc(t,i))}this._attachedToViewContainer=!1}wT(this._lView[me],this._lView)}onDestroy(e){f0(this._lView,e)}markForCheck(){Bb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){Gh(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,jb(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[ys].get(eB,_M)}catch{this.exhaustive=_M}}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rl(this._lView),t=this._lView[xo];t!==null&&!e&&Ab(t,this._lView),bT(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=rl(this._lView),i=this._lView[xo];i!==null&&!t&&BT(i,this._lView),Gh(this._lView)}};var vr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=pB;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=MT(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Ao(o)}}return n})();function pB(){return Fp(qt(),De())}function Fp(n,e){return n.type&4?new vr(e,n,hl(n,e)):null}function ml(n,e,t,i,r){let o=n.data[e];if(o===null)o=gB(n,e,t,i,r),YI()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=WI();o.injectorIndex=s===null?-1:s.injectorIndex}return sl(o,!0),o}function gB(n,e,t,i,r){let o=y0(),s=b0(),l=s?o:o&&o.parent,c=n.data[e]=_B(n,l,t,e,i,r);return mB(n,c,o,s),c}function mB(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function _B(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,l=0;return m0()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Rne=new RegExp(`^(\\d+)*(${ZV}|${qV})*(.*)`);var vB=()=>null;function ib(n,e){return vB(n,e)}var zT=class{},Vp=class{},rb=class{resolveComponentFactory(e){throw new X(917,!1)}},gu=class{static NULL=new rb},ni=class{},Sn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>yB()}return n})();function yB(){let n=De(),e=qt(),t=mi(e.index,n);return(fr(t)?t:n)[ct]}var UT=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}return n})();var cp={},ob=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,cp,i);return r!==cp||t===cp?r:this.parentInjector.get(e,t,i)}};function vp(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")o=l;else if(o==1)r=Fh(r,l);else if(o==2){let c=l,d=e[++s];i=Fh(i,c+": "+d+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function $(n,e=0){let t=De();if(t===null)return ne(n,e);let i=qt();return ZM(i,t,un(n),e)}function zb(){let n="invalid";throw new Error(n)}function HT(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let l=s,c=null,d=null;for(let h of s)if(h.resolveHostDirectives!==null){[l,c,d]=h.resolveHostDirectives(s);break}CB(n,e,t,l,o,c,d)}o!==null&&i!==null&&bB(t,i,o)}function bB(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new X(-301,!1);i.push(e[r],o)}}function wB(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function CB(n,e,t,i,r,o,s){let l=i.length,c=!1;for(let y=0;y<l;y++){let _=i[y];!c&&hr(_)&&(c=!0,wB(n,t,y)),q0(pp(t,e),n,_.type)}MB(t,n.data.length,l);for(let y=0;y<l;y++){let _=i[y];_.providersResolver&&_.providersResolver(_)}let d=!1,h=!1,p=vT(n,e,l,null);l>0&&(t.directiveToIndex=new Map);for(let y=0;y<l;y++){let _=i[y];if(t.mergedAttrs=cl(t.mergedAttrs,_.hostAttrs),SB(n,t,e,p,_),IB(p,_,r),s!==null&&s.has(_)){let[I,x]=s.get(_);t.directiveToIndex.set(_.type,[p,I+t.directiveStart,x+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,p);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let S=_.type.prototype;!d&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}EB(n,t,o)}function EB(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))vM(0,e,r,i),vM(1,e,r,i),bM(e,i,!1);else{let o=t.get(r);yM(0,e,o,i),yM(1,e,o,i),bM(e,i,!0)}}}function vM(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),$T(e,o)}}function yM(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],l;n===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[s]??=[],l[s].push(i,o),$T(e,s)}}function $T(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function bM(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||xb(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,l=0;for(;l<i.length;){let c=i[l];if(c===0){l+=4;continue}else if(c===5){l+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let d=r[c];for(let h of d)if(h===e){s??=[],s.push(c,i[l+1]);break}}else if(t&&o.hasOwnProperty(c)){let d=o[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],i[l+1]);break}}l+=2}n.initialInputs??=[],n.initialInputs.push(s)}function SB(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Co(r.type,!0)),s=new Is(o,hr(r),$,null);n.blueprint[i]=s,t[i]=s,DB(n,e,i,vT(n,t,r.hostVars,Wn),r)}function DB(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let l=~e.index;xB(s)!=l&&s.push(l),s.push(t,i,o)}}function xB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function IB(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;hr(e)&&(t[""]=n)}}function MB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ub(n,e,t,i,r,o,s,l){let c=e[me],d=c.consts,h=To(d,s),p=ml(c,n,t,i,h);return o&&HT(c,e,p,To(d,l),r),p.mergedAttrs=cl(p.mergedAttrs,p.attrs),p.attrs!==null&&vp(p,p.attrs,!1),p.mergedAttrs!==null&&vp(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function Hb(n,e){jM(n,e),o0(e)&&n.queries.elementEnd(e)}function TB(n,e,t,i,r,o){let s=e.consts,l=To(s,r),c=ml(e,n,t,i,l);if(c.mergedAttrs=cl(c.mergedAttrs,c.attrs),o!=null){let d=To(s,o);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&vp(c,c.attrs,!1),c.mergedAttrs!==null&&vp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function $b(n){return jp(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function jp(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Wb(n,e,t){return n[e]=t}function PB(n,e){return n[e]}function eo(n,e,t){if(t===Wn)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function GT(n,e,t,i){let r=eo(n,e,t);return eo(n,e+1,i)||r}function V0(n,e,t){return function i(r){let o=Mo(n)?mi(n.index,e):e;Bb(o,5);let s=e[Cn],l=wM(e,s,t,r),c=i.__ngNextListenerFn__;for(;c;)l=wM(e,s,c,r)&&l,c=c.__ngNextListenerFn__;return l}}function wM(n,e,t,i){let r=Re(null);try{return Ke(6,e,t),t(i)!==!1}catch(o){return Qj(n,o),!1}finally{Ke(7,e,t),Re(r)}}function AB(n,e,t,i,r,o,s,l){let c=il(n),d=!1,h=null;if(!i&&c&&(h=RB(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,d=!0}else{let p=Fi(n,t),y=i?i(p):p;QV(t,y,o,l);let _=r.listen(y,o,l),S=i?I=>i(gi(I[n.index])):n.index;qT(S,e,t,o,l,_,!1)}return d}function RB(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let l=e[tl],c=r[o+2];return l&&l.length>c?l[c]:null}typeof s=="string"&&(o+=2)}return null}function qT(n,e,t,i,r,o,s){let l=e.firstCreatePass?p0(e):null,c=h0(t),d=c.length;c.push(r,o),l&&l.push(i,n,d,(d+1)*(s?-1:1))}function CM(n,e,t,i,r,o){let s=e[t],l=e[me],d=l.data[t].outputs[i],p=s[d].subscribe(o);qT(n.index,l,e,r,o,p,!0)}var sb=Symbol("BINDING");var yp=class extends gu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=lr(e);return new Ro(t,this.ngModule)}};function OB(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&kp.SignalBased)!==0};return r&&(o.transform=r),o})}function kB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function NB(n,e,t){let i=e instanceof Ct?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new ob(t,i):t}function LB(n){let e=n.get(ni,null);if(e===null)throw new X(407,!1);let t=n.get(UT,null),i=n.get(Yr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function FB(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return pT(e,t,t==="svg"?s0:t==="math"?FI:null)}var Ro=class extends Vp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=OB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=kB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=gj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){Ke(22);let l=Re(null);try{let c=this.componentDef,d=VB(i,c,s,o),h=NB(c,r||this.ngModule,e),p=LB(h),y=p.rendererFactory.createRenderer(null,c),_=i?Vj(y,i,c.encapsulation,h):FB(c,y),S=s?.some(EM)||o?.some(T=>typeof T!="function"&&T.bindings.some(EM)),I=Mb(null,d,null,512|_T(c),null,null,p,y,h,null,oT(_,h,!0));I[At]=_,Jh(I);let x=null;try{let T=Ub(At,I,2,"#host",()=>d.directiveRegistry,!0,0);_&&(mT(y,_,T),ul(_,I)),Lp(d,I,T),Eb(d,T,I),Hb(d,T),t!==void 0&&BB(T,this.ngContentSelectors,t),x=mi(T.index,I),I[Cn]=x[Cn],Vb(d,I,null)}catch(T){throw x!==null&&Y0(x),Y0(I),T}finally{Ke(23),Xh()}return new bp(this.componentType,I,!!S)}finally{Re(l)}}};function VB(n,e,t,i){let r=n?["ng-version","20.1.3"]:mj(e.selectors[0]),o=null,s=null,l=0;if(t)for(let h of t)l+=h[sb].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(i)for(let h=0;h<i.length;h++){let p=i[h];if(typeof p!="function")for(let y of p.bindings){l+=y[sb].requiredVars;let _=h+1;y.create&&(y.targetIdx=_,(o??=[]).push(y)),y.update&&(y.targetIdx=_,(s??=[]).push(y))}}let c=[e];if(i)for(let h of i){let p=typeof h=="function"?h:h.type,y=Xy(p);c.push(y)}return Ib(0,null,jB(o,s),1,l,c,null,null,null,[r],null)}function jB(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function EM(n){let e=n[sb].kind;return e==="input"||e==="twoWay"}var bp=class extends zT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=$h(t[me],At),this.location=hl(this._tNode,t),this.instance=mi(this._tNode.index,t)[Cn],this.hostView=this.changeDetectorRef=new Ao(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=Fb(i,r[me],r,e,t);this.previousInputValues.set(e,t);let s=mi(i.index,r);Bb(s,1)}get injector(){return new xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function BB(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var ii=(()=>{class n{static __NG_ELEMENT_ID__=zB}return n})();function zB(){let n=qt();return YT(n,De())}var UB=ii,ZT=class extends UB{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return hl(this._hostTNode,this._hostLView)}get injector(){return new xs(this._hostTNode,this._hostLView)}get parentInjector(){let e=bb(this._hostTNode,this._hostLView);if(UM(e)){let t=fp(e,this._hostLView),i=dp(e),r=t[me].data[i+8];return new xs(r,t)}else return new xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=SM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=ib(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(l,r,eb(this._hostTNode,s)),l}createComponent(e,t,i,r,o,s,l){let c=e&&!wV(e),d;if(c)d=t;else{let x=t||{};d=x.index,i=x.injector,r=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,l=x.bindings}let h=c?e:new Ro(lr(e)),p=i||this.parentInjector;if(!o&&h.ngModule==null){let T=(c?p:this.parentInjector).get(Ct,null);T&&(o=T)}let y=lr(h.componentType??{}),_=ib(this._lContainer,y?.id??null),S=_?.firstChild??null,I=h.create(p,r,S,o,s,l);return this.insertImpl(I.hostView,d,eb(this._hostTNode,_)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(jI(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let c=r[rn],d=new ZT(c,c[An],c[rn]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return jT(s,r,o,i),e.attachToViewContainerRef(),Yy(j0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=SM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=nb(this._lContainer,t);i&&(Yc(j0(this._lContainer),t),wT(i[me],i))}detach(e){let t=this._adjustIndex(e,-1),i=nb(this._lContainer,t);return i&&Yc(j0(this._lContainer),t)!=null?new Ao(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function SM(n){return n[Xc]}function j0(n){return n[Xc]||(n[Xc]=[])}function YT(n,e){let t,i=e[n.index];return Li(i)?t=i:(t=VT(i,e,null,n),e[n.index]=t,Tb(e,t)),$B(t,e,n,i),new ZT(t,n,e)}function HB(n,e){let t=n[ct],i=t.createComment(""),r=Fi(e,n),o=t.parentNode(r);return _p(t,o,i,t.nextSibling(r),!1),i}var $B=qB,WB=()=>!1;function GB(n,e,t){return WB(n,e,t)}function qB(n,e,t,i){if(n[Io])return;let r;t.type&8?r=gi(i):r=HB(e,t),n[Io]=r}var ab=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},lb=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),l=this.queries[s.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Gb(e,t).matches!==null&&this.queries[t].setDirty()}},wp=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=tz(e):this.predicate=e}},cb=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ub=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,ZB(t,o)),this.matchTNodeWithReadOption(e,t,lp(t,e,o,!1,!1))}else i===vr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,lp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Xe||r===ii||r===vr&&t.type&4)this.addMatch(t.index,-2);else{let o=lp(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ZB(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function YB(n,e){return n.type&11?hl(n,e):n.type&4?Fp(n,e):null}function QB(n,e,t,i){return t===-1?YB(e,n):t===-2?KB(n,e,i):cu(n,n[me],t,e)}function KB(n,e,t){if(t===Xe)return hl(e,n);if(t===vr)return Fp(e,n);if(t===ii)return YT(e,n)}function QT(n,e,t,i){let r=e[dr].queries[i];if(r.matches===null){let o=n.data,s=t.matches,l=[];for(let c=0;s!==null&&c<s.length;c+=2){let d=s[c];if(d<0)l.push(null);else{let h=o[d];l.push(QB(e,h,s[c+1],t.metadata.read))}}r.matches=l}return r.matches}function db(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=QT(n,e,r,t);for(let l=0;l<o.length;l+=2){let c=o[l];if(c>0)i.push(s[l/2]);else{let d=o[l+1],h=e[-c];for(let p=Rn;p<h.length;p++){let y=h[p];y[xo]===y[rn]&&db(y[me],y,d,i)}if(h[Es]!==null){let p=h[Es];for(let y=0;y<p.length;y++){let _=p[y];db(_[me],_,d,i)}}}}}return i}function JB(n,e){return n[dr].queries[e].queryList}function KT(n,e,t){let i=new gp((t&4)===4);return UI(n,e,i,i.destroy),(e[dr]??=new lb).queries.push(new ab(i))-1}function XB(n,e,t){let i=Ut();return i.firstCreatePass&&(JT(i,new wp(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),KT(i,De(),e)}function ez(n,e,t,i){let r=Ut();if(r.firstCreatePass){let o=qt();JT(r,new wp(e,t,i),o.index),nz(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return KT(r,De(),t)}function tz(n){return n.split(",").map(e=>e.trim())}function JT(n,e,t){n.queries===null&&(n.queries=new cb),n.queries.track(new ub(e,t))}function nz(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function Gb(n,e){return n.queries.getByIndex(e)}function iz(n,e){let t=n[me],i=Gb(t,e);return i.crossesNgTemplate?db(t,n,e,[]):QT(t,n,i,e)}var DM=new Set;function Ps(n){DM.has(n)||(DM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ms=class{},Bp=class{};var Cp=class extends Ms{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new yp(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Jy(e);this._bootstrapComponents=dT(o.bootstrap),this._r3Injector=M0(e,t,[{provide:Ms,useValue:this},{provide:gu,useValue:this.componentFactoryResolver},...i],Zr(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ep=class extends Bp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Cp(this.moduleType,e,[])}};var du=class extends Ms{injector;componentFactoryResolver=new yp(this);instance=null;constructor(e){super();let t=new ms([...e.providers,{provide:Ms,useValue:this},{provide:gu,useValue:this.componentFactoryResolver}],e.parent||Xa(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _l(n,e,t=null){return new du({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var rz=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=e0(!1,t.type),r=i.length>0?_l([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(ne(Ct))})}return n})();function he(n){return fl(()=>{let e=XT(n),t=re(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(rz).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xr.Emulated,styles:n.styles||Pn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ps("NgStandalone"),eP(t);let i=n.dependencies;return t.directiveDefs=xM(i,oz),t.pipeDefs=xM(i,TI),t.id=lz(t),t})}function oz(n){return lr(n)||Xy(n)}function Zt(n){return fl(()=>({type:n.type,bootstrap:n.bootstrap||Pn,declarations:n.declarations||Pn,imports:n.imports||Pn,exports:n.exports||Pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sz(n,e){if(n==null)return Do;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,l,c;Array.isArray(r)?(l=r[0],o=r[1],s=r[2]??o,c=r[3]||null):(o=r,s=r,l=kp.None,c=null),t[o]=[i,l,c],e[o]=s}return t}function az(n){if(n==null)return Do;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ve(n){return fl(()=>{let e=XT(n);return eP(e),e})}function zp(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function XT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Do,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Pn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:sz(n.inputs,e),outputs:az(n.outputs),debugInfo:null}}function eP(n){n.features?.forEach(e=>e(n))}function xM(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function lz(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function cz(n){return Object.getPrototypeOf(n.prototype).constructor}function st(n){let e=cz(n.type),t=!0,i=[n];for(;e;){let r;if(hr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=B0(n.inputs),s.declaredInputs=B0(n.declaredInputs),s.outputs=B0(n.outputs);let l=r.hostBindings;l&&pz(n,l);let c=r.viewQuery,d=r.contentQueries;if(c&&fz(n,c),d&&hz(n,d),uz(n,r),bI(n.outputs,r.outputs),hr(r)&&r.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let l=o[s];l&&l.ngInherit&&l(n),l===st&&(t=!1)}}e=Object.getPrototypeOf(e)}dz(i)}function uz(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function dz(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=cl(r.hostAttrs,t=cl(t,r.hostAttrs))}}function B0(n){return n===Do?{}:n===Pn?[]:n}function fz(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function hz(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function pz(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function tP(n,e,t,i,r,o,s,l){if(t.firstCreatePass){n.mergedAttrs=cl(n.mergedAttrs,n.attrs);let h=n.tView=Ib(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}l&&(n.flags|=l),sl(n,!1);let c=_z(t,e,n,i);tp()&&Rb(t,e,c,n),ul(c,e);let d=VT(c,e,c,n);e[i+At]=d,Tb(e,d),GB(d,n,e)}function gz(n,e,t,i,r,o,s,l,c,d,h){let p=t+At,y;return e.firstCreatePass?(y=ml(e,p,4,s||null,l||null),qh()&&HT(e,n,y,To(e.consts,d),kb),jM(e,y)):y=e.data[p],tP(y,n,e,t,i,r,o,c),il(y)&&Lp(e,n,y),d!=null&&pu(n,y,h),y}function mz(n,e,t,i,r,o,s,l,c,d,h){let p=t+At,y;if(e.firstCreatePass){if(y=ml(e,p,4,s||null,l||null),d!=null){let _=To(e.consts,d);y.localNames=[];for(let S=0;S<_.length;S+=2)y.localNames.push(_[S],-1)}}else y=e.data[p];return tP(y,n,e,t,i,r,o,c),d!=null&&pu(n,y,h),y}function z(n,e,t,i,r,o,s,l){let c=De(),d=Ut(),h=To(d.consts,o);return gz(c,d,n,e,t,i,r,h,void 0,s,l),z}var _z=vz;function vz(n,e,t,i){return iu(!0),e[ct].createComment("")}var Up=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Up||{}),As=new J(""),nP=!1,fb=class extends fe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,NI()&&(this.destroyRef=R(ti,{optional:!0})??void 0,this.pendingTasks=R(mr,{optional:!0})??void 0)}emit(e){let t=Re(null);try{super.next(e)}finally{Re(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let l=super.subscribe({next:r,error:o,complete:s});return e instanceof qe&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},xe=fb;function iP(n){let e,t;function i(){n=su;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function IM(n){return queueMicrotask(()=>n()),()=>{n=su}}var qb="isAngularZone",Sp=qb+"_ID",yz=0,Je=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new xe(!1);onMicrotaskEmpty=new xe(!1);onStable=new xe(!1);onError=new xe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=nP}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Cz(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qb)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,bz,su,su);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},bz={};function Zb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function wz(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){iP(()=>{n.callbackScheduled=!1,hb(n),n.isCheckStableRunning=!0,Zb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),hb(n)}function Cz(n){let e=()=>{wz(n)},t=yz++;n._inner=n._inner.fork({name:"angular",properties:{[qb]:!0,[Sp]:t,[Sp+t]:!0},onInvokeTask:(i,r,o,s,l,c)=>{if(Ez(c))return i.invokeTask(o,s,l,c);try{return MM(n),i.invokeTask(o,s,l,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),TM(n)}},onInvoke:(i,r,o,s,l,c,d)=>{try{return MM(n),i.invoke(o,s,l,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Sz(c)&&e(),TM(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,hb(n),Zb(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function hb(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function MM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TM(n){n._nesting--,Zb(n)}var Dp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new xe;onMicrotaskEmpty=new xe;onStable=new xe;onError=new xe;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Ez(n){return rP(n,"__ignore_ng_zone__")}function Sz(n){return rP(n,"__scheduler_tick__")}function rP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Yb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),oP=[0,1,2,3],sP=(()=>{class n{ngZone=R(Je);scheduler=R(Yr);errorHandler=R(ki,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(As,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ke(16),this.executing=!0;for(let i of oP)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ke(17)}register(t){let{view:i}=t;i!==void 0?((i[Cs]??=[]).push(t),ol(i),i[_e]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Up.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),xp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Cs];e&&(this.view[Cs]=e.filter(t=>t!==this))}};function ko(n,e){let t=e?.injector??R(Gt);return Ps("NgAfterNextRender"),xz(n,t,e,!0)}function Dz(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function xz(n,e,t,i){let r=e.get(Yb);r.impl??=e.get(sP);let o=e.get(As,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ti):null,l=e.get(np,null,{optional:!0}),c=new xp(r.impl,Dz(n),l?.view,i,s,o?.snapshot(null));return r.impl.register(c),c}var Qb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Kb=new J("");function No(n){return!!n&&typeof n.then=="function"}function Jb(n){return!!n&&typeof n.subscribe=="function"}var Xb=new J("");function Hp(n){return cr([{provide:Xb,multi:!0,useValue:n}])}var ew=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=R(Xb,{optional:!0})??[];injector=R(Gt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=on(this.injector,r);if(No(o))t.push(o);else if(Jb(o)){let s=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mu=new J("");function aP(){ay(()=>{let n="";throw new X(600,n)})}function lP(n){return n.isBoundToModule}var Iz=10;var _i=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(On);afterRenderManager=R(Yb);zonelessEnabled=R(ru);rootEffectScheduler=R(k0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new fe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(mr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Se(t=>!t))}constructor(){R(As,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=R(Ct);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Gt.NULL){return this._injector.get(Je).run(()=>{Ke(10);let s=t instanceof Vp;if(!this._injector.get(ew).done){let S="";throw new X(405,S)}let c;s?c=t:c=this._injector.get(gu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=lP(c)?void 0:this._injector.get(Ms),h=i||c.selector,p=c.create(r,[],h,d),y=p.location.nativeElement,_=p.injector.get(Kb,null);return _?.registerApplication(y),p.onDestroy(()=>{this.detachView(p.hostView),lu(this.components,p),_?.unregisterApplication(y)}),this._loadComponent(p),Ke(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Up.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new X(101,!1);let t=Re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Re(t),this.afterTick.next(),Ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ni,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Iz;)Ke(14),this.synchronizeOnce(),Ke(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!eu(r))continue;let o=i&&!this.zonelessEnabled?0:1;jb(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>eu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;lu(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(mu,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Yt(n,e,t,i){let r=De(),o=nu();if(eo(r,o,e)){let s=Ut(),l=ep();qj(l,r,n,e,t,i)}return Yt}function M(n,e,t){let i=De(),r=nu();if(eo(i,r,e)){let o=Ut(),s=ep();IT(s,i,n,e,i[ct],t)}return M}function pb(n,e,t,i,r){Fb(e,n,t,r?"class":"style",i)}function v(n,e,t,i){let r=De(),o=r[me],s=n+At,l=o.firstCreatePass?Ub(s,r,2,e,kb,qh(),t,i):o.data[s];if(Nb(l,r,n,e,cP),il(l)){let c=r[me];Lp(c,r,l),Eb(c,l,r)}return i!=null&&pu(r,l),v}function m(){let n=Ut(),e=qt(),t=Lb(e);return n.firstCreatePass&&Hb(n,t),_0(t)&&v0(),g0(),t.classesWithoutHost!=null&&IV(t)&&pb(n,t,De(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&MV(t)&&pb(n,t,De(),t.stylesWithoutHost,!1),m}function oe(n,e,t,i){return v(n,e,t,i),m(),oe}function kn(n,e,t,i){let r=De(),o=r[me],s=n+At,l=o.firstCreatePass?TB(s,o,2,e,t,i):o.data[s];return Nb(l,r,n,e,cP),i!=null&&pu(r,l),kn}function Nn(){let n=qt(),e=Lb(n);return _0(e)&&v0(),g0(),Nn}var cP=(n,e,t,i,r)=>(iu(!0),pT(e[ct],i,iM()));function ut(n,e,t){let i=De(),r=i[me],o=n+At,s=r.firstCreatePass?Ub(o,i,8,"ng-container",kb,qh(),e,t):r.data[o];if(Nb(s,i,n,"ng-container",Mz),il(s)){let l=i[me];Lp(l,i,s),Eb(l,s,i)}return t!=null&&pu(i,s),ut}function dt(){let n=Ut(),e=qt(),t=Lb(e);return n.firstCreatePass&&Hb(n,t),dt}function to(n,e,t){return ut(n,e,t),dt(),to}var Mz=(n,e,t,i,r)=>(iu(!0),yj(e[ct],""));function se(){return De()}var Ds=void 0;function Tz(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Pz=["en",[["a","p"],["AM","PM"],Ds],[["AM","PM"],Ds,Ds],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ds,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ds,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ds,"{1} 'at' {0}",Ds],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Tz],z0={};function _u(n){let e=Az(n),t=PM(e);if(t)return t;let i=e.split("-")[0];if(t=PM(i),t)return t;if(i==="en")return Pz;throw new X(701,!1)}function PM(n){return n in z0||(z0[n]=Qr.ng&&Qr.ng.common&&Qr.ng.common.locales&&Qr.ng.common.locales[n]),z0[n]}var Lo=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Lo||{});function Az(n){return n.toLowerCase().replace(/_/g,"-")}var vu="en-US",Rz="USD";var Oz=vu;function uP(n){typeof n=="string"&&(Oz=n.toLowerCase().replace(/_/g,"-"))}function B(n,e,t){let i=De(),r=Ut(),o=qt();return dP(r,i,i[ct],o,n,e,t),B}function dP(n,e,t,i,r,o,s){let l=!0,c=null;if((i.type&3||s)&&(c??=V0(i,e,o),AB(i,n,e,s,t,r,o,c)&&(l=!1)),l){let d=i.outputs?.[r],h=i.hostDirectiveOutputs?.[r];if(h&&h.length)for(let p=0;p<h.length;p+=2){let y=h[p],_=h[p+1];c??=V0(i,e,o),CM(i,e,y,_,r,c)}if(d&&d.length)for(let p of d)c??=V0(i,e,o),CM(i,e,p,r,r,c)}}function A(n=1){return nM(n)}function kz(n,e){let t=null,i=uj(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?hT(n,o,!0):hj(i,o))return r}return t}function $p(n){let e=De()[$n][An];if(!e.projection){let t=n?n.length:1,i=e.projection=II(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?kz(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function Wp(n,e=0,t,i,r,o){let s=De(),l=Ut(),c=i?n+1:null;c!==null&&mz(s,l,c,i,r,o,null,t);let d=ml(l,At+n,16,null,t||null);d.projection===null&&(d.projection=e),w0();let p=!s[el]||m0();s[$n][An].projection[d.projection]===null&&c!==null?Nz(s,l,c):p&&!Rp(d)&&Nj(l,s,d)}function Nz(n,e,t){let i=At+t,r=e.data[i],o=n[i],s=ib(o,r.tView.ssrId),l=MT(n,r,void 0,{dehydratedView:s});jT(o,l,0,eb(r,s))}function Qt(n,e,t,i){ez(n,e,t,i)}function vl(n,e,t){XB(n,e,t)}function Et(n){let e=De(),t=Ut(),i=D0();Kh(i+1);let r=Gb(t,i);if(n.dirty&&VI(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=iz(e,i);n.reset(o,zV),n.notifyOnChanges()}return!0}return!1}function St(){return JB(De(),D0())}function Ne(n){let e=GI();return l0(e,At+n)}function op(n,e){return n<<17|e<<2}function Ts(n){return n>>17&32767}function Lz(n){return(n&2)==2}function Fz(n,e){return n&131071|e<<17}function gb(n){return n|2}function dl(n){return(n&131068)>>2}function U0(n,e){return n&-131069|e<<2}function Vz(n){return(n&1)===1}function mb(n){return n|1}function jz(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,l=Ts(s),c=dl(s);n[i]=t;let d=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ja(p,h)>0)&&(d=!0)}else h=t;if(r)if(c!==0){let y=Ts(n[l+1]);n[i+1]=op(y,l),y!==0&&(n[y+1]=U0(n[y+1],i)),n[l+1]=Fz(n[l+1],i)}else n[i+1]=op(l,0),l!==0&&(n[l+1]=U0(n[l+1],i)),l=i;else n[i+1]=op(c,0),l===0?l=i:n[c+1]=U0(n[c+1],i),c=i;d&&(n[i+1]=gb(n[i+1])),AM(n,h,i,!0),AM(n,h,i,!1),Bz(e,h,n,i,o),s=op(l,c),o?e.classBindings=s:e.styleBindings=s}function Bz(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ja(o,e)>=0&&(t[i+1]=mb(t[i+1]))}function AM(n,e,t,i){let r=n[t+1],o=e===null,s=i?Ts(r):dl(r),l=!1;for(;s!==0&&(l===!1||o);){let c=n[s],d=n[s+1];zz(c,e)&&(l=!0,n[s+1]=i?mb(d):gb(d)),s=i?Ts(d):dl(d)}l&&(n[t+1]=i?gb(r):mb(r))}function zz(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ja(n,e)>=0:!1}var ji={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Uz(n){return n.substring(ji.key,ji.keyEnd)}function Hz(n){return $z(n),fP(n,hP(n,0,ji.textEnd))}function fP(n,e){let t=ji.textEnd;return t===e?-1:(e=ji.keyEnd=Wz(n,ji.key=e,t),hP(n,e,t))}function $z(n){ji.key=0,ji.keyEnd=0,ji.value=0,ji.valueEnd=0,ji.textEnd=n.length}function hP(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Wz(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Rs(n,e,t){return pP(n,e,t,!1),Rs}function vt(n,e){return pP(n,e,null,!0),vt}function tw(n){qz(Xz,Gz,n,!0)}function Gz(n,e){for(let t=Hz(e);t>=0;t=fP(e,t))zh(n,Uz(e),!0)}function pP(n,e,t,i){let r=De(),o=Ut(),s=Yh(2);if(o.firstUpdatePass&&mP(o,n,s,i),e!==Wn&&eo(r,s,e)){let l=o.data[Jr()];_P(o,l,r,r[ct],n,r[s+1]=tU(e,t),i,s)}}function qz(n,e,t,i){let r=Ut(),o=Yh(2);r.firstUpdatePass&&mP(r,null,o,i);let s=De();if(t!==Wn&&eo(s,o,t)){let l=r.data[Jr()];if(vP(l,i)&&!gP(r,o)){let c=i?l.classesWithoutHost:l.stylesWithoutHost;c!==null&&(t=Fh(c,t||"")),pb(r,l,s,t,i)}else eU(r,l,s,s[ct],s[o+1],s[o+1]=Jz(n,e,t),i,o)}}function gP(n,e){return e>=n.expandoStartIndex}function mP(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Jr()],s=gP(n,t);vP(o,i)&&e===null&&!s&&(e=!1),e=Zz(r,o,e,i),jz(r,o,e,t,s,i)}}function Zz(n,e,t,i){let r=JI(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=H0(null,n,e,t,i),t=fu(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=H0(r,n,e,t,i),o===null){let c=Yz(n,e,i);c!==void 0&&Array.isArray(c)&&(c=H0(null,n,e,c[1],i),c=fu(c,e.attrs,i),Qz(n,e,i,c))}else o=Kz(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function Yz(n,e,t){let i=t?e.classBindings:e.styleBindings;if(dl(i)!==0)return n[Ts(i)]}function Qz(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ts(r)]=i}function Kz(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=fu(i,s,t)}return fu(i,e.attrs,t)}function H0(n,e,t,i,r){let o=null,s=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<s&&(o=e[l],i=fu(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function fu(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),zh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Jz(n,e,t){if(t==null||t==="")return Pn;let i=[],r=gl(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function Xz(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&zh(n,i,t)}function eU(n,e,t,i,r,o,s,l){r===Wn&&(r=Pn);let c=0,d=0,h=0<r.length?r[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let y=c<r.length?r[c+1]:void 0,_=d<o.length?o[d+1]:void 0,S=null,I;h===p?(c+=2,d+=2,y!==_&&(S=p,I=_)):p===null||h!==null&&h<p?(c+=2,S=h):(d+=2,S=p,I=_),S!==null&&_P(n,e,t,i,S,I,s,l),h=c<r.length?r[c]:null,p=d<o.length?o[d]:null}}function _P(n,e,t,i,r,o,s,l){if(!(e.type&3))return;let c=n.data,d=c[l+1],h=Vz(d)?RM(c,e,t,r,dl(d),s):void 0;if(!Ip(h)){Ip(o)||Lz(d)&&(o=RM(c,null,t,r,l,s));let p=a0(Jr(),t);Fj(i,s,p,r,o)}}function RM(n,e,t,i,r,o){let s=e===null,l;for(;r>0;){let c=n[r],d=Array.isArray(c),h=d?c[1]:c,p=h===null,y=t[r+1];y===Wn&&(y=p?Pn:void 0);let _=p?Uh(y,i):h===i?y:void 0;if(d&&!Ip(_)&&(_=Uh(c,i)),Ip(_)&&(l=_,s))return l;let S=n[r+1];r=s?Ts(S):dl(S)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(l=Uh(c,i))}return l}function Ip(n){return n!==void 0}function tU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Zr(gl(n)))),n}function vP(n,e){return(n.flags&(e?8:16))!==0}function w(n,e=""){let t=De(),i=Ut(),r=n+At,o=i.firstCreatePass?ml(i,r,1,e,null):i.data[r],s=nU(i,t,o,e,n);t[r]=s,tp()&&Rb(i,t,s,o),sl(o,!1)}var nU=(n,e,t,i,r)=>(iu(!0),_j(e[ct],i));function yP(n,e,t,i=""){return eo(n,nu(),t)?e+vs(t)+i:Wn}function bP(n,e,t,i,r,o=""){let s=qI(),l=GT(n,s,t,r);return Yh(2),l?e+vs(t)+i+vs(r)+o:Wn}function ee(n){return ie("",n),ee}function ie(n,e,t){let i=De(),r=yP(i,n,e,t);return r!==Wn&&wP(i,Jr(),r),ie}function zi(n,e,t,i,r){let o=De(),s=bP(o,n,e,t,i,r);return s!==Wn&&wP(o,Jr(),s),zi}function wP(n,e,t){let i=a0(e,n);vj(n[ct],i,t)}function Y(n,e,t){A0(e)&&(e=e());let i=De(),r=nu();if(eo(i,r,e)){let o=Ut(),s=ep();IT(s,i,n,e,i[ct],t)}return Y}function K(n,e){let t=A0(n);return t&&n.set(e),t}function Q(n,e){let t=De(),i=Ut(),r=qt();return dP(i,t,t[ct],r,n,e),Q}function Os(n,e,t=""){return yP(De(),n,e,t)}function Gp(n,e,t,i,r=""){return bP(De(),n,e,t,i,r)}function iU(n,e,t){let i=Ut();if(i.firstCreatePass){let r=hr(n);_b(t,i.data,i.blueprint,r,!0),_b(e,i.data,i.blueprint,r,!1)}}function _b(n,e,t,i,r){if(n=un(n),Array.isArray(n))for(let o=0;o<n.length;o++)_b(n[o],e,t,i,r);else{let o=Ut(),s=De(),l=qt(),c=gs(n)?n:un(n.provide),d=n0(n),h=l.providerIndexes&1048575,p=l.directiveStart,y=l.providerIndexes>>20;if(gs(n)||!n.multi){let _=new Is(d,r,$,null),S=W0(c,e,r?h:h+y,p);S===-1?(q0(pp(l,s),o,c),$0(o,n,e.length),e.push(c),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(_),s.push(_)):(t[S]=_,s[S]=_)}else{let _=W0(c,e,h+y,p),S=W0(c,e,h,h+y),I=_>=0&&t[_],x=S>=0&&t[S];if(r&&!x||!r&&!I){q0(pp(l,s),o,c);let T=sU(r?oU:rU,t.length,r,i,d,n);!r&&x&&(t[S].providerFactory=T),$0(o,n,e.length,0),e.push(c),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(T),s.push(T)}else{let T=CP(t[r?S:_],d,!r&&i);$0(o,n,_>-1?_:S,T)}!r&&i&&x&&t[S].componentProviders++}}}function $0(n,e,t,i){let r=gs(e),o=kI(e);if(r||o){let c=(o?un(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[i,c]):d[h+1].push(i,c)}else d.push(t,c)}}}function CP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function W0(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function rU(n,e,t,i,r){return vb(this.multi,[])}function oU(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,c=cu(i,i[me],this.providerFactory.index,r);s=c.slice(0,l),vb(o,s);for(let d=l;d<c.length;d++)s.push(c[d])}else s=[],vb(o,s);return s}function vb(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function sU(n,e,t,i,r,o){let s=new Is(n,t,$,null);return s.multi=[],s.index=e,s.componentProviders=0,CP(s,r,i&&!t),s}function ft(n,e=[]){return t=>{t.providersResolver=(i,r)=>iU(i,r?r(n):n,e)}}function nw(n,e,t){let i=Zh()+n,r=De();return r[i]===Wn?Wb(r,i,t?e.call(t):e()):PB(r,i)}function vi(n,e,t,i){return aU(De(),Zh(),n,e,t,i)}function EP(n,e){let t=n[e];return t===Wn?void 0:t}function aU(n,e,t,i,r,o){let s=e+t;return eo(n,s,r)?Wb(n,s+1,o?i.call(o,r):i(r)):EP(n,s+1)}function lU(n,e,t,i,r,o,s){let l=e+t;return GT(n,l,r,o)?Wb(n,l+2,s?i.call(s,r,o):i(r,o)):EP(n,l+2)}function Ui(n,e){let t=Ut(),i,r=n+At;t.firstCreatePass?(i=cU(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Co(i.type,!0)),s,l=Tn($);try{let c=hp(!1),d=o();return hp(c),c0(t,De(),r,d),d}finally{Tn(l)}}function cU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Hi(n,e,t,i){let r=n+At,o=De(),s=l0(o,r);return uU(o,r)?lU(o,Zh(),e,s.transform,t,i,s):s.transform(t,i)}function uU(n,e){return n[me].data[e].pure}function dn(n,e){return Fp(n,e)}var Mp=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},iw=(()=>{class n{compileModuleSync(t){return new Ep(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Jy(t),o=dT(r.declarations).reduce((s,l)=>{let c=lr(l);return c&&s.push(new Ro(c)),s},[]);return new Mp(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dU=(()=>{class n{zone=R(Je);changeDetectionScheduler=R(Yr);applicationRef=R(_i);applicationErrorHandler=R(On);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SP=new J("",{factory:()=>!1});function rw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Je(re(W({},sw()),{scheduleInRootZone:t})),[{provide:Je,useFactory:n},{provide:Kr,multi:!0,useFactory:()=>{let i=R(dU,{optional:!0});return()=>i.initialize()}},{provide:Kr,multi:!0,useFactory:()=>{let i=R(fU);return()=>{i.initialize()}}},e===!0?{provide:R0,useValue:!0}:[],{provide:O0,useValue:t??nP},{provide:On,useFactory:()=>{let i=R(Je),r=R(Ct),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(ki),o.handleError(s))})}}}]}function ow(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=rw({ngZoneFactory:()=>{let r=sw(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&Ps("NgZone_CoalesceEvent"),new Je(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return cr([{provide:SP,useValue:!0},{provide:ru,useValue:!1},i])}function sw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var fU=(()=>{class n{subscription=new qe;initialized=!1;zone=R(Je);pendingTasks=R(mr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Je.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Je.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DP=(()=>{class n{applicationErrorHandler=R(On);appRef=R(_i);taskService=R(mr);ngZone=R(Je);zonelessEnabled=R(ru);tracing=R(As,{optional:!0});disableScheduling=R(R0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(O0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Dp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?IM:iP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,IM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hU(){return typeof $localize<"u"&&$localize.locale||vu}var yl=new J("",{providedIn:"root",factory:()=>R(yl,{optional:!0,skipSelf:!0})||hU()}),aw=new J("",{providedIn:"root",factory:()=>Rz});function Gn(n){return _I(n)}function ks(n,e){return eh(n,e?.equal)}var xP=class{[bn];constructor(e){this[bn]=e}destroy(){this[bn].destroy()}};var RP=Symbol("InputSignalNode#UNSET"),IU=re(W({},th),{transformFn:void 0,applyValueToInputSignal(n,e){Na(n,e)}});function OP(n,e){let t=Object.create(IU);t.value=n,t.transformFn=e?.transform;function i(){if(Oa(t),t.value===RP){let r=null;throw new X(-950,r)}return t.value}return i[bn]=t,i}var Zp=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>hu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},MU=new J("");MU.__NG_ELEMENT_ID__=n=>{let e=qt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new X(204,!1)};function IP(n,e){return OP(n,e)}function TU(n){return OP(RP,n)}var kP=(IP.required=TU,IP);var lw=new J(""),PU=new J("");function yu(n){return!n.moduleRef}function AU(n){let e=yu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Je);return t.run(()=>{yu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(On),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),yu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(lw);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(lw);s.add(o),n.moduleRef.onDestroy(()=>{lu(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return OU(i,t,()=>{let o=e.get(mr),s=o.add(),l=e.get(ew);return l.runInitializers(),l.donePromise.then(()=>{let c=e.get(yl,vu);if(uP(c||vu),!e.get(PU,!0))return yu(n)?e.get(_i):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(yu(n)){let h=e.get(_i);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return RU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var RU;function OU(n,e,t){try{let i=t();return No(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var qp=null;function kU(n=[],e){return Gt.create({name:e,providers:[{provide:Qc,useValue:"platform"},{provide:lw,useValue:new Set([()=>qp=null])},...n]})}function NU(n=[]){if(qp)return qp;let e=kU(n);return qp=e,aP(),LU(e),e}function LU(n){let e=n.get(Pp,null);on(n,()=>{e?.forEach(t=>t())})}var fn=(()=>{class n{static __NG_ELEMENT_ID__=FU}return n})();function FU(n){return VU(qt(),De(),(n&16)===16)}function VU(n,e,t){if(Mo(n)&&!t){let i=mi(n.index,e);return new Ao(i,i)}else if(n.type&175){let i=e[$n];return new Ao(i,e)}return null}var cw=class{constructor(){}supports(e){return $b(e)}create(e){return new uw(e)}},jU=(n,e)=>e,uw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||jU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<MP(i,r,o)?t:i,l=MP(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let d=l-r,h=c-r;if(d!=h){for(let y=0;y<d;y++){let _=y<o.length?o[y]:o[y]=0,S=_+y;h<=S&&S<d&&(o[y]=_+1)}let p=s.previousIndex;o[p]=h-d}}l!==c&&e(s,l,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$b(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],s=this._trackByFn(l,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,WT(e,l=>{s=this._trackByFn(r,l),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,l,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,s,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new dw(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yp),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},fw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Yp=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new fw,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function MP(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}var hw=class{constructor(){}supports(e){return e instanceof Map||jp(e)}create(){return new pw}},pw=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||jp(e)))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,t);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new gw(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}},gw=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function TP(){return new Qp([new cw])}var Qp=(()=>{class n{factories;static \u0275prov=Z({token:n,providedIn:"root",factory:TP});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||TP()),deps:[[n,new yb,new Tp]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new X(901,!1)}}return n})();function PP(){return new mw([new hw])}var mw=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:PP});factories;constructor(t){this.factories=t}static create(t,i){if(i){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||PP()),deps:[[n,new yb,new Tp]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i)return i;throw new X(901,!1)}}return n})();function NP(n){Ke(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=NU(i),o=[rw({}),{provide:Yr,useExisting:DP},oM,...t||[]],s=new du({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return AU({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ke(9)}}function hn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function _w(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function LP(n,e){let t=lr(n),i=e.elementInjector||Xa();return new Ro(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function FP(n){let e=lr(n);if(!e)return null;let t=new Ro(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var BP=null;function yi(){return BP}function vw(n){BP??=n}var bu=class{},wu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>R(zP),providedIn:"platform"})}return n})(),yw=new J(""),zP=(()=>{class n extends wu{_location;_history;_doc=R(Qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yi().getBaseHref(this._doc)}onPopState(t){let i=yi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=yi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Kp(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function VP(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function $i(n){return n&&n[0]!=="?"?`?${n}`:n}var Wi=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>R(Xp),providedIn:"root"})}return n})(),Jp=new J(""),Xp=(()=>{class n extends Wi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??R(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Kp(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+$i(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+$i(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+$i(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ne(wu),ne(Jp,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yr=(()=>{class n{_subject=new fe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=UU(VP(jP(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+$i(i))}normalize(t){return n.stripTrailingSlash(zU(this._basePath,jP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$i(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$i(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=$i;static joinWithSlash=Kp;static stripTrailingSlash=VP;static \u0275fac=function(i){return new(i||n)(ne(Wi))};static \u0275prov=Z({token:n,factory:()=>BU(),providedIn:"root"})}return n})();function BU(){return new yr(ne(Wi))}function zU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function jP(n){return n.replace(/\/index.html$/,"")}function UU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ew=(()=>{class n extends Wi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=Kp(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+$i(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+$i(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ne(wu),ne(Jp,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),qP={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},ig=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(ig||{});var ri={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ns(n,e){let t=_u(n),i=t[Lo.NumberSymbols][e];if(typeof i>"u"){if(e===ri.CurrencyDecimal)return t[Lo.NumberSymbols][ri.Decimal];if(e===ri.CurrencyGroup)return t[Lo.NumberSymbols][ri.Group]}return i}function Sw(n,e){return _u(n)[Lo.NumberFormats][e]}function HU(n){return _u(n)[Lo.Currencies]}function ZP(n,e,t="en"){let i=HU(t)[n]||qP[n]||[],r=i[1];return e==="narrow"&&typeof r=="string"?r:i[0]||n}var $U=2;function YP(n){let e,t=qP[n];return t&&(e=t[2]),typeof e=="number"?e:$U}var WU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,UP=22,eg=".",Cu="0",GU=";",qU=",",bw="#",HP="\xA4";function QP(n,e,t,i,r,o,s=!1){let l="",c=!1;if(!isFinite(n))l=Ns(t,ri.Infinity);else{let d=YU(n);s&&(d=ZU(d));let h=e.minInt,p=e.minFrac,y=e.maxFrac;if(o){let H=o.match(WU);if(H===null)throw new X(2306,!1);let q=H[1],U=H[3],ae=H[5];q!=null&&(h=ww(q)),U!=null&&(p=ww(U)),ae!=null?y=ww(ae):U!=null&&p>y&&(y=p)}QU(d,p,y);let _=d.digits,S=d.integerLen,I=d.exponent,x=[];for(c=_.every(H=>!H);S<h;S++)_.unshift(0);for(;S<0;S++)_.unshift(0);S>0?x=_.splice(S,_.length):(x=_,_=[0]);let T=[];for(_.length>=e.lgSize&&T.unshift(_.splice(-e.lgSize,_.length).join(""));_.length>e.gSize;)T.unshift(_.splice(-e.gSize,_.length).join(""));_.length&&T.unshift(_.join("")),l=T.join(Ns(t,i)),x.length&&(l+=Ns(t,r)+x.join("")),I&&(l+=Ns(t,ri.Exponential)+"+"+I)}return n<0&&!c?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function KP(n,e,t,i,r){let o=Sw(e,ig.Currency),s=XP(o,Ns(e,ri.MinusSign));return s.minFrac=YP(i),s.maxFrac=s.minFrac,QP(n,s,e,ri.CurrencyGroup,ri.CurrencyDecimal,r).replace(HP,t).replace(HP,"").trim()}function JP(n,e,t){let i=Sw(e,ig.Decimal),r=XP(i,Ns(e,ri.MinusSign));return QP(n,r,e,ri.Group,ri.Decimal,t)}function XP(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(GU),r=i[0],o=i[1],s=r.indexOf(eg)!==-1?r.split(eg):[r.substring(0,r.lastIndexOf(Cu)+1),r.substring(r.lastIndexOf(Cu)+1)],l=s[0],c=s[1]||"";t.posPre=l.substring(0,l.indexOf(bw));for(let h=0;h<c.length;h++){let p=c.charAt(h);p===Cu?t.minFrac=t.maxFrac=h+1:p===bw?t.maxFrac=h+1:t.posSuf+=p}let d=l.split(qU);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let h=r.length-t.posPre.length-t.posSuf.length,p=o.indexOf(bw);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function ZU(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function YU(n){let e=Math.abs(n)+"",t=0,i,r,o,s,l;for((r=e.indexOf(eg))>-1&&(e=e.replace(eg,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Cu;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===Cu;)l--;for(r-=o,i=[],s=0;o<=l;o++,s++)i[s]=Number(e.charAt(o))}return r>UP&&(i=i.splice(0,UP-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function QU(n,e,t){if(e>t)throw new X(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,l=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let p=s;p<i.length;p++)i[p]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let p=1;p<s;p++)i[p]=0}if(l>=5)if(s-1<0){for(let p=0;p>s;p--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let c=o!==0,d=e+n.integerLen,h=i.reduceRight(function(p,y,_,S){return y=y+p,S[_]=y<10?y:y-10,c&&(S[_]===0&&_>=d?S.pop():c=!1),y>=10?1:0},0);h&&(i.unshift(h),n.integerLen++)}function ww(n){let e=parseInt(n);if(isNaN(e))throw new X(2305,!1);return e}var Cw=/\s+/,$P=[],Eu=(()=>{class n{_ngEl;_renderer;initialClasses=$P;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(Cw):$P}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Cw):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(Cw).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)($(Xe),$(Sn))};static \u0275dir=ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var tg=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},at=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new tg(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,s),WP(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);WP(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)($(ii),$(vr),$(Qp))};static \u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function WP(n,e){n.context.$implicit=e.item}var et=(()=>{class n{_viewContainer;_context=new ng;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){GP(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){GP(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)($(ii),$(vr))};static \u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ng=class{$implicit=null;ngIf=null};function GP(n,e){if(n&&!n.createEmbeddedView)throw new X(2020,!1)}var Dw=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){let[r,o]=t.split("."),s=r.indexOf("-")===-1?void 0:Bi.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)($(Xe),$(mw),$(Sn))};static \u0275dir=ve({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),xw=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)($(ii))};static \u0275dir=ve({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[sn]})}return n})();function e1(n,e){return new X(2100,!1)}var Su=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!t1(t))return null;r||=this._locale;try{let o=n1(t);return JP(o,r,i)}catch(o){throw e1(n,o.message)}}static \u0275fac=function(i){return new(i||n)($(yl,16))};static \u0275pipe=zp({name:"number",type:n,pure:!0})}return n})();var Ls=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,i="USD"){this._locale=t,this._defaultCurrencyCode=i}transform(t,i=this._defaultCurrencyCode,r="symbol",o,s){if(!t1(t))return null;s||=this._locale,typeof r=="boolean"&&(r=r?"symbol":"code");let l=i||this._defaultCurrencyCode;r!=="code"&&(r==="symbol"||r==="symbol-narrow"?l=ZP(l,r==="symbol"?"wide":"narrow",s):l=r);try{let c=n1(t);return KP(c,s,l,i,o)}catch(c){throw e1(n,c.message)}}static \u0275fac=function(i){return new(i||n)($(yl,16),$(aw,16))};static \u0275pipe=zp({name:"currency",type:n,pure:!0})}return n})();function t1(n){return!(n==null||n===""||n!==n)}function n1(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new X(2309,!1);return n}var Ue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({})}return n})();function Du(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Fs=class{};var Mw="browser";function i1(n){return n===Mw}var r1=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new Iw(R(Qe),window)})}return n})(),Iw=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(re(W({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let i=JU(this.document,e);i&&(this.scrollToElement(i,t),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(So(2400,!1))}}scrollToElement(e,t){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(re(W({},t),{left:r-s[0],top:o-s[1]}))}};function JU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var og=new J(""),Ow=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new X(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(ne(og),ne(Je))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),xu=class{_doc;constructor(e){this._doc=e}manager},Tw="ng-app-id";function o1(n){for(let e of n)e.remove()}function s1(n,e){let t=e.createElement("style");return t.textContent=n,t}function XU(n,e,t,i){let r=n.head?.querySelectorAll(`style[${Tw}="${e}"],link[${Tw}="${e}"]`);if(r)for(let o of r)o.removeAttribute(Tw),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Aw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var kw=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,XU(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,s1);i?.forEach(r=>this.addUsage(r,this.external,Aw))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(o1(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])o1(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,s1(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,Aw(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ne(Qe),ne(pl),ne(Ap,8),ne(Oo))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Pw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nw=/%COMP%/g;var l1="%COMP%",e3=`_nghost-${l1}`,t3=`_ngcontent-${l1}`,n3=!0,i3=new J("",{providedIn:"root",factory:()=>n3});function r3(n){return t3.replace(Nw,n)}function o3(n){return e3.replace(Nw,n)}function c1(n,e){return e.map(t=>t.replace(Nw,n))}var Lw=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,l,c,d=null,h=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=l,this.ngZone=c,this.nonce=d,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Iu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof rg?r.applyToHost(t):r instanceof Mu&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(i.encapsulation){case Xr.Emulated:o=new rg(c,d,i,this.appId,h,s,l,p,y);break;case Xr.ShadowDom:return new Rw(c,d,t,i,s,l,this.nonce,p,y);default:o=new Mu(c,d,i,h,s,l,p,y);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(ne(Ow),ne(kw),ne(pl),ne(i3),ne(Qe),ne(Oo),ne(Je),ne(Ap),ne(As,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Iu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Pw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(a1(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(a1(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new X(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Pw[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Pw[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Bi.DashCase|Bi.Important)?e.style.setProperty(t,i,r&Bi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Bi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=yi().getGlobalEventTarget(this.doc,e),!e))throw new X(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function a1(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Rw=class extends Iu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,l,c,d){super(e,o,s,c,d),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=c1(r.id,h);for(let y of h){let _=document.createElement("style");l&&_.setAttribute("nonce",l),_.textContent=y,this.shadowRoot.appendChild(_)}let p=r.getExternalStyles?.();if(p)for(let y of p){let _=Aw(y,o);l&&_.setAttribute("nonce",l),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Mu=class extends Iu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,l,c,d){super(e,o,s,l,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let h=i.styles;this.styles=d?c1(d,h):h,this.styleUrls=i.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rg=class extends Mu{contentAttr;hostAttr;constructor(e,t,i,r,o,s,l,c,d){let h=r+"-"+i.id;super(e,t,i,o,s,l,c,d,h),this.contentAttr=r3(h),this.hostAttr=o3(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var sg=class n extends bu{supportsDOMEvents=!0;static makeCurrent(){vw(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=s3();return t==null?null:a3(t)}resetBaseElement(){Tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Du(document.cookie,e)}},Tu=null;function s3(){return Tu=Tu||document.head.querySelector("base"),Tu?Tu.getAttribute("href"):null}function a3(n){return new URL(n,document.baseURI).pathname}var l3=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),d1=(()=>{class n extends xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(ne(Qe))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),u1=["alt","control","meta","shift"],c3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},u3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},f1=(()=>{class n extends xu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yi().onAndCancel(t,s.domEventName,l,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),s="code."),u1.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),s+=d+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=c3[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),u1.forEach(s=>{if(s!==r){let l=u3[s];l(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(ne(Qe))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function Fw(n,e){let t=W({rootComponent:n},d3(e));return NP(t)}function d3(n){return{appProviders:[...m3,...n?.providers??[]],platformProviders:g3}}function f3(){sg.makeCurrent()}function h3(){return new ki}function p3(){return Cb(document),document}var g3=[{provide:Oo,useValue:Mw},{provide:Pp,useValue:f3,multi:!0},{provide:Qe,useFactory:p3}];var m3=[{provide:Qc,useValue:"root"},{provide:ki,useFactory:h3},{provide:og,useClass:d1,multi:!0,deps:[Qe]},{provide:og,useClass:f1,multi:!0,deps:[Qe]},Lw,kw,Ow,{provide:ni,useExisting:Lw},{provide:Fs,useClass:l3},[]];var Cl=class{},Pu=class{},Fo=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(l=>o.indexOf(l)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var lg=class{encodeKey(e){return h1(e)}encodeValue(e){return h1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function _3(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,l]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(l),t.set(s,c)}),t}var v3=/%(\d[a-f0-9])/gi,y3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function h1(n){return encodeURIComponent(n).replace(v3,(e,t)=>y3[t]??e)}function ag(n){return`${n}`}var no=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new lg,e.fromString){if(e.fromObject)throw new X(2805,!1);this.map=_3(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(ag):[ag(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ag(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(ag(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var cg=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function b3(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function p1(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function g1(n){return typeof Blob<"u"&&n instanceof Blob}function m1(n){return typeof FormData<"u"&&n instanceof FormData}function w3(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var _1="Content-Type",v1="Accept",b1="X-Request-URL",w1="text/plain",C1="application/json",C3=`${C1}, ${w1}, */*`,bl=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(b3(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new Fo,this.context??=new cg,!this.params)this.params=new no,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let l=t.indexOf("?"),c=l===-1?"?":l<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||p1(this.body)||g1(this.body)||m1(this.body)||w3(this.body)?this.body:this.body instanceof no?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||m1(this.body)?null:g1(this.body)?this.body.type||null:p1(this.body)?null:typeof this.body=="string"?w1:this.body instanceof no?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?C1:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,l=e.cache||this.cache,c=e.mode||this.mode,d=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.transferCache??this.transferCache,y=e.timeout??this.timeout,_=e.body!==void 0?e.body:this.body,S=e.withCredentials??this.withCredentials,I=e.reportProgress??this.reportProgress,x=e.headers||this.headers,T=e.params||this.params,H=e.context??this.context;return e.setHeaders!==void 0&&(x=Object.keys(e.setHeaders).reduce((q,U)=>q.set(U,e.setHeaders[U]),x)),e.setParams&&(T=Object.keys(e.setParams).reduce((q,U)=>q.set(U,e.setParams[U]),T)),new n(t,i,_,{params:T,headers:x,context:H,reportProgress:I,responseType:r,withCredentials:S,transferCache:p,keepalive:o,cache:l,priority:s,timeout:y,mode:c,redirect:d,credentials:h})}},Vs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vs||{}),El=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new Fo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ug=class n extends El{constructor(e={}){super(e)}type=Vs.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Au=class n extends El{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Vs.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},wl=class extends El{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},E3=200,S3=204;function Vw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect}}var Sl=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof bl)o=t;else{let c;r.headers instanceof Fo?c=r.headers:c=new Fo(r.headers);let d;r.params&&(r.params instanceof no?d=r.params:d=new no({fromObject:r.params})),o=new bl(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials})}let s=ue(o).pipe(ar(c=>this.handler.handle(c)));if(t instanceof bl||r.observe==="events")return s;let l=s.pipe(tn(c=>c instanceof Au));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Se(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new X(2806,!1);return c.body}));case"blob":return l.pipe(Se(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new X(2807,!1);return c.body}));case"text":return l.pipe(Se(c=>{if(c.body!==null&&typeof c.body!="string")throw new X(2808,!1);return c.body}));case"json":default:return l.pipe(Se(c=>c.body))}case"response":return l;default:throw new X(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new no().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Vw(r,i))}post(t,i,r={}){return this.request("POST",t,Vw(r,i))}put(t,i,r={}){return this.request("PUT",t,Vw(r,i))}static \u0275fac=function(i){return new(i||n)(ne(Cl))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var D3=new J("");function E1(n,e){return e(n)}function x3(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function I3(n,e,t){return(i,r)=>on(t,()=>e(i,o=>n(o,r)))}var S1=new J(""),Bw=new J(""),D1=new J(""),zw=new J("",{providedIn:"root",factory:()=>!0});function M3(){let n=null;return(e,t)=>{n===null&&(n=(R(S1,{optional:!0})??[]).reduceRight(x3,E1));let i=R(ou);if(R(zw)){let o=i.add();return n(e,t).pipe(wo(o))}else return n(e,t)}}var dg=(()=>{class n extends Cl{backend;injector;chain=null;pendingTasks=R(ou);contributeToStability=R(zw);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Bw),...this.injector.get(D1,[])]));this.chain=i.reduceRight((r,o)=>I3(r,o,this.injector),E1)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(wo(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(ne(Pu),ne(Ct))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var T3=/^\)\]\}',?\n/,P3=RegExp(`^${b1}:`,"m");function A3(n){return"responseURL"in n&&n.responseURL?n.responseURL:P3.test(n.getAllResponseHeaders())?n.getResponseHeader(b1):null}var jw=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new X(-2800,!1);let i=this.xhrFactory;return ue(null).pipe(nn(()=>new be(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,T)=>s.setRequestHeader(x,T.join(","))),t.headers.has(v1)||s.setRequestHeader(v1,C3),!t.headers.has(_1)){let x=t.detectContentTypeHeader();x!==null&&s.setRequestHeader(_1,x)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let x=t.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let l=t.serializeBody(),c=null,d=()=>{if(c!==null)return c;let x=s.statusText||"OK",T=new Fo(s.getAllResponseHeaders()),H=A3(s)||t.url;return c=new ug({headers:T,status:s.status,statusText:x,url:H}),c},h=()=>{let{headers:x,status:T,statusText:H,url:q}=d(),U=null;T!==S3&&(U=typeof s.response>"u"?s.responseText:s.response),T===0&&(T=U?E3:0);let ae=T>=200&&T<300;if(t.responseType==="json"&&typeof U=="string"){let $e=U;U=U.replace(T3,"");try{U=U!==""?JSON.parse(U):null}catch(pe){U=$e,ae&&(ae=!1,U={error:pe,text:U})}}ae?(o.next(new Au({body:U,headers:x,status:T,statusText:H,url:q||void 0})),o.complete()):o.error(new wl({error:U,headers:x,status:T,statusText:H,url:q||void 0}))},p=x=>{let{url:T}=d(),H=new wl({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});o.error(H)},y=p;t.timeout&&(y=x=>{let{url:T}=d(),H=new wl({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:T||void 0});o.error(H)});let _=!1,S=x=>{_||(o.next(d()),_=!0);let T={type:Vs.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(T.total=x.total),t.responseType==="text"&&s.responseText&&(T.partialText=s.responseText),o.next(T)},I=x=>{let T={type:Vs.UploadProgress,loaded:x.loaded};x.lengthComputable&&(T.total=x.total),o.next(T)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",y),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",S),l!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(l),o.next({type:Vs.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",y),t.reportProgress&&(s.removeEventListener("progress",S),l!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(ne(Fs))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),x1=new J(""),R3="XSRF-TOKEN",O3=new J("",{providedIn:"root",factory:()=>R3}),k3="X-XSRF-TOKEN",N3=new J("",{providedIn:"root",factory:()=>k3}),Ru=class{},L3=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Du(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(ne(Qe),ne(O3))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function F3(n,e){let t=n.url.toLowerCase();if(!R(x1)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=R(Ru).getToken(),r=R(N3);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Uw=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Uw||{});function V3(n,e){return{\u0275kind:n,\u0275providers:e}}function fg(...n){let e=[Sl,jw,dg,{provide:Cl,useExisting:dg},{provide:Pu,useFactory:()=>R(D3,{optional:!0})??R(jw)},{provide:Bw,useValue:F3,multi:!0},{provide:x1,useValue:!0},{provide:Ru,useClass:L3}];for(let t of n)e.push(...t.\u0275providers);return cr(e)}var y1=new J("");function I1(){return V3(Uw.LegacyInterceptors,[{provide:y1,useFactory:M3},{provide:Bw,useExisting:y1,multi:!0}])}var Hw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({providers:[fg(I1())]})}return n})();var hg=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(ne(Qe))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ae="primary",Wu=Symbol("RouteTitle"),Zw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zs(n){return new Zw(n)}function F1(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],l=n[o];if(s[0]===":")r[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function j3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!br(n[t],e[t]))return!1;return!0}function br(n,e){let t=n?Yw(n):void 0,i=e?Yw(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!V1(n[r],e[r]))return!1;return!0}function Yw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function V1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function j1(n){return n.length>0?n[n.length-1]:null}function io(n){return Dh(n)?n:No(n)?We(Promise.resolve(n)):ue(n)}var B3={exact:z1,subset:U1},B1={exact:z3,subset:U3,ignored:()=>!0};function P1(n,e,t){return B3[t.paths](n.root,e.root,t.matrixParams)&&B1[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function z3(n,e){return br(n,e)}function z1(n,e,t){if(!js(n.segments,e.segments)||!mg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!z1(n.children[i],e.children[i],t))return!1;return!0}function U3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>V1(n[t],e[t]))}function U1(n,e,t){return H1(n,e,e.segments,t)}function H1(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!js(r,t)||e.hasChildren()||!mg(r,t,i))}else if(n.segments.length===t.length){if(!js(n.segments,t)||!mg(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!U1(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!js(n.segments,r)||!mg(n.segments,r,i)||!n.children[Ae]?!1:H1(n.children[Ae],e,o,i)}}function mg(n,e,t){return e.every((i,r)=>B1[t](n[r].parameters,i.parameters))}var Cr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ze([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){return W3.serialize(this)}},Ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _g(this)}},Vo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zs(this.parameters),this._parameterMap}toString(){return W1(this)}};function H3(n,e){return js(n,e)&&n.every((t,i)=>br(t.parameters,e[i].parameters))}function js(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function $3(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Ae&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Ae&&(t=t.concat(e(r,i)))}),t}var Us=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>new jo,providedIn:"root"})}return n})(),jo=class{parse(e){let t=new Kw(e);return new Cr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ou(e.root,!0)}`,i=Z3(e.queryParams),r=typeof e.fragment=="string"?`#${G3(e.fragment)}`:"";return`${t}${i}${r}`}},W3=new jo;function _g(n){return n.segments.map(e=>W1(e)).join("/")}function Ou(n,e){if(!n.hasChildren())return _g(n);if(e){let t=n.children[Ae]?Ou(n.children[Ae],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Ae&&i.push(`${r}:${Ou(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=$3(n,(i,r)=>r===Ae?[Ou(n.children[Ae],!1)]:[`${r}:${Ou(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ae]!=null?`${_g(n)}/${t[0]}`:`${_g(n)}/(${t.join("//")})`}}function $1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pg(n){return $1(n).replace(/%3B/gi,";")}function G3(n){return encodeURI(n)}function Qw(n){return $1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vg(n){return decodeURIComponent(n)}function A1(n){return vg(n.replace(/\+/g,"%20"))}function W1(n){return`${Qw(n.path)}${q3(n.parameters)}`}function q3(n){return Object.entries(n).map(([e,t])=>`;${Qw(e)}=${Qw(t)}`).join("")}function Z3(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${pg(t)}=${pg(r)}`).join("&"):`${pg(t)}=${pg(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Y3=/^[^\/()?;#]+/;function $w(n){let e=n.match(Y3);return e?e[0]:""}var Q3=/^[^\/()?;=#]+/;function K3(n){let e=n.match(Q3);return e?e[0]:""}var J3=/^[^=?&#]+/;function X3(n){let e=n.match(J3);return e?e[0]:""}var eH=/^[^&#]+/;function tH(n){let e=n.match(eH);return e?e[0]:""}var Kw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ae]=new Ze(e,t)),i}parseSegment(){let e=$w(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Vo(vg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=K3(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=$w(this.remaining);r&&(i=r,this.capture(i))}e[vg(t)]=vg(i)}parseQueryParam(e){let t=X3(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=tH(this.remaining);s&&(i=s,this.capture(i))}let r=A1(t),o=A1(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=$w(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new X(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ae]:new Ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function G1(n){return n.segments.length>0?new Ze([],{[Ae]:n}):n}function q1(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=q1(r);if(i===Ae&&o.segments.length===0&&o.hasChildren())for(let[s,l]of Object.entries(o.children))e[s]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Ze(n.segments,e);return nH(t)}function nH(n){if(n.numberOfChildren===1&&n.children[Ae]){let e=n.children[Ae];return new Ze(n.segments.concat(e.segments),e.children)}return n}function Bo(n){return n instanceof Cr}function Z1(n,e,t=null,i=null){let r=Y1(n);return Q1(r,e,t,i)}function Y1(n){let e;function t(o){let s={};for(let c of o.children){let d=t(c);s[c.outlet]=d}let l=new Ze(o.url,s);return o===n&&(e=l),l}let i=t(n.root),r=G1(i);return e??r}function Q1(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Ww(r,r,r,t,i);let o=iH(e);if(o.toRoot())return Ww(r,r,new Ze([],{}),t,i);let s=rH(o,r,n),l=s.processChildren?Nu(s.segmentGroup,s.index,o.commands):J1(s.segmentGroup,s.index,o.commands);return Ww(r,s.segmentGroup,l,t,i)}function yg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fu(n){return typeof n=="object"&&n!=null&&n.outlets}function Ww(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let s;n===e?s=t:s=K1(n,e,t);let l=G1(q1(s));return new Cr(l,o,r)}function K1(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=K1(o,e,t)}),new Ze(n.segments,i)}var bg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&yg(i[0]))throw new X(4003,!1);let r=i.find(Fu);if(r&&r!==j1(i))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new bg(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([c,d])=>{l[c]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((l,c)=>{c==0&&l==="."||(c==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new bg(t,e,i)}var Il=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function rH(n,e,t){if(n.isAbsolute)return new Il(e,!0,0);if(!t)return new Il(e,!1,NaN);if(t.parent===null)return new Il(t,!0,0);let i=yg(n.commands[0])?0:1,r=t.segments.length-1+i;return oH(t,r,n.numberOfDoubleDots)}function oH(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new X(4005,!1);r=i.segments.length}return new Il(i,!1,r-o)}function sH(n){return Fu(n[0])?n[0].outlets:{[Ae]:n}}function J1(n,e,t){if(n??=new Ze([],{}),n.segments.length===0&&n.hasChildren())return Nu(n,e,t);let i=aH(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Ze(n.segments.slice(0,i.pathIndex),{});return o.children[Ae]=new Ze(n.segments.slice(i.pathIndex),n.children),Nu(o,0,r)}else return i.match&&r.length===0?new Ze(n.segments,{}):i.match&&!n.hasChildren()?Jw(n,e,t):i.match?Nu(n,0,r):Jw(n,e,t)}function Nu(n,e,t){if(t.length===0)return new Ze(n.segments,{});{let i=sH(t),r={};if(Object.keys(i).some(o=>o!==Ae)&&n.children[Ae]&&n.numberOfChildren===1&&n.children[Ae].segments.length===0){let o=Nu(n.children[Ae],e,t);return new Ze(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=J1(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Ze(n.segments,r)}}function aH(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],l=t[i];if(Fu(l))break;let c=`${l}`,d=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!O1(c,d,s))return o;i+=2}else{if(!O1(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Jw(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Fu(o)){let c=lH(o.outlets);return new Ze(i,c)}if(r===0&&yg(t[0])){let c=n.segments[e];i.push(new Vo(c.path,R1(t[0]))),r++;continue}let s=Fu(o)?o.outlets[Ae]:`${o}`,l=r<t.length-1?t[r+1]:null;s&&l&&yg(l)?(i.push(new Vo(s,R1(l))),r+=2):(i.push(new Vo(s,{})),r++)}return new Ze(i,{})}function lH(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Jw(new Ze([],{}),0,i))}),e}function R1(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function O1(n,e,t){return n==t.path&&br(e,t.parameters)}var Ml="imperative",Kt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Kt||{}),si=class{id;url;constructor(e,t){this.id=e,this.url=t}},Er=class extends si{type=Kt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gn=class extends si{urlAfterRedirects;type=Kt.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ln=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Ln||{}),Pl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Pl||{}),wr=class extends si{reason;code;type=Kt.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Sr=class extends si{reason;code;type=Kt.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Al=class extends si{error;target;type=Kt.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vu=class extends si{urlAfterRedirects;state;type=Kt.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wg=class extends si{urlAfterRedirects;state;type=Kt.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cg=class extends si{urlAfterRedirects;state;shouldActivate;type=Kt.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eg=class extends si{urlAfterRedirects;state;type=Kt.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sg=class extends si{urlAfterRedirects;state;type=Kt.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dg=class{route;type=Kt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xg=class{route;type=Kt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ig=class{snapshot;type=Kt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mg=class{snapshot;type=Kt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tg=class{snapshot;type=Kt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pg=class{snapshot;type=Kt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rl=class{routerEvent;position;anchor;type=Kt.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ju=class{},Ol=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function cH(n){return!(n instanceof ju)&&!(n instanceof Ol)}function uH(n,e){return n.providers&&!n._injector&&(n._injector=_l(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gi(n){return n.outlet||Ae}function dH(n,e){let t=n.filter(i=>Gi(i)===e);return t.push(...n.filter(i=>Gi(i)!==e)),t}function Ll(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ag=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ll(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Hs(this.rootInjector)}},Hs=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ag(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(ne(Ct))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Xw(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Xw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=eC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return eC(e,this._root).map(t=>t.value)}};function Xw(n,e){if(n===e.value)return e;for(let t of e.children){let i=Xw(n,t);if(i)return i}return null}function eC(n,e){if(n===e.value)return[e];for(let t of e.children){let i=eC(n,t);if(i.length)return i.unshift(e),i}return[]}var oi=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bu=class extends Rg{snapshot;constructor(e,t){super(e),this.snapshot=t,lC(this,e)}toString(){return this.snapshot.toString()}};function X1(n){let e=fH(n),t=new Tt([new Vo("",{})]),i=new Tt({}),r=new Tt({}),o=new Tt({}),s=new Tt(""),l=new ln(t,i,o,s,r,Ae,n,e.root);return l.snapshot=e.root,new Bu(new oi(l,[]),e)}function fH(n){let e={},t={},i={},r="",o=new Bs([],e,i,r,t,Ae,n,null,{});return new zu("",new oi(o,[]))}var ln=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,l,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Se(d=>d[Wu]))??ue(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Se(e=>zs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Se(e=>zs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Og(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),r?.data),n._resolvedData)}:i={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},r&&tA(r)&&(i.resolve[Wu]=r.title),i}var Bs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Wu]}constructor(e,t,i,r,o,s,l,c,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=l,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},zu=class extends Rg{url;constructor(e,t){super(t),this.url=e,lC(this,t)}toString(){return eA(this._root)}};function lC(n,e){e.value._routerState=n,e.children.forEach(t=>lC(n,t))}function eA(n){let e=n.children.length>0?` { ${n.children.map(eA).join(", ")} } `:"";return`${n.value}${e}`}function Gw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,br(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),br(e.params,t.params)||n.paramsSubject.next(t.params),j3(e.url,t.url)||n.urlSubject.next(t.url),br(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tC(n,e){let t=br(n.params,e.params)&&H3(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||tC(n.parent,e.parent))}function tA(n){return typeof n.title=="string"||n.title===null}var nA=new J(""),Gu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ae;activateEvents=new xe;deactivateEvents=new xe;attachEvents=new xe;detachEvents=new xe;routerOutletData=kP(void 0);parentContexts=R(Hs);location=R(ii);changeDetector=R(fn);inputBinder=R(qu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new nC(t,l,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[sn]})}return n})(),nC=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===ln?this.route:e===Hs?this.childContexts:e===nA?this.outletData:this.parent.get(e,t)}},qu=new J(""),cC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=fs([i.queryParams,i.params,i.data]).pipe(nn(([o,s,l],c)=>(l=W(W(W({},o),s),l),c===0?ue(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=FP(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of s.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),uC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=he({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&oe(0,"router-outlet")},dependencies:[Gu],encapsulation:2})}return n})();function dC(n){let e=n.children&&n.children.map(dC),t=e?re(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ae&&(t.component=uC),t}function hH(n,e,t){let i=Uu(n,e._root,t?t._root:void 0);return new Bu(i,e)}function Uu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=pH(n,e,t);return new oi(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(l=>Uu(n,l)),s}}let i=gH(e.value),r=e.children.map(o=>Uu(n,o));return new oi(i,r)}}function pH(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Uu(n,i,r);return Uu(n,i)})}function gH(n){return new ln(new Tt(n.url),new Tt(n.params),new Tt(n.queryParams),new Tt(n.fragment),new Tt(n.data),n.outlet,n.component,n)}var kl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},iA="ngNavigationCancelingError";function kg(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Bo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=rA(!1,Ln.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function rA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[iA]=!0,t.cancellationCode=e,t}function mH(n){return oA(n)&&Bo(n.url)}function oA(n){return!!n&&n[iA]}var _H=(n,e,t,i)=>Se(r=>(new iC(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),iC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Gw(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=xl(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=xl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=xl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=xl(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Pg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mg(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Gw(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),Gw(l.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},Ng=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Tl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function vH(n,e,t){let i=n._root,r=e?e._root:null;return ku(i,r,t,[i.value])}function yH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fl(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!jy(n)?n:e.get(n):i}function ku(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=xl(e);return n.children.forEach(s=>{bH(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>Lu(l,t.getContext(s),r)),r}function bH(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=wH(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Ng(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ku(n,e,l?l.children:null,i,r):ku(n,e,t,i,r),c&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new Tl(l.outlet.component,s))}else s&&Lu(e,l,r),r.canActivateChecks.push(new Ng(i)),o.component?ku(n,null,l?l.children:null,i,r):ku(n,null,t,i,r);return r}function wH(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!js(n.url,e.url);case"pathParamsOrQueryParamsChange":return!js(n.url,e.url)||!br(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tC(n,e)||!br(n.queryParams,e.queryParams);case"paramsChange":default:return!tC(n,e)}}function Lu(n,e,t){let i=xl(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Lu(s,e.children.getContext(o),t):Lu(s,null,t):Lu(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Tl(e.outlet.component,r)):t.canDeactivateChecks.push(new Tl(null,r)):t.canDeactivateChecks.push(new Tl(null,r))}function Zu(n){return typeof n=="function"}function CH(n){return typeof n=="boolean"}function EH(n){return n&&Zu(n.canLoad)}function SH(n){return n&&Zu(n.canActivate)}function DH(n){return n&&Zu(n.canActivateChild)}function xH(n){return n&&Zu(n.canDeactivate)}function IH(n){return n&&Zu(n.canMatch)}function sA(n){return n instanceof Ai||n?.name==="EmptyError"}var gg=Symbol("INITIAL_VALUE");function Nl(){return nn(n=>fs(n.map(e=>e.pipe(Ri(1),Oi(gg)))).pipe(Se(e=>{for(let t of e)if(t!==!0){if(t===gg)return gg;if(t===!1||MH(t))return t}return!0}),tn(e=>e!==gg),Ri(1)))}function MH(n){return Bo(n)||n instanceof kl}function TH(n,e){return Pt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ue(re(W({},t),{guardsResult:!0})):PH(s,i,r,n).pipe(Pt(l=>l&&CH(l)?AH(i,o,n,e):ue(l)),Se(l=>re(W({},t),{guardsResult:l})))})}function PH(n,e,t,i){return We(n).pipe(Pt(r=>LH(r.component,r.route,t,e,i)),Gr(r=>r!==!0,!0))}function AH(n,e,t,i){return We(e).pipe(ar(r=>Za(OH(r.route.parent,i),RH(r.route,i),NH(n,r.path,t),kH(n,r.route,t))),Gr(r=>r!==!0,!0))}function RH(n,e){return n!==null&&e&&e(new Tg(n)),ue(!0)}function OH(n,e){return n!==null&&e&&e(new Ig(n)),ue(!0)}function kH(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ue(!0);let r=i.map(o=>zc(()=>{let s=Ll(e)??t,l=Fl(o,s),c=SH(l)?l.canActivate(e,n):on(s,()=>l(e,n));return io(c).pipe(Gr())}));return ue(r).pipe(Nl())}function NH(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>yH(s)).filter(s=>s!==null).map(s=>zc(()=>{let l=s.guards.map(c=>{let d=Ll(s.node)??t,h=Fl(c,d),p=DH(h)?h.canActivateChild(i,n):on(d,()=>h(i,n));return io(p).pipe(Gr())});return ue(l).pipe(Nl())}));return ue(o).pipe(Nl())}function LH(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(l=>{let c=Ll(e)??r,d=Fl(l,c),h=xH(d)?d.canDeactivate(n,e,t,i):on(c,()=>d(n,e,t,i));return io(h).pipe(Gr())});return ue(s).pipe(Nl())}function FH(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return ue(!0);let o=r.map(s=>{let l=Fl(s,n),c=EH(l)?l.canLoad(e,t):on(n,()=>l(e,t));return io(c)});return ue(o).pipe(Nl(),aA(i))}function aA(n){return gy(Bt(e=>{if(typeof e!="boolean")throw kg(n,e)}),Se(e=>e===!0))}function VH(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return ue(!0);let o=r.map(s=>{let l=Fl(s,n),c=IH(l)?l.canMatch(e,t):on(n,()=>l(e,t));return io(c)});return ue(o).pipe(Nl(),aA(i))}var Hu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},$u=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Dl(n){return Ga(new Hu(n))}function jH(n){return Ga(new X(4e3,!1))}function BH(n){return Ga(rA(!1,Ln.GuardRejected))}var rC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ue(i);if(r.numberOfChildren>1||!r.children[Ae])return jH(`${e.redirectTo}`);r=r.children[Ae]}}applyRedirectCommands(e,t,i,r,o){return zH(t,r,o).pipe(Se(s=>{if(s instanceof Cr)throw new $u(s);let l=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new $u(l);return l}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Cr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([l,c])=>{s[l]=this.createSegmentGroup(e,c,i,r)}),new Ze(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new X(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function zH(n,e,t){if(typeof n=="string")return ue(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:l,outlet:c,params:d,data:h,title:p}=e;return io(on(t,()=>i({params:d,data:h,queryParams:r,fragment:o,routeConfig:s,url:l,outlet:c,title:p})))}var oC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UH(n,e,t,i,r){let o=lA(n,e,t);return o.matched?(i=uH(e,i),VH(i,e,t,r).pipe(Se(s=>s===!0?o:W({},oC)))):ue(o)}function lA(n,e,t){if(e.path==="**")return HH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},oC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||F1)(t,n,e);if(!r)return W({},oC);let o={};Object.entries(r.posParams??{}).forEach(([l,c])=>{o[l]=c.path});let s=r.consumed.length>0?W(W({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function HH(n){return{matched:!0,parameters:n.length>0?j1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function k1(n,e,t,i){return t.length>0&&GH(n,t,i)?{segmentGroup:new Ze(e,WH(i,new Ze(t,n.children))),slicedSegments:[]}:t.length===0&&qH(n,t,i)?{segmentGroup:new Ze(n.segments,$H(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ze(n.segments,n.children),slicedSegments:t}}function $H(n,e,t,i){let r={};for(let o of t)if(Fg(n,e,o)&&!i[Gi(o)]){let s=new Ze([],{});r[Gi(o)]=s}return W(W({},i),r)}function WH(n,e){let t={};t[Ae]=e;for(let i of n)if(i.path===""&&Gi(i)!==Ae){let r=new Ze([],{});t[Gi(i)]=r}return t}function GH(n,e,t){return t.some(i=>Fg(n,e,i)&&Gi(i)!==Ae)}function qH(n,e,t){return t.some(i=>Fg(n,e,i))}function Fg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function ZH(n,e,t){return e.length===0&&!n.children[t]}var sC=class{};function YH(n,e,t,i,r,o,s="emptyOnly"){return new aC(n,e,t,i,r,s,o).recognize()}var QH=31,aC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new rC(this.urlSerializer,this.urlTree)}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=k1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Se(({children:t,rootSnapshot:i})=>{let r=new oi(i,t),o=new zu("",r),s=Z1(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Bs([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ae,t).pipe(Se(i=>({children:i,rootSnapshot:t})),Wr(i=>{if(i instanceof $u)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Hu?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Se(s=>s instanceof oi?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return We(o).pipe(ar(s=>{let l=i.children[s],c=dH(t,s);return this.processSegmentGroup(e,c,l,s,r)}),Sy((s,l)=>(s.push(...l),s)),bo(null),Ey(),Pt(s=>{if(s===null)return Dl(i);let l=cA(s);return KH(l),ue(l)}))}processSegment(e,t,i,r,o,s,l){return We(t).pipe(ar(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,l).pipe(Wr(d=>{if(d instanceof Hu)return ue(null);throw d}))),Gr(c=>!!c),Wr(c=>{if(sA(c))return ZH(i,r,o)?ue(new sC):Dl(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,l,c){return Gi(i)!==s&&(s===Ae||!Fg(r,o,i))?Dl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c):Dl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,l){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=lA(t,r,o);if(!c)return Dl(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QH&&(this.allowRedirects=!1));let _=new Bs(o,d,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,N1(r),Gi(r),r.component??r._loadedComponent??null,r,L1(r)),S=Og(_,l,this.paramsInheritanceStrategy);return _.params=Object.freeze(S.params),_.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,r.redirectTo,p,_,e).pipe(nn(x=>this.applyRedirects.lineralizeSegments(r,x)),Pt(x=>this.processSegment(e,i,t,x.concat(y),s,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let l=UH(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(nn(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(nn(({routes:d})=>{let h=i._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:_}=c,S=new Bs(y,p,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,N1(i),Gi(i),i.component??i._loadedComponent??null,i,L1(i)),I=Og(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(I.params),S.data=Object.freeze(I.data);let{segmentGroup:x,slicedSegments:T}=k1(t,y,_,d);if(T.length===0&&x.hasChildren())return this.processChildren(h,d,x,S).pipe(Se(q=>new oi(S,q)));if(d.length===0&&T.length===0)return ue(new oi(S,[]));let H=Gi(i)===o;return this.processSegment(h,d,x,T,H?Ae:o,!0,S).pipe(Se(q=>new oi(S,q instanceof oi?[q]:[])))}))):Dl(t)))}getChildConfig(e,t,i){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):FH(e,t,i,this.urlSerializer).pipe(Pt(r=>r?this.configLoader.loadChildren(e,t).pipe(Bt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):BH(t))):ue({routes:[],injector:e})}};function KH(n){n.sort((e,t)=>e.value.outlet===Ae?-1:t.value.outlet===Ae?1:e.value.outlet.localeCompare(t.value.outlet))}function JH(n){let e=n.value.routeConfig;return e&&e.path===""}function cA(n){let e=[],t=new Set;for(let i of n){if(!JH(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=cA(i.children);e.push(new oi(i.value,r))}return e.filter(i=>!t.has(i))}function N1(n){return n.data||{}}function L1(n){return n.resolve||{}}function XH(n,e,t,i,r,o){return Pt(s=>YH(n,e,t,i,s.extractedUrl,r,o).pipe(Se(({state:l,tree:c})=>re(W({},s),{targetSnapshot:l,urlAfterRedirects:c}))))}function e4(n,e){return Pt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ue(t);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of uA(c))s.add(d);let l=0;return We(s).pipe(ar(c=>o.has(c)?t4(c,i,n,e):(c.data=Og(c,c.parent,n).resolve,ue(void 0))),Bt(()=>l++),Qa(1),Pt(c=>l===s.size?ue(t):wn))})}function uA(n){let e=n.children.map(t=>uA(t)).flat();return[n,...e]}function t4(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!tA(r)&&(o[Wu]=r.title),zc(()=>(n.data=Og(n,n.parent,t).resolve,n4(o,n,e,i).pipe(Se(s=>(n._resolvedData=s,n.data=W(W({},n.data),s),null)))))}function n4(n,e,t,i){let r=Yw(n);if(r.length===0)return ue({});let o={};return We(r).pipe(Pt(s=>i4(n[s],e,t,i).pipe(Gr(),Bt(l=>{if(l instanceof kl)throw kg(new jo,l);o[s]=l}))),Qa(1),Se(()=>o),Wr(s=>sA(s)?wn:Ga(s)))}function i4(n,e,t,i){let r=Ll(e)??i,o=Fl(n,r),s=o.resolve?o.resolve(e,t):on(r,()=>o(e,t));return io(s)}function qw(n){return nn(e=>{let t=n(e);return t?We(t).pipe(Se(()=>e)):ue(e)})}var fC=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ae);return i}getResolvedTitleForRoute(t){return t.data[Wu]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>R(dA),providedIn:"root"})}return n})(),dA=(()=>{class n extends fC{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ne(hg))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zo=new J("",{providedIn:"root",factory:()=>({})}),$s=new J(""),Vg=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(iw);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ue(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=io(on(t,()=>i.loadComponent())).pipe(Se(hA),Bt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),wo(()=>{this.componentLoaders.delete(i)})),o=new za(r,()=>new fe).pipe(Ba());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ue({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=fA(i,this.compiler,t,this.onLoadEndListener).pipe(wo(()=>{this.childrenLoaders.delete(i)})),s=new za(o,()=>new fe).pipe(Ba());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fA(n,e,t,i){return io(on(t,()=>n.loadChildren())).pipe(Se(hA),Pt(r=>r instanceof Bp||Array.isArray(r)?ue(r):We(e.compileModuleAsync(r))),Se(r=>{i&&i(n);let o,s,l=!1;return Array.isArray(r)?(s=r,l=!0):(o=r.create(t).injector,s=o.get($s,[],{optional:!0,self:!0}).flat()),{routes:s.map(dC),injector:o}}))}function r4(n){return n&&typeof n=="object"&&"default"in n}function hA(n){return r4(n)?n.default:n}var jg=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>R(o4),providedIn:"root"})}return n})(),o4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hC=new J(""),pC=new J("");function pA(n,e,t){let i=n.get(pC),r=n.get(Qe);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),l=r.startViewTransition(()=>(o(),s4(n)));l.ready.catch(d=>{});let{onViewTransitionCreated:c}=i;return c&&on(n,()=>c({transition:l,from:e,to:t})),s}function s4(n){return new Promise(e=>{ko({read:()=>setTimeout(e)},{injector:n})})}var gC=new J(""),Bg=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new fe;transitionAbortWithErrorSubject=new fe;configLoader=R(Vg);environmentInjector=R(Ct);destroyRef=R(ti);urlSerializer=R(Us);rootContexts=R(Hs);location=R(yr);inputBindingEnabled=R(qu,{optional:!0})!==null;titleStrategy=R(fC);options=R(zo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(jg);createViewTransition=R(hC,{optional:!0});navigationErrorHandler=R(gC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ue(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Dg(r)),i=r=>this.events.next(new xg(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(re(W({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(t){return this.transitions=new Tt(null),this.transitions.pipe(tn(i=>i!==null),nn(i=>{let r=!1;return ue(i).pipe(nn(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Ln.SupersededByNewNavigation),wn;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?re(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&l!=="reload"){let c="";return this.events.next(new Sr(o.id,this.urlSerializer.serialize(o.rawUrl),c,Pl.IgnoredSameUrlNavigation)),o.resolve(!1),wn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ue(o).pipe(nn(c=>(this.events.next(new Er(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?wn:Promise.resolve(c))),XH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Bt(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=re(W({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let d=new Vu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:d,source:h,restoredState:p,extras:y}=o,_=new Er(c,this.urlSerializer.serialize(d),h,p);this.events.next(_);let S=X1(this.rootComponentType).snapshot;return this.currentTransition=i=re(W({},o),{targetSnapshot:S,urlAfterRedirects:d,extras:re(W({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,ue(i)}else{let c="";return this.events.next(new Sr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Pl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),wn}}),Bt(o=>{let s=new wg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Se(o=>(this.currentTransition=i=re(W({},o),{guards:vH(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),TH(this.environmentInjector,o=>this.events.next(o)),Bt(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw kg(this.urlSerializer,o.guardsResult);let s=new Cg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),tn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ln.GuardRejected),!1)),qw(o=>{if(o.guards.canActivateChecks.length!==0)return ue(o).pipe(Bt(s=>{let l=new Eg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),nn(s=>{let l=!1;return ue(s).pipe(e4(this.paramsInheritanceStrategy,this.environmentInjector),Bt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",Ln.NoDataFromResolver)}}))}),Bt(s=>{let l=new Sg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),qw(o=>{let s=l=>{let c=[];if(l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent){let d=Ll(l)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,l.routeConfig).pipe(Bt(h=>{l.component=h}),Se(()=>{})))}for(let d of l.children)c.push(...s(d));return c};return fs(s(o.targetSnapshot.root)).pipe(bo(null),Ri(1))}),qw(()=>this.afterPreactivation()),nn(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return l?We(l).pipe(Se(()=>i)):ue(i)}),Se(o=>{let s=hH(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=re(W({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,i}),Bt(()=>{this.events.next(new ju)}),_H(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ri(1),Mn(new be(o=>{let s=i.abortController.signal,l=()=>o.next();return s.addEventListener("abort",l),()=>s.removeEventListener("abort",l)}).pipe(tn(()=>!r&&!i.targetRouterState),Bt(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Ln.Aborted)}))),Bt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Mn(this.transitionAbortWithErrorSubject.pipe(Bt(o=>{throw o}))),wo(()=>{r||this.cancelNavigationTransition(i,"",Ln.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wr(o=>{if(this.destroyed)return i.resolve(!1),wn;if(r=!0,oA(o))this.events.next(new wr(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),mH(o)?this.events.next(new Ol(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new Al(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=on(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof kl){let{message:c,cancellationCode:d}=kg(this.urlSerializer,l);this.events.next(new wr(i.id,this.urlSerializer.serialize(i.extractedUrl),c,d)),this.events.next(new Ol(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return wn}))}))}cancelNavigationTransition(t,i,r){let o=new wr(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a4(n){return n!==Ml}var gA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>R(l4),providedIn:"root"})}return n})(),Lg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},l4=(()=>{class n extends Lg{static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mA=(()=>{class n{urlSerializer=R(Us);options=R(zo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(yr);urlHandlingStrategy=R(jg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Cr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof Cr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=X1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:()=>R(c4),providedIn:"root"})}return n})(),c4=(()=>{class n extends mA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Er?this.updateStateMemento():t instanceof Sr?this.commitTransition(i):t instanceof Vu?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ju?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof wr&&t.code!==Ln.SupersededByNewNavigation&&t.code!==Ln.Redirect?this.restoreHistory(i):t instanceof Al?this.restoreHistory(i,!0):t instanceof gn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let l=this.browserPageId,c=W(W({},s),this.generateNgRouterState(r,l));this.location.replaceState(t,"",c)}else{let l=W(W({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",l)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zg(n,e){n.events.pipe(tn(t=>t instanceof gn||t instanceof wr||t instanceof Al||t instanceof Sr),Se(t=>t instanceof gn||t instanceof Sr?0:(t instanceof wr?t.code===Ln.Redirect||t.code===Ln.SupersededByNewNavigation:!1)?2:1),tn(t=>t!==2),Ri(1)).subscribe(()=>{e()})}var u4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ve=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Qb);stateManager=R(mA);options=R(zo,{optional:!0})||{};pendingTasks=R(mr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(Bg);urlSerializer=R(Us);location=R(yr);urlHandlingStrategy=R(jg);injector=R(Ct);_events=new fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(gA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R($s,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(qu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof wr&&i.code!==Ln.Redirect&&i.code!==Ln.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof gn)this.navigated=!0;else if(i instanceof Ol){let s=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=W({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||a4(r.source)},s);this.scheduleNavigation(l,Ml,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}cH(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ml,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=W({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,s,o).catch(c=>{this.disposed||this.injector.get(On)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(dC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:s,h=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":h=W(W({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=r?r.snapshot:this.routerState.snapshot.root;p=Y1(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Q1(p,t,h,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Bo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ml,null,i)}navigate(t,i={skipLocationChange:!1}){return f4(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=W({},u4):i===!1?r=W({},d4):r=i,Bo(t))return P1(this.currentUrlTree,t,r);let o=this.parseUrl(t);return P1(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let l,c,d;s?(l=s.resolve,c=s.reject,d=s.promise):d=new Promise((p,y)=>{l=p,c=y});let h=this.pendingTasks.add();return zg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function f4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}var qn=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=En(null);get href(){return Gn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new fe;applicationErrorHandler=R(On);options=R(zo,{optional:!0});constructor(t,i,r,o,s,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=l,this.reactiveHref.set(R(new Zp("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof gn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Bo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Bo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)($(Ve),$(ln),hu("tabindex"),$(Sn),$(Xe),$(Wi))};static \u0275dir=ve({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&B("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Yt("href",r.reactiveHref(),Db)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",hn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",hn],replaceUrl:[2,"replaceUrl","replaceUrl",hn],routerLink:"routerLink"},features:[sn]})}return n})(),_C=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new xe;constructor(t,i,r,o,s){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof gn&&this.update()})}ngAfterContentInit(){ue(this.links.changes,ue(null)).pipe(sr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=We(t).pipe(sr()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=h4(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?t.isActive(o,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)($(Ve),$(Xe),$(Sn),$(fn),$(qn,8))};static \u0275dir=ve({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&Qt(o,qn,5),i&2){let s;Et(s=St())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[sn]})}return n})();function h4(n){return!!n.paths}var Yu=class{};var _A=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(tn(t=>t instanceof gn),ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=_l(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,l=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return We(r).pipe(sr())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=ue(null);let o=r.pipe(Pt(s=>s===null?ue(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(t,i);return We([o,s]).pipe(sr())}else return o})}static \u0275fac=function(i){return new(i||n)(ne(Ve),ne(Ct),ne(Yu),ne(Vg))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vA=new J(""),p4=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ml;restoredId=0;store={};constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Er?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Sr&&t.code===Pl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>D(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Rl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){zb()};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function vC(n,...e){return cr([{provide:$s,multi:!0,useValue:n},[],{provide:ln,useFactory:yA,deps:[Ve]},{provide:mu,multi:!0,useFactory:bA},e.map(t=>t.\u0275providers)])}function yA(n){return n.routerState.root}function Qu(n,e){return{\u0275kind:n,\u0275providers:e}}function bA(){let n=R(Gt);return e=>{let t=n.get(_i);if(e!==t.components[0])return;let i=n.get(Ve),r=n.get(wA);n.get(yC)===1&&i.initialNavigation(),n.get(SA,null,{optional:!0})?.setUpPreloading(),n.get(vA,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var wA=new J("",{factory:()=>new fe}),yC=new J("",{providedIn:"root",factory:()=>1});function CA(){let n=[{provide:yC,useValue:0},Hp(()=>{let e=R(Gt);return e.get(yw,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(Ve),o=e.get(wA);zg(r,()=>{i(!0)}),e.get(Bg).afterPreactivation=()=>(i(!0),o.closed?ue(void 0):o),r.initialNavigation()}))})];return Qu(2,n)}function EA(){let n=[Hp(()=>{R(Ve).setUpLocationChangeListener()}),{provide:yC,useValue:2}];return Qu(3,n)}var SA=new J("");function DA(n){return Qu(0,[{provide:SA,useExisting:_A},{provide:Yu,useExisting:n}])}function xA(){return Qu(8,[cC,{provide:qu,useExisting:cC}])}function IA(n){Ps("NgRouterViewTransitions");let e=[{provide:hC,useValue:pA},{provide:pC,useValue:W({skipNextTransition:!!n?.skipInitialTransition},n)}];return Qu(9,e)}var MA=[yr,{provide:Us,useClass:jo},Ve,Hs,{provide:ln,useFactory:yA,deps:[Ve]},Vg,[]],Ot=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[MA,[],{provide:$s,multi:!0,useValue:t},[],i?.errorHandler?{provide:gC,useValue:i.errorHandler}:[],{provide:zo,useValue:i||{}},i?.useHash?m4():_4(),g4(),i?.preloadingStrategy?DA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?v4(i):[],i?.bindToComponentInputs?xA().\u0275providers:[],i?.enableViewTransitions?IA().\u0275providers:[],y4()]}}static forChild(t){return{ngModule:n,providers:[{provide:$s,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({})}return n})();function g4(){return{provide:vA,useFactory:()=>{let n=R(r1),e=R(Je),t=R(zo),i=R(Bg),r=R(Us);return t.scrollOffset&&n.setOffset(t.scrollOffset),new p4(r,i,n,e,t)}}}function m4(){return{provide:Wi,useClass:Ew}}function _4(){return{provide:Wi,useClass:Xp}}function v4(n){return[n.initialNavigation==="disabled"?EA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?CA().\u0275providers:[]]}var mC=new J("");function y4(){return[{provide:mC,useFactory:bA},{provide:mu,multi:!0,useExisting:mC}]}var Ug=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,i){t&1&&(kn(0,"p"),w(1,"home works!"),Nn())},encapsulation:2})};var VA=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)($(Sn),$(Xe))};static \u0275dir=ve({type:n})}return n})(),id=(()=>{class n extends VA{static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,features:[st]})}return n})(),Gs=new J(""),b4={provide:Gs,useExisting:mt(()=>qi),multi:!0},qi=(()=>{class n extends id{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&B("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[ft([b4]),st]})}return n})(),w4={provide:Gs,useExisting:mt(()=>yt),multi:!0};function C4(){let n=yi()?yi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var E4=new J(""),yt=(()=>{class n extends VA{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!C4())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)($(Sn),$(Xe),$(E4,8))};static \u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&B("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[ft([w4]),st]})}return n})();function EC(n){return n==null||SC(n)===0}function SC(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var li=new J(""),Ul=new J(""),S4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Dr=class{static min(e){return jA(e)}static max(e){return BA(e)}static required(e){return zA(e)}static requiredTrue(e){return D4(e)}static email(e){return UA(e)}static minLength(e){return HA(e)}static maxLength(e){return $A(e)}static pattern(e){return WA(e)}static nullValidator(e){return $g()}static compose(e){return KA(e)}static composeAsync(e){return JA(e)}};function jA(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function BA(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function zA(n){return EC(n.value)?{required:!0}:null}function D4(n){return n.value===!0?null:{required:!0}}function UA(n){return EC(n.value)||S4.test(n.value)?null:{email:!0}}function HA(n){return e=>{let t=e.value?.length??SC(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function $A(n){return e=>{let t=e.value?.length??SC(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function WA(n){if(!n)return $g;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(EC(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function $g(n){return null}function GA(n){return n!=null}function qA(n){return No(n)?We(n):n}function ZA(n){let e={};return n.forEach(t=>{e=t!=null?W(W({},e),t):e}),Object.keys(e).length===0?null:e}function YA(n,e){return e.map(t=>t(n))}function x4(n){return!n.validate}function QA(n){return n.map(e=>x4(e)?e:t=>e.validate(t))}function KA(n){if(!n)return null;let e=n.filter(GA);return e.length==0?null:function(t){return ZA(YA(t,e))}}function DC(n){return n!=null?KA(QA(n)):null}function JA(n){if(!n)return null;let e=n.filter(GA);return e.length==0?null:function(t){let i=YA(t,e).map(qA);return wy(i).pipe(Se(ZA))}}function xC(n){return n!=null?JA(QA(n)):null}function TA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function XA(n){return n._rawValidators}function eR(n){return n._rawAsyncValidators}function bC(n){return n?Array.isArray(n)?n:[n]:[]}function Wg(n,e){return Array.isArray(n)?n.includes(e):n===e}function PA(n,e){let t=bC(e);return bC(n).forEach(r=>{Wg(t,r)||t.push(r)}),t}function AA(n,e){return bC(e).filter(t=>!Wg(n,t))}var Gg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fn=class extends Gg{name;get formDirective(){return null}get path(){return null}},Ws=class extends Gg{_parent=null;name=null;valueAccessor=null},qg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},I4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sfe=re(W({},I4),{"[class.ng-submitted]":"isSubmitted"}),Dt=(()=>{class n extends qg{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)($(Ws,2))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&vt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[st]})}return n})(),bi=(()=>{class n extends qg{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)($(Fn,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&vt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[st]})}return n})();var Ku="VALID",Hg="INVALID",Vl="PENDING",Ju="DISABLED",Uo=class{},Zg=class extends Uo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ed=class extends Uo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},td=class extends Uo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},jl=class extends Uo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Yg=class extends Uo{source;constructor(e){super(),this.source=e}},Qg=class extends Uo{source;constructor(e){super(),this.source=e}};function IC(n){return(em(n)?n.validators:n)||null}function M4(n){return Array.isArray(n)?DC(n):n||null}function MC(n,e){return(em(e)?e.asyncValidators:n)||null}function T4(n){return Array.isArray(n)?xC(n):n||null}function em(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function tR(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new X(1e3,"");if(!i[t])throw new X(1001,"")}function nR(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new X(1002,"")})}var Bl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Gn(this.statusReactive)}set status(e){Gn(()=>this.statusReactive.set(e))}_status=ks(()=>this.statusReactive());statusReactive=En(void 0);get valid(){return this.status===Ku}get invalid(){return this.status===Hg}get pending(){return this.status==Vl}get disabled(){return this.status===Ju}get enabled(){return this.status!==Ju}errors;get pristine(){return Gn(this.pristineReactive)}set pristine(e){Gn(()=>this.pristineReactive.set(e))}_pristine=ks(()=>this.pristineReactive());pristineReactive=En(!0);get dirty(){return!this.pristine}get touched(){return Gn(this.touchedReactive)}set touched(e){Gn(()=>this.touchedReactive.set(e))}_touched=ks(()=>this.touchedReactive());touchedReactive=En(!1);get untouched(){return!this.touched}_events=new fe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AA(e,this._rawAsyncValidators))}hasValidator(e){return Wg(this._rawValidators,e)}hasAsyncValidator(e){return Wg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(W({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new td(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new td(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(W({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ed(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new ed(!0,i))}markAsPending(e={}){this.status=Vl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(W({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ju,this.errors=null,this._forEachChild(r=>{r.disable(re(W({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zg(this.value,i)),this._events.next(new jl(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(W({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ku,this._forEachChild(i=>{i.enable(re(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(W({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ku||this.status===Vl)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zg(this.value,t)),this._events.next(new jl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(W({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ju:Ku}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Vl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=qA(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new jl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new xe,this.statusChanges=new xe}_calculateStatus(){return this._allControlsDisabled()?Ju:this.errors?Hg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vl)?Vl:this._anyControlsHaveStatus(Hg)?Hg:Ku}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new ed(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new td(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){em(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=M4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=T4(this._rawAsyncValidators)}},zl=class extends Bl{constructor(e,t,i){super(IC(t),MC(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nR(this,!0,e),Object.keys(e).forEach(i=>{tR(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wC=class extends zl{};var rd=new J("",{providedIn:"root",factory:()=>tm}),tm="always";function nm(n,e){return[...e.path,n]}function Kg(n,e,t=tm){TC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),A4(n,e),O4(n,e),R4(n,e),P4(n,e)}function RA(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Xg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Jg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P4(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function TC(n,e){let t=XA(n);e.validator!==null?n.setValidators(TA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=eR(n);e.asyncValidator!==null?n.setAsyncValidators(TA(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Jg(e._rawValidators,r),Jg(e._rawAsyncValidators,r)}function Xg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=XA(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=eR(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Jg(e._rawValidators,i),Jg(e._rawAsyncValidators,i),t}function A4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&iR(n,e)})}function R4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&iR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function iR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O4(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function rR(n,e){n==null,TC(n,e)}function k4(n,e){return Xg(n,e)}function oR(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function N4(n){return Object.getPrototypeOf(n.constructor)===id}function sR(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function aR(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===yt?t=o:N4(o)?i=o:r=o}),r||i||t||null}function L4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var F4={provide:Fn,useExisting:mt(()=>ro)},Xu=Promise.resolve(),ro=(()=>{class n extends Fn{callSetDisabledState;get submitted(){return Gn(this.submittedReactive)}_submitted=ks(()=>this.submittedReactive());submittedReactive=En(!1);_directives=new Set;form;ngSubmit=new xe;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new zl({},DC(t),xC(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xu.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Kg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xu.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Xu.then(()=>{let i=this._findContainer(t.path),r=new zl({});rR(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xu.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Xu.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),sR(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Yg(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Qg(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)($(li,10),$(Ul,10),$(rd,8))};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&B("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ft([F4]),st]})}return n})();function OA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nd=class extends Bl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(IC(t),MC(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),em(t)&&(t.nonNullable||t.initialValueIsDefault)&&(kA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var V4=n=>n instanceof nd,j4=(()=>{class n extends Fn{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return nm(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,standalone:!1,features:[st]})}return n})();var B4={provide:Ws,useExisting:mt(()=>kt)},NA=Promise.resolve(),kt=(()=>{class n extends Ws{_changeDetectorRef;callSetDisabledState;control=new nd;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new xe;constructor(t,i,r,o,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=aR(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),oR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Kg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){NA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&hn(i);NA.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nm(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)($(Fn,9),$(li,10),$(Ul,10),$(Gs,10),$(fn,8),$(rd,8))};static \u0275dir=ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ft([B4]),st,sn]})}return n})();var wi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),z4={provide:Gs,useExisting:mt(()=>qs),multi:!0},qs=(()=>{class n extends id{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&B("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[ft([z4]),st]})}return n})();var lR=new J("");var U4={provide:Fn,useExisting:mt(()=>Hl)},Hl=(()=>{class n extends Fn{callSetDisabledState;get submitted(){return Gn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ks(()=>this._submittedReactive());_submittedReactive=En(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new xe;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Kg(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){RA(t.control||null,t,!1),L4(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),sR(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Yg(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new Qg(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(RA(i||null,t),V4(r)&&(Kg(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);rR(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&k4(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){TC(this.form,this),this._oldForm&&Xg(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)($(li,10),$(Ul,10),$(rd,8))};static \u0275dir=ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&B("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ft([U4]),st,sn]})}return n})(),H4={provide:Fn,useExisting:mt(()=>im)},im=(()=>{class n extends j4{name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){cR(this._parent)}static \u0275fac=function(i){return new(i||n)($(Fn,13),$(li,10),$(Ul,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[ft([H4]),st]})}return n})(),$4={provide:Fn,useExisting:mt(()=>rm)},rm=(()=>{class n extends Fn{_parent;name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){cR(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return nm(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(i){return new(i||n)($(Fn,13),$(li,10),$(Ul,10))};static \u0275dir=ve({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[ft([$4]),st]})}return n})();function cR(n){return!(n instanceof im)&&!(n instanceof Hl)&&!(n instanceof rm)}var W4={provide:Ws,useExisting:mt(()=>od)},od=(()=>{class n extends Ws{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new xe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=aR(this,o)}ngOnChanges(t){this._added||this._setUpControl(),oR(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return nm(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)($(Fn,13),$(li,10),$(Ul,10),$(Gs,10),$(lR,8))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ft([W4]),st,sn]})}return n})();var G4={provide:Gs,useExisting:mt(()=>Dn),multi:!0};function uR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function q4(n){return n.split(":")[0]}var Dn=(()=>{class n extends id{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=R(_i).injector;appRefDestroyRef=this.appRefInjector.get(ti);destroyRef=R(ti);cdr=R(fn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,ko({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=uR(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=q4(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&B("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ft([G4]),st]})}return n})(),Zn=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(uR(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)($(Xe),$(Sn),$(Dn,9))};static \u0275dir=ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Z4={provide:Gs,useExisting:mt(()=>dR),multi:!0};function LA(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Y4(n){return n.split(":")[0]}var dR=(()=>{class n extends id{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let l=0;l<s.length;l++){let c=s[l],d=this._getOptionValue(c.value);r.push(d)}}else{let s=i.options;for(let l=0;l<s.length;l++){let c=s[l];if(c.selected){let d=this._getOptionValue(c.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=Y4(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&B("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ft([Z4]),st]})}return n})(),Yn=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(LA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(LA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)($(Xe),$(Sn),$(dR,9))};static \u0275dir=ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function fR(n){return typeof n=="number"?n:parseInt(n,10)}function hR(n){return typeof n=="number"?n:parseFloat(n)}var Zs=(()=>{class n{_validator=$g;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):$g,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,features:[sn]})}return n})(),Q4={provide:li,useExisting:mt(()=>PC),multi:!0},PC=(()=>{class n extends Zs{max;inputName="max";normalizeInput=t=>hR(t);createValidator=t=>BA(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Yt("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[ft([Q4]),st]})}return n})(),K4={provide:li,useExisting:mt(()=>Ys),multi:!0},Ys=(()=>{class n extends Zs{min;inputName="min";normalizeInput=t=>hR(t);createValidator=t=>jA(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Yt("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[ft([K4]),st]})}return n})(),J4={provide:li,useExisting:mt(()=>oo),multi:!0};var oo=(()=>{class n extends Zs{required;inputName="required";normalizeInput=hn;createValidator=t=>zA;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Yt("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ft([J4]),st]})}return n})();var X4={provide:li,useExisting:mt(()=>AC),multi:!0},AC=(()=>{class n extends Zs{email;inputName="email";normalizeInput=hn;createValidator=t=>UA;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},standalone:!1,features:[ft([X4]),st]})}return n})(),e5={provide:li,useExisting:mt(()=>sd),multi:!0},sd=(()=>{class n extends Zs{minlength;inputName="minlength";normalizeInput=t=>fR(t);createValidator=t=>HA(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Yt("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[ft([e5]),st]})}return n})(),t5={provide:li,useExisting:mt(()=>RC),multi:!0},RC=(()=>{class n extends Zs{maxlength;inputName="maxlength";normalizeInput=t=>fR(t);createValidator=t=>$A(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Yt("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[ft([t5]),st]})}return n})(),n5={provide:li,useExisting:mt(()=>OC),multi:!0},OC=(()=>{class n extends Zs{pattern;inputName="pattern";normalizeInput=t=>t;createValidator=t=>WA(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=an(n)))(r||n)}})();static \u0275dir=ve({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Yt("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[ft([n5]),st]})}return n})();var pR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({})}return n})(),CC=class extends Bl{constructor(e,t,i){super(IC(t),MC(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){nR(this,!1,e),e.forEach((i,r)=>{tR(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function FA(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var om=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return FA(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new zl(r,o)}record(t,i=null){let r=this._reduceControls(t);return new wC(r,i)}control(t,i,r){let o={};return this.useNonNullable?(FA(i)?o=i:(o.validators=i,o.asyncValidators=r),new nd(t,re(W({},o),{nonNullable:!0}))):new nd(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new CC(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof nd)return t;if(t instanceof Bl)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ht=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rd,useValue:t.callSetDisabledState??tm}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({imports:[pR]})}return n})(),sm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:rd,useValue:t.callSetDisabledState??tm}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({imports:[pR]})}return n})();var gR=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-N2HYM3BR.js").then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};var ad=class extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}},am=class extends ad{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},ld=class extends ad{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},cd=class extends ad{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},kC=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(kC||{});var i5=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},ud=class{constructor(e,{headers:t={},customFetch:i,region:r=kC.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=gR(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return i5(this,void 0,void 0,function*(){try{let{headers:r,method:o,body:s}=t,l={},{region:c}=t;c||(c=this.region);let d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=s):typeof s=="string"?(l["Content-Type"]="text/plain",h=s):typeof FormData<"u"&&s instanceof FormData?h=s:(l["Content-Type"]="application/json",h=JSON.stringify(s)));let p=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h}).catch(I=>{throw new am(I)}),y=p.headers.get("x-relay-error");if(y&&y==="true")throw new ld(p);if(!p.ok)throw new cd(p);let _=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield p.json():_==="application/octet-stream"?S=yield p.blob():_==="text/event-stream"?S=p:_==="multipart/form-data"?S=yield p.formData():S=yield p.text(),{data:S,error:null,response:p}}catch(r){return{data:null,error:r,response:r instanceof cd||r instanceof ld?r.context:void 0}}})}};var MR=ny(IR(),1),{PostgrestClient:TR,PostgrestQueryBuilder:xfe,PostgrestFilterBuilder:Ife,PostgrestTransformBuilder:Mfe,PostgrestBuilder:Tfe,PostgrestError:g5}=MR.default;var GC=class{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof ey<"u"?ey(e):null}catch{return null}}static detectEnvironment(){var e,t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){let i=parseInt(process.versions.node.split(".")[0]);if(i>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};let r=this.dynamicRequire("undici");if(r&&r.WebSocket)return{type:"native",constructor:r.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{let r=this.dynamicRequire("ws");if(r)return{type:"ws",constructor:(t=r.WebSocket)!==null&&t!==void 0?t:r};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${i} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){let i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},qC=GC;var PR="2.15.0";var AR=`realtime-js/${PR}`,RR="1.0.0";var _d=1e4,OR=1e3,kR=100,vd=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(vd||{}),Jt=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Jt||{}),Ci=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(Ci||{}),ZC=function(n){return n.websocket="websocket",n}(ZC||{}),Qs=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Qs||{});var dm=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){let r=t.getUint8(1),o=t.getUint8(2),s=this.HEADER_LENGTH+2,l=i.decode(e.slice(s,s+r));s=s+r;let c=i.decode(e.slice(s,s+o));s=s+o;let d=JSON.parse(i.decode(e.slice(s,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}};var Wl=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ht=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(ht||{}),QC=(n,e,t={})=>{var i;let r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,s)=>(o[s]=m5(s,n,e,r),o),{})},m5=(n,e,t,i)=>{let r=e.find(l=>l.name===n),o=r?.type,s=t[n];return o&&!i.includes(o)?NR(o,s):YC(s)},NR=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return b5(e,t)}switch(n){case ht.bool:return _5(e);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return v5(e);case ht.json:case ht.jsonb:return y5(e);case ht.timestamp:return w5(e);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return YC(e);default:return YC(e)}},YC=n=>n,_5=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},v5=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},y5=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},b5=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let o,s=n.slice(1,t);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(l=>NR(e,l))}return n},w5=n=>typeof n=="string"?n.replace(" ","T"):n,fm=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};var Gl=class{constructor(e,t,i={},r=_d){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var yd=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{let{onJoin:o,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,r,o,s),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],l()}),this.channel._on(i.diff,{},r=>{let{onJoin:o,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=n.syncDiff(this.state,r,o,s),l())}),this.onJoin((r,o,s)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:s})}),this.onLeave((r,o,s)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){let o=this.cloneDeep(e),s=this.transformState(t),l={},c={};return this.map(o,(d,h)=>{s[d]||(c[d]=h)}),this.map(s,(d,h)=>{let p=o[d];if(p){let y=h.map(x=>x.presence_ref),_=p.map(x=>x.presence_ref),S=h.filter(x=>_.indexOf(x.presence_ref)<0),I=p.filter(x=>y.indexOf(x.presence_ref)<0);S.length>0&&(l[d]=S),I.length>0&&(c[d]=I)}else l[d]=h}),this.syncDiff(o,{joins:l,leaves:c},i,r)}static syncDiff(e,t,i,r){let{joins:o,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(l,c)=>{var d;let h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){let p=e[l].map(_=>_.presence_ref),y=h.filter(_=>p.indexOf(_.presence_ref)<0);e[l].unshift(...y)}i(l,h,c)}),this.map(s,(l,c)=>{let d=e[l];if(!d)return;let h=c.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{let r=e[i];return"metas"in r?t[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var bd=function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n}(bd||{}),so=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(so||{});var wd=class n{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gl(this,Ci.join,this.params,this.timeout),this.rejoinTimer=new Wl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ci.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new yd(this),this.broadcastEndpointURL=fm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Jt.closed){let{config:{broadcast:o,presence:s,private:l}}=this.params,c=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[bd.PRESENCE]&&this.bindings[bd.PRESENCE].length>0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(so.CHANNEL_ERROR,y)),this._onClose(()=>e?.(so.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",_=>D(this,[_],function*({postgres_changes:y}){var S;if(this.socket.setAuth(),y===void 0){e?.(so.SUBSCRIBED);return}else{let I=this.bindings.postgres_changes,x=(S=I?.length)!==null&&S!==void 0?S:0,T=[];for(let H=0;H<x;H++){let q=I[H],{filter:{event:U,schema:ae,table:$e,filter:pe}}=q,le=y&&y[H];if(le&&le.event===U&&le.schema===ae&&le.table===$e&&le.filter===pe)T.push(Object.assign(Object.assign({},q),{id:le.id}));else{this.unsubscribe(),this.state=Jt.errored,e?.(so.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(so.SUBSCRIBED);return}})).receive("error",y=>{this.state=Jt.errored,e?.(so.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(so.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(i){return D(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return D(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,i){return this.state===Jt.joined&&e===bd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}send(i){return D(this,arguments,function*(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){let{event:s,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{let h=yield this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return yield(o=h.body)===null||o===void 0?void 0:o.cancel(),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,c,d;let h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Jt.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ci.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Gl(this,Ci.leave,{},e),i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Jt.closed,this.bindings={}}_fetchWithTimeout(e,t,i){return D(this,null,function*(){let r=new AbortController,o=setTimeout(()=>r.abort(),i),s=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),s})}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Gl(this,e,t,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>kR){let t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,o;let s=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Ci;if(i&&[l,c,d,h].indexOf(s)>=0&&i!==this._joinRef())return;let y=this._onMessage(s,t,i);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(_=>{var S,I,x;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((x=(I=_.filter)===null||I===void 0?void 0:I.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(_=>_.callback(y,i)):(o=this.bindings[s])===null||o===void 0||o.filter(_=>{var S,I,x,T,H,q;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in _){let U=_.id,ae=(S=_.filter)===null||S===void 0?void 0:S.event;return U&&((I=t.ids)===null||I===void 0?void 0:I.includes(U))&&(ae==="*"||ae?.toLocaleLowerCase()===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{let U=(H=(T=_?.filter)===null||T===void 0?void 0:T.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return U==="*"||U===((q=t?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===s}).map(_=>{if(typeof y=="object"&&"ids"in y){let S=y.data,{schema:I,table:x,commit_timestamp:T,type:H,errors:q}=S;y=Object.assign(Object.assign({},{schema:I,table:x,commit_timestamp:T,eventType:H,new:{},old:{},errors:q}),this._getPayloadRecords(S))}_.callback(y,i)})}_isClosed(){return this.state===Jt.closed}_isJoined(){return this.state===Jt.joined}_isJoining(){return this.state===Jt.joining}_isLeaving(){return this.state===Jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){let r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){let i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&n.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ci.close,{},e)}_onError(e){this._on(Ci.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=QC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=QC(e.columns,e.old_record)),t}};var LR=()=>{},hm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},E5=[1e3,2e3,5e3,1e4],S5=1e4,D5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Cd=class{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_d,this.transport=null,this.heartbeatIntervalMs=hm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=LR,this.ref=0,this.reconnectTimer=null,this.logger=LR,this.conn=null,this.sendBuffer=[],this.serializer=new dm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...s)=>import("./chunk-N2HYM3BR.js").then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...s)=>o(...s)},!(!((i=t?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ZC.websocket}`,this.httpEndpoint=fm(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qC.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:RR}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return D(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return D(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case vd.connecting:return Qs.Connecting;case vd.open:return Qs.Open;case vd.closing:return Qs.Closing;default:return Qs.Closed}}isConnected(){return this.connectionState()===Qs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){let i=`realtime:${e}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{let o=new wd(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){let{topic:t,event:i,payload:r,ref:o}=e,s=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${i} (${o})`,r),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(e=null){return D(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return D(this,null,function*(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(OR,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},hm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:i,event:r,payload:o,ref:s}=t,l=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${i} ${r} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(i)).forEach(d=>d._trigger(r,o,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ci.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{let i=new Blob([D5],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}_performAuth(e=null){return D(this,null,function*(){let t;e?t=e:this.accessToken?t=yield this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{let r={access_token:t,version:AR};t&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(Ci.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return D(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Wl(()=>D(this,null,function*(){setTimeout(()=>D(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),hm.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(e){var t,i,r,o,s,l,c,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:_d,this.heartbeatIntervalMs=(r=e?.heartbeatIntervalMs)!==null&&r!==void 0?r:hm.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:h=>E5[h-1]||S5,this.encode=(c=e?.encode)!==null&&c!==void 0?c:(h,p)=>p(JSON.stringify(h)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};var ql=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function $t(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var pm=class extends ql{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ks=class extends ql{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var x5=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},mm=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-N2HYM3BR.js").then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},FR=()=>x5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-N2HYM3BR.js")).Response:Response}),gm=n=>{if(Array.isArray(n))return n.map(t=>gm(t));if(typeof n=="function"||n!==Object(n))return n;let e={};return Object.entries(n).forEach(([t,i])=>{let r=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[r]=gm(i)}),e},VR=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Js=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},KC=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),I5=(n,e,t)=>Js(void 0,void 0,void 0,function*(){let i=yield FR();n instanceof i&&!t?.noResolveJson?n.json().then(r=>{let o=n.status||500,s=r?.statusCode||o+"";e(new pm(KC(r),o,s))}).catch(r=>{e(new Ks(KC(r),r))}):e(new Ks(KC(n),n))}),M5=(n,e,t,i)=>{let r={method:n,headers:e?.headers||{}};return n==="GET"||!i?r:(VR(i)?(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r.body=JSON.stringify(i)):r.body=i,Object.assign(Object.assign({},r),t))};function Ed(n,e,t,i,r,o){return Js(this,void 0,void 0,function*(){return new Promise((s,l)=>{n(t,M5(e,i,r,o)).then(c=>{if(!c.ok)throw c;return i?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>I5(c,l,i))})})}function Zl(n,e,t,i){return Js(this,void 0,void 0,function*(){return Ed(n,"GET",e,t,i)})}function Yi(n,e,t,i,r){return Js(this,void 0,void 0,function*(){return Ed(n,"POST",e,i,r,t)})}function Sd(n,e,t,i,r){return Js(this,void 0,void 0,function*(){return Ed(n,"PUT",e,i,r,t)})}function jR(n,e,t,i){return Js(this,void 0,void 0,function*(){return Ed(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function _m(n,e,t,i,r){return Js(this,void 0,void 0,function*(){return Ed(n,"DELETE",e,i,r,t)})}var Qn=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},T5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},BR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},vm=class{constructor(e,t={},i,r){this.url=e,this.headers=t,this.bucketId=i,this.fetch=mm(r)}uploadOrUpdate(e,t,i,r){return Qn(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},BR),r),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=i,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r?.headers&&(l=Object.assign(Object.assign({},l),r.headers));let d=this._removeEmptyFolders(t),h=this._getFinalPath(d),p=yield(e=="PUT"?Sd:Yi)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:l},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(o){if($t(o))return{data:null,error:o};throw o}})}upload(e,t,i){return Qn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return Qn(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(e),s=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",t);try{let c,d=Object.assign({upsert:BR.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",d.cacheControl)):(c=i,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);let p=yield Sd(this.fetch,l.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if($t(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Qn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=Object.assign({},this.headers);t?.upsert&&(r["x-upsert"]="true");let o=yield Yi(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),s=new URL(this.url+o.url),l=s.searchParams.get("token");if(!l)throw new ql("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:l},error:null}}catch(i){if($t(i))return{data:null,error:i};throw i}})}update(e,t,i){return Qn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Qn(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}})}copy(e,t,i){return Qn(this,void 0,void 0,function*(){try{return{data:{path:(yield Yi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return Qn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield Yi(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers}),s=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return Qn(this,void 0,void 0,function*(){try{let r=yield Yi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}})}download(e,t){return Qn(this,void 0,void 0,function*(){let r=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),s=o?`?${o}`:"";try{let l=this._getFinalPath(e);return{data:yield(yield Zl(this.fetch,`${this.url}/${r}/${l}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if($t(l))return{data:null,error:l};throw l}})}info(e){return Qn(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let i=yield Zl(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:gm(i),error:null}}catch(i){if($t(i))return{data:null,error:i};throw i}})}exists(e){return Qn(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield jR(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if($t(i)&&i instanceof Ks){let r=i.originalError;if([400,404].includes(r?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){let i=this._getFinalPath(e),r=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&r.push(o);let l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${d}`)}}}remove(e){return Qn(this,void 0,void 0,function*(){try{return{data:yield _m(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if($t(t))return{data:null,error:t};throw t}})}list(e,t,i){return Qn(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},T5),t),{prefix:e||""});return{data:yield Yi(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var zR="2.10.4";var UR={"X-Client-Info":`storage-js/${zR}`};var Yl=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},ym=class{constructor(e,t={},i,r){let o=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},UR),t),this.fetch=mm(i)}listBuckets(){return Yl(this,void 0,void 0,function*(){try{return{data:yield Zl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if($t(e))return{data:null,error:e};throw e}})}getBucket(e){return Yl(this,void 0,void 0,function*(){try{return{data:yield Zl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if($t(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Yl(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if($t(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Yl(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if($t(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Yl(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if($t(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Yl(this,void 0,void 0,function*(){try{return{data:yield _m(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if($t(t))return{data:null,error:t};throw t}})}};var Dd=class extends ym{constructor(e,t={},i,r){super(e,t,i,r)}from(e){return new vm(this.url,this.headers,e,this.fetch)}};var HR="2.54.0";var xd="";typeof Deno<"u"?xd="deno":typeof document<"u"?xd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xd="react-native":xd="node";var P5={"X-Client-Info":`supabase-js-${xd}/${HR}`},$R={headers:P5},WR={schema:"public"},GR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qR={};Lx();var A5=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},R5=n=>{let e;return n?e=n:typeof fetch>"u"?e=kx:e=fetch,(...t)=>e(...t)},O5=()=>typeof Headers>"u"?Nx:Headers,ZR=(n,e,t)=>{let i=R5(t),r=O5();return(o,s)=>A5(void 0,void 0,void 0,function*(){var l;let c=(l=yield e())!==null&&l!==void 0?l:n,d=new r(s?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),i(o,Object.assign(Object.assign({},s),{headers:d}))})};var k5=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})};function YR(n){return n.endsWith("/")?n:n+"/"}function QR(n,e){var t,i;let{db:r,auth:o,realtime:s,global:l}=n,{db:c,auth:d,realtime:h,global:p}=e,y={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},h),s),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(t=p?.headers)!==null&&t!==void 0?t:{}),(i=l?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>k5(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}var bm="2.71.1";var Xs=30*1e3,wm=3,Cm=wm*Xs,KR="http://localhost:9999",JR="supabase.auth.token";var XR={"X-Client-Info":`gotrue-js/${bm}`};var Id="X-Supabase-Api-Version",JC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tO=10*60*1e3;var Md=class extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}};function we(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Em=class extends Md{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}};function nO(n){return we(n)&&n.name==="AuthApiError"}var Ql=class extends Md{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},xr=class extends Md{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}},Ei=class extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function iO(n){return we(n)&&n.name==="AuthSessionMissingError"}var ea=class extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ta=class extends xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},na=class extends xr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function rO(n){return we(n)&&n.name==="AuthImplicitGrantRedirectError"}var Td=class extends xr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Kl=class extends xr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Sm(n){return we(n)&&n.name==="AuthRetryableFetchError"}var Pd=class extends xr{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}};var ia=class extends xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var Dm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oO=` 	
\r=`.split(""),N5=(()=>{let n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<oO.length;e+=1)n[oO[e].charCodeAt(0)]=-2;for(let e=0;e<Dm.length;e+=1)n[Dm[e].charCodeAt(0)]=e;return n})();function sO(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){let i=e.queue>>e.queuedBits-6&63;t(Dm[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let i=e.queue>>e.queuedBits-6&63;t(Dm[i]),e.queuedBits-=6}}function aO(n,e,t){let i=N5[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function XC(n){let e=[],t=s=>{e.push(String.fromCodePoint(s))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=s=>{V5(s,i,t)};for(let s=0;s<n.length;s+=1)aO(n.charCodeAt(s),r,o);return e.join("")}function L5(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function F5(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){let r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}L5(i,e)}}function V5(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function lO(n){let e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)aO(n.charCodeAt(r),t,i);return new Uint8Array(e)}function cO(n){let e=[];return F5(n,t=>e.push(t)),new Uint8Array(e)}function uO(n){let e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return n.forEach(r=>sO(r,t,i)),sO(null,t,i),e.join("")}function dO(n){return Math.round(Date.now()/1e3)+n}function fO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}var Si=()=>typeof window<"u"&&typeof document<"u",ra={tested:!1,writable:!1},xm=()=>{if(!Si())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ra.tested)return ra.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ra.tested=!0,ra.writable=!0}catch{ra.tested=!0,ra.writable=!1}return ra.writable};function hO(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}var Im=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-N2HYM3BR.js").then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},pO=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",oa=(n,e,t)=>D(null,null,function*(){yield n.setItem(e,JSON.stringify(t))}),Ho=(n,e)=>D(null,null,function*(){let t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),ao=(n,e)=>D(null,null,function*(){yield n.removeItem(e)}),Ad=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Ad.promiseConstructor=Promise;function Mm(n){let e=n.split(".");if(e.length!==3)throw new ia("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!eO.test(e[i]))throw new ia("JWT not in base64url format");return{header:JSON.parse(XC(e[0])),payload:JSON.parse(XC(e[1])),signature:lO(e[2]),raw:{header:e[0],payload:e[1]}}}function gO(n){return D(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function mO(n,e){return new Promise((i,r)=>{D(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield n(o);if(!e(o,null,s)){i(s);return}}catch(s){if(!e(o,s)){r(s);return}}})})}function j5(n){return("0"+n.toString(16)).substr(-2)}function B5(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length,r="";for(let o=0;o<56;o++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,j5).join("")}function z5(n){return D(this,null,function*(){let t=new TextEncoder().encode(n),i=yield crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")})}function U5(n){return D(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=yield z5(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function sa(n,e,t=!1){return D(this,null,function*(){let i=B5(),r=i;t&&(r+="/PASSWORD_RECOVERY"),yield oa(n,`${e}-code-verifier`,r);let o=yield U5(i);return[o,i===o?"plain":"s256"]})}var H5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _O(n){let e=n.headers.get(Id);if(!e||!e.match(H5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vO(n){if(!n)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function yO(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var $5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function aa(n){if(!$5.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tm(){let n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eE(n){return JSON.parse(JSON.stringify(n))}var W5=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},la=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),G5=[502,503,504];function bO(n){return D(this,null,function*(){var e;if(!pO(n))throw new Kl(la(n),0);if(G5.includes(n.status))throw new Kl(la(n),n.status);let t;try{t=yield n.json()}catch(o){throw new Ql(la(o),o)}let i,r=_O(n);if(r&&r.getTime()>=JC["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new Pd(la(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ei}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Pd(la(t),n.status,t.weak_password.reasons);throw new Em(la(t),n.status||500,i)})}var q5=(n,e,t,i)=>{let r={method:n,headers:e?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};function Le(n,e,t,i){return D(this,null,function*(){var r;let o=Object.assign({},i?.headers);o[Id]||(o[Id]=JC["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);let s=(r=i?.query)!==null&&r!==void 0?r:{};i?.redirectTo&&(s.redirect_to=i.redirectTo);let l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield Z5(n,e,t+l,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(c):{data:Object.assign({},c),error:null}})}function Z5(n,e,t,i,r,o){return D(this,null,function*(){let s=q5(e,i,r,o),l;try{l=yield n(t,Object.assign({},s))}catch(c){throw console.error(c),new Kl(la(c),0)}if(l.ok||(yield bO(l)),i?.noResolveJson)return l;try{return yield l.json()}catch(c){yield bO(c)}})}function Ir(n){var e;let t=null;Y5(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=dO(n.expires_in)));let i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function tE(n){let e=Ir(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Mr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function wO(n){return{data:n,error:null}}function CO(n){let{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:o}=n,s=W5(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:o},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function EO(n){return n}function Y5(n){return n.access_token&&n.refresh_token&&n.expires_in}var Pm=["global","local","others"];var Q5=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Jl=class{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=Im(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(i){return D(this,arguments,function*(e,t=Pm[0]){if(Pm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pm.join(", ")}`);try{return yield Le(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}inviteUserByEmail(i){return D(this,arguments,function*(e,t={}){try{return yield Le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Mr})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return D(this,null,function*(){try{let{options:t}=e,i=Q5(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i?.newEmail,delete r.newEmail),yield Le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:CO,redirectTo:t?.redirectTo})}catch(t){if(we(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return D(this,null,function*(){try{return yield Le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mr})}catch(t){if(we(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return D(this,null,function*(){var t,i,r,o,s,l,c;try{let d={nextPage:null,lastPage:0,total:0},h=yield Le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:EO});if(h.error)throw h.error;let p=yield h.json(),y=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,_=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return _.length>0&&(_.forEach(S=>{let I=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);d[`${x}Page`]=I}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(we(d))return{data:{users:[]},error:d};throw d}})}getUserById(e){return D(this,null,function*(){aa(e);try{return yield Le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mr})}catch(t){if(we(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return D(this,null,function*(){aa(e);try{return yield Le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Mr})}catch(i){if(we(i))return{data:{user:null},error:i};throw i}})}deleteUser(e,t=!1){return D(this,null,function*(){aa(e);try{return yield Le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Mr})}catch(i){if(we(i))return{data:{user:null},error:i};throw i}})}_listFactors(e){return D(this,null,function*(){aa(e.userId);try{let{data:t,error:i}=yield Le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(we(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return D(this,null,function*(){aa(e.userId),aa(e.id);try{return{data:yield Le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}})}};function nE(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function SO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ca={debug:!!(globalThis&&xm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Rd=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Am=class extends Rd{};function iE(n,e,t){return D(this,null,function*(){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},r=>D(null,null,function*(){if(r){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return yield t()}finally{ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Am(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ca.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}SO();var K5={url:KR,storageKey:JR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function DO(n,e,t){return D(this,null,function*(){return yield t()})}var Xl={},rE=(()=>{class n{constructor(t){var i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&Si()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let o=Object.assign(Object.assign({},K5),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Jl({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Im(o.fetch),this.lock=o.lock||DO,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Si()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=iE:this.lock=DO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:xm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nE(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=nE(this.memoryStorage)),Si()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",s=>D(this,null,function*(){this._debug("received broadcast notification from other tab or client",s),yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}get jwks(){var t,i;return(i=(t=Xl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(t){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,i;return(i=(t=Xl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bm}) ${new Date().toISOString()}`,...t),this}initialize(){return D(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=D(this,null,function*(){return yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return D(this,null,function*(){var t;try{let i=hO(window.location.href),r="none";if(this._isImplicitGrantCallback(i)?r="implicit":(yield this._isPKCECallback(i))&&(r="pkce"),Si()&&this.detectSessionInUrl&&r!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(i,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),rO(s)){let d=(t=s.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return yield this._removeSession(),{error:s}}let{session:l,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),yield this._saveSession(l),setTimeout(()=>D(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield this._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(i){return we(i)?{error:i}:{error:new Ql("Unexpected error during initialization",i)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return D(this,null,function*(){var i,r,o;try{let s=yield Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=t?.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ir}),{data:l,error:c}=s;if(c||!l)return{data:{user:null,session:null},error:c};let d=l.session,h=l.user;return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}})}signUp(t){return D(this,null,function*(){var i,r,o;try{let s;if("email"in t){let{email:p,password:y,options:_}=t,S=null,I=null;this.flowType==="pkce"&&([S,I]=yield sa(this.storage,this.storageKey)),s=yield Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:p,password:y,data:(i=_?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:S,code_challenge_method:I},xform:Ir})}else if("phone"in t){let{phone:p,password:y,options:_}=t;s=yield Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:y,data:(r=_?.data)!==null&&r!==void 0?r:{},channel:(o=_?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:Ir})}else throw new ta("You must provide either an email or phone number and a password");let{data:l,error:c}=s;if(c||!l)return{data:{user:null,session:null},error:c};let d=l.session,h=l.user;return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(t){return D(this,null,function*(){try{let i;if("email"in t){let{email:s,password:l,options:c}=t;i=yield Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:tE})}else if("phone"in t){let{phone:s,password:l,options:c}=t;i=yield Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:tE})}else throw new ta("You must provide either an email or phone number and a password");let{data:r,error:o}=i;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ea}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(t){return D(this,null,function*(){var i,r,o,s;return yield this._handleProviderSignIn(t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(t){return D(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>D(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return D(this,null,function*(){let{chain:i}=t;if(i==="solana")return yield this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)})}signInWithSolana(t){return D(this,null,function*(){var i,r,o,s,l,c,d,h,p,y,_,S;let I,x;if("message"in t)I=t.message,x=t.signature;else{let{chain:T,wallet:H,statement:q,options:U}=t,ae;if(Si())if(typeof H=="object")ae=H;else{let pe=window;if("solana"in pe&&typeof pe.solana=="object"&&("signIn"in pe.solana&&typeof pe.solana.signIn=="function"||"signMessage"in pe.solana&&typeof pe.solana.signMessage=="function"))ae=pe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ae=H}let $e=new URL((i=U?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in ae&&ae.signIn){let pe=yield ae.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:$e.host,uri:$e.href}),q?{statement:q}:null)),le;if(Array.isArray(pe)&&pe[0]&&typeof pe[0]=="object")le=pe[0];else if(pe&&typeof pe=="object"&&"signedMessage"in pe&&"signature"in pe)le=pe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in le&&"signature"in le&&(typeof le.signedMessage=="string"||le.signedMessage instanceof Uint8Array)&&le.signature instanceof Uint8Array)I=typeof le.signedMessage=="string"?le.signedMessage:new TextDecoder().decode(le.signedMessage),x=le.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ae)||typeof ae.signMessage!="function"||!("publicKey"in ae)||typeof ae!="object"||!ae.publicKey||!("toBase58"in ae.publicKey)||typeof ae.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${$e.host} wants you to sign in with your Solana account:`,ae.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${$e.href}`,`Issued At: ${(o=(r=U?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=U?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((l=U?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((c=U?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((d=U?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((h=U?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((y=(p=U?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||y===void 0)&&y.length?["Resources",...U.signInWithSolana.resources.map(le=>`- ${le}`)]:[]].join(`
`);let pe=yield ae.signMessage(new TextEncoder().encode(I),"utf8");if(!pe||!(pe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=pe}}try{let{data:T,error:H}=yield Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:uO(x)},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Ir});if(H)throw H;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new ea}:(T.session&&(yield this._saveSession(T.session),yield this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:H})}catch(T){if(we(T))return{data:{user:null,session:null},error:T};throw T}})}_exchangeCodeForSession(t){return D(this,null,function*(){let i=yield Ho(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(i??"").split("/");try{let{data:s,error:l}=yield Le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ir});if(yield ao(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ea}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:l})}catch(s){if(we(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}})}signInWithIdToken(t){return D(this,null,function*(){try{let{options:i,provider:r,token:o,access_token:s,nonce:l}=t,c=yield Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Ir}),{data:d,error:h}=c;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ea}:(d.session&&(yield this._saveSession(d.session),yield this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOtp(t){return D(this,null,function*(){var i,r,o,s,l;try{if("email"in t){let{email:c,options:d}=t,h=null,p=null;this.flowType==="pkce"&&([h,p]=yield sa(this.storage,this.storageKey));let{error:y}=yield Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){let{phone:c,options:d}=t,{data:h,error:p}=yield Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=d?.data)!==null&&o!==void 0?o:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new ta("You must provide either an email or phone number.")}catch(c){if(we(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(t){return D(this,null,function*(){var i,r;try{let o,s;"options"in t&&(o=(i=t.options)===null||i===void 0?void 0:i.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);let{data:l,error:c}=yield Le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Ir});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");let d=l.session,h=l.user;return d?.access_token&&(yield this._saveSession(d),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(t){return D(this,null,function*(){var i,r,o;try{let s=null,l=null;return this.flowType==="pkce"&&([s,l]=yield sa(this.storage,this.storageKey)),yield Le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(i=t.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:wO})}catch(s){if(we(s))return{data:null,error:s};throw s}})}reauthenticate(){return D(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return D(this,null,function*(){try{return yield this._useSession(t=>D(this,null,function*(){let{data:{session:i},error:r}=t;if(r)throw r;if(!i)throw new Ei;let{error:o}=yield Le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:o}}))}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return D(this,null,function*(){try{let i=`${this.url}/resend`;if("email"in t){let{email:r,type:o,options:s}=t,{error:l}=yield Le(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){let{phone:r,type:o,options:s}=t,{data:l,error:c}=yield Le(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:c}}throw new ta("You must provide either an email or phone number and a type")}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return D(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return this._useSession(i=>D(this,null,function*(){return i}))}))})}_acquireLock(t,i){return D(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=D(this,null,function*(){return yield r,yield i()});return this.pendingInLock.push(D(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>D(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=i();for(this.pendingInLock.push(D(this,null,function*(){try{yield r}catch{}})),yield r;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return D(this,null,function*(){this._debug("#_useSession","begin");try{let i=yield this.__loadSession();return yield t(i)}finally{this._debug("#_useSession","end")}})}__loadSession(){return D(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,i=yield Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?t=i:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let r=t.expires_at?t.expires_at*1e3-Date.now()<Cm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){let l=yield Ho(this.userStorage,this.storageKey+"-user");l?.user?t.user=l.user:t.user=Tm()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,h,p)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,p))})}return{data:{session:t},error:null}}let{session:o,error:s}=yield this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return D(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return D(this,null,function*(){try{return t?yield Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Mr}):yield this._useSession(i=>D(this,null,function*(){var r,o,s;let{data:l,error:c}=i;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ei}:yield Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Mr})}))}catch(i){if(we(i))return iO(i)&&(yield this._removeSession(),yield ao(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}})}updateUser(r){return D(this,arguments,function*(t,i={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._updateUser(t,i)}))})}_updateUser(r){return D(this,arguments,function*(t,i={}){try{return yield this._useSession(o=>D(this,null,function*(){let{data:s,error:l}=o;if(l)throw l;if(!s.session)throw new Ei;let c=s.session,d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=yield sa(this.storage,this.storageKey));let{data:p,error:y}=yield Le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:Mr});if(y)throw y;return c.user=p.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(o){if(we(o))return{data:{user:null},error:o};throw o}})}setSession(t){return D(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return D(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new Ei;let i=Date.now()/1e3,r=i,o=!0,s=null,{payload:l}=Mm(t.access_token);if(l.exp&&(r=l.exp,o=r<=i),o){let{session:c,error:d}=yield this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:d}=yield this._getUser(t.access_token);if(d)throw d;s={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-i,expires_at:r},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(i){if(we(i))return{data:{session:null,user:null},error:i};throw i}})}refreshSession(t){return D(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return D(this,null,function*(){try{return yield this._useSession(i=>D(this,null,function*(){var r;if(!t){let{data:l,error:c}=i;if(c)throw c;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!t?.refresh_token)throw new Ei;let{session:o,error:s}=yield this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}})}_getSessionFromURL(t,i){return D(this,null,function*(){try{if(!Si())throw new na("No browser detected.");if(t.error||t.error_description||t.error_code)throw new na(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Td("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new na("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Td("No code detected.");let{data:q,error:U}=yield this._exchangeCodeForSession(t.code);if(U)throw U;let ae=new URL(window.location.href);return ae.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ae.toString()),{data:{session:q.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:l,expires_in:c,expires_at:d,token_type:h}=t;if(!s||!c||!l||!h)throw new na("No session defined in URL");let p=Math.round(Date.now()/1e3),y=parseInt(c),_=p+y;d&&(_=parseInt(d));let S=_-p;S*1e3<=Xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${y}s`);let I=_-y;p-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,_,p):p-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,_,p);let{data:x,error:T}=yield this._getUser(s);if(T)throw T;let H={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:y,expires_at:_,refresh_token:l,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:H,redirectType:t.type},error:null}}catch(r){if(we(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return D(this,null,function*(){let i=yield Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&i)})}signOut(){return D(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return D(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(i=>D(this,null,function*(){var r;let{data:o,error:s}=i;if(s)return{error:s};let l=(r=o.session)===null||r===void 0?void 0:r.access_token;if(l){let{error:c}=yield this.admin.signOut(l,t);if(c&&!(nO(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(yield this._removeSession(),yield ao(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(t){let i=fO(),r={id:i,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),D(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){this._emitInitialSession(i)}))}),{data:{subscription:r}}}_emitInitialSession(t){return D(this,null,function*(){return yield this._useSession(i=>D(this,null,function*(){var r,o;try{let{data:{session:s},error:l}=i;if(l)throw l;yield(r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}}))})}resetPasswordForEmail(r){return D(this,arguments,function*(t,i={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield sa(this.storage,this.storageKey,!0));try{return yield Le(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(we(l))return{data:null,error:l};throw l}})}getUserIdentities(){return D(this,null,function*(){var t;try{let{data:i,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(t=i.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(i){if(we(i))return{data:null,error:i};throw i}})}linkIdentity(t){return D(this,null,function*(){var i;try{let{data:r,error:o}=yield this._useSession(s=>D(this,null,function*(){var l,c,d,h,p;let{data:y,error:_}=s;if(_)throw _;let S=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return yield Le(this.fetch,"GET",S,{headers:this.headers,jwt:(p=(h=y.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})}));if(o)throw o;return Si()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:t.provider,url:r?.url},error:null}}catch(r){if(we(r))return{data:{provider:t.provider,url:null},error:r};throw r}})}unlinkIdentity(t){return D(this,null,function*(){try{return yield this._useSession(i=>D(this,null,function*(){var r,o;let{data:s,error:l}=i;if(l)throw l;return yield Le(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})}))}catch(i){if(we(i))return{data:null,error:i};throw i}})}_refreshAccessToken(t){return D(this,null,function*(){let i=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{let r=Date.now();return yield mO(o=>D(this,null,function*(){return o>0&&(yield gO(200*Math.pow(2,o-1))),this._debug(i,"refreshing attempt",o),yield Le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ir})}),(o,s)=>{let l=200*Math.pow(2,o);return s&&Sm(s)&&Date.now()+l-r<Xs})}catch(r){if(this._debug(i,"error",r),we(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(i,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,i){return D(this,null,function*(){let r=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",i,"url",r),Si()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}})}_recoverAndRefresh(){return D(this,null,function*(){var t,i;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let o=yield Ho(this.storage,this.storageKey);if(o&&this.userStorage){let l=yield Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:o.user},yield oa(this.userStorage,this.storageKey+"-user",l)),o.user=(t=l?.user)!==null&&t!==void 0?t:Tm()}else if(o&&!o.user&&!o.user){let l=yield Ho(this.storage,this.storageKey+"-user");l&&l?.user?(o.user=l.user,yield ao(this.storage,this.storageKey+"-user"),yield oa(this.storage,this.storageKey,o)):o.user=Tm()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Cm;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Cm}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:l}=yield this._callRefreshToken(o.refresh_token);l&&(console.error(l),Sm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:l,error:c}=yield this._getUser(o.access_token);!c&&l?.user?(o.user=l.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}})}_callRefreshToken(t){return D(this,null,function*(){var i,r;if(!t)throw new Ei;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ad;let{data:s,error:l}=yield this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Ei;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={session:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),we(s)){let l={session:null,error:s};return Sm(s)||(yield this._removeSession()),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,i,r=!0){return D(this,null,function*(){let o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:i});let s=[],l=Array.from(this.stateChangeEmitters.values()).map(c=>D(this,null,function*(){try{yield c.callback(t,i)}catch(d){s.push(d)}}));if(yield Promise.all(l),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return D(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;let i=Object.assign({},t),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&(yield oa(this.userStorage,this.storageKey+"-user",{user:i.user}));let o=Object.assign({},i);delete o.user;let s=eE(o);yield oa(this.storage,this.storageKey,s)}else{let o=eE(i);yield oa(this.storage,this.storageKey,o)}})}_removeSession(){return D(this,null,function*(){this._debug("#_removeSession()"),yield ao(this.storage,this.storageKey),yield ao(this.storage,this.storageKey+"-code-verifier"),yield ao(this.storage,this.storageKey+"-user"),this.userStorage&&(yield ao(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Si()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(i){console.error("removing visibilitychange callback failed",i)}}_startAutoRefresh(){return D(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Xs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>D(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return D(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return D(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return D(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return D(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>D(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(i=>D(this,null,function*(){let{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((r.expires_at*1e3-t)/Xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Xs}ms, refresh threshold is ${wm} ticks`),o<=wm&&(yield this._callRefreshToken(r.refresh_token))}))}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Rd)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return D(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Si()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>D(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return D(this,null,function*(){let i=`#_onVisibilityChanged(${t})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>D(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,i,r){return D(this,null,function*(){let o=[`provider=${encodeURIComponent(i)}`];if(r?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[s,l]=yield sa(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(c.toString())}if(r?.queryParams){let s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r?.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return D(this,null,function*(){try{return yield this._useSession(i=>D(this,null,function*(){var r;let{data:o,error:s}=i;return s?{data:null,error:s}:yield Le(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token})}))}catch(i){if(we(i))return{data:null,error:i};throw i}})}_enroll(t){return D(this,null,function*(){try{return yield this._useSession(i=>D(this,null,function*(){var r,o;let{data:s,error:l}=i;if(l)return{data:null,error:l};let c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:h}=yield Le(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((o=d?.totp)===null||o===void 0)&&o.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})}))}catch(i){if(we(i))return{data:null,error:i};throw i}})}_verify(t){return D(this,null,function*(){return this._acquireLock(-1,()=>D(this,null,function*(){try{return yield this._useSession(i=>D(this,null,function*(){var r;let{data:o,error:s}=i;if(s)return{data:null,error:s};let{data:l,error:c}=yield Le(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})}))}catch(i){if(we(i))return{data:null,error:i};throw i}}))})}_challenge(t){return D(this,null,function*(){return this._acquireLock(-1,()=>D(this,null,function*(){try{return yield this._useSession(i=>D(this,null,function*(){var r;let{data:o,error:s}=i;return s?{data:null,error:s}:yield Le(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token})}))}catch(i){if(we(i))return{data:null,error:i};throw i}}))})}_challengeAndVerify(t){return D(this,null,function*(){let{data:i,error:r}=yield this._challenge({factorId:t.factorId});return r?{data:null,error:r}:yield this._verify({factorId:t.factorId,challengeId:i.id,code:t.code})})}_listFactors(){return D(this,null,function*(){let{data:{user:t},error:i}=yield this.getUser();if(i)return{data:null,error:i};let r=t?.factors||[],o=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),s=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}})}_getAuthenticatorAssuranceLevel(){return D(this,null,function*(){return this._acquireLock(-1,()=>D(this,null,function*(){return yield this._useSession(t=>D(this,null,function*(){var i,r;let{data:{session:o},error:s}=t;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:l}=Mm(o.access_token),c=null;l.aal&&(c=l.aal);let d=c;((r=(i=o.user.factors)===null||i===void 0?void 0:i.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");let p=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}))})}fetchJwk(r){return D(this,arguments,function*(t,i={keys:[]}){let o=i.keys.find(d=>d.kid===t);if(o)return o;let s=Date.now();if(o=this.jwks.keys.find(d=>d.kid===t),o&&this.jwks_cached_at+tO>s)return o;let{data:l,error:c}=yield Le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,o=l.keys.find(d=>d.kid===t),!o)?null:o})}getClaims(r){return D(this,arguments,function*(t,i={}){try{let o=t;if(!o){let{data:I,error:x}=yield this.getSession();if(x||!I.session)return{data:null,error:x};o=I.session.access_token}let{header:s,payload:l,signature:c,raw:{header:d,payload:h}}=Mm(o);i?.allowExpired||vO(l.exp);let p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!p){let{error:I}=yield this.getUser(o);if(I)throw I;return{data:{claims:l,header:s,signature:c},error:null}}let y=yO(s.alg),_=yield crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!(yield crypto.subtle.verify(y,_,c,cO(`${d}.${h}`))))throw new ia("Invalid JWT signature");return{data:{claims:l,header:s,signature:c},error:null}}catch(o){if(we(o))return{data:null,error:o};throw o}})}}return n.nextInstanceID=0,n})();var J5=rE,oE=J5;var Rm=class extends oE{constructor(e){super(e)}};var X5=function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(h){try{d(i.next(h))}catch(p){s(p)}}function c(h){try{d(i.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):r(h.value).then(l,c)}d((i=i.apply(n,e||[])).next())})},Om=class{constructor(e,t,i){var r,o,s;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let l=YR(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:WR,realtime:qR,auth:Object.assign(Object.assign({},GR),{storageKey:d}),global:$R},p=QR(i??{},h);this.storageKey=(r=p.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=p.auth)!==null&&s!==void 0?s:{},this.headers,p.global.fetch),this.fetch=ZR(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new TR(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Dd(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new ud(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return X5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,storageKey:o,flowType:s,lock:l,debug:c},d,h){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rm({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,flowType:s,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Cd(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i?.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Di=(n,e,t)=>new Om(n,e,t);function e8(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}e8()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var _n={production:!1,supabaseUrl:"https://yfzqrntrqgpnpsintpwf.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmenFybnRycWdwbnBzaW50cHdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5MjIzMjcsImV4cCI6MjA3MDQ5ODMyN30.hpG92qBI9N4U0-5rzWcKA6vIO2KLn40Vd096K1fCu-8"};var km=class n{supabase=Di("https://yfzqrntrqgpnpsintpwf.supabase.co","public-anon-key");constructor(){}register(e,t,i,r){return D(this,null,function*(){let{data:o,error:s}=yield this.supabase.auth.signUp({email:e,password:t,options:{data:{first_name:i,last_name:r,full_name:`${i} ${r}`}}});if(s)throw s;return o})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var $o=class n{constructor(e){this.authService=e}supabase=Di(_n.supabaseUrl,_n.supabaseAnonKey);getUserId(){return D(this,null,function*(){let{data:e,error:t}=yield this.supabase.auth.getSession();return t?(console.warn("Errore nel recupero sessione supabase",t),null):e.session?.user?.id??null})}getOrCreateSalonId(e){return D(this,null,function*(){let t=yield this.getSalonIdFromProfiles(e);if(t)return t;let{data:i,error:r}=yield this.supabase.from("salons").insert([{owner_id:e,name:"Il mio Salone",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select("id").single();if(r)throw new Error("Errore creazione salone: "+r.message);let{error:o}=yield this.supabase.from("profiles").update({salon_id:i.id}).eq("id",e);if(o)throw new Error("Errore aggiornamento profilo: "+o.message);return i.id})}getSalonIdFromSession(){return D(this,null,function*(){let{data:e}=yield this.supabase.auth.getSession();return e?.session?.user?.user_metadata?.salon_id??null})}getSalonIdFromProfiles(e){return D(this,null,function*(){let{data:t,error:i}=yield this.supabase.from("profiles").select("salon_id").eq("id",e).maybeSingle();return i?(console.warn("Errore fetching profile",i),null):t&&"salon_id"in t?t.salon_id:null})}listFranchisingProducts(){return D(this,null,function*(){let{data:e,error:t}=yield this.supabase.from("franchising_products").select("*").eq("active",!0).order("name",{ascending:!0});if(t)throw t;return e??[]})}getFranchisingProductById(e){return D(this,null,function*(){let{data:t,error:i}=yield this.supabase.from("franchising_products").select("*").eq("id",e).maybeSingle();if(i)throw i;return t??null})}getMyProducts(){return D(this,null,function*(){let e=yield this.getUserId();console.log("User ID:",e);let{data:t,error:i}=yield this.supabase.from("products").select("*").eq("owner_id",e).order("created_at",{ascending:!1});if(i)throw console.error("Supabase error:",i),i;return console.log("Prodotti dal database:",t),t})}getProductById(e){return D(this,null,function*(){if(!(yield this.getUserId()))throw new Error("Utente non autenticato");let{data:i,error:r}=yield this.supabase.from("products").select("*").eq("id",e).maybeSingle();if(r)throw r;return i??null})}createProduct(e){return D(this,null,function*(){let t=yield this.getUserId();if(!t)throw new Error("Utente non autenticato");let i=yield this.getSalonIdFromSession();i||(i=yield this.getSalonIdFromProfiles(t));let d=e,{id:r}=d,o=ty(d,["id"]),s=re(W({},o),{owner_id:t,salon_id:i}),{data:l,error:c}=yield this.supabase.from("products").insert([s]).select().single();if(c)throw console.error("Errore creazione prodotto:",c),c;return l})}createProductWithSalon(e){return D(this,null,function*(){let t=yield this.getUserId();if(!t)throw new Error("Utente non autenticato");let i=yield this.getSalonIdFromSession();i||(i=yield this.getSalonIdFromProfiles(t));let r=re(W({},e),{owner_id:t,salon_id:i}),{data:o,error:s}=yield this.supabase.from("products").insert([r]).select().single();if(s)throw s;return o})}updateProduct(e,t){return D(this,null,function*(){let{data:i,error:r}=yield this.supabase.from("products").update(t).eq("id",e).select().single();if(r)throw r;return i})}deleteProduct(e){return D(this,null,function*(){let{error:t}=yield this.supabase.from("products").delete().eq("id",e);if(t)throw t})}getPublicImageUrl(e,t="product-images"){return e?/^https?:\/\//.test(e)?e:`${_n.supabaseUrl.replace(/^https?:\/\//,"https://")}/storage/v1/object/public/${t}/${e}`:null}saveProduct(e){return D(this,null,function*(){return e.id?this.updateProduct(e.id,e):this.createProduct(e)})}createOrder(e){return D(this,null,function*(){let t=yield this.getUserId();if(!t)throw new Error("Utente non autenticato");let i=yield this.getOrCreateSalonId(t);if(!i)throw new Error("Salon non trovato");let r=e.reduce((l,c)=>{let d=c.price||0;return l+d*c.qty},0),{data:o,error:s}=yield this.supabase.from("orders").insert({salon_id:i,total_price:r,status:"pending"}).select().single();if(s)throw s;return yield this.addOrderItems(o.id,e),o})}addOrderItems(e,t){return D(this,null,function*(){let i=t.map(o=>({order_id:e,product_id:o.productId,quantity:o.qty,unit_price:o.price||0})),{error:r}=yield this.supabase.from("order_items").insert(i);if(r)throw r})}static \u0275fac=function(t){return new(t||n)(ne(km))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var xt=class n{constructor(e,t){this.http=e;this.router=t}supabase=Di(_n.supabaseUrl,_n.supabaseAnonKey);profileCache=null;profileSubject=new Tt(null);profile$=this.profileSubject.asObservable();getSessionUser(){return D(this,null,function*(){try{let{data:e,error:t}=yield this.supabase.auth.getSession();return t?String(t?.message??t).includes("NavigatorLockAcquireTimeoutError")?(console.warn("getSessionUser: lock timeout (non blocking):",t),null):(console.warn("Errore recupero sessione",t),null):e?.session?.user??null}catch(e){return String(e).includes("NavigatorLockAcquireTimeoutError")?(console.warn("getSessionUser catch: lock timeout (non blocking)",e),null):(console.error("getSessionUser critical error",e),null)}})}getUserId(){return D(this,null,function*(){return(yield this.getSessionUser())?.id??null})}getCurrentUserId(){return D(this,null,function*(){try{let{data:e,error:t}=yield this.supabase.auth.getSession();return t?(console.warn("Errore recupero sessione",t),null):e?.session?.user?.id??null}catch(e){return console.error("Errore critico recupero ID utente:",e),null}})}mapProfileRecord(e,t){let i=e?.id??t?.id??"",r=t?.email??e?.email??null;return{id:i,email:r,role:e?.role??null,salon_id:e?.salon_id??null,avatar_path:e?.avatar_path??null,full_name:e?.full_name??null,first_name:e?.first_name??null,last_name:e?.last_name??null,telefono:e?.telefono??null,sesso:e?.sesso??null,piva:e?.piva??null,pec:e?.pec??null,data_nascita:e?.data_nascita??null,luogo_nascita:e?.luogo_nascita??null,ragione_sociale:e?.ragione_sociale??null,logo_url:e?.logo_url??null,sito_web:e?.sito_web??e?.["sito web"]??null,provincia:e?.provincia??null,regione:e?.regione??null,indirizzo:e?.indirizzo??null,is_admin:e?.role?String(e.role).toLowerCase()==="admin":!1,created_at:e?.created_at??null,updated_at:e?.updated_at??null,scorte_basse:e?.scorte_basse??null,scorte_critiche:e?.scorte_critiche??null,descrizione:e?.descrizione||"",socials:{facebook:e?.facebook||void 0,instagram:e?.instagram||void 0,linkedin:e?.linkedin||void 0,whatsapp:e?.whatsapp||void 0}}}clearProfileCache(){this.profileCache=null,this.profileSubject.next(null)}getMyProfile(e=!1){return D(this,null,function*(){try{if(!e&&this.profileCache)return this.profileCache;let{data:t,error:i}=yield this.supabase.auth.getSession();if(i||!t?.session?.user)return console.error("Errore sessione:",i),null;let r=t.session.user,{data:o,error:s}=yield this.supabase.from("profiles").select("*, scorte_basse, scorte_critiche, facebook, instagram, linkedin, whatsapp, descrizione").eq("id",r.id).single();if(s){console.error("Errore recupero profilo:",s);let c=this.mapProfileRecord(null,r);return this.profileCache=c,this.profileSubject.next(c),c}let l=this.mapProfileRecord(o,r);return this.profileCache=l,this.profileSubject.next(l),l}catch(t){return console.error("Errore recupero profilo:",t),null}})}getAdminById(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("profiles").select("*").eq("id",e).single();if(i)throw i;let{data:r,error:o}=yield this.supabase.from("services").select("*").eq("owner_id",e).eq("active",!0);return o&&console.warn("Errore recupero servizi admin:",o),re(W({},t),{services:r||[]})}catch(t){throw t}})}getMyServices(){return D(this,null,function*(){let e=yield this.getUserId();if(!e)throw new Error("Utente non autenticato");let{data:t,error:i}=yield this.supabase.from("services").select("*").eq("owner_id",e).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(i)throw i;return t??[]})}createServices(e){return D(this,null,function*(){let t=yield this.getUserId();if(!t)throw new Error("Utente non autenticato");for(let o of e)o.is_group&&o.price&&Number(o.price)!==0&&console.warn("I gruppi non dovrebbero avere un prezzo diverso da zero",o);let i=yield this.getSalonIdFromSession(),r=e.map(o=>({name:o.name,description:o.description??null,price:o.is_group?0:o.price?Number(o.price):0,timing:o.timing?Number(o.timing):null,active:typeof o.active=="boolean"?o.active:!0,owner_id:t,salon_id:i??o.salon_id??null,is_group:o.is_group??!1,parent_id:o.parent_id??null,order_index:typeof o.order_index=="number"?o.order_index:0}));try{let{data:o,error:s}=yield this.supabase.from("services").insert(r).select("*");if(s)throw console.error("[ServiceService.createServices] supabase error",s,{payload:r}),s;return o??[]}catch(o){throw console.error("[ServiceService.createServices] caught error",o),o}})}createService(e){return D(this,null,function*(){return(yield this.createServices([e]))[0]})}updateService(e,t){return D(this,null,function*(){let{data:i,error:r}=yield this.supabase.from("services").update(t).eq("id",e).select("*").single();if(r)throw console.error("[ServiceService.updateService] supabase error",r,{id:e,changes:t}),r;return i})}deleteService(e){return D(this,null,function*(){let{error:t}=yield this.supabase.from("services").delete().eq("id",e);if(t)throw t})}getServicesHierarchy(){return D(this,null,function*(){let e=yield this.getUserId();if(!e)throw new Error("Utente non autenticato");let{data:t,error:i}=yield this.supabase.from("services").select("*").eq("owner_id",e).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(i)throw i;let r=t||[],o=[],s=new Map;return r.forEach(l=>{s.set(l.id,re(W({},l),{children:[]}))}),r.forEach(l=>{if(l.parent_id){let c=s.get(l.parent_id);c&&c.children.push(s.get(l.id))}else o.push(s.get(l.id))}),o})}handleSupabaseError(e,t){throw console.error(`[ServiceService.${t}] Supabase error:`,e),e.code==="42501"?new Error("Permessi insufficienti sul database"):e.code==="23505"?new Error("Elemento duplicato"):e}moveServiceToGroup(e,t){return D(this,null,function*(){try{let{data:i,error:r}=yield this.supabase.from("services").update({parent_id:t}).eq("id",e).select().single();return r&&this.handleSupabaseError(r,"moveServiceToGroup"),i}catch(i){throw console.error("[ServiceService.moveServiceToGroup] error:",i),i}})}getServiceById(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("services").select("*").eq("id",e).single();return i?(console.error("Errore recupero servizio:",i),null):t}catch(t){return console.error("Errore critico recupero servizio:",t),null}})}getProfileById(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("profiles").select("*").eq("id",e).single();return i?(console.error("Errore recupero profilo:",i),null):this.mapProfileRecord(t)}catch(t){return console.error("Errore critico recupero profilo:",t),null}})}getBrandSettings(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("brand_settings").select("*").eq("user_id",e).single();return i?(console.error("Errore getBrandSettings:",i),null):t}catch(t){return console.error("Errore critico getBrandSettings:",t),null}})}saveBrandSettings(e,t){return D(this,null,function*(){let{data:i,error:r}=yield this.supabase.from("brand_settings").upsert({user_id:e,primary_color:t.primary_color,secondary_color:t.secondary_color,text_color:t.text_color,background_color:t.background_color,background2_color:t.background2_color,updated_at:new Date().toISOString()},{onConflict:"user_id"}).select().single();if(r)throw r;return i})}updateProfileLogo(e,t){return D(this,null,function*(){let{error:i}=yield this.supabase.from("profiles").update({logo_url:t}).eq("id",e);if(i)throw i;this.profileCache?.id===e&&(this.profileCache.logo_url=t,this.profileSubject.next(this.profileCache))})}getPublicLogoUrl(e){return D(this,null,function*(){let{data:t}=this.supabase.storage.from("logos").getPublicUrl(e);return t.publicUrl})}uploadLogo(e){return D(this,null,function*(){let t=yield this.getUserId();if(!t)throw new Error("Utente non autenticato");try{let i=e.name.split(".").pop(),r=`${Date.now()}.${i}`,o=`${t}/${r}`,{error:s}=yield this.supabase.storage.from("logos").upload(o,e,{cacheControl:"3600",upsert:!0});if(s)throw s;let{data:l}=this.supabase.storage.from("logos").getPublicUrl(o);return yield this.updateProfileLogo(t,l.publicUrl),l.publicUrl}catch(i){throw console.error("Errore upload logo:",i),new Error("Impossibile caricare il logo")}})}updateProfilePhone(e,t){return D(this,null,function*(){let{error:i}=yield this.supabase.from("profiles").update({telefono:t,updated_at:new Date().toISOString()}).eq("id",e);if(i)throw i;this.profileCache?.id===e&&(this.profileCache.telefono=t,this.profileSubject.next(this.profileCache))})}updateProfileWebsite(e,t){return D(this,null,function*(){let{error:i}=yield this.supabase.from("profiles").update({sito_web:t,updated_at:new Date().toISOString()}).eq("id",e);if(i)throw i;this.profileCache?.id===e&&(this.profileCache.sito_web=t,this.profileSubject.next(this.profileCache))})}signOut(){return D(this,null,function*(){let{error:e}=yield this.supabase.auth.signOut();if(e)throw console.warn("Sign out error",e),e;this.clearProfileCache()})}getSalonIdFromSession(){return D(this,null,function*(){return(yield this.getSessionUser())?.user_metadata?.salon_id??null})}getAdmins(){return D(this,arguments,function*(e={}){try{let t=this.supabase.from("profiles").select("*",{count:"exact"}).eq("role","admin");if(e.search&&(t=t.ilike("ragione_sociale",`%${e.search}%`)),e.region&&(t=t.eq("regione",e.region)),e.province&&(t=t.eq("provincia",e.province)),e.comune&&(t=t.ilike("comune",`%${e.comune}%`)),e.limit){let l=e.offset||0;t=t.range(l,l+e.limit-1)}let{data:i,error:r,count:o}=yield t;if(r)throw r;return{data:yield Promise.all((i||[]).map(l=>D(this,null,function*(){let{data:c}=yield this.supabase.from("opening_hours").select("*").eq("salon_id",l.id);return re(W({},l),{opening_hours:c||[]})}))),count:o||0}}catch(t){return console.error("Errore nel recupero degli admin:",t),{data:[],count:0}}})}getDistinctProvinces(){return D(this,null,function*(){try{let{data:e,error:t}=yield this.supabase.from("profiles").select("provincia").neq("provincia","").not("provincia","is",null).order("provincia",{ascending:!0});return t?(console.warn("Errore getDistinctProvinces:",t),[]):Array.from(new Set((e||[]).map(r=>r.provincia).filter(Boolean))).sort()}catch(e){return console.error("Errore critico getDistinctProvinces:",e),[]}})}getComuniByProvince(e){return D(this,null,function*(){try{return[]}catch(t){return console.error("Error fetching comuni:",t),[]}})}updateProfileLocation(e,t,i){return D(this,null,function*(){let{error:r}=yield this.supabase.from("profiles").update({provincia:t,regione:i}).eq("id",e);if(r)throw r;this.profileCache?.id===e&&(this.profileCache.provincia=t,this.profileCache.regione=i,this.profileSubject.next(this.profileCache))})}getProvinceList(){return D(this,null,function*(){return Promise.resolve(this.getFallbackProvinces())})}getFallbackProvinces(){return[{code:"AG",name:"Agrigento",region:"Sicilia"},{code:"AL",name:"Alessandria",region:"Piemonte"},{code:"AN",name:"Ancona",region:"Marche"},{code:"AO",name:"Aosta",region:"Valle d'Aosta"},{code:"AR",name:"Arezzo",region:"Toscana"},{code:"AP",name:"Ascoli Piceno",region:"Marche"},{code:"AT",name:"Asti",region:"Piemonte"},{code:"AV",name:"Avellino",region:"Campania"},{code:"BA",name:"Bari",region:"Puglia"},{code:"BG",name:"Bergamo",region:"Lombardia"},{code:"BI",name:"Biella",region:"Piemonte"},{code:"BL",name:"Belluno",region:"Veneto"},{code:"BN",name:"Benevento",region:"Campania"},{code:"BR",name:"Brindisi",region:"Puglia"},{code:"BS",name:"Brescia",region:"Lombardia"},{code:"BT",name:"Barletta-Andria-Trani",region:"Puglia"},{code:"CA",name:"Cagliari",region:"Sardegna"},{code:"CB",name:"Campobasso",region:"Molise"},{code:"CE",name:"Caserta",region:"Campania"},{code:"CH",name:"Chieti",region:"Abruzzo"},{code:"CI",name:"Carboni Iglesias",region:"Sardegna"},{code:"CL",name:"Caltanissetta",region:"Sicilia"},{code:"CN",name:"Cuneo",region:"Piemonte"},{code:"CO",name:"Como",region:"Lombardia"},{code:"CR",name:"Cremona",region:"Lombardia"},{code:"CS",name:"Cosenza",region:"Calabria"},{code:"CT",name:"Catania",region:"Sicilia"},{code:"CZ",name:"Catanzaro",region:"Calabria"},{code:"EN",name:"Enna",region:"Sicilia"},{code:"FC",name:"Forl\xEC Cesena",region:"Emilia Romagna"},{code:"FE",name:"Ferrara",region:"Emilia Romagna"},{code:"FG",name:"Foggia",region:"Puglia"},{code:"FI",name:"Firenze",region:"Toscana"},{code:"FM",name:"Fermo",region:"Marche"},{code:"FR",name:"Frosinone",region:"Lazio"},{code:"GE",name:"Genova",region:"Liguria"},{code:"GO",name:"Gorizia",region:"Friuli Venezia Giulia"},{code:"GR",name:"Grosseto",region:"Toscana"},{code:"IM",name:"Imperia",region:"Liguria"},{code:"IS",name:"Isernia",region:"Molise"},{code:"KR",name:"Crotone",region:"Calabria"},{code:"LC",name:"Lecco",region:"Lombardia"},{code:"LE",name:"Lecce",region:"Puglia"},{code:"LI",name:"Livorno",region:"Toscana"},{code:"LO",name:"Lodi",region:"Lombardia"},{code:"LT",name:"Latina",region:"Lazio"},{code:"LU",name:"Lucca",region:"Toscana"},{code:"MB",name:"Monza e della Brianza",region:"Lombardia"},{code:"MC",name:"Macerata",region:"Marche"},{code:"ME",name:"Messina",region:"Sicilia"},{code:"MI",name:"Milano",region:"Lombardia"},{code:"MN",name:"Mantova",region:"Lombardia"},{code:"MO",name:"Modena",region:"Emilia Romagna"},{code:"MS",name:"Massa Carrara",region:"Toscana"},{code:"MT",name:"Matera",region:"Basilicata"},{code:"NA",name:"Napoli",region:"Campania"},{code:"NO",name:"Novara",region:"Piemonte"},{code:"NU",name:"Nuoro",region:"Sardegna"},{code:"OG",name:"Ogliastra",region:"Sardegna"},{code:"OR",name:"Oristano",region:"Sardegna"},{code:"OT",name:"Olbia Tempio",region:"Sardegna"},{code:"PA",name:"Palermo",region:"Sicilia"},{code:"PC",name:"Piacenza",region:"Emilia Romagna"},{code:"PD",name:"Padova",region:"Veneto"},{code:"PE",name:"Pescara",region:"Abruzzo"},{code:"PG",name:"Perugia",region:"Umbria"},{code:"PI",name:"Pisa",region:"Toscana"},{code:"PN",name:"Pordenone",region:"Friuli Venezia Giulia"},{code:"PO",name:"Prato",region:"Toscana"},{code:"PR",name:"Parma",region:"Emilia Romagna"},{code:"PT",name:"Pistoia",region:"Toscana"},{code:"PV",name:"Pavia",region:"Lombardia"},{code:"PZ",name:"Potenza",region:"Basilicata"},{code:"RA",name:"Ravenna",region:"Emilia Romagna"},{code:"RC",name:"Reggio Calabria",region:"Calabria"},{code:"RE",name:"Reggio Emilia",region:"Emilia Romagna"},{code:"RG",name:"Ragusa",region:"Sicilia"},{code:"RI",name:"Rieti",region:"Lazio"},{code:"RM",name:"Roma",region:"Lazio"},{code:"RN",name:"Rimini",region:"Emilia Romagna"},{code:"RO",name:"Rovigo",region:"Veneto"},{code:"SA",name:"Salerno",region:"Campania"},{code:"SI",name:"Siena",region:"Toscana"},{code:"SO",name:"Sondrio",region:"Lombardia"},{code:"SP",name:"La Spezia",region:"Liguria"},{code:"SR",name:"Siracusa",region:"Sicilia"},{code:"SS",name:"Sassari",region:"Sardegna"},{code:"SU",name:"Medio Campidano",region:"Sardegna"},{code:"SV",name:"Savona",region:"Liguria"},{code:"TA",name:"Taranto",region:"Puglia"},{code:"TE",name:"Teramo",region:"Abruzzo"},{code:"TN",name:"Trento",region:"Trentino-Alto Adige"},{code:"TO",name:"Torino",region:"Piemonte"},{code:"TP",name:"Trapani",region:"Sicilia"},{code:"TR",name:"Terni",region:"Umbria"},{code:"TS",name:"Trieste",region:"Friuli Venezia Giulia"},{code:"TV",name:"Treviso",region:"Veneto"},{code:"UD",name:"Udine",region:"Friuli Venezia Giulia"},{code:"VA",name:"Varese",region:"Lombardia"},{code:"VB",name:"Verbano-Cusio-Ossola",region:"Piemonte"},{code:"VC",name:"Vercelli",region:"Piemonte"},{code:"VE",name:"Venezia",region:"Veneto"},{code:"VI",name:"Vicenza",region:"Veneto"},{code:"VT",name:"Viterbo",region:"Lazio"}]}getProvinces(){return this.getFallbackProvinces()}getRegions(){let e=this.getFallbackProvinces();return[...new Set(e.map(i=>i.region))].sort()}getProvincesByRegion(e){return this.getFallbackProvinces().filter(i=>i.region===e)}normalizeToUTCIso(e){if(!e)return null;let t=new Date(e);if(isNaN(t.getTime()))return null;let i=-t.getTimezoneOffset(),r=i>=0?"+":"-",o=s=>`${Math.floor(Math.abs(s))}`.padStart(2,"0");return`${t.getFullYear()}-${o(t.getMonth()+1)}-${o(t.getDate())}T${o(t.getHours())}:${o(t.getMinutes())}:${o(t.getSeconds())}${r}${o(i/60)}:${o(i%60)}`}createAppointment(e){return D(this,null,function*(){try{let t=this.normalizeToUTCIso(e.start_time),i=this.normalizeToUTCIso(e.end_time);if(!t||!i)throw new Error("Invalid start_time or end_time");let{data:r,error:o}=yield this.supabase.from("appointments").insert([{salon_id:e.salon_id,client_id:e.client_id,service_id:e.service_id,start_time:t,end_time:i,price:e.price,notes:e.notes,status:"pending",payment_status:"unpaid"}]).select().single();if(o)throw o;return r}catch(t){throw console.error("Errore createAppointment:",t),t}})}getAppointmentsBySalon(e){return D(this,null,function*(){try{console.log(`\u{1F50D} Query appointments per salonId: ${e}`);let{data:t,error:i}=yield this.supabase.from("appointments").select(`
        id,
        start_time,
        end_time,
        client_id,
        service_id,
        price,
        status,
        payment_status,
        notes
      `).eq("salon_id",e).order("start_time",{ascending:!0});return console.log(`\u{1F4CA} Stato query: ${status}`),i?(console.error("\u274C Errore recupero appuntamenti:",i),[]):(console.log(`\u2705 Trovati ${t.length} appuntamenti`),t||[])}catch(t){return console.error("\u{1F525} Errore critico recupero appuntamenti:",t),[]}})}getSuppliers(){return D(this,null,function*(){try{let{data:e,error:t}=yield this.supabase.from("suppliers").select("*").order("ragione_sociale",{ascending:!0});if(t)throw t;return e||[]}catch(e){return console.error("Errore recupero fornitori:",e),[]}})}createSupplier(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("suppliers").insert([e]).select().single();if(i)throw i;return t}catch(t){throw console.error("Errore creazione fornitore:",t),t}})}updateSupplier(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("suppliers").update(e).eq("id",e.id).select().single();if(i)throw i;return t}catch(t){throw console.error("Errore aggiornamento fornitore:",t),t}})}deleteSupplier(e){return D(this,null,function*(){try{let{error:t}=yield this.supabase.from("suppliers").delete().eq("id",e);if(t)throw t}catch(t){throw console.error("Errore eliminazione fornitore:",t),t}})}getSupplierById(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("suppliers").select("*").eq("id",e).single();if(i)throw i;return t||null}catch(t){return console.error("Errore recupero fornitore per id:",t),null}})}updateStockSettings(e,t,i){return D(this,null,function*(){let{error:r}=yield this.supabase.from("profiles").update({scorte_basse:t,scorte_critiche:i,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r;this.profileCache?.id===e&&(this.profileCache.scorte_basse=t,this.profileCache.scorte_critiche=i,this.profileSubject.next(this.profileCache))})}getStockSettings(e){return D(this,null,function*(){if(!e)return console.error("UserId non valido per recupero impostazioni scorte"),{scorte_basse:5,scorte_critiche:2};let{data:t,error:i}=yield this.supabase.from("profiles").select("scorte_basse, scorte_critiche, role").eq("id",e).single();return i?(console.error("Errore recupero impostazioni scorte:",i),{scorte_basse:5,scorte_critiche:2}):t.role==="admin"?{scorte_basse:t.scorte_basse||5,scorte_critiche:t.scorte_critiche||2}:{scorte_basse:t.scorte_basse||5,scorte_critiche:t.scorte_critiche||2}})}getProfileSocials(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("profiles").select("facebook, instagram, linkedin, whatsapp").eq("id",e).single();return i?(console.error("Errore recupero socials:",i),{}):{facebook:t?.facebook||void 0,instagram:t?.instagram||void 0,linkedin:t?.linkedin||void 0,whatsapp:t?.whatsapp||void 0}}catch(t){return console.error("Errore critico recupero socials:",t),{}}})}updateProfileSocials(e,t){return D(this,null,function*(){try{let{error:i}=yield this.supabase.from("profiles").update({facebook:t.facebook||null,instagram:t.instagram||null,linkedin:t.linkedin||null,whatsapp:t.whatsapp||null,updated_at:new Date().toISOString()}).eq("id",e);if(i)throw i;this.profileCache?.id===e&&(this.profileCache.socials=t,this.profileSubject.next(this.profileCache))}catch(i){throw console.error("Errore aggiornamento socials:",i),new Error("Impossibile aggiornare i social media")}})}getOpeningHours(e){return D(this,null,function*(){try{let{data:t,error:i}=yield this.supabase.from("opening_hours").select("*").eq("salon_id",e).order("day_index",{ascending:!0});return i?(console.error("Errore recupero orari:",i),[]):t||[]}catch(t){return console.error("Errore critico recupero orari:",t),[]}})}saveOpeningHours(e,t){return D(this,null,function*(){try{let i=t.map(o=>({salon_id:e,day_index:o.dayIndex,day_name:o.dayName,intervals:o.intervals.map(s=>({start:this.formatTimeForFilter(s.start),end:this.formatTimeForFilter(s.end)})),updated_at:new Date().toISOString()})),{error:r}=yield this.supabase.from("opening_hours").upsert(i,{onConflict:"salon_id,day_index",ignoreDuplicates:!1});if(r)throw r}catch(i){throw console.error("Errore salvataggio orari:",i),new Error("Impossibile salvare gli orari")}})}deleteAllOpeningHours(e){return D(this,null,function*(){try{let{error:t}=yield this.supabase.from("opening_hours").delete().eq("salon_id",e);if(t)throw t}catch(t){throw console.error("Errore eliminazione orari:",t),new Error("Impossibile eliminare gli orari")}})}formatTimeForFilter(e){if(!e)return"00:00";let[t,i]=e.split(":");return`${t.padStart(2,"0")}:${i.padStart(2,"0")}`}updateProfileDescription(e,t){return D(this,null,function*(){let{data:i,error:r}=yield this.supabase.from("profiles").update({descrizione:t}).eq("id",e);if(r)throw r})}static \u0275fac=function(t){return new(t||n)(ne(Sl),ne(Ve))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var n8=n=>["/admin/product-detail","franchising",n];function i8(n,e){if(n&1&&(v(0,"option",36),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ee(t)}}function r8(n,e){if(n&1){let t=se();v(0,"div",44)(1,"div",45)(2,"span",46),w(3),m(),v(4,"span",47),w(5),m()(),v(6,"div",48)(7,"input",49),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.qty,r)||(o.qty=r),N(r)}),B("change",function(){let r=k(t).$implicit,o=A(2);return N(o.updateCartItem(r))}),m(),v(8,"button",50),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.rimuoviDalCarrello(r))}),w(9," \xD7 "),m()(),v(10,"div",51),w(11),Ui(12,"currency"),m()()}if(n&2){let t=e.$implicit;C(3),ee(t.name),C(2),ee(t.brand||"N/D"),C(2),Y("ngModel",t.qty),C(4),ie(" ",Hi(12,4,t.price*t.qty,"EUR")," ")}}function o8(n,e){n&1&&(v(0,"span"),w(1,"Invia Ordine"),m())}function s8(n,e){n&1&&(v(0,"span"),w(1,"Invio in corso..."),m())}function a8(n,e){if(n&1){let t=se();v(0,"section",37)(1,"h3")(2,"i",25),w(3,"shopping_cart "),m(),w(4," Carrello Ordine"),m(),v(5,"div",38),z(6,r8,13,7,"div",39),m(),v(7,"div",40),w(8),Ui(9,"currency"),m(),v(10,"div",41)(11,"button",42),B("click",function(){k(t);let r=A();return N(r.svuotaCarrello())}),w(12," Svuota "),m(),v(13,"button",43),B("click",function(){k(t);let r=A();return N(r.inviaOrdine())}),z(14,o8,2,0,"span",23)(15,s8,2,0,"span",23),m()()()}if(n&2){let t=A();C(6),M("ngForOf",t.cart),C(2),ie(" Totale: ",Hi(9,5,t.getCartTotal(),"EUR")," "),C(5),M("disabled",t.checkoutLoading),C(),M("ngIf",!t.checkoutLoading),C(),M("ngIf",t.checkoutLoading)}}function l8(n,e){if(n&1&&(v(0,"span"),w(1),m()),n&2){let t=A();C(),ie("Salva modifiche (",t.productsModified.size,")")}}function c8(n,e){n&1&&(v(0,"span"),w(1,"Salvataggio in corso..."),m())}function u8(n,e){n&1&&(v(0,"div",52),w(1,"Caricamento prodotti..."),m())}function d8(n,e){if(n&1&&(v(0,"li"),w(1),m()),n&2){let t=e.$implicit,i=A(4);vt("critical",t.quantity<=i.criticalStockThreshold)("low",t.quantity>i.criticalStockThreshold&&t.quantity<=i.lowStockThreshold),C(),zi(" ",t.name," (",t.quantity," pz) ")}}function f8(n,e){if(n&1&&(v(0,"li",69),w(1),m()),n&2){let t=A(2).$implicit;C(),ie(" ... e altri ",t.riskStockCount-3," prodotti ")}}function h8(n,e){if(n&1&&(v(0,"div",66)(1,"h4"),w(2),m(),v(3,"ul"),z(4,d8,2,6,"li",67)(5,f8,2,1,"li",68),m()()),n&2){let t=A().$implicit;C(2),ie("Prodotti a rischio (",t.riskStockCount,"):"),C(2),M("ngForOf",t.topProducts),C(),M("ngIf",t.riskStockCount>3)}}function p8(n,e){if(n&1){let t=se();v(0,"div",56)(1,"div",57)(2,"h3",58),w(3),m(),v(4,"div",59)(5,"span",60),w(6),m()()(),v(7,"div",61)(8,"div",62)(9,"span"),w(10),m(),v(11,"span"),w(12),m(),v(13,"span"),w(14),m()(),z(15,h8,6,3,"div",63),m(),v(16,"div",64)(17,"button",24),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.viewCategory(r.name))}),w(18,"Vedi dettagli"),m(),v(19,"button",65),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.clearCategory(r.name))}),v(20,"i",25),w(21,"delete"),m()()()()}if(n&2){let t=e.$implicit;vt("low-stock",t.lowStockCount>0&&t.criticalStockCount===0)("critical-stock",t.criticalStockCount>0),C(3),ee(t.name),C(3),ie("",t.productCount," prodotti"),C(4),ie("Quantit\xE0 totale: ",t.totalQuantity," pz"),C(2),ie("Scorte basse: ",t.lowStockCount," prodotti"),C(2),ie("Scorte critiche: ",t.criticalStockCount," prodotti"),C(),M("ngIf",t.riskStockCount>0)}}function g8(n,e){n&1&&(ut(0),w(1," Nessun prodotto di questa tipologia. "),dt())}function m8(n,e){n&1&&w(0," Nessun prodotto presente. ")}function _8(n,e){if(n&1&&(v(0,"div",70),z(1,g8,2,0,"ng-container",71)(2,m8,1,0,"ng-template",null,0,dn),m()),n&2){let t=Ne(3),i=A(2);C(),M("ngIf",i.categoryFilter)("ngIfElse",t)}}function v8(n,e){if(n&1&&(v(0,"div",53),z(1,p8,22,10,"div",54)(2,_8,4,2,"div",55),m()),n&2){let t=A();C(),M("ngForOf",t.groupedCategories),C(),M("ngIf",t.groupedCategories.length===0)}}function y8(n,e){if(n&1&&(v(0,"option",36),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ee(t)}}function b8(n,e){if(n&1){let t=se();v(0,"tr")(1,"td")(2,"select",7),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.category,r)||(o.category=r),N(r)}),B("change",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),z(3,y8,2,2,"option",9),m()(),v(4,"td")(5,"input",74),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.name,r)||(o.name=r),N(r)}),B("input",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),m()(),v(6,"td")(7,"input",75),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.brand,r)||(o.brand=r),N(r)}),B("input",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),m()(),v(8,"td")(9,"input",76),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.format,r)||(o.format=r),N(r)}),B("input",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),m()(),v(10,"td")(11,"div",77)(12,"button",78),B("click",function(){let r=k(t),o=r.$implicit,s=r.index,l=A(2);return N(l.decrementQuantity(o,s))}),w(13,"-"),m(),v(14,"input",79),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.quantity,r)||(o.quantity=r),N(r)}),B("input",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),m(),v(15,"button",78),B("click",function(){let r=k(t),o=r.$implicit,s=r.index,l=A(2);return N(l.incrementQuantity(o,s))}),w(16,"+"),m()()(),v(17,"td")(18,"input",80),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.price,r)||(o.price=r),N(r)}),B("input",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),m()(),v(19,"td")(20,"input",81),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.note,r)||(o.note=r),N(r)}),B("input",function(){let r=k(t).index,o=A(2);return N(o.onProductChange(r))}),m()(),v(21,"td",82)(22,"button",83),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.removeProdottoSalone(r))}),m()()()}if(n&2){let t=e.$implicit,i=e.index,r=A(2);vt("modified",r.productsModified.has(i)),C(2),Y("ngModel",t.category),C(),M("ngForOf",r.categorie),C(2),Y("ngModel",t.name),C(2),Y("ngModel",t.brand),C(2),Y("ngModel",t.format),C(5),Y("ngModel",t.quantity),C(4),Y("ngModel",t.price),C(2),Y("ngModel",t.note)}}function w8(n,e){if(n&1&&(v(0,"table",72)(1,"thead")(2,"tr")(3,"th"),w(4,"Categoria"),m(),v(5,"th"),w(6,"Nome"),m(),v(7,"th"),w(8,"Brand"),m(),v(9,"th"),w(10,"Formato"),m(),v(11,"th"),w(12,"Quantit\xE0"),m(),v(13,"th"),w(14,"Prezzo"),m(),v(15,"th"),w(16,"Note"),m(),oe(17,"th"),m()(),v(18,"tbody"),z(19,b8,23,10,"tr",73),m()()),n&2){let t=A();C(19),M("ngForOf",t.pagedProducts)}}function C8(n,e){if(n&1){let t=se();v(0,"div",84)(1,"button",85),B("click",function(){k(t);let r=A();return N(r.prevPage())}),w(2,"\u2039"),m(),v(3,"span"),w(4),m(),v(5,"button",85),B("click",function(){k(t);let r=A();return N(r.nextPage())}),w(6,"\u203A"),m()()}if(n&2){let t=A();C(),M("disabled",t.currentPage===0),C(3),zi("Pagina ",t.currentPage+1," di ",t.totalPages),C(),M("disabled",t.currentPage===t.totalPages-1)}}function E8(n,e){if(n&1&&(v(0,"option",36),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ee(t)}}function S8(n,e){if(n&1){let t=se();v(0,"div",86)(1,"div",87)(2,"h2"),w(3),m(),v(4,"div",88)(5,"div",89)(6,"div",90)(7,"label",91),w(8,"Categoria"),v(9,"span",92),w(10,"*"),m()(),v(11,"select",93),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.category,r)||(o.editingProduct.category=r),N(r)}),v(12,"option",8),w(13,"Seleziona categoria"),m(),z(14,E8,2,2,"option",9),m()(),v(15,"div",90)(16,"label",94),w(17,"Nome prodotto"),v(18,"span",92),w(19,"*"),m()(),v(20,"input",95),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.name,r)||(o.editingProduct.name=r),N(r)}),m()()(),v(21,"div",89)(22,"div",90)(23,"label",96),w(24,"Brand"),m(),v(25,"input",97),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.brand,r)||(o.editingProduct.brand=r),N(r)}),m()(),v(26,"div",90)(27,"label",98),w(28,"Formato"),m(),v(29,"input",99),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.format,r)||(o.editingProduct.format=r),N(r)}),m()()(),v(30,"div",89)(31,"div",90)(32,"label",100),w(33,"Quantit\xE0"),v(34,"span",92),w(35,"*"),m()(),v(36,"input",101),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.quantity,r)||(o.editingProduct.quantity=r),N(r)}),m()(),v(37,"div",90)(38,"label",102),w(39,"Prezzo (\u20AC)"),m(),v(40,"input",103),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.price,r)||(o.editingProduct.price=r),N(r)}),m()()(),v(41,"div",90)(42,"label",104),w(43,"Note"),m(),v(44,"textarea",105),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editingProduct.note,r)||(o.editingProduct.note=r),N(r)}),m()()(),v(45,"div",106)(46,"button",107),B("click",function(){k(t);let r=A();return N(r.cancelEdit())}),w(47,"Annulla"),m(),v(48,"button",108),B("click",function(){k(t);let r=A();return N(r.saveEditedProduct())}),w(49,"Salva"),m()()()()}if(n&2){let t=A();C(3),ee(t.editingProduct.id?"Modifica prodotto":"Nuovo prodotto"),C(8),Y("ngModel",t.editingProduct.category),C(3),M("ngForOf",t.categorie),C(6),Y("ngModel",t.editingProduct.name),C(5),Y("ngModel",t.editingProduct.brand),C(4),Y("ngModel",t.editingProduct.format),C(7),Y("ngModel",t.editingProduct.quantity),C(4),Y("ngModel",t.editingProduct.price),C(4),Y("ngModel",t.editingProduct.note),C(4),M("disabled",!t.isFormValid())}}function D8(n,e){n&1&&(v(0,"div",109),w(1,"Caricamento prodotti franchising..."),m())}function x8(n,e){if(n&1&&(v(0,"div",110),w(1),m()),n&2){let t=A();C(),ee(t.errorMsg)}}function I8(n,e){if(n&1){let t=se();v(0,"tr",116),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.vaiAlDettaglio("franchising",r.id))}),v(1,"td",117),w(2),m(),v(3,"td",117)(4,"a",118),B("click",function(r){return k(t),N(r.stopPropagation())}),w(5),m()(),v(6,"td",117),w(7),m(),v(8,"td",117),w(9),m(),v(10,"td",117),w(11),Ui(12,"number"),m(),v(13,"td",117)(14,"div",119),B("click",function(r){return k(t),N(r.stopPropagation())}),v(15,"input",120),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.quantitaDaOrdinare,r)||(o.quantitaDaOrdinare=r),N(r)}),m()()(),v(16,"td",121),B("click",function(r){return k(t),N(r.stopPropagation())}),v(17,"button",122),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.aggiungiAlCarrello(r))}),v(18,"i",25),w(19,"add_shopping_cart"),m(),w(20," Aggiungi "),m()()()}if(n&2){let t=e.$implicit;C(2),ee(t.category||"\u2014"),C(2),M("title",Os("Vai al prodotto ",t.name))("routerLink",vi(18,n8,t.id)),C(),ee(t.name),C(2),ee(t.brand||"\u2014"),C(2),ee(t.format||"\u2014"),C(2),ee(t.price!==void 0&&t.price!==null?Hi(12,15,t.price,"1.2-2"):"\u2014"),C(4),vt("low-stock",t.quantitaDaOrdinare&&t.quantitaDaOrdinare<=5)("critical-stock",t.quantitaDaOrdinare&&t.quantitaDaOrdinare<=2),Y("ngModel",t.quantitaDaOrdinare),Yt("aria-label","Quantit\xE0 da ordinare per "+t.name),C(2),Yt("aria-label","Aggiungi "+t.name+" al carrello")}}function M8(n,e){if(n&1&&(v(0,"div",28)(1,"table",111)(2,"thead")(3,"tr",112)(4,"th",113),w(5,"Categoria"),m(),v(6,"th",113),w(7,"Nome"),m(),v(8,"th",113),w(9,"Marca"),m(),v(10,"th",113),w(11,"Formato"),m(),v(12,"th",113),w(13,"Prezzo"),m(),v(14,"th",113),w(15,"Quantit\xE0"),m(),v(16,"th",114),w(17,"Azioni"),m()()(),v(18,"tbody"),z(19,I8,21,20,"tr",115),m()()()),n&2){let t=A();C(19),M("ngForOf",t.prodottiFranchising)}}function T8(n,e){n&1&&(v(0,"div"),w(1," Nessun prodotto franchising disponibile. "),m())}var Nm=class n{constructor(e,t,i,r){this.router=e;this.productService=t;this.serviceService=i;this.cdRef=r;window.addEventListener("beforeunload",o=>{this.productsModified.size!==0&&(o.preventDefault(),o.returnValue="")})}prodottiSalone=[{category:"",name:"",brand:"",format:"",quantity:0,price:0,note:""}];formTouched=!1;prodottiFranchising=[];pagedProducts=[];categorie=["Shampoo","Balsamo","Colore","Cera","Gel","Lacca","Olio","Lozione","Trattamento","Altro"];loadingFranchising=!1;loadingMyProducts=!1;savingIndex=null;errorMsg="";lowStockThreshold=5;criticalStockThreshold=2;productsModified=new Set;savingAll=!1;cart=[];checkoutLoading=!1;orderSent=!1;MAX_VISIBLE_RISK_PRODUCTS=3;viewMode="cards";editingProduct=null;searchQuery="";categoryFilter="";stockFilter="all";filteredProducts=[];currentPage=0;pageSize=12;totalPages=1;isBlocked=!1;lowStockTotal=0;criticalStockTotal=0;routerSub;canDeactivate(){return this.productsModified.size!==0?confirm("Ci sono modifiche non salvate. Sei sicuro di voler uscire?"):!0}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}ngOnInit(){return D(this,null,function*(){this.router.events.subscribe(e=>{e instanceof Er&&this.productsModified.size!==0&&(this.isBlocked=!0)}),window.addEventListener("beforeunload",e=>{this.productsModified.size!==0&&(confirm("Sei sicuro di voler uscire? Ci sono delle modifiche non salvate")||e.preventDefault())}),yield this.loadStockSettings(),this.loadFranchising(),this.loadMyProducts()})}loadStockSettings(){return D(this,null,function*(){try{let e=yield this.serviceService.getCurrentUserId();if(e){let t=yield this.serviceService.getStockSettings(e);this.lowStockThreshold=t.scorte_basse,this.criticalStockThreshold=t.scorte_critiche}else this.lowStockThreshold=5,this.criticalStockThreshold=2}catch(e){console.error("Errore caricamento impostazioni scorte:",e),this.lowStockThreshold=5,this.criticalStockThreshold=2}})}loadFranchising(){return D(this,null,function*(){this.loadingFranchising=!0,this.errorMsg="";try{let e=yield this.productService.listFranchisingProducts();this.prodottiFranchising=e.map(t=>re(W({},t),{quantitaDaOrdinare:1}))}catch(e){console.error("Errore caricamento franchising",e),this.errorMsg=e?.message||"Errore caricamento prodotti franchising"}finally{this.loadingFranchising=!1}})}loadMyProducts(){return D(this,null,function*(){try{let e=yield this.productService.getMyProducts();this.prodottiSalone=e.map(t=>this.toProdottoSalone(t)),this.applyFilters(),this.updateStockCounts()}catch(e){console.error("Errore caricamento prodotti",e)}})}applyFilters(){let e=[...this.prodottiSalone];if(this.searchQuery){let t=this.searchQuery.toLowerCase();e=e.filter(i=>(i.name||"").toLowerCase().includes(t)||(i.brand||"").toLowerCase().includes(t)||(i.category||"").toLowerCase().includes(t))}this.categoryFilter&&(e=e.filter(t=>t.category===this.categoryFilter)),this.stockFilter==="low"?e=e.filter(t=>t.quantity<=this.lowStockThreshold&&t.quantity>this.criticalStockThreshold):this.stockFilter==="critical"?e=e.filter(t=>t.quantity<=this.criticalStockThreshold):this.stockFilter==="risk"&&(e=e.filter(t=>t.quantity<=this.lowStockThreshold)),e.sort((t,i)=>t.quantity-i.quantity),this.filteredProducts=e,this.totalPages=Math.ceil(this.filteredProducts.length/this.pageSize),this.currentPage=0,this.updatePagination()}updatePagination(){let e=this.currentPage*this.pageSize;this.pagedProducts=this.filteredProducts.slice(e,e+this.pageSize)}nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.updatePagination())}prevPage(){this.currentPage>0&&(this.currentPage--,this.updatePagination())}editProduct(e){this.editingProduct=W({},e)}cancelEdit(){this.editingProduct=null}addProdottoSalone(){this.editingProduct={category:"",name:"",brand:"",format:"",quantity:0,price:0,note:""}}isFormValid(){return this.editingProduct?!!this.editingProduct.category&&!!this.editingProduct.name&&this.editingProduct.quantity>0:!1}removeProdottoSalone(e){if(!confirm("Sei sicuro di voler eliminare questo prodotto?"))return;let t=this.getProductIndex(e);if(t<0||t>=this.prodottiSalone.length)return;let i=this.prodottiSalone[t];i.id?this.productService.deleteProduct(i.id).then(()=>{this.prodottiSalone=this.prodottiSalone.filter((r,o)=>o!==t),this.applyFilters()}).catch(console.error):(this.prodottiSalone=this.prodottiSalone.filter((r,o)=>o!==t),this.applyFilters())}aggiungiAlCarrello(e){if(!e.quantitaDaOrdinare||e.quantitaDaOrdinare<1){alert("Inserisci una quantit\xE0 valida");return}let t=this.cart.find(i=>i.productId===e.id);t?t.qty+=e.quantitaDaOrdinare:this.cart.push({productId:e.id,name:e.name,brand:e.brand,format:e.format,price:e.price||0,qty:e.quantitaDaOrdinare}),e.quantitaDaOrdinare=1}vaiAlDettaglio(e,t){this.router.navigate(["/admin/product-detail",e,t])}toProduct(e){return re(W({},e.id&&{id:e.id}),{name:e.name,brand:e.brand,category:e.category,format:e.format,quantity:e.quantity,price:e.price,note:e.note})}toProdottoSalone(e){return{id:e.id,owner_id:e.owner_id,salon_id:e.salon_id,category:e.category??"",name:e.name??"",brand:e.brand??"",format:e.format??"",quantity:e.quantity??0,price:e.price??0,note:e.note??""}}saveProdotto=(e,t)=>D(this,null,function*(){try{let i=this.toProduct(e),r=yield this.productService.saveProduct(i),o=[...this.prodottiSalone];o[t]=this.toProdottoSalone(r),this.prodottiSalone=o,this.productsModified.delete(t),this.cdRef.detectChanges(),this.updateStockCounts()}catch(i){throw console.error("Errore salvataggio prodotto",i),i}});saveEditedProduct(){return D(this,null,function*(){if(!(!this.editingProduct||!this.isFormValid()))try{let e=this.getProductIndex(this.editingProduct);if(e!==-1)yield this.saveProdotto(this.editingProduct,e);else{let t=yield this.saveNewProduct(this.editingProduct);this.prodottiSalone=[...this.prodottiSalone,t]}this.applyFilters(),this.editingProduct=null,this.viewMode==="table"&&setTimeout(()=>{let t=document.querySelector(".prodotti-table");t&&t.scrollIntoView({behavior:"smooth",block:"end"})},100)}catch(e){console.error("Errore salvataggio prodotto",e)}})}saveNewProduct(e){return D(this,null,function*(){let t=this.toProduct(e),i=yield this.productService.saveProduct(t);return this.toProdottoSalone(i)})}getProductIndex(e){return e?e.id?this.prodottiSalone.findIndex(t=>t.id===e.id):this.prodottiSalone.findIndex(t=>t.name===e.name&&t.brand===e.brand&&t.category===e.category&&t.format===e.format):-1}get groupedCategories(){let e={};for(let t of this.filteredProducts){let i=t.category||"Senza categoria";e[i]||(e[i]={name:i,products:[],totalQuantity:0,lowStockCount:0,criticalStockCount:0,riskStockCount:0,productCount:0}),e[i].products.push(t),e[i].totalQuantity+=t.quantity,e[i].productCount++,t.quantity<=this.criticalStockThreshold?(e[i].criticalStockCount++,e[i].riskStockCount++):t.quantity<=this.lowStockThreshold&&(e[i].lowStockCount++,e[i].riskStockCount++)}return Object.values(e).map(t=>{let r=[...t.products.filter(o=>o.quantity<=this.lowStockThreshold)].sort((o,s)=>o.quantity-s.quantity);return re(W({},t),{topProducts:r.slice(0,3)})}).sort((t,i)=>t.totalQuantity-i.totalQuantity)}viewCategory(e){this.searchQuery="",this.stockFilter="all",this.categoryFilter=e,this.applyFilters(),this.viewMode="table"}rimuoviDalCarrello(e){this.cart=this.cart.filter(t=>t!==e)}svuotaCarrello(){this.cart=[]}updateCartItem(e){e.qty<1&&this.rimuoviDalCarrello(e)}getCartTotal(){return this.cart.reduce((e,t)=>e+t.price*t.qty,0)}inviaOrdine(){return D(this,null,function*(){if(this.cart.length!==0){this.checkoutLoading=!0;try{console.log("Invio ordine con items:",this.cart),yield this.productService.createOrder(this.cart),this.orderSent=!0,this.cart=[],alert("Ordine inviato con successo! Riceverai una conferma via email")}catch(e){console.error("Dettaglio errore ordine:",e),alert("Errore durante l'invio dell'ordine. Riprova pi\xF9 tardi.")}finally{this.checkoutLoading=!1}}})}onProductChange(e){this.productsModified.add(e),this.updateStockCounts()}saveAllChanges(){return D(this,null,function*(){if(this.productsModified.size===0){alert("Nessuna modifica da salvare");return}this.savingAll=!0;let e=Array.from(this.productsModified),t=0,i=0;for(let r of e)try{yield this.saveProdotto(this.prodottiSalone[r],r),t++}catch(o){console.error("Errore nel salvataggio del prodotto",o),i++}this.productsModified.clear(),this.savingAll=!1,alert(i===0?`Tutte le ${t} modifiche salvate con successo!`:`Salvate ${t} modifiche. ${i} errori.`)})}incrementQuantity(e,t){e.quantity=(e.quantity||0)+1,this.onProductChange(t),this.updateStockCounts()}decrementQuantity(e,t){e.quantity>0&&(e.quantity-=1,this.onProductChange(t),this.updateStockCounts())}isCriticalProduct(e){return e?.quantity!==void 0&&e.quantity<=this.criticalStockThreshold}isLowProduct(e){return e?.quantity!==void 0&&e.quantity>this.criticalStockThreshold&&e.quantity<=this.lowStockThreshold}updateStockCounts(){let e=this.prodottiSalone||[];this.criticalStockTotal=e.reduce((t,i)=>t+(this.isCriticalProduct(i)?1:0),0),this.lowStockTotal=e.reduce((t,i)=>t+(this.isLowProduct(i)?1:0),0)}clearCategory(e){return D(this,null,function*(){if(confirm(`Sei sicuro di voler eliminare tutti i prodotti della categoria "${e}"? Questa operazione non pu\xF2 essere annullata.`))try{let t=this.prodottiSalone.filter(i=>i.category===e);for(let i of t)i.id&&(yield this.productService.deleteProduct(i.id));this.prodottiSalone=this.prodottiSalone.filter(i=>i.category!==e),this.applyFilters(),this.updateStockCounts(),alert(`Categoria "${e}" eliminata con successo!`)}catch(t){console.error("Errore durante l'eliminazione della categoria:",t),alert("Si \xE8 verificato un errore durante l'eliminazione. Riprova pi\xF9 tardi.")}})}static \u0275fac=function(t){return new(t||n)($(Ve),$($o),$(xt),$(fn))};static \u0275cmp=he({type:n,selectors:[["app-prodotti"]],decls:64,vars:23,consts:[["noProductsAtAll",""],[1,"container"],[1,"section-title"],[1,"filters-bar"],[1,"search-box"],["type","text","placeholder","Cerca prodotti...",3,"ngModelChange","input","ngModel"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","all"],["value","low"],["value","critical"],["value","risk"],["aria-live","polite",1,"stock-summary"],[1,"stock-item"],[1,"stock-badge"],["class","cart-section",4,"ngIf"],[1,"view-toggle"],[3,"click"],[1,"section-container"],[1,"section-header"],["type","button",1,"btn",3,"click","disabled"],[4,"ngIf"],["type","button",1,"btn-primary",3,"click"],[1,"material-icons"],["class","loading-indicator",4,"ngIf"],["class","products-grid",4,"ngIf"],[1,"table-responsive"],["class","data-table",4,"ngIf"],["class","pagination",4,"ngIf"],["class","modal-backdrop",4,"ngIf"],[1,"franchising-section"],["class","muted",4,"ngIf"],["class","error",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"value"],[1,"cart-section"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-total"],[1,"cart-actions"],[1,"btn",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"cart-item"],[1,"item-info"],[1,"item-name"],[1,"item-brand"],[1,"item-actions"],["type","number","min","1",1,"qty-input",3,"ngModelChange","change","ngModel"],[1,"btn-remove",3,"click"],[1,"item-price"],[1,"loading-indicator"],[1,"products-grid"],["class","category-card",3,"low-stock","critical-stock",4,"ngFor","ngForOf"],["class","no-products-message",4,"ngIf"],[1,"category-card"],[1,"card-header"],[1,"category-name"],[1,"category-header-actions"],[1,"product-count"],[1,"card-body"],[1,"stock-info"],["class","category-details",4,"ngIf"],[1,"card-actions"],["type","button","title","Elimina tutta la categoria",1,"btn-icon",3,"click"],[1,"category-details"],[3,"critical","low",4,"ngFor","ngForOf"],["class","more-items",4,"ngIf"],[1,"more-items"],[1,"no-products-message"],[4,"ngIf","ngIfElse"],[1,"data-table"],[3,"modified",4,"ngFor","ngForOf"],["placeholder","Es. Shampoo Antiforfora",3,"ngModelChange","input","ngModel"],["placeholder","Es. Wella",3,"ngModelChange","input","ngModel"],["placeholder","Es. 500ml",3,"ngModelChange","input","ngModel"],[1,"quantity-controls"],["type","button",1,"btn-quantity",3,"click"],["type","number","min","0",1,"qty-input",3,"ngModelChange","input","ngModel"],["type","number","min","0","step","0.01",3,"ngModelChange","input","ngModel"],["placeholder","Note opzionali",3,"ngModelChange","input","ngModel"],[1,"actions"],["type","button",1,"btn-remove",3,"click"],[1,"pagination"],[3,"click","disabled"],[1,"modal-backdrop"],[1,"edit-modal"],[1,"modal-content"],[1,"form-row"],[1,"form-group"],["for","category"],[1,"required"],["id","category","required","",3,"ngModelChange","ngModel"],["for","name"],["id","name","required","",3,"ngModelChange","ngModel"],["for","brand"],["id","brand",3,"ngModelChange","ngModel"],["for","format"],["id","format",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","min","0","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","min","0","step","0.01",3,"ngModelChange","ngModel"],["for","note"],["id","note","rows","3",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn",3,"click"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"muted"],[1,"error"],["role","table","aria-label","Tabella prodotti franchising",1,"data-table"],["role","row"],["role","columnheader"],["role","columnheader",1,"text-center"],["role","row","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["role","row",2,"cursor","pointer",3,"click"],["role","cell"],[1,"link-reset",3,"click","routerLink","title"],[1,"qty-cell",3,"click"],["type","number","min","1",1,"qty-input",3,"ngModelChange","ngModel"],["role","cell",1,"actions",3,"click"],["type","button","title","Aggiungi al carrello",1,"btn-primary",3,"click"]],template:function(t,i){t&1&&(v(0,"div",1)(1,"h2",2),w(2,"Gestione Magazzino"),m(),v(3,"div",3)(4,"div",4)(5,"input",5),Q("ngModelChange",function(o){return K(i.searchQuery,o)||(i.searchQuery=o),o}),B("input",function(){return i.applyFilters()}),m()(),v(6,"div",6)(7,"label"),w(8,"Filtra per:"),m(),v(9,"select",7),Q("ngModelChange",function(o){return K(i.categoryFilter,o)||(i.categoryFilter=o),o}),B("change",function(){return i.applyFilters()}),v(10,"option",8),w(11,"Tutte le categorie"),m(),z(12,i8,2,2,"option",9),m(),v(13,"select",7),Q("ngModelChange",function(o){return K(i.stockFilter,o)||(i.stockFilter=o),o}),B("change",function(){return i.applyFilters()}),v(14,"option",10),w(15,"Tutto lo stock"),m(),v(16,"option",11),w(17,"Scorte basse"),m(),v(18,"option",12),w(19,"Scorte critiche"),m(),v(20,"option",13),w(21,"Scorte basse e critiche"),m()()(),v(22,"div",14)(23,"div",15)(24,"span"),w(25,"Scorte basse"),m(),v(26,"span",16),w(27),m()(),v(28,"div",15)(29,"span"),w(30,"Scorte critiche"),m(),v(31,"span",16),w(32),m()()()(),z(33,a8,16,8,"section",17),v(34,"div",18)(35,"button",19),B("click",function(){return i.viewMode="cards"}),w(36,"Card"),m(),v(37,"button",19),B("click",function(){return i.viewMode="table"}),w(38,"Tabella"),m()(),v(39,"section",20)(40,"div",21)(41,"h2"),w(42,"Prodotti del Salone"),m(),v(43,"div")(44,"button",22),B("click",function(){return i.saveAllChanges()}),z(45,l8,2,1,"span",23)(46,c8,2,0,"span",23),m(),v(47,"button",24),B("click",function(){return i.addProdottoSalone()}),v(48,"i",25),w(49,"add"),m(),w(50,"Nuovo prodotto "),m()()(),z(51,u8,2,0,"div",26)(52,v8,3,2,"div",27),v(53,"div",28),z(54,w8,20,1,"table",29),m(),z(55,C8,7,4,"div",30),m(),z(56,S8,50,10,"div",31),v(57,"section",32)(58,"h2"),w(59,"Prodotti Franchising"),m(),z(60,D8,2,0,"div",33)(61,x8,2,1,"div",34)(62,M8,20,1,"div",35)(63,T8,2,0,"div",23),m()()),t&2&&(C(5),Y("ngModel",i.searchQuery),C(4),Y("ngModel",i.categoryFilter),C(3),M("ngForOf",i.categorie),C(),Y("ngModel",i.stockFilter),C(14),ee(i.lowStockTotal),C(5),ee(i.criticalStockTotal),C(),M("ngIf",i.cart.length>0),C(2),vt("active",i.viewMode==="cards"),C(2),vt("active",i.viewMode==="table"),C(7),M("disabled",i.savingAll||i.productsModified.size===0),C(),M("ngIf",!i.savingAll),C(),M("ngIf",i.savingAll),C(5),M("ngIf",i.loadingMyProducts),C(),M("ngIf",i.viewMode==="cards"),C(2),M("ngIf",i.viewMode==="table"),C(),M("ngIf",i.filteredProducts.length>i.pageSize),C(),M("ngIf",i.editingProduct),C(4),M("ngIf",i.loadingFranchising),C(),M("ngIf",i.errorMsg),C(),M("ngIf",!i.loadingFranchising&&(i.prodottiFranchising==null?null:i.prodottiFranchising.length)),C(),M("ngIf",!i.loadingFranchising&&(!i.prodottiFranchising||i.prodottiFranchising.length===0)))},dependencies:[Ht,Zn,Yn,yt,qs,Dn,Dt,oo,Ys,kt,Ue,at,et,Ot,qn,Su,Ls],styles:['input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{background:transparent}.btn-remove[_ngcontent-%COMP%]:hover{color:var(--secondary);transform:scale(1.2)}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:clamp(.3rem,.8vw,.5rem);justify-content:center}.error[_ngcontent-%COMP%]{color:var(--danger);padding:.5rem;background-color:#ff00001a;border-radius:6px;margin-top:.5rem}a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none;color:var(--text-light);font-weight:700;transition:color .2s ease}a[_ngcontent-%COMP%]:hover{color:var(--primary);text-decoration:underline}.loading-indicator[_ngcontent-%COMP%]{padding:10px;background:var(--background);text-align:center;font-style:italic}.filters-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;gap:1rem;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:6px;color:var(--text-light);background:var(--background2)}.view-toggle[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1.5rem}.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff1a;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;color:var(--text-light)}.view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--primary);color:var(--text-light)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(100%,250px),1fr));gap:clamp(.8rem,2vw,1.2rem);margin-bottom:clamp(1rem,3vw,2rem)}.product-card[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:10px;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease;border:1px solid rgba(255,255,255,.1)}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0003;border-color:#fff3}.product-card.low-stock[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.product-card.critical-stock[_ngcontent-%COMP%]{border-left:4px solid #f44336;animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #f4433666}70%{box-shadow:0 0 0 10px #f4433600}to{box-shadow:0 0 #f4433600}}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.8rem 1rem;background:#ffffff14}.product-category[_ngcontent-%COMP%]{font-weight:600;color:var(--primary)}.product-quantity[_ngcontent-%COMP%]{font-weight:700;background:#0000004d;padding:.2rem .6rem;border-radius:20px;font-size:.9rem}.card-body[_ngcontent-%COMP%]{padding:1.2rem}.product-name[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.2rem}.product-details[_ngcontent-%COMP%]{display:grid;gap:.7rem;grid-template-columns:max-content 1fr}.detail-item[_ngcontent-%COMP%]{display:contents}.detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:80px;opacity:.7;font-size:.9rem}.card-actions[_ngcontent-%COMP%]{display:flex;align-items:center;padding:clamp(.6rem,1.5vw,.8rem) clamp(.8rem,2vw,1rem);gap:clamp(.3rem,1vw,.5rem)}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem;font-size:.9rem;color:var(--text-light)}.card-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{flex-grow:1;padding:clamp(.4rem,1vw,.6rem);font-size:clamp(.7rem,1.1vw,.85rem)}select[_ngcontent-%COMP%]{color:var(--text-light);background:var(--background)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:1.5rem}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px}.category-card[_ngcontent-%COMP%], .category-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;min-inline-size:0}.category-card[_ngcontent-%COMP%]{background:var(--background2);border-radius:10px;overflow:hidden;border-left:4px solid var(--primary);transition:transform .3s ease;display:flex;flex-direction:column;min-height:auto;width:100%;padding:0;-webkit-tap-highlight-color:transparent}.category-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column;gap:clamp(.35rem,1vw,.8rem);padding:clamp(.7rem,1.6vw,1rem);overflow:hidden;min-height:0;-webkit-overflow-scrolling:touch}.category-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:clamp(.5rem,1.2vw,.9rem);background:#ffffff14;z-index:1}.category-name[_ngcontent-%COMP%]{margin:0;font-size:clamp(.98rem,1.6vw,1.12rem);font-weight:700;line-height:1.15;word-break:break-word}.product-count[_ngcontent-%COMP%]{background:var(--background);padding:clamp(.2rem,.5vw,1rem);margin:0;border-radius:20px;border:1px solid var(--primary);font-weight:600;font-size:clamp(.5rem,1vw,.95rem);white-space:nowrap}.category-card[_ngcontent-%COMP%]   .risk-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:clamp(.35rem,.8vw,.6rem)}.risk-badge[_ngcontent-%COMP%]{background:var(--danger, #f44336);color:var(--text-light);padding:clamp(.08rem,.35vw,.18rem) clamp(.35rem,.9vw,.5rem);border-radius:999px;font-weight:700;font-size:clamp(.72rem,1vw,.85rem);line-height:1}.category-card[_ngcontent-%COMP%]   .risk-list[_ngcontent-%COMP%]{margin:clamp(.25rem,.6vw,.35rem) 0;padding-left:1.2rem;max-height:min(clamp(4rem,18vh,6.5rem),30vh);overflow:auto;-webkit-overflow-scrolling:touch}.category-card[_ngcontent-%COMP%]   .more-risk[_ngcontent-%COMP%]{font-size:clamp(.75rem,1vw,.85rem);color:var(--secondary);margin-top:.25rem}.category-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{margin-top:auto;display:flex;justify-content:flex-end;padding:clamp(.5rem,1.2vw,.8rem) clamp(.8rem,1.8vw,1rem);gap:clamp(.35rem,.8vw,.6rem)}.category-card.low-stock[_ngcontent-%COMP%]{border-left-color:#ff9800}.category-card.critical-stock[_ngcontent-%COMP%]{border-left-color:#f44336}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-body[_ngcontent-%COMP%]{padding:clamp(.6rem,1.4vw,.8rem)}.stock-info[_ngcontent-%COMP%]{display:grid;gap:clamp(.3rem,.6vw,.6rem);margin-bottom:clamp(.6rem,1.2vw,.8rem);font-size:clamp(.78rem,1vw,.9rem);color:var(--secondary)}.category-details[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.1);padding-top:clamp(.6rem,1.2vw,1rem)}.category-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:clamp(.25rem,.6vw,.5rem);font-size:clamp(.92rem,1.2vw,1rem)}.category-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1.2rem;margin:0}.category-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:clamp(.78rem,.95vw,.85rem);margin-bottom:.2rem}.category-card[_ngcontent-%COMP%]   .critical[_ngcontent-%COMP%]{color:#ff6b6b;font-weight:700}.category-card[_ngcontent-%COMP%]   .risk-list[_ngcontent-%COMP%], .category-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch}.lista-prodotti-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .lista-prodotti-container[_ngcontent-%COMP%]   .filters-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .prodotti-table[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--background)!important;color:var(--text-light)!important;border:1.5px solid var(--secondary);border-radius:6px;padding:.35rem .5rem;-webkit-appearance:none;appearance:none}.lista-prodotti-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--background2);color:var(--text-light)}.lista-prodotti-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block}.lista-prodotti-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]:after{content:"\\25be";position:absolute;right:.6rem;top:50%;transform:translateY(-50%);pointer-events:none;color:#ffffffb3}.lista-prodotti-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-right:1.6rem}.error-message[_ngcontent-%COMP%]{color:var(--danger);font-size:.85rem;margin-top:.5rem;display:block;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.cart-section[_ngcontent-%COMP%]{margin:2rem 0;padding:1rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a}.cart-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--primary);font-size:var(--font-size-lg);margin-bottom:1.2rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.cart-items[_ngcontent-%COMP%]{display:grid;gap:.8rem}.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr;align-items:center;padding:.8rem;background:#ffffff08;border-radius:8px;transition:background .3s ease}.cart-item[_ngcontent-%COMP%]:hover{background:#ffffff0f}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.item-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-light)}.item-brand[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-light);margin-top:.2rem}.item-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.qty-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;text-align:center;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:6px;color:var(--text-light);transition:all .2s ease}.qty-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #d4af374d}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.section-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.item-price[_ngcontent-%COMP%]{text-align:right;font-weight:600;color:var(--text-light)}.cart-total[_ngcontent-%COMP%]{text-align:right;font-size:1.1rem;font-weight:700;margin:1.5rem 0 1rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.1);color:var(--primary)}.cart-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.8rem}.cart-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:120px}.more-items[_ngcontent-%COMP%]{color:var(--text-light);font-style:italic;list-style-type:none;margin-top:5px;font-size:.9em}.no-products-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;font-size:1.2rem;color:var(--primary);background-color:var(--background2);border-radius:8px;margin:1rem 0;border:1px solid var(--primary)}.cards-container[_ngcontent-%COMP%]{min-height:200px}.modal-content[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.modal-actions[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid var(--primary);display:flex;justify-content:flex-end;gap:10px;background:transparent}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;max-height:200px;width:100%;padding:10px;border:1px solid var(--primary);border-radius:4px;font-family:inherit;box-sizing:border-box}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a90e2;box-shadow:0 0 0 2px #4a90e233}.qty-input[_ngcontent-%COMP%]{width:50px;text-align:center;padding:.25rem}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.stock-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;margin-top:.5rem;align-items:center;border:1px solid var(--secondary);padding:1rem;border-radius:12px}.stock-item[_ngcontent-%COMP%]{font-weight:600;display:flex;gap:.5rem;align-items:center}.stock-badge[_ngcontent-%COMP%]{min-width:2rem;text-align:center;padding:.1rem .5rem;border-radius:.4rem;background:transparent;font-weight:800}.stock-badge.low[_ngcontent-%COMP%], .stock-badge.critical[_ngcontent-%COMP%]{background:transparent}.category-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--secondary);transform:translateY(-2px);box-shadow:0 4px 8px #0003;border:none}']})};var aE;function P8(){if(aE==null){let n=typeof document<"u"?document.head:null;aE=!!(n&&(n.createShadowRoot||n.attachShadow))}return aE}function Lm(n){if(P8()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Od(n){return n.composedPath?n.composedPath()[0]:n.target}function xO(n){return n.buttons===0||n.detail===0}function IO(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function Fm(n,e=0){return A8(n)?Number(n):arguments.length===2?e:0}function A8(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Qi(n){return n instanceof Xe?n.nativeElement:n}var Vm=new WeakMap,MO=(()=>{class n{_appRef;_injector=R(Gt);_environmentInjector=R(Ct);load(t){let i=this._appRef=this._appRef||this._injector.get(_i),r=Vm.get(i);r||(r={loaders:new Set,refs:[]},Vm.set(i,r),i.onDestroy(()=>{Vm.get(i)?.refs.forEach(o=>o.destroy()),Vm.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(LP(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lE;try{lE=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lE=!1}var cE=(()=>{class n{_platformId=R(Oo);isBrowser=this._platformId?i1(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||lE)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var R8=new J("cdk-dir-doc",{providedIn:"root",factory:O8});function O8(){return R(Qe)}var k8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function N8(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?k8.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var uE=(()=>{class n{get value(){return this.valueSignal()}valueSignal=En("ltr");change=new xe;constructor(){let t=R(R8,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(N8(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var L8=20,TO=(()=>{class n{_ngZone=R(Je);_platform=R(cE);_renderer=R(ni).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new fe;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=L8){return this._platform.isBrowser?new be(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(Ph(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):ue()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(tn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_scrollableContainsElement(t,i){let r=Qi(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F8=20,PO=(()=>{class n{_platform=R(cE);_listeners;_viewportSize;_change=new fe;_document=R(Qe);constructor(){let t=R(Je),i=R(ni).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),s=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,l=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:l}}change(t=F8){return t>0?this._change.pipe(Ph(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AO=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({})}return n})();var dE={},RO=(()=>{class n{_appId=R(pl);getId(t){return this._appId!=="ng"&&(t+=this._appId),dE.hasOwnProperty(t)||(dE[t]=0),`${t}${dE[t]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OO(n){return Array.isArray(n)?n:[n]}function pE(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return i==="canvas"?LO(n,e):(i==="input"||i==="select"||i==="textarea")&&NO(n,e),kO("canvas",n,e,LO),kO("input, textarea, select",n,e,NO),e}function kO(n,e,t,i){let r=e.querySelectorAll(n);if(r.length){let o=t.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var V8=0;function NO(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${V8++}`)}function LO(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function wE(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function gE(n,e,t){let{top:i,bottom:r,left:o,right:s}=n;return t>=i&&t<=r&&e>=o&&e<=s}function j8(n,e){let t=e.left<n.left,i=e.left+e.width>n.right,r=e.top<n.top,o=e.top+e.height>n.bottom;return t||i||r||o}function Ld(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function FO(n,e,t,i){let{top:r,right:o,bottom:s,left:l,width:c,height:d}=n,h=c*e,p=d*e;return i>r-p&&i<s+p&&t>l-h&&t<o+h}var jm=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:wE(t)})})}handleScroll(e){let t=Od(e),i=this.positions.get(t);if(!i)return null;let r=i.scrollPosition,o,s;if(t===this._document){let d=this.getViewportScrollPosition();o=d.top,s=d.left}else o=t.scrollTop,s=t.scrollLeft;let l=r.top-o,c=r.left-s;return this.positions.forEach((d,h)=>{d.clientRect&&t!==h&&t.contains(h)&&Ld(d.clientRect,l,c)}),r.top=o,r.left=s,{top:l,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function YO(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let i=e.createElement("div");return t.forEach(r=>i.appendChild(r)),i}function CE(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r?n.setProperty(i,r,t?.has(i)?"important":""):n.removeProperty(i)}return n}function ec(n,e){let t=e?"":"none";CE(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function VO(n,e,t){CE(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Bm(n,e){return e&&e!="none"?n+" "+e:n}function jO(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Fd(e.left,e.top)}function Fd(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function BO(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function B8(n){let e=getComputedStyle(n),t=fE(e,"transition-property"),i=t.find(l=>l==="transform"||l==="all");if(!i)return 0;let r=t.indexOf(i),o=fE(e,"transition-duration"),s=fE(e,"transition-delay");return BO(o[r])+BO(s[r])}function fE(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}var z8=new Set(["position"]),mE=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,i,r,o,s,l,c,d,h){this._document=e,this._rootElement=t,this._direction=i,this._initialDomRect=r,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=l,this._initialTransform=c,this._zIndex=d,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),zO(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return B8(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,i=e?e.template:null,r;if(i&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(i,e.context);s.detectChanges(),r=YO(s,this._document),this._previewEmbeddedView=s,e.matchSize?jO(r,o):r.style.transform=Fd(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=pE(this._rootElement),jO(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return CE(r.style,{"pointer-events":"none",margin:zO(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},z8),ec(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>r.classList.add(o)):r.classList.add(t)),r}};function zO(n){return"showPopover"in n}var U8={passive:!0},UO={passive:!1},H8={passive:!1,capture:!0},$8=800,HO="cdk-drag-placeholder",$O=new Set(["position"]),_E=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=En(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new fe;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=qe.EMPTY;_pointerUpSubscription=qe.EMPTY;_scrollSubscription=qe.EMPTY;_resizeSubscription=qe.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>ec(t,e)))}_disabled=!1;beforeStarted=new fe;started=new fe;released=new fe;ended=new fe;entered=new fe;exited=new fe;dropped=new fe;moved=this._moveEvents;data;constrainPosition;constructor(e,t,i,r,o,s,l){this._config=t,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=l,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new jm(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>Qi(i)),this._handles.forEach(i=>ec(i,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Qi(e);if(t!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(t,"mousedown",this._pointerDown,UO),i.listen(t,"touchstart",this._pointerDown,U8),i.listen(t,"dragstart",this._nativeDragStart,UO)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Qi(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&j8(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),i=0,r=0;t.left<e.left?i=e.left-t.left:t.right>e.right&&(i=e.right-t.right),t.top<e.top?r=e.top-t.top:t.bottom>e.bottom&&(r=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,l=o+i,c=s+r;this._rootElement.style.transform=Fd(l,c),this._activeTransform={x:l,y:c},this._passiveTransform={x:l,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),ec(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),ec(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let r=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(r+o>=this._config.dragStartThreshold){let l=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!l){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let i=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,t);else{let r=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=i.x-r.x+this._passiveTransform.x,o.y=i.y-r.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:e,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){kd(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),i=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",W8,H8)}),i){let r=this._rootElement,o=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),l=this._marker=this._marker||this._document.createComment("");o.insertBefore(l,r),this._initialTransform=r.style.transform||"",this._preview=new mE(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),VO(r,!1,$O),this._document.body.appendChild(o.replaceChild(s,r)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let i=this.isDragging(),r=kd(t),o=!r&&t.button!==0,s=this._rootElement,l=Od(t),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+$8>Date.now(),d=r?IO(t):xO(t);if(l&&l.draggable&&t.type==="mousedown"&&t.preventDefault(),i||o||c||d)return;if(this._handles.length){let y=s.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=wE(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){VO(this._rootElement,!0,$O),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,i=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),o=this._getDragDistance(r),s=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,s,o,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),l=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,l),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=l=>{(!l||this._preview&&Od(l)===this._preview.element&&l.propertyName==="transform")&&(s(),i(),clearTimeout(o))},o=setTimeout(r,t*1.5),s=this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=YO(this._placeholderRef,this._document)):i=pE(this._rootElement),i.style.pointerEvents="none",i.classList.add(HO),i}_getPointerPositionInElement(e,t,i){let r=t===this._rootElement?null:t,o=r?r.getBoundingClientRect():e,s=kd(i)?i.targetTouches[0]:i,l=this._getViewportScrollPosition(),c=s.pageX-o.left-l.left,d=s.pageY-o.top-l.top;return{x:o.left-e.left+c,y:o.top-e.top+d}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),i=kd(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-t.left,o=i.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let l=this._ownerSVGElement.createSVGPoint();return l.x=r,l.y=o,l.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),h=l.top+s,p=l.bottom-(d-s),y=l.left+o,_=l.right-(c-o);i=WO(i,y,_),r=WO(r,h,p)}return{x:i,y:r}}_updatePointerDirectionDelta(e){let{x:t,y:i}=e,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),l=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=t>o.x?1:-1,o.x=t),l>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,ec(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let i=1/this.scale,r=Fd(e*i,t*i),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=Bm(r,this._initialTransform)}_applyPreviewTransform(e,t){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=Fd(e,t);this._preview.setTransform(Bm(r,i))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let o=r.left-i.left,s=i.right-r.right,l=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,r.height>i.height?(l>0&&(t+=l),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:kd(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let i=Od(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Ld(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Lm(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Qi(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,i){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let r=this._anchor??=pE(this._placeholder);r.classList.remove(HO),r.classList.add("cdk-drag-anchor"),r.style.transform="",i?i.before(r):Qi(t.element).appendChild(r)}}};function WO(n,e,t){return Math.max(e,Math.min(t,n))}function kd(n){return n.type[0]==="t"}function W8(n){n.preventDefault()}function tc(n,e,t){let i=GO(e,n.length-1),r=GO(t,n.length-1);if(i===r)return;let o=n[i],s=r<i?-1:1;for(let l=i;l!==r;l+=s)n[l]=n[l+s];n[r]=o}function GO(n,e){return Math.max(0,Math.min(e,n))}var zm=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,i,r){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,i,r);if(s===-1&&o.length>0)return null;let l=this.orientation==="horizontal",c=o.findIndex(x=>x.drag===e),d=o[s],h=o[c].clientRect,p=d.clientRect,y=c>s?1:-1,_=this._getItemOffsetPx(h,p,y),S=this._getSiblingOffsetPx(c,o,y),I=o.slice();return tc(o,c,s),o.forEach((x,T)=>{if(I[T]===x)return;let H=x.drag===e,q=H?_:S,U=H?e.getPlaceholderElement():x.drag.getRootElement();x.offset+=q;let ae=Math.round(x.offset*(1/x.drag.scale));l?(U.style.transform=Bm(`translate3d(${ae}px, 0, 0)`,x.initialTransform),Ld(x.clientRect,0,q)):(U.style.transform=Bm(`translate3d(0, ${ae}px, 0)`,x.initialTransform),Ld(x.clientRect,q,0))}),this._previousSwap.overlaps=gE(p,t,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=l?r.x:r.y,{previousIndex:c,currentIndex:s}}enter(e,t,i,r){let o=r==null||r<0?this._getItemIndexFromPointerPosition(e,t,i):r,s=this._activeDraggables,l=s.indexOf(e),c=e.getPlaceholderElement(),d=s[o];if(d===e&&(d=s[o+1]),!d&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(d=s[0]),l>-1&&s.splice(l,1),d&&!this._dragDropRegistry.isDragging(d)){let h=d.getRootElement();h.parentElement.insertBefore(c,h),s.splice(o,0,e)}else this._element.appendChild(c),s.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let i=this._itemPositions.find(r=>r.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{Ld(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:wE(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,i){let r=this.orientation==="horizontal",o=r?t.left-e.left:t.top-e.top;return i===-1&&(o+=r?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,i){let r=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+i*-1],l=o[r?"width":"height"]*i;if(s){let c=r?"left":"top",d=r?"right":"bottom";i===-1?l-=s.clientRect[c]-o[d]:l+=o[c]-s.clientRect[d]}return l}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return r?e>=s.right:t>=s.bottom}else{let s=i[0].clientRect;return r?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,i,r){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:l,clientRect:c})=>{if(l===e)return!1;if(r){let d=o?r.x:r.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return o?t>=Math.floor(c.left)&&t<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},vE=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<t.length;i++){let r=t[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(e)}sort(e,t,i,r){let o=this._getItemIndexFromPointerPosition(e,t,i),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let l=this._activeItems[o];if(s.drag===l&&s.overlaps&&s.deltaX===r.x&&s.deltaY===r.y)return null;let c=this.getItemIndex(e),d=e.getPlaceholderElement(),h=l.getRootElement();o>c?h.after(d):h.before(d),tc(this._activeItems,c,o);let p=this._getRootNode().elementFromPoint(t,i);return s.deltaX=r.x,s.deltaY=r.y,s.drag=l,s.overlaps=h===p||h.contains(p),{previousIndex:c,currentIndex:o}}enter(e,t,i,r){let o=this._activeItems.indexOf(e);o>-1&&this._activeItems.splice(o,1);let s=r==null||r<0?this._getItemIndexFromPointerPosition(e,t,i):r;s===-1&&(s=this._getClosestItemIndexToPointer(e,t,i));let l=this._activeItems[s];l&&!this._dragDropRegistry.isDragging(l)?(this._activeItems.splice(s,0,e),l.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,o]=this._relatedNodes[i];r.parentNode===e&&r.nextSibling!==o&&(o===null?e.appendChild(r):o.parentNode===e&&e.insertBefore(r,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,i){let r=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(i)),o=r?this._activeItems.findIndex(s=>{let l=s.getRootElement();return r===l||l.contains(r)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=Lm(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let l=this._activeItems[s];if(l!==e){let{x:c,y:d}=l.getRootElement().getBoundingClientRect(),h=Math.hypot(t-c,i-d);h<r&&(r=h,o=s)}}return o}},qO=.05,QO=.05,xi=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(xi||{}),Vn=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Vn||{}),yE=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new fe;entered=new fe;exited=new fe;dropped=new fe;sorted=new fe;receivingStarted=new fe;receivingStopped=new fe;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=qe.EMPTY;_verticalScrollDirection=xi.NONE;_horizontalScrollDirection=Vn.NONE;_scrollNode;_stopScrollTimers=new fe;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,i,r,o){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=o;let s=this.element=Qi(e);this._document=i,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new jm(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,r,o,s,l,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:l,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>e.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof zm&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new vE(this._document,this._dragDropRegistry);else{let t=new zm(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,i)=>this.sortPredicate(t,i,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Qi(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(e);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,r){if(this.sortingDisabled||!this._domRect||!FO(this._domRect,qO,t,i))return;let o=this._sortStrategy.sort(e,t,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,r=xi.NONE,o=Vn.NONE;if(this._parentPositions.positions.forEach((s,l)=>{l===this._document||!s.clientRect||i||FO(s.clientRect,qO,e,t)&&([r,o]=G8(l,s.clientRect,this._direction,e,t),(r||o)&&(i=l))}),!r&&!o){let{width:s,height:l}=this._viewportRuler.getViewportSize(),c={width:s,height:l,top:0,right:s,bottom:l,left:0};r=KO(c,t),o=JO(c,e),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Cy(0,uh).pipe(Mn(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===xi.UP?e.scrollBy(0,-t):this._verticalScrollDirection===xi.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Vn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Vn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&gE(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(r=>r._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._domRect||!gE(this._domRect,t,i)||!this.enterPredicate(e,this))return!1;let r=this._getShadowRoot().elementFromPoint(t,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(e,t){let i=this._activeSiblings;!i.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Lm(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function KO(n,e){let{top:t,bottom:i,height:r}=n,o=r*QO;return e>=t-o&&e<=t+o?xi.UP:e>=i-o&&e<=i+o?xi.DOWN:xi.NONE}function JO(n,e){let{left:t,right:i,width:r}=n,o=r*QO;return e>=t-o&&e<=t+o?Vn.LEFT:e>=i-o&&e<=i+o?Vn.RIGHT:Vn.NONE}function G8(n,e,t,i,r){let o=KO(e,r),s=JO(e,i),l=xi.NONE,c=Vn.NONE;if(o){let d=n.scrollTop;o===xi.UP?d>0&&(l=xi.UP):n.scrollHeight-d>n.clientHeight&&(l=xi.DOWN)}if(s){let d=n.scrollLeft;t==="rtl"?s===Vn.RIGHT?d<0&&(c=Vn.RIGHT):n.scrollWidth+d>n.clientWidth&&(c=Vn.LEFT):s===Vn.LEFT?d>0&&(c=Vn.LEFT):n.scrollWidth-d>n.clientWidth&&(c=Vn.RIGHT)}return[l,c]}var Nd={capture:!0},hE={passive:!1,capture:!0},q8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=he({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,r){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),EE=(()=>{class n{_ngZone=R(Je);_document=R(Qe);_styleLoader=R(MO);_renderer=R(ni).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new fe;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=En([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new fe;pointerUp=new fe;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,hE)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,i){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(q8),this._activeDragInstances.update(r=>[...r,t]),this._activeDragInstances().length===1)){let r=i.type.startsWith("touch"),o=l=>this.pointerUp.next(l),s=[["scroll",l=>this._scroll.next(l),Nd],["selectstart",this._preventDefaultWhileDragging,hE]];r?s.push(["touchend",o,Nd],["touchcancel",o,Nd]):s.push(["mouseup",o,Nd]),r||s.push(["mousemove",l=>this.pointerMove.next(l),hE]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([l,c,d])=>this._renderer.listen(this._document,l,c,d))})}}stopDragging(t){this._activeDragInstances.update(i=>{let r=i.indexOf(t);return r>-1?(i.splice(r,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let i=[this._scroll];return t&&t!==this._document&&i.push(new be(r=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&r.next(s)},Nd);return()=>{o()}}))),Uc(...i)}registerDirectiveNode(t,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,i)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Z8={dragStartThreshold:5,pointerDirectionChangeThreshold:5},SE=(()=>{class n{_document=R(Qe);_ngZone=R(Je);_viewportRuler=R(PO);_dragDropRegistry=R(EE);_renderer=R(ni).createRenderer(null,null);constructor(){}createDrag(t,i=Z8){return new _E(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new yE(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bE=new J("CDK_DRAG_PARENT");var XO=new J("CdkDragHandle"),ek=(()=>{class n{element=R(Xe);_parentDrag=R(bE,{optional:!0,skipSelf:!0});_dragDropRegistry=R(EE);_stateChanges=new fe;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let i=this._dragDropRegistry.getDragDirectiveForNode(t);if(i){this._parentDrag=i,i._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",hn]},features:[ft([{provide:XO,useExisting:n}])]})}return n})(),tk=new J("CDK_DRAG_CONFIG"),nk=new J("CdkDropList"),ik=(()=>{class n{element=R(Xe);dropContainer=R(nk,{optional:!0,skipSelf:!0});_ngZone=R(Je);_viewContainerRef=R(ii);_dir=R(uE,{optional:!0});_changeDetectorRef=R(fn);_selfHandle=R(XO,{optional:!0,self:!0});_parentDrag=R(bE,{optional:!0,skipSelf:!0});_dragDropRegistry=R(EE);_destroyed=new fe;_handles=new Tt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new xe;released=new xe;ended=new xe;entered=new xe;exited=new xe;dropped=new xe;moved=new be(t=>{let i=this._dragRef.moved.pipe(Se(r=>({source:this,pointerPosition:r.pointerPosition,event:r.event,delta:r.delta,distance:r.distance}))).subscribe(t);return()=>{i.unsubscribe()}});_injector=R(Gt);constructor(){let t=this.dropContainer,i=R(tk,{optional:!0}),r=R(SE);this._dragRef=r.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Mn(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){ko(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let i=t.rootElementSelector,r=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let i=this._handles.getValue();i.push(t),this._handles.next(i)}_removeHandle(t){let i=this._handles.getValue(),r=i.indexOf(t);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,i=t;this.rootElementSelector&&(i=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Qi(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let i=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof r=="object"&&r?r:Fm(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe(Ri(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let r=this._dragDropRegistry.getDragDirectiveForNode(i);if(r){t.withParent(r._dragRef);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){let{lockAxis:i,dragStartDelay:r,constrainPosition:o,previewClass:s,boundaryElement:l,draggingDisabled:c,rootElementSelector:d,previewContainer:h}=t;this.disabled=c??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),o&&(this.constrainPosition=o),s&&(this.previewClass=s),l&&(this.boundaryElement=l),d&&(this.rootElementSelector=d),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(Bt(t=>{let i=t.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),nn(t=>Uc(...t.map(i=>i._stateChanges.pipe(Oi(i))))),Mn(this._destroyed)).subscribe(t=>{let i=this._dragRef,r=t.element.nativeElement;t.disabled?i.disableHandle(r):i.enableHandle(r)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&vt("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",hn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",_w]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[ft([{provide:bE,useExisting:n}]),sn]})}return n})(),ZO=new J("CdkDropListGroup");var rk=(()=>{class n{element=R(Xe);_changeDetectorRef=R(fn);_scrollDispatcher=R(TO);_dir=R(uE,{optional:!0});_group=R(ZO,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new fe;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=R(RO).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new xe;entered=new xe;exited=new xe;sorted=new xe;_unsortedItems=new Set;constructor(){let t=R(SE),i=R(tk,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(r,o)=>this.enterPredicate(r.data,o.data),this._dropListRef.sortPredicate=(r,o,s)=>this.sortPredicate(r,o.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),t._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(t._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,i)=>t._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Oi(this._dir.value),Mn(this._destroyed)).subscribe(i=>t.withDirection(i)),t.beforeStarted.subscribe(()=>{let i=OO(this.connectedTo).map(r=>{if(typeof r=="string"){let o=n._dropLists.find(s=>s.id===r);return o}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let r=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(r)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Fm(this.autoScrollStep,2),t.hasAnchor=this.hasAnchor,t.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),Uc(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:i,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:l}=t;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=l||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ve({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(Yt("id",r.id),vt("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",hn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",hn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",hn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",hn]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[ft([{provide:ZO,useValue:void 0},{provide:nk,useExisting:n}])]})}return n})();var ok=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Zt({type:n});static \u0275inj=zt({providers:[SE],imports:[AO]})}return n})();function Q8(n,e){n&1&&(v(0,"span"),w(1,"Salva listino"),m())}function K8(n,e){n&1&&(v(0,"span"),w(1,"Salvataggio..."),m())}function J8(n,e){if(n&1){let t=se();v(0,"div",17)(1,"h3"),w(2,"Scegli layout di stampa"),m(),v(3,"div",18)(4,"label")(5,"input",19),Q("ngModelChange",function(r){k(t);let o=A();return K(o.includeGroupsInPrint,r)||(o.includeGroupsInPrint=r),N(r)}),m(),w(6," Includi gruppi nella stampa "),m()(),v(7,"div",20)(8,"div",21),B("click",function(){k(t);let r=A();return N(r.generatePDF(1))}),oe(9,"div",22),v(10,"span"),w(11,"Classico"),m()(),v(12,"div",21),B("click",function(){k(t);let r=A();return N(r.generatePDF(2))}),oe(13,"div",23),v(14,"span"),w(15,"Moderno"),m()(),v(16,"div",21),B("click",function(){k(t);let r=A();return N(r.generatePDF(3))}),oe(17,"div",24),v(18,"span"),w(19,"Minimal"),m()()(),v(20,"button",25),B("click",function(){k(t);let r=A();return N(r.showPrintOptions=!1)}),w(21,"Annulla"),m()()}if(n&2){let t=A();C(5),Y("ngModel",t.includeGroupsInPrint),Yt("aria-checked",t.includeGroupsInPrint)}}function X8(n,e){n&1&&(v(0,"span"),w(1,"\u25BC"),m())}function e$(n,e){n&1&&(v(0,"span"),w(1,"\u25B6"),m())}function t$(n,e){if(n&1){let t=se();ut(0),v(1,"td",28)(2,"div",29)(3,"button",30),B("click",function(){let r;k(t);let o=A().$implicit,s=A();return N(s.toggleGroup((r=o.get("id"))==null?null:r.value))}),z(4,X8,2,0,"span",8)(5,e$,2,0,"span",8),m(),oe(6,"input",31),m()(),v(7,"td")(8,"small",32),w(9,"Gruppo"),m()(),v(10,"td")(11,"div",33)(12,"button",34),B("click",function(){let r;k(t);let o=A(),s=o.$implicit,l=o.index,c=A();return N(c.addServiceAt(l,{parent_id:((r=s.get("id"))==null?null:r.value)??null}))}),w(13,"\uFF0B"),m()()(),v(14,"td")(15,"div",33)(16,"span",35),w(17,"\u2630"),m(),v(18,"button",36),B("click",function(){k(t);let r=A().index,o=A();return N(o.removeService(r))}),w(19,"\u{1F5D1}"),m()()(),dt()}if(n&2){let t,i,r,o=A().$implicit,s=A();C(3),Yt("aria-expanded",!s.isGroupCollapsed((t=o.get("id"))==null?null:t.value)),C(),M("ngIf",!s.isGroupCollapsed((i=o.get("id"))==null?null:i.value)),C(),M("ngIf",s.isGroupCollapsed((r=o.get("id"))==null?null:r.value))}}function n$(n,e){if(n&1){let t=se();v(0,"td"),oe(1,"input",37),v(2,"div",38),w(3,"Obbligatorio "),m()(),v(4,"td"),oe(5,"input",39),m(),v(6,"td")(7,"div",40),oe(8,"input",41),m(),v(9,"div",38),w(10,"Formato errato"),m()(),v(11,"td"),oe(12,"input",42),m(),v(13,"td",43)(14,"span",35),w(15,"\u2630"),m(),v(16,"button",44),B("click",function(){k(t);let r=A().index,o=A();return N(o.removeService(r))}),m()()}if(n&2){let t,i,r=A().$implicit;C(2),vt("visible",((t=r.get("nome"))==null?null:t.touched)&&((t=r.get("nome"))==null?null:t.invalid)),C(7),vt("visible",((i=r.get("prezzo"))==null?null:i.touched)&&((i=r.get("prezzo"))==null?null:i.invalid))}}function i$(n,e){if(n&1&&(v(0,"tr",26),z(1,t$,20,3,"ng-container",27)(2,n$,17,4,"ng-template",null,0,dn),m()),n&2){let t,i,r,o,s=e.$implicit,l=e.index,c=Ne(3),d=A();Rs("display",!((t=s.get("is_group"))!=null&&t.value)&&d.isGroupCollapsed((t=s.get("parent_id"))==null?null:t.value)?"none":null),vt("group-row",(i=s.get("is_group"))==null?null:i.value)("service-row",!((r=s.get("is_group"))!=null&&r.value)),M("formGroupName",l),C(),M("ngIf",(o=s.get("is_group"))==null?null:o.value)("ngIfElse",c)}}var Um=class n{constructor(e,t){this.fb=e;this.serviceService=t}serviziForm;savingAll=!1;loading=!1;showPrintOptions=!1;collapsedGroups={};includeGroupsInPrint=!0;ngOnInit(){this.serviziForm=this.fb.group({servizi:this.fb.array([])}),this.loadMyServices()}get servizi(){return this.serviziForm.get("servizi")}createServiceGroup(e){return this.fb.group({id:[e?.id??null],nome:[e?.name??e?.nome??"",Dr.required],descrizione:[e?.description??e?.descrizione??""],prezzo:[e?.price??e?.prezzo??"",[Dr.pattern(/^\d+(\.\d{1,2})?$/)]],timing:[e?.timing??e?.timing??"",[Dr.pattern(/^\d+$/)]],active:[typeof e?.active=="boolean"?e.active:!0],is_group:[e?.is_group??!1],parent_id:[e?.parent_id??null],order_index:[e?.order_index??0]})}addService(e){this.servizi.push(this.createServiceGroup(e))}removeService(e){return D(this,null,function*(){let t=this.servizi.at(e);if(!t)return;let i=!!t.get("is_group")?.value,r=t.get("id")?.value??null,o=(t.get("nome")?.value??"").toString().trim(),s=(t.get("descrizione")?.value??"").toString().trim(),l=t.get("prezzo")?.value,c=t.get("timing")?.value,d=l==null||l==="",h=c==null||c==="",p=!o&&!s&&d&&h,y=[];if(i){let I=t.get("id")?.value??null;y=this.servizi.controls.map((x,T)=>({c:x,idx:T})).filter(({c:x})=>!x.get("is_group")?.value&&x.get("parent_id")?.value===I).map(({c:x,idx:T})=>({ctrl:x,idx:T}))}if(p&&!r&&(!i||i&&y.length===0)){this.servizi.removeAt(e),this.updateOrderIndexes(),this.servizi.length===0&&this.addService();return}let _=o||(i?"gruppo":"servizio");if(window.confirm(`Sei sicuro di voler eliminare questo ${i?"gruppo":"servizio"}: "${_}"?`)){if(i&&y.length>0)if(window.confirm(`Il gruppo contiene ${y.length} servizi.
OK: elimina anche i servizi.
Annulla: mantieni i servizi e rimuovi solo il raggruppamento (verranno slegati).`)){let x=[...y].sort((T,H)=>H.idx-T.idx);for(let{ctrl:T,idx:H}of x){let q=T.get("id")?.value;try{q&&(yield this.serviceService.deleteService(q))}catch(U){console.error("Errore eliminazione servizio figlio",U),window.alert("Errore durante l\u2019eliminazione di un servizio del gruppo. Controlla la console.")}this.servizi.removeAt(H)}}else{let x=[];for(let{ctrl:T}of y)T.get("parent_id")?.setValue(null);for(let{ctrl:T}of y){let H=T.get("id")?.value;if(H)try{yield this.serviceService.updateService(H,{parent_id:null})}catch(q){console.error("Errore slegamento servizio (update parent_id)",q),x.push({id:H,err:q})}}x.length>0&&window.alert("Alcuni servizi non sono stati correttamente slegati dal gruppo (vedi console).")}if(r)try{yield this.serviceService.deleteService(r)}catch(I){console.error("Errore eliminazione servizio/gruppo",I),window.alert("Errore durante l\u2019eliminazione del gruppo/servizio. Controlla la console.");return}this.servizi.removeAt(e),this.updateOrderIndexes(),this.servizi.length===0&&this.addService()}})}loadMyServices(){return D(this,null,function*(){this.loading=!0;try{let e=yield this.serviceService.getMyServices();for(;this.servizi.length;)this.servizi.removeAt(0);e.forEach(t=>this.addService(t)),e.length===0&&this.addService()}catch(e){console.error("Errore caricamento servizi",e),this.servizi.length===0&&this.addService()}finally{this.loading=!1}})}saveAll(){return D(this,null,function*(){if(this.updateOrderIndexes(),this.serviziForm.invalid){this.servizi.markAllAsTouched(),window.alert("Controlla i campi evidenziati: il form non \xE8 valido.");return}this.savingAll=!0;let e=!1;try{let t=this.servizi.controls,i=[],r=[],o=[];t.forEach((d,h)=>{let p=!!d.get("is_group")?.value,y=d.get("id")?.value,_=d.get("prezzo")?.value,S=d.get("timing")?.value,I=_===""||_==null?null:Number(_),x=S===""||S==null?null:Number(S),T={name:d.get("nome")?.value??"",description:d.get("descrizione")?.value??null,price:p||isNaN(Number(I))?0:I,timing:p||isNaN(Number(x))?null:x,active:!!d.get("active")?.value,is_group:!!p,parent_id:d.get("parent_id")?.value??null,order_index:typeof d.get("order_index")?.value=="number"?d.get("order_index")?.value:h};y?i.push(this.serviceService.updateService(y,T)):p&&(r.push(T),o.push(h))}),r.length>0&&(yield this.serviceService.createServices(r)).forEach((h,p)=>{let y=o[p],_=this.servizi.at(y);_&&_.patchValue({id:h.id??null,nome:h.name??"",descrizione:h.description??"",is_group:h.is_group??!0,parent_id:h.parent_id??null})}),this.normalizeParentIdsByAdjacency();let s=[],l=[];this.servizi.controls.forEach((d,h)=>{let p=!!d.get("is_group")?.value,y=d.get("id")?.value,_=d.get("prezzo")?.value,S=d.get("timing")?.value,I=_===""||_==null?null:Number(_),x=S===""||S==null?null:Number(S),T={name:d.get("nome")?.value??"",description:d.get("descrizione")?.value??null,price:p||isNaN(Number(I))?null:I,timing:p||isNaN(Number(x))?null:x,active:!!d.get("active")?.value,is_group:!!p,parent_id:d.get("parent_id")?.value??null,order_index:typeof d.get("order_index")?.value=="number"?d.get("order_index")?.value:h};!y&&!p?(s.push(T),l.push(h)):y&&!p&&i.push(this.serviceService.updateService(y,T))});let c=yield Promise.allSettled(i);e=c.some(d=>d.status==="rejected"),c.forEach(d=>{d.status==="rejected"&&console.error("Update failed",d.reason)}),s.length>0&&(yield this.serviceService.createServices(s)).forEach((h,p)=>{let y=l[p],_=this.servizi.at(y);_&&_.patchValue({id:h.id??null,nome:h.name??"",descrizione:h.description??"",prezzo:h.price??null,timing:h.timing??null,active:typeof h.active=="boolean"?h.active:!0,is_group:h.is_group??!1,parent_id:h.parent_id??null})}),console.log("Salvataggio completato"),e?window.alert("Salvataggio completato con alcuni errori sugli aggiornamenti. Controlla la console."):window.alert("Listino prezzi salvato con successo!")}catch(t){console.error("Errore durante salvataggio totale",t),window.alert(`Errore durante il salvataggio: ${t?.message||t}`)}finally{this.savingAll=!1}})}normalizeParentIdsByAdjacency(){let e=null;this.servizi.controls.forEach(t=>{t.get("is_group")?.value?e=t.get("id")?.value??null:!t.get("parent_id")?.value&&e&&t.get("parent_id")?.setValue(e)})}printList(){return D(this,null,function*(){this.showPrintOptions=!0})}urlToDataUrl(e){return D(this,null,function*(){if(!e)return null;try{let t=yield fetch(e,{mode:"cors"});if(!t.ok)return null;let i=yield t.blob();return yield new Promise((r,o)=>{let s=new FileReader;s.onload=()=>r(s.result),s.onerror=l=>o(l),s.readAsDataURL(i)})}catch(t){return console.warn("urlToDataUrl failed",t),null}})}exportCsv(){let e=["SERVIZIO","DESCRIZIONE","PREZZO (\u20AC)"],t=(this.serviziForm.value.servizi||[]).map(l=>{let c=l.nome??l.name??"",d=l.descrizione??l.description??"",h="";if(l.prezzo!==void 0&&l.prezzo!==""){let p=Number(l.prezzo);h=isNaN(p)?"":p.toFixed(2)}return[c,d,h]}),i=[e.join(","),...t.map(l=>l.map(c=>c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c).join(","))].join(`
`),r=new Blob(["\uFEFF"+i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(r);o.setAttribute("href",s),o.setAttribute("download",`listino-servizi-${new Date().toISOString().slice(0,10)}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}getGroups(){return this.servizi.controls.filter(e=>!!e.get("is_group")?.value)}getGroupServices(e){return this.servizi.controls.filter(t=>!t.get("is_group")?.value&&t.get("parent_id")?.value===e)}getUngroupedServices(){return this.servizi.controls.filter(e=>!e.get("is_group")?.value&&!e.get("parent_id")?.value)}getServiceIndex(e){return this.servizi.controls.findIndex(t=>t===e)}addGroup(){let e=this.createServiceGroup({is_group:!0,nome:"Nuovo gruppo",prezzo:null,timing:null});this.servizi.push(e)}dropGroup(e,t=null){let i=this.servizi;tc(i.controls,e.previousIndex,e.currentIndex);let r=i.at(e.currentIndex);if(r.get("is_group")?.value){r.get("parent_id")?.setValue(null);let o=r.get("id")?.value;i.controls.forEach(s=>{!s.get("is_group")?.value&&s.get("parent_id")?.value===o&&s.get("parent_id")?.setValue(o)})}else r.get("parent_id")?.setValue(t);this.updateOrderIndexes()}getGroupId(e){return this.servizi.at(e).get("group_id")?.value??""}dropService(e){let t=this.servizi;if(e.previousContainer===e.container)tc(e.container.data,e.previousIndex,e.currentIndex);else{let i=e.previousContainer.data[e.previousIndex],r=null;if(e.container.data.length>0){let o=e.container.data[0];r=o.get("is_group")?.value?o.get("id")?.value??null:o.get("parent_id")?.value??null}i.get("parent_id")?.setValue(r),e.previousContainer.data.splice(e.previousIndex,1),e.container.data.splice(e.currentIndex,0,i)}this.updateOrderIndexes()}updateOrderIndexes(){this.servizi.controls.forEach((e,t)=>{e.get("order_index")?.setValue(t)})}onDrop(e){return D(this,null,function*(){let t=this.servizi;tc(t.controls,e.previousIndex,e.currentIndex);let i=t.at(e.currentIndex);if(!i)return;if(i.get("is_group")?.value){i.get("parent_id")?.setValue(null),this.updateOrderIndexes();return}let r=null;for(let s=e.currentIndex-1;s>=0;s--){let l=t.at(s);if(l?.get("is_group")?.value){r=l.get("id")?.value??null;break}}i.get("parent_id")?.setValue(r),this.updateOrderIndexes();let o=i.get("id")?.value;try{o&&(yield this.serviceService.moveServiceToGroup(o,r))}catch(s){console.error("Errore aggiornamento parent_id su backend",s),window.alert("Errore sincronizzazione cambio gruppo. Ripristina o salva il listino per correggere.")}})}groupNameById(e){return e?this.getGroups().find(r=>(r.get("id")?.value??null)===e)?.get("nome")?.value??"":""}onGroupSelect(e,t){let i=t.target,r=i&&i.value||null,o=this.servizi.at(e);o&&(o.get("parent_id")?.setValue(r),this.moveServiceIntoGroup(e,r),this.updateOrderIndexes())}moveServiceIntoGroup(e,t){if(e<0||e>=this.servizi.length)return;let i=this.servizi.at(e);if(i&&(i.get("parent_id")?.setValue(t),t)){let r=this.servizi.controls.findIndex(c=>(c.get("id")?.value??null)===t);if(r===-1)return;let o=e,s=r+1;o<s&&s--;let l=this.servizi.at(o);if(!l)return;this.servizi.removeAt(o),this.servizi.insert(s,l)}}toggleGroup(e){if(!e){alert("Salva il gruppo per poterlo comprimere/espandere.");return}this.collapsedGroups[e]=!this.collapsedGroups[e]}isGroupCollapsed(e){return!!(e&&this.collapsedGroups[e])}onServiceMoved(e,t){let i=this.servizi.at(e);i&&i.get("parent_id")?.setValue(t)}addServiceAt(e,t){let i=this.servizi;if(e<0||e>i.length){this.addService(t);return}let r=i.at(e);if(!r){this.addService(t);return}let o=r.get("id")?.value??t?.parent_id??null,s=e+1;for(;s<i.length;){let y=i.at(s);if(!y||y.get("is_group")?.value||(y.get("parent_id")?.value??null)!==o)break;s++}let l=t?.prezzo,c=t?.timing,d=l==null||l===""?null:Number(l),h=c==null||c===""?null:Number(c),p=this.createServiceGroup({is_group:!1,parent_id:o,nome:t?.nome??"",descrizione:t?.descrizione??"",prezzo:d,timing:h,active:typeof t?.active=="boolean"?t.active:!0});i.insert(s,p),o&&(this.collapsedGroups[o]=!1),this.updateOrderIndexes()}normalizeColor(e,t="#cc9c00"){if(!e)return t;let i=String(e).trim();if(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(i)){if(i.length===4){let o=i[1],s=i[2],l=i[3];return`#${o}${o}${s}${s}${l}${l}`}return i}if(/^#([0-9a-f]{8})$/i.test(i))return`#${i.slice(1,7)}`;let r=i.match(/rgba?\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})/i);if(r){let o=Math.min(255,Number(r[1])),s=Math.min(255,Number(r[2])),l=Math.min(255,Number(r[3])),c=d=>d.toString(16).padStart(2,"0");return`#${c(o)}${c(s)}${c(l)}`}return/^[0-9a-f]{6}$/i.test(i)?`#${i}`:t}generatePDF(e){return D(this,null,function*(){this.showPrintOptions=!1,console.log("[generatePDF] layout requested =",e);let t=null,i=null;try{t=yield this.serviceService.getMyProfile(),t?.id&&(i=yield this.serviceService.getBrandSettings(t.id))}catch(c){console.warn("Errore recupero profilo/brand",c)}let r=t?.ragione_sociale??"Il tuo salone",o=t?.logo_url??null,s=i?{primary:i.primary_color,secondary:i.secondary_color,text:i.text_color,background:i.background_color??"#000000",background2:i.background2_color??"#0000009f"}:{primary:"#cc9c00",secondary:"#8f6d00",text:"#eeeeee",background:"#000000",background2:"#0000009f"},l=this.getTableDataForPdf(e);console.log("[generatePDF] tableData sample:",l&&l.slice?l.slice(0,4):l);try{let c=yield import("./chunk-DJ22ZWFX.js"),d=yield import("./chunk-GCQFHPBS.js"),h=c.default??c;h.vfs=d.pdfMake?.vfs??d.pdfMake?.vfs??d.pdfMake?.vfs??d.vfs;let p=null;if(o)try{p=yield this.urlToDataUrl(o)}catch(I){console.warn("Errore caricamento logo",I)}let y={telefono:t?.telefono??"",email:t?.email??"",sito_web:t?.sito_web??""},_;e===1?_=this.layoutClassic(r,p,s,l,y,this.includeGroupsInPrint):e===2?_=this.layoutElegant(r,p,s,l,y,this.includeGroupsInPrint):e===3?_=this.layoutMinimal(r,p,s,l,y,this.includeGroupsInPrint):_=this.layoutClassic(r,p,s,l,y,this.includeGroupsInPrint);let S=`listino-${(r||"salone").replace(/\s+/g,"-").toLowerCase()}-${new Date().toISOString().slice(0,10)}.pdf`;h.createPdf(_).download(S)}catch(c){console.error("Errore generazione PDF",c),alert("Si \xE8 verificato un errore durante la generazione del PDF. Controlla la console per i dettagli.")}})}getTableDataForPdf(e){let t=(this.serviziForm.value.servizi||[]).filter(i=>i?.active!==!1).map(i=>({name:i?.nome?.trim()||"Servizio",description:i?.descrizione?.trim()||"",price:i?.prezzo!==void 0&&i?.prezzo!==""&&!isNaN(Number(i.prezzo))?Number(i.prezzo).toFixed(2):"",is_group:i?.is_group||!1,id:i?.id||""}));if(this.includeGroupsInPrint||(t=t.filter(i=>!i.is_group)),e===1){let i=this.includeGroupsInPrint?[{text:"",style:"borderIndicatorHeader",width:1},{text:"SERVIZIO",style:"tableHeader"},{text:"DESCRIZIONE",style:"tableHeader"},{text:"PREZZO",style:"tableHeader"}]:[{text:"SERVIZIO",style:"tableHeader"},{text:"DESCRIZIONE",style:"tableHeader"},{text:"PREZZO",style:"tableHeader"}],r=t.map(o=>this.includeGroupsInPrint?[{text:"",style:o.is_group?"groupBorderIndicator":"serviceBorderIndicator"},{text:o.name,style:o.is_group?"groupServiceName":"serviceName"},{text:o.description,style:o.is_group?"groupServiceDesc":"serviceDesc",margin:o.description?[0,4,0,4]:[0,0,0,0]},{text:o.is_group?"":o.price?`${o.price} \u20AC`:"",style:o.is_group?"groupServicePrice":"servicePrice"}]:[{text:o.name,style:"serviceName"},{text:o.description,style:"serviceDesc",margin:o.description?[0,4,0,4]:[0,0,0,0]},{text:o.price?`${o.price} \u20AC`:"",style:"servicePrice"}]);return[i,...r]}if(e===2){let i=this.includeGroupsInPrint?[{text:"",style:"borderIndicatorHeader",width:3},{text:"SERVIZIO",style:"tableHeader",alignment:"left"},{text:"PREZZO",style:"tableHeader",alignment:"right"}]:[{text:"SERVIZIO",style:"tableHeader",alignment:"left"},{text:"PREZZO",style:"tableHeader",alignment:"right"}],r=t.map(o=>this.includeGroupsInPrint?[{text:"",style:o.is_group?"groupBorderIndicator":"serviceBorderIndicator"},{text:o.name,style:o.is_group?"groupServiceName":"serviceName",alignment:"left"},{text:o.is_group?"":o.price?`${o.price} \u20AC`:"",alignment:"right",style:o.is_group?"groupServicePrice":"servicePrice"}]:[{text:o.name,style:"serviceName",alignment:"left"},{text:o.price?`${o.price} \u20AC`:"",alignment:"right",style:"servicePrice"}]);return[i,...r]}if(e===3){let i=this.includeGroupsInPrint?[{text:"",style:"borderIndicatorHeader",width:1},{text:"SERVIZIO",style:"tableHeader",alignment:"left"},{text:"PREZZO",style:"tableHeader",alignment:"right"}]:[{text:"SERVIZIO",style:"tableHeader",alignment:"left"},{text:"PREZZO",style:"tableHeader",alignment:"right"}],r=t.map(o=>this.includeGroupsInPrint?[{text:"",style:o.is_group?"groupBorderIndicator":"serviceBorderIndicator"},{text:o.name,style:o.is_group?"groupServiceName":"serviceName",alignment:"left"},{text:o.is_group?"":o.price?`${o.price} \u20AC`:"",alignment:"right",style:o.is_group?"groupServicePrice":"servicePrice"}]:[{text:o.name,style:"serviceName",alignment:"left"},{text:o.price?`${o.price} \u20AC`:"",alignment:"right",style:"servicePrice"}]);return[i,...r]}return this.getTableDataForPdf(1)}layoutClassic(e,t,i,r,o,s=!0){let d=this.normalizeColor(i.primary,"#cc9c00"),h=this.normalizeColor(i.secondary,"#8f6d00"),p=this.normalizeColor(i.text,"#eeeeee"),y=this.normalizeColor(i.background,"#000000"),_=this.normalizeColor(i.background2,"#0a0a0a"),S=[];o.telefono&&S.push({text:`Tel: ${o.telefono}`,style:"footerItem"}),o.email&&S.push({text:`Email: ${o.email}`,style:"footerItem"}),o.sito_web&&S.push({text:`Web: ${o.sito_web}`,style:"footerItem"});let I=s?[3,"40%","45%","12%"]:["40%","45%","15%"];return{pageSize:"A4",pageMargins:[36,36,36,36],background:[{canvas:[{type:"rect",x:0,y:0,w:595.28,h:841.89,color:y}]}],content:[...t?[{image:t,width:90,alignment:"center",margin:[0,0,0,8]}]:[],{text:e,style:"title",alignment:"center",margin:[0,4,0,2],color:p},{text:"Listino Prezzi",style:"subtitle",alignment:"center",margin:[0,0,0,12],color:h},{table:{headerRows:1,widths:I,body:r},layout:{fillColor:(x,T)=>x===0?d:x%2===0?_:y,hLineWidth:x=>x===1?.9:.4,vLineWidth:()=>0,hLineColor:()=>h,paddingLeft:(x,T)=>8,paddingRight:()=>8,paddingTop:x=>x===0?8:6,paddingBottom:x=>x===0?8:6},margin:[0,6,0,0]},...S.length>0?[{stack:S,style:"footer",margin:[0,20,0,0],alignment:"center"}]:[]],styles:{title:{fontSize:20,bold:!0},subtitle:{fontSize:12,bold:!0},tableHeader:{bold:!0,color:p,fontSize:11,alignment:"left"},borderIndicatorHeader:{},serviceName:{fontSize:11,bold:!0,color:p,alignment:"left"},serviceDesc:{fontSize:9,color:p,alignment:"left"},servicePrice:{fontSize:11,bold:!0,color:p,alignment:"right"},footer:{fontSize:10,color:"#cfcfcf",lineHeight:1.5},footerItem:{fontSize:10,color:"#cfcfcf",margin:[0,3]},groupBorderIndicator:{fillColor:h},serviceBorderIndicator:{fillColor:y},groupServiceName:{fontSize:11,bold:!0,color:p,alignment:"left",margin:[2,0,0,0]},groupServiceDesc:{fontSize:9,color:"#cfcfcf",alignment:"left",margin:[2,0,0,0]},groupServicePrice:{fontSize:11,bold:!0,color:p,alignment:"right",margin:[2,0,0,0]}},defaultStyle:{fontSize:10,color:p,lineHeight:1.2}}}layoutElegant(e,t,i,r,o,s=!0){let d=this.normalizeColor(i.primary,"#cc9c00"),h=this.normalizeColor(i.secondary,"#8f6d00"),p=this.normalizeColor(i.text,"#222222"),y=this.normalizeColor(i.background,"#ffffff"),_=[];o.telefono&&_.push({text:`Tel: ${o.telefono}`,style:"footerItem"}),o.email&&_.push({text:`Email: ${o.email}`,style:"footerItem"}),o.sito_web&&_.push({text:`Web: ${o.sito_web}`,style:"footerItem"});let S=s?[3,"*","auto"]:["*","auto"];return{pageSize:"A4",pageMargins:[50,60,50,50],background:[{canvas:[{type:"rect",x:0,y:0,w:595.28,h:841.89,color:y}]}],content:[{stack:[...t?[{image:t,width:80,alignment:"center",margin:[0,0,0,10]}]:[],{text:e.toUpperCase(),style:"headerTitle",margin:[0,0,0,5]},{text:"LISTINO PREZZI",style:"headerSubtitle",margin:[0,0,0,30]}],alignment:"center",margin:[0,0,0,20]},{table:{headerRows:1,widths:S,body:r},layout:{fillColor:()=>null,hLineWidth:I=>I>0?.5:0,vLineWidth:()=>0,hLineColor:()=>"#e0e0e0",paddingTop:I=>I===0?0:8,paddingBottom:I=>8},margin:[0,20,0,0]},..._.length>0?[{stack:_,style:"footer",margin:[0,20,0,0],alignment:"center"}]:[]],styles:{headerTitle:{fontSize:18,bold:!0,color:p,letterSpacing:1.2},headerSubtitle:{fontSize:12,color:d,fontStyle:"italic"},serviceName:{fontSize:12,color:p,lineHeight:1.4},servicePrice:{fontSize:12,color:p,bold:!0},tableHeader:{bold:!0,fontSize:11,color:d,alignment:"center"},borderIndicatorHeader:{},footer:{fontSize:10,color:"#666666",lineHeight:1.5},footerItem:{fontSize:10,color:"#666666",margin:[0,2]},groupBorderIndicator:{fillColor:h},serviceBorderIndicator:{fillColor:y},groupServiceName:{fontSize:12,bold:!0,color:p,alignment:"left",margin:[2,0,0,0]},groupServicePrice:{fontSize:12,bold:!0,color:p,alignment:"right",margin:[2,0,0,0]}},defaultStyle:{fontSize:11,color:p,lineHeight:1.3}}}layoutMinimal(e,t,i,r,o,s=!0){let d=this.normalizeColor(i.primary,"#cc9c00"),h=this.normalizeColor(i.secondary,"#8f6d00"),p=this.normalizeColor(i.text,"#222222"),y=this.normalizeColor(i.background,"#ffffff"),_=[];o.telefono&&_.push({text:`Tel: ${o.telefono}`,style:"footerItem"}),o.email&&_.push({text:`Email: ${o.email}`,style:"footerItem"}),o.sito_web&&_.push({text:`Web: ${o.sito_web}`,style:"footerItem"});let S=s?[3,"*",80]:["*",80];return{pageSize:"A4",pageMargins:[40,40,40,40],background:[{canvas:[{type:"rect",x:0,y:0,w:595.28,h:841.89,color:y}]}],content:[{stack:[...t?[{image:t,width:60,alignment:"center"}]:[],{text:e,style:"minimalHeaderTitle",margin:[0,t?8:0,0,0]},{text:"LISTINO PREZZI",style:"minimalHeaderSubtitle",margin:[0,4,0,20]}],alignment:"center"},{table:{headerRows:1,widths:S,body:r},layout:{fillColor:()=>null,hLineWidth:()=>0,vLineWidth:()=>0,paddingTop:()=>6,paddingBottom:()=>6},margin:[0,0,0,0]},..._.length>0?[{stack:_,style:"footer",margin:[0,15,0,0],alignment:"center"}]:[]],styles:{minimalHeaderTitle:{fontSize:18,bold:!0,color:p,alignment:"center"},minimalHeaderSubtitle:{fontSize:12,color:d,alignment:"center",margin:[0,4,0,0]},tableHeader:{bold:!0,fontSize:11,color:d,alignment:"center"},borderIndicatorHeader:{},serviceName:{fontSize:12,color:p},servicePrice:{fontSize:12,color:p},footer:{fontSize:10,color:"#888888",lineHeight:1.5},footerItem:{fontSize:10,color:"#888888",margin:[0,3]},groupBorderIndicator:{fillColor:h},serviceBorderIndicator:{fillColor:y},groupServiceName:{fontSize:12,bold:!0,color:p,alignment:"left",margin:[2,0,0,0]},groupServicePrice:{fontSize:12,bold:!0,color:p,alignment:"right",margin:[2,0,0,0]}},defaultStyle:{fontSize:10,color:p,lineHeight:1.2}}}static \u0275fac=function(t){return new(t||n)($(om),$(xt))};static \u0275cmp=he({type:n,selectors:[["app-lista-servizi"]],decls:37,vars:7,consts:[["serviceRow",""],[1,"container","lista-servizi-container"],[1,"section-title"],[1,"toolbar"],[1,"left"],["type","button",1,"btn",3,"click"],[1,"icon"],["type","button",1,"btn-primary",3,"click","disabled"],[4,"ngIf"],[1,"right"],["type","button","aria-label","Stampa listino",1,"btn",3,"click"],["class","print-options","role","dialog","aria-modal","true",4,"ngIf"],["id","printArea","aria-live","polite",1,"table-responsive"],[3,"ngSubmit","formGroup"],["aria-label","Tabella servizi",1,"data-table"],["formArrayName","servizi","cdkDropList","","cdkDropListOrientation","vertical",3,"cdkDropListDropped","cdkDropListData"],[3,"formGroupName","group-row","service-row","display",4,"ngFor","ngForOf"],["role","dialog","aria-modal","true",1,"print-options"],[1,"option-group"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"layout-options"],["role","button","tabindex","0",1,"layout-option",3,"click"],["aria-hidden","true",1,"layout-preview","classic"],["aria-hidden","true",1,"layout-preview","modern"],["aria-hidden","true",1,"layout-preview","minimal"],[1,"btn",3,"click"],[3,"formGroupName"],[4,"ngIf","ngIfElse"],["colspan","2",1,"group-cell"],[1,"group-inline"],["type","button","aria-label","Apri/chiudi gruppo","tabindex","0",1,"arrow-btn",3,"click"],["formControlName","nome","placeholder","Nome gruppo","aria-label","Nome gruppo",1,"input-field"],[1,"text-muted"],[1,"group-actions"],["type","button","title","Aggiungi servizio al gruppo",1,"btn",3,"click"],["cdkDrag","","cdkDragHandle","","aria-hidden","true",1,"drag-handle"],["type","button","title","Elimina gruppo","aria-label","Elimina gruppo",1,"btn","btn-icon",3,"click"],["formControlName","nome","placeholder","E.g. Taglio classico","aria-label","Nome servizio",1,"input-field"],[1,"error"],["formControlName","descrizione","placeholder","Descrivi il servizio","aria-label","Descrizione servizio",1,"input-field"],[1,"price-wrapper"],["formControlName","prezzo","placeholder","0.00","aria-label","Prezzo",1,"input-field"],["formControlName","timing","placeholder","Durata media","type","number","min","1","aria-label","Durata in minuti",1,"input-field","qty-input"],[1,"actions"],["type","button","title","Elimina riga","aria-label","Elimina riga",1,"btn-remove",3,"click"]],template:function(t,i){t&1&&(v(0,"div",1)(1,"h2",2),w(2,"Il tuo listino servizi"),m(),v(3,"div",3)(4,"div",4)(5,"button",5),B("click",function(){return i.addService()}),v(6,"span",6),w(7,"\uFF0B"),m(),w(8," Aggiungi servizio "),m(),v(9,"button",5),B("click",function(){return i.addGroup()}),w(10," Aggiungi gruppo "),m(),v(11,"button",7),B("click",function(){return i.saveAll()}),z(12,Q8,2,0,"span",8)(13,K8,2,0,"span",8),m()(),v(14,"div",9)(15,"button",5),B("click",function(){return i.exportCsv()}),w(16,"Esporta CSV"),m(),v(17,"button",10),B("click",function(){return i.printList()}),w(18,"Stampa / PDF"),m()()(),z(19,J8,22,2,"div",11),v(20,"div",12)(21,"form",13),B("ngSubmit",function(){return i.saveAll()}),v(22,"table",14)(23,"thead")(24,"tr")(25,"th"),w(26,"Nome servizio / Gruppo"),m(),v(27,"th"),w(28,"Descrizione"),m(),v(29,"th"),w(30,"Prezzo (\u20AC)"),m(),v(31,"th"),w(32,"Durata (min)"),m(),v(33,"th"),w(34,"Azioni"),m()()(),v(35,"tbody",15),B("cdkDropListDropped",function(o){return i.onDrop(o)}),z(36,i$,4,9,"tr",16),m()()()()()),t&2&&(C(11),M("disabled",i.savingAll),C(),M("ngIf",!i.savingAll),C(),M("ngIf",i.savingAll),C(6),M("ngIf",i.showPrintOptions),C(2),M("formGroup",i.serviziForm),C(14),M("cdkDropListData",i.servizi.controls),C(),M("ngForOf",i.servizi.controls))},dependencies:[Ue,at,et,sm,wi,yt,qs,qi,Dt,bi,Ys,Hl,od,im,rm,Ht,kt,ok,rk,ik,ek],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;justify-content:space-between;margin-bottom:1.5rem}.toolbar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;min-width:0}.data-table[_ngcontent-%COMP%]{min-width:640px;table-layout:fixed}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:25%;min-width:120px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:45%;min-width:180px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:12%;min-width:90px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%;min-width:80px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:8%;min-width:70px;text-align:center}.error[_ngcontent-%COMP%]{position:absolute;left:0;bottom:-1.25em;font-size:clamp(.6rem,2vw,.75rem);color:var(--danger);visibility:hidden;opacity:0;transition:opacity .2s ease,visibility .2s}.error.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}.icon-svg[_ngcontent-%COMP%]{width:clamp(14px,4vw,16px);height:clamp(14px,4vw,16px);display:block}.print-options[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--background);padding:1.5rem;border-radius:12px;z-index:1000;box-shadow:0 10px 30px #00000080;width:92%;max-width:600px;border:1px solid rgba(255,255,255,.06)}.layout-options[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1.5rem 0;flex-wrap:wrap;gap:1rem}.layout-option[_ngcontent-%COMP%]{cursor:pointer;text-align:center;transition:transform .2s ease;-webkit-user-select:none;user-select:none}.layout-option[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.layout-preview[_ngcontent-%COMP%]{width:110px;height:140px;border:2px solid var(--primary);border-radius:8px;margin-bottom:.4rem}.classic[_ngcontent-%COMP%]{background:linear-gradient(to bottom,var(--primary) 0% 10%,var(--background2) 10% 20%,var(--background) 20% 100%)}.modern[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--primary) 0% 15%,var(--background) 15% 100%),linear-gradient(to bottom,var(--background2) 20% 25%,var(--background) 25% 100%)}.minimal[_ngcontent-%COMP%]{background:var(--background);border:2px solid var(--secondary)}@media (max-width: 480px){.toolbar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%;justify-content:center}.btn[_ngcontent-%COMP%]{flex:1 1 auto;justify-content:center}.data-table[_ngcontent-%COMP%]{min-width:520px}}.btn-compact[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.85rem;border-radius:6px;min-height:30px;height:30px;display:inline-flex;align-items:center;gap:.35rem}.group-row[_ngcontent-%COMP%]{background:#d4af370a;border-left:4px solid var(--secondary)}.group-actions[_ngcontent-%COMP%]{display:flex;gap:.4rem;align-items:center;justify-content:flex-start}.drag-handle[_ngcontent-%COMP%]{cursor:grab;display:inline-block;padding:.15rem .35rem;font-size:1rem;opacity:.85}.service-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.group-cell[_ngcontent-%COMP%]{padding:.35rem}.group-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.arrow-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:14px;line-height:1;color:var(--secondary);padding:4px;display:inline-flex;align-items:center;justify-content:center}.group-inline[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0}.option-group[_ngcontent-%COMP%]{margin-bottom:15px}.option-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.option-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:8px}"]})};var qm,de,uk,xE,nc,ua,sk,dk,fk,$m={},hk=[],r$=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Wo(n,e){for(var t in e)n[t]=e[t];return n}function pk(n){var e=n.parentNode;e&&e.removeChild(n)}function V(n,e,t){var i,r,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?qm.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)s[o]===void 0&&(s[o]=n.defaultProps[o]);return Hm(n,s,i,r,null)}function Hm(n,e,t,i,r){var o={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++uk};return r==null&&de.vnode!=null&&de.vnode(o),o}function ci(){return{current:null}}function nt(n){return n.children}function o$(n,e,t,i,r){var o;for(o in t)o==="children"||o==="key"||o in e||Wm(n,o,null,t[o],i);for(o in e)r&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||t[o]===e[o]||Wm(n,o,e[o],t[o],i)}function ak(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||r$.test(e)?t:t+"px"}function Wm(n,e,t,i,r){var o;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||ak(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||ak(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?i||n.addEventListener(e,o?ck:lk,o):n.removeEventListener(e,o?ck:lk,o);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function lk(n){nc=!0;try{return this.l[n.type+!1](de.event?de.event(n):n)}finally{nc=!1}}function ck(n){nc=!0;try{return this.l[n.type+!0](de.event?de.event(n):n)}finally{nc=!1}}function vn(n,e){this.props=n,this.context=e}function Vd(n,e){if(e==null)return n.__?Vd(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Vd(n):null}function gk(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return gk(n)}}function s$(n){nc?setTimeout(n):dk(n)}function DE(n){(!n.__d&&(n.__d=!0)&&ua.push(n)&&!Gm.__r++||sk!==de.debounceRendering)&&((sk=de.debounceRendering)||s$)(Gm)}function Gm(){var n,e,t,i,r,o,s,l;for(ua.sort(function(c,d){return c.__v.__b-d.__v.__b});n=ua.shift();)n.__d&&(e=ua.length,i=void 0,r=void 0,s=(o=(t=n).__v).__e,(l=t.__P)&&(i=[],(r=Wo({},o)).__v=o.__v+1,IE(l,o,r,t.__n,l.ownerSVGElement!==void 0,o.__h!=null?[s]:null,i,s??Vd(o),o.__h),bk(i,o),o.__e!=s&&gk(o)),ua.length>e&&ua.sort(function(c,d){return c.__v.__b-d.__v.__b}));Gm.__r=0}function mk(n,e,t,i,r,o,s,l,c,d){var h,p,y,_,S,I,x,T=i&&i.__k||hk,H=T.length;for(t.__k=[],h=0;h<e.length;h++)if((_=t.__k[h]=(_=e[h])==null||typeof _=="boolean"?null:typeof _=="string"||typeof _=="number"||typeof _=="bigint"?Hm(null,_,null,null,_):Array.isArray(_)?Hm(nt,{children:_},null,null,null):_.__b>0?Hm(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_)!=null){if(_.__=t,_.__b=t.__b+1,(y=T[h])===null||y&&_.key==y.key&&_.type===y.type)T[h]=void 0;else for(p=0;p<H;p++){if((y=T[p])&&_.key==y.key&&_.type===y.type){T[p]=void 0;break}y=null}IE(n,_,y=y||$m,r,o,s,l,c,d),S=_.__e,(p=_.ref)&&y.ref!=p&&(x||(x=[]),y.ref&&x.push(y.ref,null,_),x.push(p,_.__c||S,_)),S!=null?(I==null&&(I=S),typeof _.type=="function"&&_.__k===y.__k?_.__d=c=_k(_,c,n):c=vk(n,_,y,T,S,c),typeof t.type=="function"&&(t.__d=c)):c&&y.__e==c&&c.parentNode!=n&&(c=Vd(y))}for(t.__e=I,h=H;h--;)T[h]!=null&&(typeof t.type=="function"&&T[h].__e!=null&&T[h].__e==t.__d&&(t.__d=yk(i).nextSibling),Ck(T[h],T[h]));if(x)for(h=0;h<x.length;h++)wk(x[h],x[++h],x[++h])}function _k(n,e,t){for(var i,r=n.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=n,e=typeof i.type=="function"?_k(i,e,t):vk(t,i,i,r,i.__e,e));return e}function jd(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){jd(t,e)}):e.push(n)),e}function vk(n,e,t,i,r,o){var s,l,c;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(t==null||r!=o||r.parentNode==null)e:if(o==null||o.parentNode!==n)n.appendChild(r),s=null;else{for(l=o,c=0;(l=l.nextSibling)&&c<i.length;c+=1)if(l==r)break e;n.insertBefore(r,o),s=o}return s!==void 0?s:r.nextSibling}function yk(n){var e,t,i;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(i=yk(t)))return i}return null}function IE(n,e,t,i,r,o,s,l,c){var d,h,p,y,_,S,I,x,T,H,q,U,ae,$e,pe,le=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(c=t.__h,l=e.__e=t.__e,e.__h=null,o=[l]),(d=de.__b)&&d(e);try{e:if(typeof le=="function"){if(x=e.props,T=(d=le.contextType)&&i[d.__c],H=d?T?T.props.value:d.__:i,t.__c?I=(h=e.__c=t.__c).__=h.__E:("prototype"in le&&le.prototype.render?e.__c=h=new le(x,H):(e.__c=h=new vn(x,H),h.constructor=le,h.render=l$),T&&T.sub(h),h.props=x,h.state||(h.state={}),h.context=H,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),h.__s==null&&(h.__s=h.state),le.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Wo({},h.__s)),Wo(h.__s,le.getDerivedStateFromProps(x,h.__s))),y=h.props,_=h.state,h.__v=e,p)le.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(le.getDerivedStateFromProps==null&&x!==y&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(x,H),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(x,h.__s,H)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(h.props=x,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(It){It&&(It.__=e)}),q=0;q<h._sb.length;q++)h.__h.push(h._sb[q]);h._sb=[],h.__h.length&&s.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(x,h.__s,H),h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(y,_,S)})}if(h.context=H,h.props=x,h.__P=n,U=de.__r,ae=0,"prototype"in le&&le.prototype.render){for(h.state=h.__s,h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),$e=0;$e<h._sb.length;$e++)h.__h.push(h._sb[$e]);h._sb=[]}else do h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++ae<25);h.state=h.__s,h.getChildContext!=null&&(i=Wo(Wo({},i),h.getChildContext())),p||h.getSnapshotBeforeUpdate==null||(S=h.getSnapshotBeforeUpdate(y,_)),pe=d!=null&&d.type===nt&&d.key==null?d.props.children:d,mk(n,Array.isArray(pe)?pe:[pe],e,t,i,r,o,s,l,c),h.base=e.__e,e.__h=null,h.__h.length&&s.push(h),I&&(h.__E=h.__=null),h.__e=!1}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=a$(t.__e,e,t,i,r,o,s,c);(d=de.diffed)&&d(e)}catch(It){e.__v=null,(c||o!=null)&&(e.__e=l,e.__h=!!c,o[o.indexOf(l)]=null),de.__e(It,e,t)}}function bk(n,e){de.__c&&de.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(i){i.call(t)})}catch(i){de.__e(i,t.__v)}})}function a$(n,e,t,i,r,o,s,l){var c,d,h,p=t.props,y=e.props,_=e.type,S=0;if(_==="svg"&&(r=!0),o!=null){for(;S<o.length;S++)if((c=o[S])&&"setAttribute"in c==!!_&&(_?c.localName===_:c.nodeType===3)){n=c,o[S]=null;break}}if(n==null){if(_===null)return document.createTextNode(y);n=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,y.is&&y),o=null,l=!1}if(_===null)p===y||l&&n.data===y||(n.data=y);else{if(o=o&&qm.call(n.childNodes),d=(p=t.props||$m).dangerouslySetInnerHTML,h=y.dangerouslySetInnerHTML,!l){if(o!=null)for(p={},S=0;S<n.attributes.length;S++)p[n.attributes[S].name]=n.attributes[S].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===n.innerHTML)||(n.innerHTML=h&&h.__html||""))}if(o$(n,y,p,r,l),h)e.__k=[];else if(S=e.props.children,mk(n,Array.isArray(S)?S:[S],e,t,i,r&&_!=="foreignObject",o,s,o?o[0]:t.__k&&Vd(t,0),l),o!=null)for(S=o.length;S--;)o[S]!=null&&pk(o[S]);l||("value"in y&&(S=y.value)!==void 0&&(S!==n.value||_==="progress"&&!S||_==="option"&&S!==p.value)&&Wm(n,"value",S,p.value,!1),"checked"in y&&(S=y.checked)!==void 0&&S!==n.checked&&Wm(n,"checked",S,p.checked,!1))}return n}function wk(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){de.__e(i,t)}}function Ck(n,e,t){var i,r;if(de.unmount&&de.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||wk(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){de.__e(o,e)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&Ck(i[r],e,t||typeof n.type!="function");t||n.__e==null||pk(n.__e),n.__=n.__e=n.__d=void 0}function l$(n,e,t){return this.constructor(n,t)}function Go(n,e,t){var i,r,o;de.__&&de.__(n,e),r=(i=typeof t=="function")?null:t&&t.__k||e.__k,o=[],IE(e,n=(!i&&t||e).__k=V(nt,null,[n]),r||$m,$m,e.ownerSVGElement!==void 0,!i&&t?[t]:r?null:e.firstChild?qm.call(e.childNodes):null,o,!i&&t?t:r?r.__e:e.firstChild,i),bk(o,n)}function Zm(n,e){var t={__c:e="__cC"+fk++,__:n,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,o;return this.getChildContext||(r=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&r.some(function(l){l.__e=!0,DE(l)})},this.sub=function(s){r.push(s);var l=s.componentWillUnmount;s.componentWillUnmount=function(){r.splice(r.indexOf(s),1),l&&l.call(s)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}qm=hk.slice,de={__e:function(n,e,t,i){for(var r,o,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(n)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(n,i||{}),s=r.__d),s)return r.__E=r}catch(l){n=l}throw n}},uk=0,xE=function(n){return n!=null&&n.constructor===void 0},nc=!1,vn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wo({},this.state),typeof n=="function"&&(n=n(Wo({},t),this.props)),n&&Wo(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),DE(this))},vn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),DE(this))},vn.prototype.render=nt,ua=[],dk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Gm.__r=0,fk=0;var u$,Pr,ME,Ek;var Pk=[],TE=[],Sk=de.__b,Dk=de.__r,xk=de.diffed,Ik=de.__c,Mk=de.unmount;function d$(){for(var n;n=Pk.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Ym),n.__H.__h.forEach(PE),n.__H.__h=[]}catch(e){n.__H.__h=[],de.__e(e,n.__v)}}de.__b=function(n){Pr=null,Sk&&Sk(n)},de.__r=function(n){Dk&&Dk(n),u$=0;var e=(Pr=n.__c).__H;e&&(ME===Pr?(e.__h=[],Pr.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=TE,t.__N=t.i=void 0})):(e.__h.forEach(Ym),e.__h.forEach(PE),e.__h=[])),ME=Pr},de.diffed=function(n){xk&&xk(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Pk.push(e)!==1&&Ek===de.requestAnimationFrame||((Ek=de.requestAnimationFrame)||f$)(d$)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==TE&&(t.__=t.__V),t.i=void 0,t.__V=TE})),ME=Pr=null},de.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Ym),t.__h=t.__h.filter(function(i){return!i.__||PE(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],de.__e(i,t.__v)}}),Ik&&Ik(n,e)},de.unmount=function(n){Mk&&Mk(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Ym(i)}catch(r){e=r}}),t.__H=void 0,e&&de.__e(e,t.__v))};var Tk=typeof requestAnimationFrame=="function";function f$(n){var e,t=function(){clearTimeout(i),Tk&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);Tk&&(e=requestAnimationFrame(t))}function Ym(n){var e=Pr,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Pr=e}function PE(n){var e=Pr;n.__c=n.__(),Pr=e}function h$(n,e){for(var t in e)n[t]=e[t];return n}function Ak(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&n[i]!==e[i])return!0;return!1}function Rk(n){this.props=n}(Rk.prototype=new vn).isPureReactComponent=!0,Rk.prototype.shouldComponentUpdate=function(n,e){return Ak(this.props,n)||Ak(this.state,e)};var Ok=de.__b;de.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Ok&&Ok(n)};var Kme=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var p$=de.__e;de.__e=function(n,e,t,i){if(n.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(n,e)}p$(n,e,t,i)};var kk=de.unmount;function Bk(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=h$({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return Bk(i,e,t)})),n}function zk(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return zk(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function AE(){this.__u=0,this.t=null,this.__b=null}function Uk(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Qm(){this.u=null,this.o=null}de.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),kk&&kk(n)},(AE.prototype=new vn).__c=function(n,e){var t=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(t);var r=Uk(i.__v),o=!1,s=function(){o||(o=!0,t.__R=null,r?r(l):l())};t.__R=s;var l=function(){if(!--i.__u){if(i.state.__a){var d=i.state.__a;i.__v.__k[0]=zk(d,d.__c.__P,d.__c.__O)}var h;for(i.setState({__a:i.__b=null});h=i.t.pop();)h.forceUpdate()}},c=e.__h===!0;i.__u++||c||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(s,s)},AE.prototype.componentWillUnmount=function(){this.t=[]},AE.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Bk(this.__b,t,i.__O=i.__P)}this.__b=null}var r=e.__a&&V(nt,null,n.fallback);return r&&(r.__h=null),[V(nt,null,e.__a?null:n.children),r]};var Nk=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function g$(n){return this.getChildContext=function(){return n.context},n.children}function m$(n){var e=this,t=n.i;e.componentWillUnmount=function(){Go(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,r){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),Go(V(g$,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function Hk(n,e){var t=V(m$,{__v:n,i:e});return t.containerInfo=e,t}(Qm.prototype=new vn).__a=function(n){var e=this,t=Uk(e.__v),i=e.o.get(n);return i[0]++,function(r){var o=function(){e.props.revealOrder?(i.push(r),Nk(e,n,i)):r()};t?t(o):o()}},Qm.prototype.render=function(n){this.u=null,this.o=new Map;var e=jd(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},Qm.prototype.componentDidUpdate=Qm.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){Nk(n,t,e)})};var _$=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,v$=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,y$=typeof document<"u",b$=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};vn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(vn.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Lk=de.event;function w$(){}function C$(){return this.cancelBubble}function E$(){return this.defaultPrevented}de.event=function(n){return Lk&&(n=Lk(n)),n.persist=w$,n.isPropagationStopped=C$,n.isDefaultPrevented=E$,n.nativeEvent=n};var S$,Fk={configurable:!0,get:function(){return this.class}},Vk=de.vnode;de.vnode=function(n){var e=n.type,t=n.props,i=t;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var o in i={},t){var s=t[o];y$&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in t&&s==null||(o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&s===!0?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!b$(t.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():r&&v$.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():s===null&&(s=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),i[o]&&(o="oninputCapture")),i[o]=s)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=jd(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=jd(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),n.props=i,t.class!=t.className&&(Fk.enumerable="className"in t,t.className!=null&&(i.class=t.className),Object.defineProperty(i,"className",Fk))}n.$$typeof=_$,Vk&&Vk(n)};var jk=de.__r;de.__r=function(n){jk&&jk(n),S$=n.__c};var nN=[],zE=new Map;function v_(n){nN.push(n),zE.forEach(e=>{oN(e,n)})}function iN(n){n.isConnected&&n.getRootNode&&rN(n.getRootNode())}function rN(n){let e=zE.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");let t=x$();t&&(e.nonce=t);let i=n===document?document.head:n,r=n===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,r)}zE.set(n,e),D$(e)}}function D$(n){for(let e of nN)oN(n,e)}function oN(n,e){let{sheet:t}=n,i=t.cssRules.length;e.split("}").forEach((r,o)=>{r=r.trim(),r&&t.insertRule(r+"}",i+o)})}var RE;function x$(){return RE===void 0&&(RE=I$()),RE}function I$(){let n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");let e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&rN(document);var M$=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';v_(M$);var fa=class{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:i}=this;e in i&&(t?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}};function af(n){n.parentNode&&n.parentNode.removeChild(n)}function Xt(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(eS(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function eS(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function sN(n,e){let t=n instanceof HTMLElement?[n]:n,i=[];for(let r=0;r<t.length;r+=1){let o=t[r].querySelectorAll(e);for(let s=0;s<o.length;s+=1)i.push(o[s])}return i}var T$=/(top|left|right|bottom|width|height)$/i;function va(n,e){for(let t in e)tS(n,t,e[t])}function tS(n,e,t){t==null?n.style[e]="":typeof t=="number"&&T$.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function y_(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}var $k=0;function ya(){return $k+=1,"fc-dom-"+$k}function lf(n){n.preventDefault()}function P$(n,e){return t=>{let i=Xt(t.target,n);i&&e.call(i,t,i)}}function nS(n,e,t,i){let r=P$(t,i);return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}function aN(n,e,t,i){let r;return nS(n,"mouseover",e,(o,s)=>{if(s!==r){r=s,t(o,s);let l=c=>{r=null,i(c,s),s.removeEventListener("mouseleave",l)};s.addEventListener("mouseleave",l)}})}var Wk=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function iS(n,e){let t=i=>{e(i),Wk.forEach(r=>{n.removeEventListener(r,t)})};Wk.forEach(i=>{n.addEventListener(i,t)})}function lN(n){return Object.assign({onClick:n},cN(n))}function cN(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}var Gk=0;function ho(){return Gk+=1,String(Gk)}function cf(){document.body.classList.add("fc-not-allowed")}function uf(){document.body.classList.remove("fc-not-allowed")}function rS(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",lf)}function oS(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",lf)}function sS(n){n.addEventListener("contextmenu",lf)}function aS(n){n.removeEventListener("contextmenu",lf)}function uN(n){let e=[],t=[],i,r;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),i=0;i<t.length;i+=1)r=t[i],typeof r=="string"?e.push(r.charAt(0)==="-"?{field:r.substring(1),order:-1}:{field:r,order:1}):typeof r=="function"&&e.push({func:r});return e}function dN(n,e,t){let i,r;for(i=0;i<t.length;i+=1)if(r=A$(n,e,t[i]),r)return r;return 0}function A$(n,e,t){return t.func?t.func(n,e):fN(n[t.field],e[t.field])*(t.order||1)}function fN(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function n_(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function uc(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((i,r,o)=>i.replace("$"+o,r||""),n):t}function lS(n,e){return n-e}function i_(n){return n%1===0}function R$(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}var O$=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function He(n,e){return typeof n=="string"?k$(n):typeof n=="object"&&n?qk(n):typeof n=="number"?qk({[e||"milliseconds"]:n}):null}function k$(n){let e=O$.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function qk(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function N$(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function hN(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function L$(n){return ic(n)/365}function F$(n){return ic(n)/30}function ic(n){return rc(n)/864e5}function rc(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function Bd(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Or(n,e,t){if(n===e)return!0;let i=n.length,r;if(i!==e.length)return!1;for(r=0;r<i;r+=1)if(!(t?t(n[r],e[r]):n[r]===e[r]))return!1;return!0}var V$=["sun","mon","tue","wed","thu","fri","sat"];function b_(n,e){let t=Zo(n);return t[2]+=e*7,Kn(t)}function Lt(n,e){let t=Zo(n);return t[2]+=e,Kn(t)}function Rr(n,e){let t=Zo(n);return t[6]+=e,Kn(t)}function cS(n,e){return ba(n,e)/7}function ba(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function j$(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function B$(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function z$(n,e){return(e.valueOf()-n.valueOf())/1e3}function pN(n,e){let t=it(n),i=it(e);return{years:0,months:0,days:Math.round(ba(t,i)),milliseconds:e.valueOf()-i.valueOf()-(n.valueOf()-t.valueOf())}}function gN(n,e){let t=oc(n,e);return t!==null&&t%7===0?t/7:null}function oc(n,e){return Yo(n)===Yo(e)?Math.round(ba(n,e)):null}function it(n){return Kn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function U$(n){return Kn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function H$(n){return Kn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function $$(n){return Kn([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function W$(n,e,t){let i=n.getUTCFullYear(),r=OE(n,i,e,t);if(r<1)return OE(n,i-1,e,t);let o=OE(n,i+1,e,t);return o>=1?Math.min(r,o):r}function OE(n,e,t,i){let r=Kn([e,0,1+G$(e,t,i)]),o=it(n),s=Math.round(ba(r,o));return Math.floor(s/7)+1}function G$(n,e,t){let i=7+e-t;return-((7+Kn([n,0,i]).getUTCDay()-e)%7)+i-1}function Zk(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function Yk(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Zo(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Kn(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function uS(n){return!isNaN(n.valueOf())}function Yo(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function mN(n,e,t=!1){let i=n.toISOString();return i=i.replace(".000",""),t&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",fS(e,!0)))),i}function df(n){return n.toISOString().replace(/T.*$/,"")}function dS(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function fS(n,e=!1){let t=n<0?"-":"+",i=Math.abs(n),r=Math.floor(i/60),o=Math.round(i%60);return e?`${t+n_(r,2)}:${n_(o,2)}`:`GMT${t}${r}${o?`:${n_(o,2)}`:""}`}function je(n,e,t){let i,r;return function(...o){if(!i)r=n.apply(this,o);else if(!Or(i,o)){t&&t(r);let s=n.apply(this,o);(!e||!e(s,r))&&(r=s)}return i=o,r}}function dc(n,e,t){let i,r;return o=>{if(!i)r=n.call(this,o);else if(!Jn(i,o)){t&&t(r);let s=n.call(this,o);(!e||!e(s,r))&&(r=s)}return i=o,r}}var kE={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},s_={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Km=/\s*([ap])\.?m\.?/i,q$=/,/g,Z$=/\s+/g,Y$=/\u200e/g,Q$=/UTC|GMT/,UE=class{constructor(e){let t={},i={},r=9;for(let o in e)o in kE?(i[o]=e[o],kE[o]<9&&(r=Math.min(kE[o],r))):(t[o]=e[o],o in s_&&(r=Math.min(s_[o],r)));this.standardDateProps=t,this.extendedSettings=i,this.smallestUnitNum=r,this.buildFormattingFunc=je(Qk)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,i,r){let{standardDateProps:o,extendedSettings:s}=this,l=nW(e.marker,t.marker,i.calendarSystem);if(!l)return this.format(e,i);let c=l;c>1&&(o.year==="numeric"||o.year==="2-digit")&&(o.month==="numeric"||o.month==="2-digit")&&(o.day==="numeric"||o.day==="2-digit")&&(c=1);let d=this.format(e,i),h=this.format(t,i);if(d===h)return d;let p=iW(o,c),y=Qk(p,s,i),_=y(e),S=y(t),I=rW(d,_,h,S),x=s.separator||r||i.defaultSeparator||"";return I?I.before+_+x+S+I.after:d+x+h}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}};function Qk(n,e,t){let i=Object.keys(n).length;return i===1&&n.timeZoneName==="short"?r=>fS(r.timeZoneOffset):i===0&&e.week?r=>tW(t.computeWeekNumber(r.marker),t.weekText,t.weekTextLong,t.locale,e.week):K$(n,e,t)}function K$(n,e,t){n=Object.assign({},n),e=Object.assign({},e),J$(n,e),n.timeZone="UTC";let i=new Intl.DateTimeFormat(t.locale.codes,n),r;if(e.omitZeroMinute){let o=Object.assign({},n);delete o.minute,r=new Intl.DateTimeFormat(t.locale.codes,o)}return o=>{let{marker:s}=o,l;r&&!s.getUTCMinutes()?l=r:l=i;let c=l.format(s);return X$(c,o,n,e,t)}}function J$(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function X$(n,e,t,i,r){return n=n.replace(Y$,""),t.timeZoneName==="short"&&(n=eW(n,r.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":fS(e.timeZoneOffset))),i.omitCommas&&(n=n.replace(q$,"").trim()),i.omitZeroMinute&&(n=n.replace(":00","")),i.meridiem===!1?n=n.replace(Km,"").trim():i.meridiem==="narrow"?n=n.replace(Km,(o,s)=>s.toLocaleLowerCase()):i.meridiem==="short"?n=n.replace(Km,(o,s)=>`${s.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(n=n.replace(Km,o=>o.toLocaleLowerCase())),n=n.replace(Z$," "),n=n.trim(),n}function eW(n,e){let t=!1;return n=n.replace(Q$,()=>(t=!0,e)),t||(n+=` ${e}`),n}function tW(n,e,t,i,r){let o=[];return r==="long"?o.push(t):(r==="short"||r==="narrow")&&o.push(e),(r==="long"||r==="short")&&o.push(" "),o.push(i.simpleNumberFormat.format(n)),i.options.direction==="rtl"&&o.reverse(),o.join("")}function nW(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Yo(n)!==Yo(e)?1:0}function iW(n,e){let t={};for(let i in n)(!(i in s_)||s_[i]<=e)&&(t[i]=n[i]);return t}function rW(n,e,t,i){let r=0;for(;r<n.length;){let o=n.indexOf(e,r);if(o===-1)break;let s=n.substr(0,o);r=o+e.length;let l=n.substr(r),c=0;for(;c<t.length;){let d=t.indexOf(i,c);if(d===-1)break;let h=t.substr(0,d);c=d+i.length;let p=t.substr(c);if(s===h&&l===p)return{before:s,after:l}}}return null}function Kk(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function a_(n,e,t,i){let r=Kk(n,t.calendarSystem),o=e?Kk(e,t.calendarSystem):null;return{date:r,start:r,end:o,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:i||t.defaultSeparator}}var HE=class{constructor(e){this.cmdStr=e}format(e,t,i){return t.cmdFormatter(this.cmdStr,a_(e,null,t,i))}formatRange(e,t,i,r){return i.cmdFormatter(this.cmdStr,a_(e,t,i,r))}},$E=class{constructor(e){this.func=e}format(e,t,i){return this.func(a_(e,null,t,i))}formatRange(e,t,i,r){return this.func(a_(e,t,i,r))}};function Nt(n){return typeof n=="object"&&n?new UE(n):typeof n=="string"?new HE(n):typeof n=="function"?new $E(n):null}var hS={navLinkDayClick:F,navLinkWeekClick:F,duration:He,bootstrapFontAwesome:F,buttonIcons:F,customButtons:F,defaultAllDayEventDuration:He,defaultTimedEventDuration:He,nextDayThreshold:He,scrollTime:He,scrollTimeReset:Boolean,slotMinTime:He,slotMaxTime:He,dayPopoverFormat:Nt,slotDuration:He,snapDuration:He,headerToolbar:F,footerToolbar:F,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Nt,dayHeaderClassNames:F,dayHeaderContent:F,dayHeaderDidMount:F,dayHeaderWillUnmount:F,dayCellClassNames:F,dayCellContent:F,dayCellDidMount:F,dayCellWillUnmount:F,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:F,weekNumbers:Boolean,weekNumberClassNames:F,weekNumberContent:F,weekNumberDidMount:F,weekNumberWillUnmount:F,editable:Boolean,viewClassNames:F,viewDidMount:F,viewWillUnmount:F,nowIndicator:Boolean,nowIndicatorSnap:F,nowIndicatorClassNames:F,nowIndicatorContent:F,nowIndicatorDidMount:F,nowIndicatorWillUnmount:F,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:F,locale:F,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:F,eventOrder:uN,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:F,contentHeight:F,direction:String,weekNumberFormat:Nt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:F,initialDate:F,now:F,eventDataTransform:F,stickyHeaderDates:F,stickyFooterScrollbar:F,viewHeight:F,defaultAllDay:Boolean,eventSourceFailure:F,eventSourceSuccess:F,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:F,eventConstraint:F,eventAllow:F,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:F,eventContent:F,eventDidMount:F,eventWillUnmount:F,selectConstraint:F,selectOverlap:F,selectAllow:F,droppable:Boolean,unselectCancel:String,slotLabelFormat:F,slotLaneClassNames:F,slotLaneContent:F,slotLaneDidMount:F,slotLaneWillUnmount:F,slotLabelClassNames:F,slotLabelContent:F,slotLabelDidMount:F,slotLabelWillUnmount:F,dayMaxEvents:F,dayMaxEventRows:F,dayMinWidth:Number,slotLabelInterval:He,allDayText:String,allDayClassNames:F,allDayContent:F,allDayDidMount:F,allDayWillUnmount:F,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Nt,rerenderDelay:Number,moreLinkText:F,moreLinkHint:F,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:F,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:He,hiddenDays:F,fixedWeekCount:Boolean,validRange:F,visibleRange:F,titleFormat:F,eventInteractive:Boolean,noEventsText:String,viewHint:F,navLinkHint:F,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:F,moreLinkClassNames:F,moreLinkContent:F,moreLinkDidMount:F,moreLinkWillUnmount:F,monthStartFormat:Nt,handleCustomRendering:F,customRenderingMetaMap:F,customRenderingReplaces:Boolean},Jo={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},pS={datesSet:F,eventsSet:F,eventAdd:F,eventChange:F,eventRemove:F,windowResize:F,eventClick:F,eventMouseEnter:F,eventMouseLeave:F,select:F,unselect:F,loading:F,_unmount:F,_beforeprint:F,_afterprint:F,_noEventDrop:F,_noEventResize:F,_resize:F,_scrollRequest:F},gS={buttonText:F,buttonHints:F,views:F,plugins:F,initialEvents:F,events:F,eventSources:F},Xo={headerToolbar:da,footerToolbar:da,buttonText:da,buttonHints:da,buttonIcons:da,dateIncrement:da,plugins:Jm,events:Jm,eventSources:Jm,resources:Jm};function da(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?Jn(n,e):n===e}function Jm(n,e){return Array.isArray(n)&&Array.isArray(e)?Or(n,e):n===e}var _N={type:String,component:F,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:F,usesMinMaxTime:Boolean,classNames:F,content:F,didMount:F,willUnmount:F};function w_(n){return E_(n,Xo)}function C_(n,e){let t={},i={};for(let r in e)r in n&&(t[r]=e[r](n[r]));for(let r in n)r in e||(i[r]=n[r]);return{refined:t,extra:i}}function F(n){return n}var{hasOwnProperty:l_}=Object.prototype;function E_(n,e){let t={};if(e){for(let i in e)if(e[i]===da){let r=[];for(let o=n.length-1;o>=0;o-=1){let s=n[o][i];if(typeof s=="object"&&s)r.unshift(s);else if(s!==void 0){t[i]=s;break}}r.length&&(t[i]=E_(r))}}for(let i=n.length-1;i>=0;i-=1){let r=n[i];for(let o in r)o in t||(t[o]=r[o])}return t}function lo(n,e){let t={};for(let i in n)e(n[i],i)&&(t[i]=n[i]);return t}function kr(n,e){let t={};for(let i in n)t[i]=e(n[i],i);return t}function mS(n){let e={};for(let t of n)e[t]=!0;return e}function S_(n){let e=[];for(let t in n)e.push(n[t]);return e}function Jn(n,e){if(n===e)return!0;for(let t in n)if(l_.call(n,t)&&!(t in e))return!1;for(let t in e)if(l_.call(e,t)&&n[t]!==e[t])return!1;return!0}var oW=/^on[A-Z]/;function sW(n,e){let t=aW(n,e);for(let i of t)if(!oW.test(i))return!1;return!0}function aW(n,e){let t=[];for(let i in n)l_.call(n,i)&&(i in e||t.push(i));for(let i in e)l_.call(e,i)&&n[i]!==e[i]&&t.push(i);return t}function r_(n,e,t={}){if(n===e)return!0;for(let i in e)if(!(i in n&&lW(n[i],e[i],t[i])))return!1;for(let i in n)if(!(i in e))return!1;return!0}function lW(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function vN(n,e=0,t,i=1){let r=[];t==null&&(t=Object.keys(n).length);for(let o=e;o<t;o+=i){let s=n[o];s!==void 0&&r.push(s)}return r}var yN={};function cW(n,e){yN[n]=e}function uW(n){return new yN[n]}var WE=class{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Kn(e)}markerToArray(e){return Zo(e)}};cW("gregory",WE);var dW=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function bN(n){let e=dW.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(uS(t)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}var zd=class{constructor(e){let t=this.timeZone=e.timeZone,i=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!i||this.namedTimeZoneImpl),this.calendarSystem=uW(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Kn(Zk(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Kn(e)),t===null||!uS(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=bN(e);if(t===null)return null;let{marker:i}=t,r=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-t.timeZoneOffset*60*1e3):r=t.timeZoneOffset),{marker:i,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t.years,i[1]+=t.months,i[2]+=t.days,i[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]-=t.years,i[1]-=t.months,i[2]-=t.days,i[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t,this.calendarSystem.arrayToMarker(i)}addMonths(e,t){let i=this.calendarSystem.markerToArray(e);return i[1]+=t,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,t){let{calendarSystem:i}=this;return Yo(e)===Yo(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)&&i.getMarkerMonth(e)===i.getMarkerMonth(t)?i.getMarkerYear(t)-i.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:i}=this;return Yo(e)===Yo(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)?i.getMarkerMonth(t)-i.getMarkerMonth(e)+(i.getMarkerYear(t)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let i=this.diffWholeYears(e,t);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,t),i!==null?{unit:"month",value:i}:(i=gN(e,t),i!==null?{unit:"week",value:i}:(i=oc(e,t),i!==null?{unit:"day",value:i}:(i=j$(e,t),i_(i)?{unit:"hour",value:i}:(i=B$(e,t),i_(i)?{unit:"minute",value:i}:(i=z$(e,t),i_(i)?{unit:"second",value:i}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,i){let r;return i.years&&(r=this.diffWholeYears(e,t),r!==null)?r/L$(i):i.months&&(r=this.diffWholeMonths(e,t),r!==null)?r/F$(i):i.days&&(r=oc(e,t),r!==null)?r/ic(i):(t.valueOf()-e.valueOf())/rc(i)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?it(e):t==="hour"?U$(e):t==="minute"?H$(e):t==="second"?$$(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):W$(e,this.weekDow,this.weekDoy)}format(e,t,i={}){return t.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,i,r={}){return r.isEndExclusive&&(t=Rr(t,-1)),i.formatRange({marker:e,timeZoneOffset:r.forcedStartTzo!=null?r.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:r.forcedEndTzo!=null?r.forcedEndTzo:this.offsetForMarker(t)},this,r.defaultSeparator)}formatIso(e,t={}){let i=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?i=t.forcedTzo:i=this.offsetForMarker(e)),mN(e,i,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Kn(Zk(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Kn(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Yk(Zo(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Zo(e)):null}toDate(e,t){return this.timeZone==="local"?Yk(Zo(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Zo(e))*1e3*60):new Date(e.valueOf()-(t||0))}},co=class{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,i;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(i in e)t[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let i;return t&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}};co.prototype.classes={};co.prototype.iconClasses={};co.prototype.baseIconClass="";co.prototype.iconOverridePrefix="";function Ud(n){n();let e=de.debounceRendering,t=[];function i(r){t.push(r)}for(de.debounceRendering=i,Go(V(GE,{}),document.createElement("div"));t.length;)t.shift()();de.debounceRendering=e}var GE=class extends vn{render(){return V("div",{})}componentDidMount(){this.setState({})}};function wN(n){let e=Zm(n),t=e.Provider;return e.Provider=function(){let i=!this.getChildContext,r=t.apply(this,arguments);if(i){let o=[];this.shouldComponentUpdate=s=>{this.props.value!==s.value&&o.forEach(l=>{l.context=s.value,l.forceUpdate()})},this.sub=s=>{o.push(s);let l=s.componentWillUnmount;s.componentWillUnmount=()=>{o.splice(o.indexOf(s),1),l&&l.call(s)}}}return r},e}var c_=class{constructor(e,t,i,r){this.execFunc=e,this.emitter=t,this.scrollTime=i,this.scrollTimeReset=r,this.handleScrollRequest=o=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},o),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}},po=wN({});function CN(n,e,t,i,r,o,s,l,c,d,h,p,y,_){return{dateEnv:r,nowManager:o,options:t,pluginHooks:l,emitter:h,dispatch:c,getCurrentData:d,calendarApi:p,viewSpec:n,viewApi:e,dateProfileGenerator:i,theme:s,isRtl:t.direction==="rtl",addResizeHandler(S){h.on("_resize",S)},removeResizeHandler(S){h.off("_resize",S)},createScrollResponder(S){return new c_(S,h,He(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:y,unregisterInteractiveComponent:_}}var ff=(()=>{class n extends vn{shouldComponentUpdate(t,i){return!r_(this.props,t,this.propEquality)||!r_(this.state,i,this.stateEquality)}safeSetState(t){r_(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}return n.addPropsEquality=fW,n.addStateEquality=hW,n.contextType=po,n})();ff.prototype.propEquality={};ff.prototype.stateEquality={};var pt=(()=>{class n extends ff{}return n.contextType=po,n})();function fW(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function hW(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function ui(n,e){typeof n=="function"?n(e):n&&(n.current=e)}var Hd=class extends pt{constructor(){super(...arguments),this.id=ho(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{let{options:t}=this.context,{generatorName:i}=this.props;(!t.customRenderingReplaces||!qE(i,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&ui(this.props.elRef,e)}}render(){let{props:e,context:t}=this,{options:i}=t,{customGenerator:r,defaultGenerator:o,renderProps:s}=e,l=_S(e,[],this.handleEl),c=!1,d,h=[],p;if(r!=null){let y=typeof r=="function"?r(s,V):r;if(y===!0)c=!0;else{let _=y&&typeof y=="object";_&&"html"in y?l.dangerouslySetInnerHTML={__html:y.html}:_&&"domNodes"in y?h=Array.prototype.slice.call(y.domNodes):(_?xE(y):typeof y!="function")?d=y:p=y}}else c=!qE(e.generatorName,i);return c&&o&&(d=o(s)),this.queuedDomNodes=h,this.currentGeneratorMeta=p,V(e.elTag,l,d)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;let{props:i,context:r}=this,{handleCustomRendering:o,customRenderingMetaMap:s}=r.options;if(o){let l=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:s?.[i.generatorName];l&&o(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},i),{elClasses:(i.elClasses||[]).filter(pW)}))}}applyQueueudDomNodes(){let{queuedDomNodes:e,currentDomNodes:t}=this,i=this.base;if(!Or(e,t)){t.forEach(af);for(let r of e)i.appendChild(r);this.currentDomNodes=e}}};Hd.addPropsEquality({elClasses:Or,elStyle:Jn,elAttrs:sW,renderProps:Jn});function qE(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function _S(n,e,t){let i=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(i.className=(n.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),n.elStyle&&(i.style=n.elStyle),i}function pW(n){return!!n}var vS=wN(0),Nr=(()=>{class n extends vn{constructor(){super(...arguments),this.InnerContent=gW.bind(void 0,this),this.handleEl=t=>{this.el=t,this.props.elRef&&(ui(this.props.elRef,t),t&&this.didMountMisfire&&this.componentDidMount())}}render(){let{props:t}=this,i=mW(t.classNameGenerator,t.renderProps);if(t.children){let r=_S(t,i,this.handleEl),o=t.children(this.InnerContent,t.renderProps,r);return t.elTag?V(t.elTag,r,o):o}else return V(Hd,Object.assign(Object.assign({},t),{elRef:this.handleEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(i),renderId:this.context}))}componentDidMount(){var t,i;this.el?(i=(t=this.props).didMount)===null||i===void 0||i.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var t,i;(i=(t=this.props).willUnmount)===null||i===void 0||i.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}return n.contextType=vS,n})();function gW(n,e){let t=n.props;return V(Hd,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function mW(n,e){let t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}var sc=class extends pt{render(){let{props:e,context:t}=this,{options:i}=t,r={view:t.viewApi};return V(Nr,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...yS(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:r,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount},()=>e.children)}};function yS(n){return[`fc-${n.type}-view`,"fc-view"]}function _W(n,e){let t=null,i=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(i=e.createMarker(n.end)),!t&&!i||t&&i&&i<t?null:{start:t,end:i}}function Jk(n,e){let t=[],{start:i}=e,r,o;for(n.sort(vW),r=0;r<n.length;r+=1)o=n[r],o.start>i&&t.push({start:i,end:o.start}),o.end>i&&(i=o.end);return i<e.end&&t.push({start:i,end:e.end}),t}function vW(n,e){return n.start.valueOf()-e.start.valueOf()}function uo(n,e){let{start:t,end:i}=n,r=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(t===null||i===null||t<i)&&(r={start:t,end:i}),r}function EN(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function D_(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function fc(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function Ar(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function yW(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function SN(n){let e=Math.floor(ba(n.start,n.end))||1,t=it(n.start),i=Lt(t,e);return{start:t,end:i}}function bS(n,e=He(0)){let t=null,i=null;if(n.end){i=it(n.end);let r=n.end.valueOf()-i.valueOf();r&&r>=rc(e)&&(i=Lt(i,1))}return n.start&&(t=it(n.start),i&&i<=t&&(i=Lt(t,1))),{start:t,end:i}}function Qo(n,e,t,i){return i==="year"?He(t.diffWholeYears(n,e),"year"):i==="month"?He(t.diffWholeMonths(n,e),"month"):pN(n,e)}var ha=class{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,i){let{dateEnv:r}=this.props,o=r.subtract(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(o,-1,i)}buildNext(e,t,i){let{dateEnv:r}=this.props,o=r.add(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(o,1,i)}build(e,t,i=!0){let{props:r}=this,o,s,l,c,d,h;return o=this.buildValidRange(),o=this.trimHiddenDays(o),i&&(e=yW(e,o)),s=this.buildCurrentRangeInfo(e,t),l=/^(year|month|week|day)$/.test(s.unit),c=this.buildRenderRange(this.trimHiddenDays(s.range),s.unit,l),c=this.trimHiddenDays(c),d=c,r.showNonCurrentDates||(d=uo(d,s.range)),d=this.adjustActiveRange(d),d=uo(d,o),h=D_(s.range,o),Ar(c,e)||(e=c.start),{currentDate:e,validRange:o,currentRange:s.range,currentRangeUnit:s.unit,isRangeAllDay:l,activeRange:d,renderRange:c,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:h,dateIncrement:this.buildDateIncrement(s.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:i}=this,r=null,o=null,s=null,l;return i.duration?(r=i.duration,o=i.durationUnit,s=this.buildRangeFromDuration(e,t,r,o)):(l=this.props.dayCount)?(o="day",s=this.buildRangeFromDayCount(e,t,l)):(s=this.buildCustomVisibleRange(e))?o=i.dateEnv.greatestWholeUnit(s.start,s.end).unit:(r=this.getFallbackDuration(),o=Bd(r).unit,s=this.buildRangeFromDuration(e,t,r,o)),{duration:r,unit:o,range:s}}getFallbackDuration(){return He({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:i,slotMinTime:r,slotMaxTime:o}=this.props,{start:s,end:l}=e;return i&&(ic(r)<0&&(s=it(s),s=t.add(s,r)),ic(o)>1&&(l=it(l),l=Lt(l,-1),l=t.add(l,o))),{start:s,end:l}}buildRangeFromDuration(e,t,i,r){let{dateEnv:o,dateAlignment:s}=this.props,l,c,d;if(!s){let{dateIncrement:p}=this.props;p&&rc(p)<rc(i)?s=Bd(p).unit:s=r}ic(i)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,t),l=it(l));function h(){l=o.startOf(e,s),c=o.add(l,i),d={start:l,end:c}}return h(),this.trimHiddenDays(d)||(e=this.skipHiddenDays(e,t),h()),d}buildRangeFromDayCount(e,t,i){let{dateEnv:r,dateAlignment:o}=this.props,s=0,l=e,c;o&&(l=r.startOf(l,o)),l=it(l),l=this.skipHiddenDays(l,t),c=l;do c=Lt(c,1),this.isHiddenDay(c)||(s+=1);while(s<i);return{start:l,end:c}}buildCustomVisibleRange(e){let{props:t}=this,i=t.visibleRangeInput,r=typeof i=="function"?i.call(t.calendarApi,t.dateEnv.toDate(e)):i,o=this.refineRange(r);return o&&(o.start==null||o.end==null)?null:o}buildRenderRange(e,t,i){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,i;return t||((i=this.props.dateAlignment)?He(1,i):e||He({days:1}))}refineRange(e){if(e){let t=_W(e,this.props.dateEnv);return t&&(t=bS(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],i=0,r;for(this.props.weekends===!1&&e.push(0,6),r=0;r<7;r+=1)(t[r]=e.indexOf(r)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:i}=e;return t&&(t=this.skipHiddenDays(t)),i&&(i=this.skipHiddenDays(i,-1,!0)),t==null||i==null||t<i?{start:t,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?t:0)+7)%7];)e=Lt(e,t);return e}};function hf(n,e,t,i){return{instanceId:ho(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:i??null}}function bW(n,e,t,i){for(let r=0;r<i.length;r+=1){let o=i[r].parse(n,t);if(o){let{allDay:s}=n;return s==null&&(s=e,s==null&&(s=o.allDayGuess,s==null&&(s=!1))),{allDay:s,duration:o.duration,typeData:o.typeData,typeId:r}}}return null}function pa(n,e,t){let{dateEnv:i,pluginHooks:r,options:o}=t,{defs:s,instances:l}=n;l=lo(l,c=>!s[c.defId].recurringDef);for(let c in s){let d=s[c];if(d.recurringDef){let{duration:h}=d.recurringDef;h||(h=d.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);let p=wW(d,h,e,i,r.recurringTypes);for(let y of p){let _=hf(c,{start:y,end:i.add(y,h)});l[_.instanceId]=_}}}return{defs:s,instances:l}}function wW(n,e,t,i,r){let s=r[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:i.subtract(t.start,e),end:t.end},i);return n.allDay&&(s=s.map(it)),s}var o_={id:String,groupId:String,title:String,url:String,interactive:Boolean},DN={start:F,end:F,date:F,allDay:Boolean},CW=Object.assign(Object.assign(Object.assign({},o_),DN),{extendedProps:F});function xN(n,e,t,i,r=wS(t),o,s){let{refined:l,extra:c}=x_(n,t,r),d=SW(e,t),h=bW(l,d,t.dateEnv,t.pluginHooks.recurringTypes);if(h){let y=$d(l,c,e?e.sourceId:"",h.allDay,!!h.duration,t,o);return y.recurringDef={typeId:h.typeId,typeData:h.typeData,duration:h.duration},{def:y,instance:null}}let p=EW(l,d,t,i);if(p){let y=$d(l,c,e?e.sourceId:"",p.allDay,p.hasEnd,t,o),_=hf(y.defId,p.range,p.forcedStartTzo,p.forcedEndTzo);return s&&y.publicId&&s[y.publicId]&&(_.instanceId=s[y.publicId]),{def:y,instance:_}}return null}function x_(n,e,t=wS(e)){return C_(n,t)}function wS(n){return Object.assign(Object.assign(Object.assign({},u_),CW),n.pluginHooks.eventRefiners)}function $d(n,e,t,i,r,o,s){let l={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(s&&n.id?s[n.id]:"")||ho(),sourceId:t,allDay:i,hasEnd:r,interactive:n.interactive,ui:hc(n,o),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let c of o.pluginHooks.eventDefMemberAdders)Object.assign(l,c(n));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function EW(n,e,t,i){let{allDay:r}=n,o,s=null,l=!1,c,d=null,h=n.start!=null?n.start:n.date;if(o=t.dateEnv.createMarkerMeta(h),o)s=o.marker;else if(!i)return null;return n.end!=null&&(c=t.dateEnv.createMarkerMeta(n.end)),r==null&&(e!=null?r=e:r=(!o||o.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),r&&s&&(s=it(s)),c&&(d=c.marker,r&&(d=it(d)),s&&d<=s&&(d=null)),d?l=!0:i||(l=t.options.forceEventDuration||!1,d=t.dateEnv.add(s,r?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:r,hasEnd:l,range:{start:s,end:d},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function SW(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function Wd(n,e,t,i,r,o){let s=jn(),l=wS(t);for(let c of n){let d=xN(c,e,t,i,l,r,o);d&&Gd(d,s)}return s}function Gd(n,e=jn()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function pf(n,e){let t=n.instances[e];if(t){let i=n.defs[t.defId],r=M_(n,o=>DW(i,o));return r.defs[i.defId]=i,r.instances[t.instanceId]=t,r}return jn()}function DW(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function jn(){return{defs:{},instances:{}}}function I_(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function M_(n,e){let t=lo(n.defs,e),i=lo(n.instances,r=>t[r.defId]);return{defs:t,instances:i}}function xW(n,e){let{defs:t,instances:i}=n,r={},o={};for(let s in t)e.defs[s]||(r[s]=t[s]);for(let s in i)!e.instances[s]&&r[i[s].defId]&&(o[s]=i[s]);return{defs:r,instances:o}}function IW(n,e){return Array.isArray(n)?Wd(n,null,e,!0):typeof n=="object"&&n?Wd([n],null,e,!0):n!=null?String(n):null}function ZE(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}var u_={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:F,overlap:F,allow:F,className:ZE,classNames:ZE,color:String,backgroundColor:String,borderColor:String,textColor:String},MW={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function hc(n,e){let t=IW(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function IN(n){return n.reduce(TW,MW)}function TW(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}var PW={id:String,defaultAllDay:Boolean,url:String,format:String,events:F,eventDataTransform:F,success:F,failure:F};function CS(n,e,t=ES(e)){let i;if(typeof n=="string"?i={url:n}:typeof n=="function"||Array.isArray(n)?i={events:n}:typeof n=="object"&&n&&(i=n),i){let{refined:r,extra:o}=C_(i,t),s=AW(r,e);if(s)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:ho(),sourceDefId:s.sourceDefId,meta:s.meta,ui:hc(r,e),extendedProps:o}}return null}function ES(n){return Object.assign(Object.assign(Object.assign({},u_),PW),n.pluginHooks.eventSourceRefiners)}function AW(n,e){let t=e.pluginHooks.eventSourceDefs;for(let i=t.length-1;i>=0;i-=1){let o=t[i].parseMeta(n);if(o)return{sourceDefId:i,meta:o}}return null}function MN(n,e,t,i,r){switch(e.type){case"RECEIVE_EVENTS":return RW(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,r);case"RESET_RAW_EVENTS":return OW(n,t[e.sourceId],e.rawEvents,i.activeRange,r);case"ADD_EVENTS":return kW(n,e.eventStore,i?i.activeRange:null,r);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return I_(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?pa(n,i.activeRange,r):n;case"REMOVE_EVENTS":return xW(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return PN(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return M_(n,o=>!o.sourceId);case"REMOVE_ALL_EVENTS":return jn();default:return n}}function RW(n,e,t,i,r,o){if(e&&t===e.latestFetchId){let s=Wd(TN(r,e,o),e,o);return i&&(s=pa(s,i,o)),I_(PN(n,e.sourceId),s)}return n}function OW(n,e,t,i,r){let{defIdMap:o,instanceIdMap:s}=LW(n),l=Wd(TN(t,e,r),e,r,!1,o,s);return pa(l,i,r)}function TN(n,e,t){let i=t.options.eventDataTransform,r=e?e.eventDataTransform:null;return r&&(n=Xk(n,r)),i&&(n=Xk(n,i)),n}function Xk(n,e){let t;if(!e)t=n;else{t=[];for(let i of n){let r=e(i);r?t.push(r):r==null&&t.push(i)}}return t}function kW(n,e,t,i){return t&&(e=pa(e,t,i)),I_(n,e)}function SS(n,e,t){let{defs:i}=n,r=kr(n.instances,o=>i[o.defId].allDay?o:Object.assign(Object.assign({},o),{range:{start:t.createMarker(e.toDate(o.range.start,o.forcedStartTzo)),end:t.createMarker(e.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:o.forcedEndTzo}));return{defs:i,instances:r}}function PN(n,e){return M_(n,t=>t.sourceId!==e)}function NW(n,e){return{defs:n.defs,instances:lo(n.instances,t=>!e[t.instanceId])}}function LW(n){let{defs:e,instances:t}=n,i={},r={};for(let o in e){let s=e[o],{publicId:l}=s;l&&(i[l]=o)}for(let o in t){let s=t[o],l=e[s.defId],{publicId:c}=l;c&&(r[c]=o)}return{defIdMap:i,instanceIdMap:r}}var fo=class{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){FW(this.handlers,e,t)}off(e,t){VW(this.handlers,e,t)}trigger(e,...t){let i=this.handlers[e]||[],r=this.options&&this.options[e],o=[].concat(r||[],i);for(let s of o)s.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}};function FW(n,e,t){(n[e]||(n[e]=[])).push(t)}function VW(n,e,t){t?n[e]&&(n[e]=n[e].filter(i=>i!==t)):delete n[e]}var jW={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function DS(n,e){return Wd(BW(n),null,e)}function BW(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},jW),t)),e}function T_(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},xS(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function zW(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function xS(n,e){let t={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(t,i(n,e));return Object.assign(t,XW(n,e.dateEnv)),t}function d_(n,e,t){let{dateEnv:i,options:r}=t,o=e;return n?(o=it(o),o=i.add(o,r.defaultAllDayEventDuration)):o=i.add(o,r.defaultTimedEventDuration),o}function gf(n,e,t,i){let r=h_(n.defs,e),o=jn();for(let s in n.defs){let l=n.defs[s];o.defs[s]=UW(l,r[s],t,i)}for(let s in n.instances){let l=n.instances[s],c=o.defs[l.defId];o.instances[s]=HW(l,c,r[l.defId],t,i)}return o}function UW(n,e,t,i){let r=t.standardProps||{};r.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(r.hasEnd=!0);let o=Object.assign(Object.assign(Object.assign({},n),r),{ui:Object.assign(Object.assign({},n.ui),r.ui)});t.extendedProps&&(o.extendedProps=Object.assign(Object.assign({},o.extendedProps),t.extendedProps));for(let s of i.pluginHooks.eventDefMutationAppliers)s(o,t,i);return!o.hasEnd&&i.options.forceEventDuration&&(o.hasEnd=!0),o}function HW(n,e,t,i,r){let{dateEnv:o}=r,s=i.standardProps&&i.standardProps.allDay===!0,l=i.standardProps&&i.standardProps.hasEnd===!1,c=Object.assign({},n);return s&&(c.range=SN(c.range)),i.datesDelta&&t.startEditable&&(c.range={start:o.add(c.range.start,i.datesDelta),end:o.add(c.range.end,i.datesDelta)}),i.startDelta&&t.durationEditable&&(c.range={start:o.add(c.range.start,i.startDelta),end:c.range.end}),i.endDelta&&t.durationEditable&&(c.range={start:c.range.start,end:o.add(c.range.end,i.endDelta)}),l&&(c.range={start:c.range.start,end:d_(e.allDay,c.range.start,r)}),e.allDay&&(c.range={start:it(c.range.start),end:it(c.range.end)}),c.range.end<c.range.start&&(c.range.end=d_(e.allDay,c.range.start,r)),c}var qo=class{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}},rt=class n{constructor(e,t,i){this._context=e,this._def=t,this._instance=i||null}setProp(e,t){if(e in DN)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=o_[e](t),this.mutate({standardProps:{publicId:t}});else if(e in o_)t=o_[e](t),this.mutate({standardProps:{[e]:t}});else if(e in u_){let i=u_[e](t);e==="color"?i={backgroundColor:t,borderColor:t}:e==="editable"?i={startEditable:t,durationEditable:t}:i={[e]:t},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:i}=this._context,r=i.createMarker(e);if(r&&this._instance){let o=this._instance.range,s=Qo(o.start,r,i,t.granularity);t.maintainDuration?this.mutate({datesDelta:s}):this.mutate({startDelta:s})}}setEnd(e,t={}){let{dateEnv:i}=this._context,r;if(!(e!=null&&(r=i.createMarker(e),!r))&&this._instance)if(r){let o=Qo(this._instance.range.end,r,i,t.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,i={}){let{dateEnv:r}=this._context,o={allDay:i.allDay},s=r.createMarker(e),l;if(s&&!(t!=null&&(l=r.createMarker(t),!l))&&this._instance){let c=this._instance.range;i.allDay===!0&&(c=SN(c));let d=Qo(c.start,s,r,i.granularity);if(l){let h=Qo(c.end,l,r,i.granularity);N$(d,h)?this.mutate({datesDelta:d,standardProps:o}):this.mutate({startDelta:d,endDelta:h,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:d,standardProps:o})}}moveStart(e){let t=He(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=He(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=He(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let i={allDay:e},{maintainDuration:r}=t;r==null&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=r),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:t}=this._context,i=this._instance,r=Nt(e);return this._def.hasEnd?t.formatRange(i.range.start,i.range.end,r,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):t.format(i.range.start,r,{forcedTzo:i.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let i=this._def,r=this._context,{eventStore:o}=r.getCurrentData(),s=pf(o,t.instanceId);s=gf(s,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let c=new n(r,i,t);this._def=s.defs[i.defId],this._instance=s.instances[t.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:s}),r.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:Lr(s,r,t),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:o})}})}}remove(){let e=this._context,t=AN(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new qo(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:i}=t,{startStr:r,endStr:o}=this,s={allDay:t.allDay};return t.title&&(s.title=t.title),r&&(s.start=r),o&&(s.end=o),t.publicId&&(s.id=t.publicId),t.groupId&&(s.groupId=t.groupId),t.url&&(s.url=t.url),i.display&&i.display!=="auto"&&(s.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?s.color=i.backgroundColor:(i.backgroundColor&&(s.backgroundColor=i.backgroundColor),i.borderColor&&(s.borderColor=i.borderColor)),i.textColor&&(s.textColor=i.textColor),i.classNames.length&&(s.classNames=i.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(s,t.extendedProps):s.extendedProps=t.extendedProps),s}toJSON(){return this.toPlainObject()}};function AN(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Lr(n,e,t){let{defs:i,instances:r}=n,o=[],s=t?t.instanceId:"";for(let l in r){let c=r[l],d=i[c.defId];c.instanceId!==s&&o.push(new rt(e,d,c))}return o}function f_(n,e,t,i){let r={},o={},s={},l=[],c=[],d=h_(n.defs,e);for(let h in n.defs){let p=n.defs[h];d[p.defId].display==="inverse-background"&&(p.groupId?(r[p.groupId]=[],s[p.groupId]||(s[p.groupId]=p)):o[h]=[])}for(let h in n.instances){let p=n.instances[h],y=n.defs[p.defId],_=d[y.defId],S=p.range,I=!y.allDay&&i?bS(S,i):S,x=uo(I,t);x&&(_.display==="inverse-background"?y.groupId?r[y.groupId].push(x):o[p.defId].push(x):_.display!=="none"&&(_.display==="background"?l:c).push({def:y,ui:_,instance:p,range:x,isStart:I.start&&I.start.valueOf()===x.start.valueOf(),isEnd:I.end&&I.end.valueOf()===x.end.valueOf()}))}for(let h in r){let p=r[h],y=Jk(p,t);for(let _ of y){let S=s[h],I=d[S.defId];l.push({def:S,ui:I,instance:null,range:_,isStart:!1,isEnd:!1})}}for(let h in o){let p=o[h],y=Jk(p,t);for(let _ of y)l.push({def:n.defs[h],ui:d[h],instance:null,range:_,isStart:!1,isEnd:!1})}return{bg:l,fg:c}}function eN(n,e){n.fcSeg=e}function go(n){return n.fcSeg||n.parentNode.fcSeg||null}function h_(n,e){return kr(n,t=>RN(t,e))}function RN(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),IN(t)}function IS(n,e){let t=n.map($W);return t.sort((i,r)=>dN(i,r,e)),t.map(i=>i._seg)}function $W(n){let{eventRange:e}=n,t=e.def,i=e.instance?e.instance.range:e.range,r=i.start?i.start.valueOf():0,o=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:r,end:o,duration:o-r,allDay:Number(t.allDay),_seg:n})}function WW(n,e){let{pluginHooks:t}=e,i=t.isDraggableTransformers,{def:r,ui:o}=n.eventRange,s=o.startEditable;for(let l of i)s=l(s,r,o,e);return s}function GW(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function qW(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function P_(n,e,t,i,r,o,s){let{dateEnv:l,options:c}=t,{displayEventTime:d,displayEventEnd:h}=c,p=n.eventRange.def,y=n.eventRange.instance;d==null&&(d=i!==!1),h==null&&(h=r!==!1);let _=y.range.start,S=y.range.end,I=o||n.start||n.eventRange.range.start,x=s||n.end||n.eventRange.range.end,T=it(_).valueOf()===it(I).valueOf(),H=it(Rr(S,-1)).valueOf()===it(Rr(x,-1)).valueOf();return d&&!p.allDay&&(T||H)?(I=T?_:I,x=H?S:x,h&&p.hasEnd?l.formatRange(I,x,e,{forcedStartTzo:o?null:y.forcedStartTzo,forcedEndTzo:s?null:y.forcedEndTzo}):l.format(I,e,{forcedTzo:o?null:y.forcedStartTzo})):""}function wa(n,e,t){let i=n.eventRange.range;return{isPast:i.end<=(t||e.start),isFuture:i.start>=(t||e.end),isToday:e&&Ar(e,i.start)}}function ZW(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function MS(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function A_(n,e){let{def:t,instance:i}=n.eventRange,{url:r}=t;if(r)return{href:r};let{emitter:o,options:s}=e,{eventInteractive:l}=s;return l==null&&(l=t.interactive,l==null&&(l=!!o.hasHandlers("eventClick"))),l?cN(c=>{o.trigger("eventClick",{el:c.target,event:new rt(e,t,i),jsEvent:c,view:e.viewApi})}):{}}var YW={start:F,end:F,allDay:Boolean};function QW(n,e,t){let i=KW(n,e),{range:r}=i;if(!r.start)return null;if(!r.end){if(t==null)return null;r.end=e.add(r.start,t)}return i}function KW(n,e){let{refined:t,extra:i}=C_(n,YW),r=t.start?e.createMarkerMeta(t.start):null,o=t.end?e.createMarkerMeta(t.end):null,{allDay:s}=t;return s==null&&(s=r&&r.isTimeUnspecified&&(!o||o.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:o?o.marker:null},allDay:s},i)}function TS(n,e){return EN(n.range,e.range)&&n.allDay===e.allDay&&JW(n,e)}function JW(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function XW(n,e){return Object.assign(Object.assign({},ON(n.range,e,n.allDay)),{allDay:n.allDay})}function PS(n,e,t){return Object.assign(Object.assign({},ON(n,e,t)),{timeZone:e.timeZone})}function ON(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function e6(n,e,t){let i=x_({editable:!1},t),r=$d(i.refined,i.extra,"",n.allDay,!0,t);return{def:r,ui:RN(r,e),instance:hf(r.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function AS(n,e,t){let i=!1,r=function(l){i||(i=!0,e(l))},o=function(l){i||(i=!0,t(l))},s=n(r,o);s&&typeof s.then=="function"&&s.then(r,o)}var p_=class extends Error{constructor(e,t){super(e),this.response=t}};function RS(n,e,t){n=n.toUpperCase();let i={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(i.body=new URLSearchParams(t),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(r=>{if(r.ok)return r.json().then(o=>[o,r],()=>{throw new p_("Failure parsing JSON",r)});throw new p_("Request failed",r)})}var NE;function OS(){return NE==null&&(NE=t6()),NE}function t6(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}var qd=class extends pt{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Ud(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Ud(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:i}=this.state,r=i||t.height==="auto"||t.contentHeight==="auto",o=!r&&t.height!=null?t.height:"",s=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return OS()||s.push("fc-liquid-hack"),e.children(s,o,r,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}},Ki=class{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}};function kN(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function mf(n){return{[n.component.uid]:n}}var pc={},gc=(()=>{class n extends vn{constructor(t,i){super(t,i),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:t,state:i}=this;return t.children(i.nowDate,i.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:t,context:i}=this,r=i.nowManager.getDateMarker(),{nowIndicatorSnap:o}=i.options;o==="auto"&&(o=/year|month|week|day/.test(t.unit)||(t.unitValue||1)===1);let s,l;return o?(s=i.dateEnv.startOf(r,t.unit),l=i.dateEnv.add(s,He(1,t.unit)).valueOf()-r.valueOf()):(s=r,l=1e3*60),l=Math.min(1e3*60*60*24,l),{state:{nowDate:s,todayRange:n6(s)},waitMs:l}}setTimeout(t=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{let i=this.computeTiming();this.setState(i.state,()=>{this.setTimeout(i.waitMs)})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return n.contextType=po,n})();function n6(n){let e=it(n),t=Lt(e,1);return{start:e,end:t}}var Zd=class{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let i=this.getCurrentData(),r;t=t||"day",r=i.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),r?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:i}=this.getCurrentData(),r=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),o,s;for(let l in t)r.push(l);for(o=0;o<r.length;o+=1)if(s=t[r[o]],s&&s.singleUnit===e)return s;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),i=He(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),Nt(t))}formatRange(e,t,i){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(t),Nt(i),i)}formatIso(e,t){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:t})}select(e,t){let i;t==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:t};let r=this.getCurrentData(),o=QW(i,r.dateEnv,He({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),T_(o,null,r))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),zW(e,t))}addEvent(e,t){if(e instanceof rt){let s=e._def,l=e._instance;return this.getCurrentData().eventStore.defs[s.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Gd({def:s,instance:l})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),r;if(t instanceof qo)r=t.internalEventSource;else if(typeof t=="boolean")t&&([r]=S_(i.eventSources));else if(t!=null){let s=this.getEventSourceById(t);if(!s)return console.warn(`Could not find an event source with ID "${t}"`),null;r=s.internalEventSource}let o=xN(e,r,i,!1);if(o){let s=new rt(i,o.def,o.def.recurringDef?null:o.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Gd(o)}),this.triggerEventAdd(s),s}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:AN(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:i,instances:r}=t.eventStore;e=String(e);for(let o in i){let s=i[o];if(s.publicId===e){if(s.recurringDef)return new rt(t,s,null);for(let l in r){let c=r[l];if(c.defId===s.defId)return new rt(t,s,c)}}}return null}getEvents(){let e=this.getCurrentData();return Lr(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,i=[];for(let r in t)i.push(new qo(e,t[r]));return i}getEventSourceById(e){let t=this.getCurrentData(),i=t.eventSources;e=String(e);for(let r in i)if(i[r].publicId===e)return new qo(t,i[r]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof qo)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=CS(e,t);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new qo(t,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=He(e);t&&this.trigger("_scrollRequest",{time:t})}};function kS(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function R_(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function NS(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function LS(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function FS(n,e){return{left:n.left-e.left,top:n.top-e.top}}var i_e=jn();function VS(n,e,t,i){return{dow:n.getUTCDay(),isDisabled:!!(i&&(!i.activeRange||!Ar(i.activeRange,n))),isOther:!!(i&&!Ar(i.currentRange,n)),isToday:!!(e&&Ar(e,n)),isPast:!!(t?n<t:e&&n<e.start),isFuture:!!(t?n>t:e&&n>=e.end)}}function O_(n,e){let t=["fc-day",`fc-day-${V$[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}var i6=Nt({year:"numeric",month:"long",day:"numeric"}),r6=Nt({week:"long"});function _f(n,e,t="day",i=!0){let{dateEnv:r,options:o,calendarApi:s}=n,l=r.format(e,t==="week"?r6:i6);if(o.navLinks){let c=r.toDate(e),d=h=>{let p=t==="day"?o.navLinkDayClick:t==="week"?o.navLinkWeekClick:null;typeof p=="function"?p.call(s,r.toDate(e),h):(typeof p=="string"&&(t=p),s.zoomTo(e,t))};return Object.assign({title:uc(o.navLinkHint,[l,c],l),"data-navlink":""},i?lN(d):{onClick:d})}return{"aria-label":l}}var LE=null;function NN(){return LE===null&&(LE=o6()),LE}function o6(){let n=document.createElement("div");va(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return af(n),t}var FE;function LN(){return FE||(FE=s6()),FE}function s6(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=FN(n);return document.body.removeChild(n),e}function FN(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function VN(n,e=!1){let t=window.getComputedStyle(n),i=parseInt(t.borderLeftWidth,10)||0,r=parseInt(t.borderRightWidth,10)||0,o=parseInt(t.borderTopWidth,10)||0,s=parseInt(t.borderBottomWidth,10)||0,l=FN(n),c=l.y-i-r,d=l.x-o-s,h={borderLeft:i,borderRight:r,borderTop:o,borderBottom:s,scrollbarBottom:d,scrollbarLeft:0,scrollbarRight:0};return NN()&&t.direction==="rtl"?h.scrollbarLeft=c:h.scrollbarRight=c,e&&(h.paddingLeft=parseInt(t.paddingLeft,10)||0,h.paddingRight=parseInt(t.paddingRight,10)||0,h.paddingTop=parseInt(t.paddingTop,10)||0,h.paddingBottom=parseInt(t.paddingBottom,10)||0),h}function jS(n,e=!1,t){let i=t?n.getBoundingClientRect():vf(n),r=VN(n,e),o={left:i.left+r.borderLeft+r.scrollbarLeft,right:i.right-r.borderRight-r.scrollbarRight,top:i.top+r.borderTop,bottom:i.bottom-r.borderBottom-r.scrollbarBottom};return e&&(o.left+=r.paddingLeft,o.right-=r.paddingRight,o.top+=r.paddingTop,o.bottom-=r.paddingBottom),o}function vf(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function a6(n){let e=k_(n),t=n.getBoundingClientRect();for(let i of e){let r=R_(t,i.getBoundingClientRect());if(r)t=r;else return null}return t}function k_(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}var Ko=class{constructor(e,t,i,r){this.els=t;let o=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(o.left),r&&this.buildElVerticals(o.top)}buildElHorizontals(e){let t=[],i=[];for(let r of this.els){let o=r.getBoundingClientRect();t.push(o.left-e),i.push(o.right-e)}this.lefts=t,this.rights=i}buildElVerticals(e){let t=[],i=[];for(let r of this.els){let o=r.getBoundingClientRect();t.push(o.top-e),i.push(o.bottom-e)}this.tops=t,this.bottoms=i}leftToIndex(e){let{lefts:t,rights:i}=this,r=t.length,o;for(o=0;o<r;o+=1)if(e>=t[o]&&e<i[o])return o}topToIndex(e){let{tops:t,bottoms:i}=this,r=t.length,o;for(o=0;o<r;o+=1)if(e>=t[o]&&e<i[o])return o}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Xm(this.tops||[],e.tops||[])&&Xm(this.bottoms||[],e.bottoms||[])&&Xm(this.lefts||[],e.lefts||[])&&Xm(this.rights||[],e.rights||[])}};function Xm(n,e){let t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(Math.round(n[i])!==Math.round(e[i]))return!1;return!0}var ga=class{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}},Yd=class extends ga{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}},Qd=class extends ga{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}},Ji=class extends pt{constructor(){super(...arguments),this.uid=ho()}prepareHits(){}queryHit(e,t,i,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Xt(e,".fc-event-mirror")}isValidDateDownEl(e){return!Xt(e,".fc-event:not(.fc-bg-event)")&&!Xt(e,".fc-more-link")&&!Xt(e,"a[data-navlink]")&&!Xt(e,".fc-popover")}};var Kd=class{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let i of e)this.insertEntry(i,t);return t}insertEntry(e,t){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,i){if(this.allowReslicing&&e.touchingEntry){let r=Object.assign(Object.assign({},t),{span:N_(t.span,e.touchingEntry.span)});i.push(r),this.splitEntry(t,e.touchingEntry,i)}else i.push(t)}splitEntry(e,t,i){let r=e.span,o=t.span;r.start<o.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.start,end:o.start}},i),r.end>o.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.end,end:r.end}},i)}insertEntryAt(e,t){let{entriesByLevel:i,levelCoords:r}=this;t.lateral===-1?(VE(r,t.level,t.levelCoord),VE(i,t.level,[e])):VE(i[t.level],t.lateral,e),this.stackCnts[ma(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:i,strictOrder:r,stackCnts:o}=this,s=t.length,l=0,c=-1,d=-1,h=null,p=0;for(let S=0;S<s;S+=1){let I=t[S];if(!r&&I>=l+this.getEntryThickness(e))break;let x=i[S],T,H=QE(x,e.span.start,YE),q=H[0]+H[1];for(;(T=x[q])&&T.span.start<e.span.end;){let U=I+this.getEntryThickness(T);U>l&&(l=U,h=T,c=S,d=q),U===l&&(p=Math.max(p,o[ma(T)]+1)),q+=1}}let y=0;if(h)for(y=c+1;y<s&&t[y]<l;)y+=1;let _=-1;return y<s&&t[y]===l&&(_=QE(i[y],e.span.end,YE)[0]),{touchingLevel:c,touchingLateral:d,touchingEntry:h,stackCnt:p,levelCoord:l,level:y,lateral:_}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,i=e.length,r=[];for(let o=0;o<i;o+=1){let s=e[o],l=t[o];for(let c of s)r.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:l}))}return r}};function YE(n){return n.span.end}function ma(n){return n.index+":"+n.span.start}function N_(n,e){let t=Math.max(n.start,e.start),i=Math.min(n.end,e.end);return t<i?{start:t,end:i}:null}function VE(n,e,t){n.splice(e,0,t)}function QE(n,e,t){let i=0,r=n.length;if(!r||e<t(n[i]))return[0,0];if(e>t(n[r-1]))return[r,0];for(;i<r;){let o=Math.floor(i+(r-i)/2),s=t(n[o]);if(e<s)r=o;else if(e>s)i=o+1;else return[o,1]}return[i,0]}var Jd=class{constructor(e,t){this.emitter=new fo}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}},yf={};function jN(n,e){return!n||e>10?Nt({weekday:"short"}):e>1?Nt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Nt({weekday:"long"})}var BN="fc-col-header-cell";function zN(n){return n.text}var g_=class extends pt{render(){let{dateEnv:e,options:t,theme:i,viewApi:r}=this.context,{props:o}=this,{date:s,dateProfile:l}=o,c=VS(s,o.todayRange,null,l),d=[BN].concat(O_(c,i)),h=e.format(s,o.dayHeaderFormat),p=!c.isDisabled&&o.colCnt>1?_f(this.context,s):{},y=e.toDate(s);e.namedTimeZoneImpl&&(y=Rr(y,36e5));let _=Object.assign(Object.assign(Object.assign({date:y,view:r},o.extraRenderProps),{text:h}),c);return V(Nr,{elTag:"th",elClasses:d,elAttrs:Object.assign({role:"columnheader",colSpan:o.colSpan,"data-date":c.isDisabled?void 0:df(s)},o.extraDataAttrs),renderProps:_,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:zN,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},S=>V("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&V(S,{elTag:"a",elAttrs:p,elClasses:["fc-col-header-cell-cushion",o.isSticky&&"fc-sticky"]})))}},l6=Nt({weekday:"long"}),m_=class extends pt{render(){let{props:e}=this,{dateEnv:t,theme:i,viewApi:r,options:o}=this.context,s=Lt(new Date(2592e5),e.dow),l={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=t.format(s,e.dayHeaderFormat),d=Object.assign(Object.assign(Object.assign(Object.assign({date:s},l),{view:r}),e.extraRenderProps),{text:c});return V(Nr,{elTag:"th",elClasses:[BN,...O_(l,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:d,generatorName:"dayHeaderContent",customGenerator:o.dayHeaderContent,defaultGenerator:zN,classNameGenerator:o.dayHeaderClassNames,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},h=>V("div",{className:"fc-scrollgrid-sync-inner"},V(h,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(s,l6)}})))}},Xd=class extends pt{constructor(){super(...arguments),this.createDayHeaderFormatter=je(c6)}render(){let{context:e}=this,{dates:t,dateProfile:i,datesRepDistinctDays:r,renderIntro:o}=this.props,s=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,t.length);return V(gc,{unit:"day"},(l,c)=>V("tr",{role:"row"},o&&o("day"),t.map(d=>r?V(g_,{key:d.toISOString(),date:d,dateProfile:i,todayRange:c,colCnt:t.length,dayHeaderFormat:s}):V(m_,{key:d.getUTCDay(),dow:d.getUTCDay(),dayHeaderFormat:s}))))}};function c6(n,e,t){return n||jN(e,t)}var ef=class{constructor(e,t){let i=e.start,{end:r}=e,o=[],s=[],l=-1;for(;i<r;)t.isHiddenDay(i)?o.push(l+.5):(l+=1,o.push(l),s.push(i)),i=Lt(i,1);this.dates=s,this.indices=o,this.cnt=s.length}sliceRange(e){let t=this.getDateDayIndex(e.start),i=this.getDateDayIndex(Lt(e.end,-1)),r=Math.max(0,t),o=Math.min(this.cnt-1,i);return r=Math.ceil(r),o=Math.floor(o),r<=o?{firstIndex:r,lastIndex:o,isStart:t===r,isEnd:i===o}:null}getDateDayIndex(e){let{indices:t}=this,i=Math.floor(ba(this.dates[0],e));return i<0?t[0]-1:i>=t.length?t[t.length-1]+1:t[i]}},tf=class{constructor(e,t){let{dates:i}=e,r,o,s;if(t){for(o=i[0].getUTCDay(),r=1;r<i.length&&i[r].getUTCDay()!==o;r+=1);s=Math.ceil(i.length/r)}else s=1,r=i.length;this.rowCnt=s,this.colCnt=r,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let i=[];for(let r=0;r<this.colCnt;r+=1)i.push(this.buildCell(t,r));e.push(i)}return e}buildCell(e,t){let i=this.daySeries.dates[e*this.colCnt+t];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,i=this.daySeries.sliceRange(e),r=[];if(i){let{firstIndex:o,lastIndex:s}=i,l=o;for(;l<=s;){let c=Math.floor(l/t),d=Math.min((c+1)*t,s+1);r.push({row:c,firstCol:l%t,lastCol:(d-1)%t,isStart:i.isStart&&l===o,isEnd:i.isEnd&&d-1===s}),l=d}}return r}},nf=class{constructor(){this.sliceBusinessHours=je(this._sliceBusinessHours),this.sliceDateSelection=je(this._sliceDateSpan),this.sliceEventStore=je(this._sliceEventStore),this.sliceEventDrag=je(this._sliceInteraction),this.sliceEventResize=je(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,i,r,...o){let{eventUiBases:s}=e,l=this.sliceEventStore(e.eventStore,s,t,i,...o);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,i,s,r,...o),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,i,r,...o),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,s,t,i,...o),eventResize:this.sliceEventResize(e.eventResize,s,t,i,...o),eventSelection:e.eventSelection}}sliceNowDate(e,t,i,r,...o){return this._sliceDateSpan({range:{start:e,end:Rr(e,1)},allDay:!1},t,i,{},r,...o)}_sliceBusinessHours(e,t,i,r,...o){return e?this._sliceEventStore(pa(e,e_(t,!!i),r),{},t,i,...o).bg:[]}_sliceEventStore(e,t,i,r,...o){if(e){let s=f_(e,t,e_(i,!!r),r);return{bg:this.sliceEventRanges(s.bg,o),fg:this.sliceEventRanges(s.fg,o)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,i,r,...o){if(!e)return null;let s=f_(e.mutatedEvents,t,e_(i,!!r),r);return{segs:this.sliceEventRanges(s.fg,o),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,i,r,o,...s){if(!e)return[];let l=e_(t,!!i),c=uo(e.range,l);if(c){e=Object.assign(Object.assign({},e),{range:c});let d=e6(e,r,o),h=this.sliceRange(e.range,...s);for(let p of h)p.eventRange=d;return h}return[]}sliceEventRanges(e,t){let i=[];for(let r of e)i.push(...this.sliceEventRange(r,t));return i}sliceEventRange(e,t){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:Lt(i.start,1)});let r=this.sliceRange(i,...t);for(let o of r)o.eventRange=e,o.isStart=e.isStart&&o.isStart,o.isEnd=e.isEnd&&o.isEnd;return r}};function e_(n,e){let t=n.activeRange;return e?t:{start:Rr(t.start,n.slotMinTime.milliseconds),end:Rr(t.end,n.slotMaxTime.milliseconds-864e5)}}function L_(n,e,t){let{instances:i}=n.mutatedEvents;for(let r in i)if(!fc(e.validRange,i[r].range))return!1;return UN({eventDrag:n},t)}function BS(n,e,t){return fc(e.validRange,n.range)?UN({dateSelection:n},t):!1}function UN(n,e){let t=e.getCurrentData(),i=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||HN)(i,e)}function HN(n,e,t={},i){return!(n.eventDrag&&!u6(n,e,t,i)||n.dateSelection&&!d6(n,e,t,i))}function u6(n,e,t,i){let r=e.getCurrentData(),o=n.eventDrag,s=o.mutatedEvents,l=s.defs,c=s.instances,d=h_(l,o.isEvent?n.eventUiBases:{"":r.selectionConfig});i&&(d=kr(d,i));let h=NW(n.eventStore,o.affectedEvents.instances),p=h.defs,y=h.instances,_=h_(p,n.eventUiBases);for(let S in c){let I=c[S],x=I.range,T=d[I.defId],H=l[I.defId];if(!$N(T.constraints,x,h,n.businessHours,e))return!1;let{eventOverlap:q}=e.options,U=typeof q=="function"?q:null;for(let $e in y){let pe=y[$e];if(D_(x,pe.range)&&(_[pe.defId].overlap===!1&&o.isEvent||T.overlap===!1||U&&!U(new rt(e,p[pe.defId],pe),new rt(e,H,I))))return!1}let ae=r.eventStore;for(let $e of T.allows){let pe=Object.assign(Object.assign({},t),{range:I.range,allDay:H.allDay}),le=ae.defs[H.defId],It=ae.instances[S],yn;if(le?yn=new rt(e,le,It):yn=new rt(e,H),!$e(xS(pe,e),yn))return!1}}return!0}function d6(n,e,t,i){let r=n.eventStore,o=r.defs,s=r.instances,l=n.dateSelection,c=l.range,{selectionConfig:d}=e.getCurrentData();if(i&&(d=i(d)),!$N(d.constraints,c,r,n.businessHours,e))return!1;let{selectOverlap:h}=e.options,p=typeof h=="function"?h:null;for(let y in s){let _=s[y];if(D_(c,_.range)&&(d.overlap===!1||p&&!p(new rt(e,o[_.defId],_),null)))return!1}for(let y of d.allows){let _=Object.assign(Object.assign({},t),l);if(!y(xS(_,e),null))return!1}return!0}function $N(n,e,t,i,r){for(let o of n)if(!h6(f6(o,e,t,i,r),e))return!1;return!0}function f6(n,e,t,i,r){return n==="businessHours"?jE(pa(i,e,r)):typeof n=="string"?jE(M_(t,o=>o.groupId===n)):typeof n=="object"&&n?jE(pa(n,e,r)):[]}function jE(n){let{instances:e}=n,t=[];for(let i in e)t.push(e[i].range);return t}function h6(n,e){for(let t of n)if(fc(t,e))return!0;return!1}var t_=/^(visible|hidden)$/,__=class extends pt{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,ui(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:i}=e,r=t&&i,o=["fc-scroller"];return t&&(i?o.push("fc-scroller-liquid-absolute"):o.push("fc-scroller-liquid")),V("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(t_.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(t_.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return t_.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return t_.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}},Xi=class{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,i)=>{let{depths:r,currentMap:o}=this,s=!1,l=!1;t!==null?(s=i in o,o[i]=t,r[i]=(r[i]||0)+1,l=!0):(r[i]-=1,r[i]||(delete o[i],delete this.callbackMap[i],s=!0)),this.masterCallback&&(s&&this.masterCallback(null,String(i)),l&&this.masterCallback(t,String(i)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),t}collect(e,t,i){return vN(this.currentMap,e,t,i)}getAll(){return S_(this.currentMap)}};function WN(n){let e=sN(n,".fc-scrollgrid-shrink"),t=0;for(let i of e)t=Math.max(t,R$(i));return Math.ceil(t)}function zS(n,e){return n.liquid&&e.liquid}function GN(n,e){return e.maxHeight!=null||zS(n,e)}function qN(n,e,t,i){let{expandRows:r}=t;return typeof e.content=="function"?e.content(t):V("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:r?t.clientHeight:""}},t.tableColGroupNode,V(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function ZN(n,e){return Or(n,e,Jn)}function YN(n,e){let t=[];for(let i of n){let r=i.span||1;for(let o=0;o<r;o+=1)t.push(V("col",{style:{width:i.width==="shrink"?QN(e):i.width||"",minWidth:i.minWidth||""}}))}return V("colgroup",{},...t)}function QN(n){return n??4}function KN(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function JN(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function XN(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function US(n){return V("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function F_(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function HS(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}var ac=class extends pt{constructor(){super(...arguments),this.processCols=je(e=>e,ZN),this.renderMicroColGroup=je(YN),this.scrollerRefs=new Xi,this.scrollerElRefs=new Xi(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:i}=this,r=e.sections||[],o=this.processCols(e.cols),s=this.renderMicroColGroup(o,t.shrinkWidth),l=JN(e.liquid,i);e.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let c=r.length,d=0,h,p=[],y=[],_=[];for(;d<c&&(h=r[d]).type==="header";)p.push(this.renderSection(h,s,!0)),d+=1;for(;d<c&&(h=r[d]).type==="body";)y.push(this.renderSection(h,s,!1)),d+=1;for(;d<c&&(h=r[d]).type==="footer";)_.push(this.renderSection(h,s,!0)),d+=1;let S=!OS(),I={role:"rowgroup"};return V("table",{role:"grid",className:l.join(" "),style:{height:e.height}},!!(!S&&p.length)&&V("thead",I,...p),!!(!S&&y.length)&&V("tbody",I,...y),!!(!S&&_.length)&&V("tfoot",I,..._),S&&V("tbody",I,...p,...y,..._))}renderSection(e,t,i){return"outerContent"in e?V(nt,{key:e.key},e.outerContent):V("tr",{key:e.key,role:"presentation",className:XN(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,i))}renderChunkTd(e,t,i,r){if("outerContent"in i)return i.outerContent;let{props:o}=this,{forceYScrollbars:s,scrollerClientWidths:l,scrollerClientHeights:c}=this.state,d=GN(o,e),h=zS(o,e),p=o.liquid?s?"scroll":d?"auto":"hidden":"visible",y=e.key,_=qN(e,i,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!o.collapsibleWidth&&l[y]!==void 0?l[y]:null,clientHeight:c[y]!==void 0?c[y]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return V(r?"th":"td",{ref:i.elRef,role:"presentation"},V("div",{className:`fc-scroller-harness${h?" fc-scroller-harness-liquid":""}`},V(__,{ref:this.scrollerRefs.createRef(y),elRef:this.scrollerElRefs.createRef(y),overflowY:p,overflowX:o.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:h,liquidIsAbsolute:!0},_)))}_handleScrollerEl(e,t){let i=p6(this.props.sections,t);i&&ui(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return KN(this.props.cols)?WN(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=LN(),{scrollerRefs:t,scrollerElRefs:i}=this,r=!1,o={},s={};for(let l in t.currentMap){let c=t.currentMap[l];if(c&&c.needsYScrolling()){r=!0;break}}for(let l of this.props.sections){let c=l.key,d=i.currentMap[c];if(d){let h=d.parentNode;o[c]=Math.floor(h.getBoundingClientRect().width-(r?e.y:0)),s[c]=Math.floor(h.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:o,scrollerClientHeights:s}}};ac.addStateEquality({scrollerClientWidths:Jn,scrollerClientHeights:Jn});function p6(n,e){for(let t of n)if(t.key===e)return t;return null}var _a=class extends pt{constructor(){super(...arguments),this.buildPublicEvent=je((e,t,i)=>new rt(e,t,i)),this.handleEl=e=>{this.el=e,ui(this.props.elRef,e),e&&eN(e,this.props.seg)}}render(){let{props:e,context:t}=this,{options:i}=t,{seg:r}=e,{eventRange:o}=r,{ui:s}=o,l={event:this.buildPublicEvent(t,o.def,o.instance),view:t.viewApi,timeText:e.timeText,textColor:s.textColor,backgroundColor:s.backgroundColor,borderColor:s.borderColor,isDraggable:!e.disableDragging&&WW(r,t),isStartResizable:!e.disableResizing&&GW(r,t),isEndResizable:!e.disableResizing&&qW(r),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!r.isStart,isEnd:!!r.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return V(Nr,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...ZW(l),...r.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:l,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&eN(this.el,this.props.seg)}},lc=class extends pt{render(){let{props:e,context:t}=this,{options:i}=t,{seg:r}=e,{ui:o}=r.eventRange,s=i.eventTimeFormat||e.defaultTimeFormat,l=P_(r,s,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return V(_a,Object.assign({},e,{elTag:"a",elStyle:{borderColor:o.borderColor,backgroundColor:o.backgroundColor},elAttrs:A_(r,t),defaultGenerator:g6,timeText:l}),(c,d)=>V(nt,null,V(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:d.textColor}}),!!d.isStartResizable&&V("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!d.isEndResizable&&V("div",{className:"fc-event-resizer fc-event-resizer-end"})))}};lc.addPropsEquality({seg:Jn});function g6(n){return V("div",{className:"fc-event-main-frame"},n.timeText&&V("div",{className:"fc-event-time"},n.timeText),V("div",{className:"fc-event-title-container"},V("div",{className:"fc-event-title fc-sticky"},n.event.title||V(nt,null,"\xA0"))))}var m6=Nt({day:"numeric"}),cc=class extends pt{constructor(){super(...arguments),this.refineRenderProps=dc(_6)}render(){let{props:e,context:t}=this,{options:i}=t,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:i.monthStartFormat});return V(Nr,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":df(e.date)}),elClasses:[...O_(r,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:r,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount},e.children)}};function V_(n){return!!(n.dayCellContent||qE("dayCellContent",n))}function _6(n){let{date:e,dateEnv:t,dateProfile:i,isMonthStart:r}=n,o=VS(e,n.todayRange,null,i),s=n.showDayNumber?t.format(e,r?n.monthStartFormat:m6):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},o),{isMonthStart:r,dayNumberText:s}),n.extraRenderProps)}var rf=class extends pt{render(){let{props:e}=this,{seg:t}=e;return V(_a,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:v6,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}};function v6(n){let{title:e}=n.event;return e&&V("div",{className:"fc-event-title"},n.event.title)}function $S(n){return V("div",{className:`fc-${n}`})}var WS=n=>V(po.Consumer,null,e=>{let{dateEnv:t,options:i}=e,{date:r}=n,o=i.weekNumberFormat||n.defaultFormat,s=t.computeWeekNumber(r),l=t.format(r,o),c={num:s,text:l,date:r};return V(Nr,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:y6,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount},n.children)});function y6(n){return n.text}var BE=10,KE=class extends pt{constructor(){super(...arguments),this.state={titleId:ya()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&ui(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{let t=y_(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:i,state:r}=this,o=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return Hk(V("div",Object.assign({},i.extraAttrs,{id:i.id,className:o.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),V("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},V("span",{className:"fc-popover-title",id:r.titleId},i.title),V("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),V("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:i}=this.props,{rootEl:r}=this,o=a6(t);if(o){let s=r.getBoundingClientRect(),l=i?Xt(t,".fc-scrollgrid").getBoundingClientRect().top:o.top,c=e?o.right-s.width:o.left;l=Math.max(l,BE),c=Math.min(c,document.documentElement.clientWidth-BE-s.width),c=Math.max(c,BE);let d=r.offsetParent.getBoundingClientRect();va(r,{top:l-d.top,left:c-d.left})}}},JE=class extends Ji{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:i}=this,{startDate:r,todayRange:o,dateProfile:s}=i,l=t.format(r,e.dayPopoverFormat);return V(cc,{elRef:this.handleRootEl,date:r,dateProfile:s,todayRange:o},(c,d,h)=>V(KE,{elRef:h.ref,id:i.id,title:l,extraClassNames:["fc-more-popover"].concat(h.className||[]),extraAttrs:h,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},V_(e)&&V(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,t,i,r){let{rootEl:o,props:s}=this;return e>=0&&e<i&&t>=0&&t<r?{dateProfile:s.dateProfile,dateSpan:Object.assign({allDay:!s.forceTimed,range:{start:s.startDate,end:s.endDate}},s.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:i,bottom:r},layer:1}:null}},of=class extends pt{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:ya()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&ui(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:i}=this,{moreLinkClick:r}=i.options,o=tN(t).start;function s(l){let{def:c,instance:d,range:h}=l.eventRange;return{event:new rt(i,c,d),start:i.dateEnv.toDate(h.start),end:i.dateEnv.toDate(h.end),isStart:l.isStart,isEnd:l.isEnd}}typeof r=="function"&&(r=r({date:o,allDay:!!t.allDayDate,allSegs:t.allSegs.map(s),hiddenSegs:t.hiddenSegs.map(s),jsEvent:e,view:i.viewApi})),!r||r==="popover"?this.setState({isPopoverOpen:!0}):typeof r=="string"&&i.calendarApi.zoomTo(o,r)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return V(po.Consumer,null,i=>{let{viewApi:r,options:o,calendarApi:s}=i,{moreLinkText:l}=o,{moreCnt:c}=e,d=tN(e),h=typeof l=="function"?l.call(s,c):`+${c} ${l}`,p=uc(o.moreLinkHint,[c],h),y={num:c,shortText:`+${c}`,text:h,view:r};return V(nt,null,!!e.moreCnt&&V(Nr,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),lN(this.handleClick)),{title:p,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:y,generatorName:"moreLinkContent",customGenerator:o.moreLinkContent,defaultGenerator:e.defaultGenerator||b6,classNameGenerator:o.moreLinkClassNames,didMount:o.moreLinkDidMount,willUnmount:o.moreLinkWillUnmount},e.children),t.isPopoverOpen&&V(JE,{id:t.popoverId,startDate:d.start,endDate:d.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Xt(this.linkEl,".fc-view-harness"))}};function b6(n){return n.text}function tN(n){if(n.allDayDate)return{start:n.allDayDate,end:Lt(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:eL(e),end:C6(e)}}function eL(n){return n.reduce(w6).eventRange.range.start}function w6(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function C6(n){return n.reduce(E6).eventRange.range.end}function E6(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}var XE=class{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}},sf=class extends XE{constructor(){super(...arguments),this.map=new Map}handle(e){let{map:t}=this,i=!1;e.isActive?(t.set(e.id,e),i=!0):t.has(e.id)&&(t.delete(e.id),i=!0),i&&this.set(t)}};var S6=[],aL={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},lL=Object.assign(Object.assign({},aL),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function D6(n){let e=n.length>0?n[0].code:"en",t=S6.concat(n),i={en:lL};for(let r of t)i[r.code]=r;return{map:i,defaultCode:e}}function cL(n,e){return typeof n=="object"&&!Array.isArray(n)?uL(n.code,[n.code],n):x6(n,e)}function x6(n,e){let t=[].concat(n||[]),i=I6(t,e)||lL;return uL(n,t,i)}function I6(n,e){for(let t=0;t<n.length;t+=1){let i=n[t].toLocaleLowerCase().split("-");for(let r=i.length;r>0;r-=1){let o=i.slice(0,r).join("-");if(e[o])return e[o]}}return null}function uL(n,e,t){let i=E_([aL,t],["buttonText"]);delete i.code;let{week:r}=i;return delete i.week,{codeArg:n,codes:e,week:r,simpleNumberFormat:new Intl.NumberFormat(n),options:i}}function Vr(n){return{id:ho(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function M6(n,e){let t={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(o){for(let s of o){let l=s.name,c=t[l];c===void 0?(t[l]=s.id,r(s.deps),i=P6(i,s)):c!==s.id&&console.warn(`Duplicate plugin '${l}'`)}}return n&&r(n),r(e),i}function T6(){let n=[],e=[],t;return(i,r)=>((!t||!Or(i,n)||!Or(r,e))&&(t=M6(i,r)),n=i,e=r,t)}function P6(n,e){return{premiumReleaseDate:A6(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function A6(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}var Fr=class extends co{};Fr.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Fr.prototype.baseIconClass="fc-icon";Fr.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Fr.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Fr.prototype.iconOverrideOption="buttonIcons";Fr.prototype.iconOverrideCustomButtonOption="icon";Fr.prototype.iconOverridePrefix="fc-icon-";function R6(n,e){let t={},i;for(i in n)qS(i,t,n,e);for(i in e)qS(i,t,n,e);return t}function qS(n,e,t,i){if(e[n])return e[n];let r=O6(n,e,t,i);return r&&(e[n]=r),r}function O6(n,e,t,i){let r=t[n],o=i[n],s=h=>r&&r[h]!==null?r[h]:o&&o[h]!==null?o[h]:null,l=s("component"),c=s("superType"),d=null;if(c){if(c===n)throw new Error("Can't have a custom view type that references itself");d=qS(c,e,t,i)}return!l&&d&&(l=d.component),l?{type:n,component:l,defaults:Object.assign(Object.assign({},d?d.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},d?d.overrides:{}),o?o.rawOptions:{})}:null}function tL(n){return kr(n,k6)}function k6(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=nL(e):t&&!(t.prototype instanceof pt)&&(t=nL(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function nL(n){return e=>V(po.Consumer,null,t=>V(Nr,{elTag:"div",elClasses:yS(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function N6(n,e,t,i){let r=tL(n),o=tL(e.views),s=R6(r,o);return kr(s,l=>L6(l,o,e,t,i))}function L6(n,e,t,i,r){let o=n.overrides.duration||n.defaults.duration||i.duration||t.duration,s=null,l="",c="",d={};if(o&&(s=F6(o),s)){let y=Bd(s);l=y.unit,y.value===1&&(c=l,d=e[l]?e[l].rawOptions:{})}let h=y=>{let _=y.buttonText||{},S=n.defaults.buttonTextKey;return S!=null&&_[S]!=null?_[S]:_[n.type]!=null?_[n.type]:_[c]!=null?_[c]:null},p=y=>{let _=y.buttonHints||{},S=n.defaults.buttonTextKey;return S!=null&&_[S]!=null?_[S]:_[n.type]!=null?_[n.type]:_[c]!=null?_[c]:null};return{type:n.type,component:n.component,duration:s,durationUnit:l,singleUnit:c,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},d),n.overrides),buttonTextOverride:h(i)||h(t)||n.overrides.buttonText,buttonTextDefault:h(r)||n.defaults.buttonText||h(Jo)||n.type,buttonTitleOverride:p(i)||p(t)||n.overrides.buttonHint,buttonTitleDefault:p(r)||n.defaults.buttonHint||p(Jo)}}var iL={};function F6(n){let e=JSON.stringify(n),t=iL[e];return t===void 0&&(t=He(n),iL[e]=t),t}function V6(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function j6(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function B6(n,e,t){let i=n.initialDate;return i!=null?e.createMarker(i):t.getDateMarker()}function z6(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function U6(n,e,t,i){let r;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||t);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(r=i.buildPrev(n,t),r.isValid)return r;break;case"NEXT":if(r=i.buildNext(n,t),r.isValid)return r;break}return n}function H6(n,e,t){let i=e?e.activeRange:null;return fL({},Q6(n,t),i,t)}function $6(n,e,t,i){let r=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return fL(n,e.sources,r,i);case"REMOVE_EVENT_SOURCE":return G6(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?hL(n,r,i):n;case"FETCH_EVENT_SOURCES":return nD(n,e.sourceIds?mS(e.sourceIds):pL(n,i),r,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return Y6(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function W6(n,e,t){let i=e?e.activeRange:null;return nD(n,pL(n,t),i,!0,t)}function dL(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function fL(n,e,t,i){let r={};for(let o of e)r[o.sourceId]=o;return t&&(r=hL(r,t,i)),Object.assign(Object.assign({},n),r)}function G6(n,e){return lo(n,t=>t.sourceId!==e)}function hL(n,e,t){return nD(n,lo(n,i=>q6(i,e,t)),e,!1,t)}function q6(n,e,t){return gL(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function nD(n,e,t,i,r){let o={};for(let s in n){let l=n[s];e[s]?o[s]=Z6(l,t,i,r):o[s]=l}return o}function Z6(n,e,t,i){let{options:r,calendarApi:o}=i,s=i.pluginHooks.eventSourceDefs[n.sourceDefId],l=ho();return s.fetch({eventSource:n,range:e,isRefetch:t,context:i},c=>{let{rawEvents:d}=c;r.eventSourceSuccess&&(d=r.eventSourceSuccess.call(o,d,c.response)||d),n.success&&(d=n.success.call(o,d,c.response)||d),i.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:l,fetchRange:e,rawEvents:d})},c=>{let d=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(o,c),d=!0),n.failure&&(n.failure(c),d=!0),d||console.warn(c.message,c),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:l,fetchRange:e,error:c})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:l})}function Y6(n,e,t,i){let r=n[e];return r&&t===r.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:i})}):n}function pL(n,e){return lo(n,t=>gL(t,e))}function Q6(n,e){let t=ES(e),i=[].concat(n.eventSources||[]),r=[];n.initialEvents&&i.unshift(n.initialEvents),n.events&&i.unshift(n.events);for(let o of i){let s=CS(o,e,t);s&&r.push(s)}return r}function gL(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function K6(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function J6(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function X6(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function eG(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function tG(n,e,t,i,r){let o=n.headerToolbar?rL(n.headerToolbar,n,e,t,i,r):null,s=n.footerToolbar?rL(n.footerToolbar,n,e,t,i,r):null;return{header:o,footer:s}}function rL(n,e,t,i,r,o){let s={},l=[],c=!1;for(let d in n){let h=n[d],p=nG(h,e,t,i,r,o);s[d]=p.widgets,l.push(...p.viewsWithButtons),c=c||p.hasTitle}return{sectionWidgets:s,viewsWithButtons:l,hasTitle:c}}function nG(n,e,t,i,r,o){let s=e.direction==="rtl",l=e.customButtons||{},c=t.buttonText||{},d=e.buttonText||{},h=t.buttonHints||{},p=e.buttonHints||{},y=n?n.split(" "):[],_=[],S=!1;return{widgets:y.map(x=>x.split(",").map(T=>{if(T==="title")return S=!0,{buttonName:T};let H,q,U,ae,$e,pe;if(H=l[T])U=le=>{H.click&&H.click.call(le.target,le,le.target)},(ae=i.getCustomButtonIconClass(H))||(ae=i.getIconClass(T,s))||($e=H.text),pe=H.hint||H.text;else if(q=r[T]){_.push(T),U=()=>{o.changeView(T)},($e=q.buttonTextOverride)||(ae=i.getIconClass(T,s))||($e=q.buttonTextDefault);let le=q.buttonTextOverride||q.buttonTextDefault;pe=uc(q.buttonTitleOverride||q.buttonTitleDefault||e.viewHint,[le,T],le)}else if(o[T])if(U=()=>{o[T]()},($e=c[T])||(ae=i.getIconClass(T,s))||($e=d[T]),T==="prevYear"||T==="nextYear"){let le=T==="prevYear"?"prev":"next";pe=uc(h[le]||p[le],[d.year||"year","year"],d[T])}else pe=le=>uc(h[T]||p[T],[d[le]||le,le],d[T]);return{buttonName:T,buttonClick:U,buttonIcon:ae,buttonText:$e,buttonHint:pe}})),viewsWithButtons:_,hasTitle:S}}var ZS=class{constructor(e,t,i){this.type=e,this.getCurrentData=t,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}},iG={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}},rG=Vr({name:"array-event-source",eventSourceDefs:[iG]}),oG={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){let{dateEnv:i}=n.context,r=n.eventSource.meta;AS(r.bind(null,PS(n.range,i)),o=>e({rawEvents:o}),t)}},sG=Vr({name:"func-event-source",eventSourceDefs:[oG]}),aG={method:String,extraParams:F,startParam:String,endParam:String,timeZoneParam:String},lG={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){let{meta:i}=n.eventSource,r=uG(i,n.range,n.context);RS(i.method,i.url,r).then(([o,s])=>{e({rawEvents:o,response:s})},t)}},cG=Vr({name:"json-event-source",eventSourceRefiners:aG,eventSourceDefs:[lG]});function uG(n,e,t){let{dateEnv:i,options:r}=t,o,s,l,c,d={};return o=n.startParam,o==null&&(o=r.startParam),s=n.endParam,s==null&&(s=r.endParam),l=n.timeZoneParam,l==null&&(l=r.timeZoneParam),typeof n.extraParams=="function"?c=n.extraParams():c=n.extraParams||{},Object.assign(d,c),d[o]=i.formatIso(e.start),d[s]=i.formatIso(e.end),i.timeZone!=="local"&&(d[l]=i.timeZone),d}var dG={daysOfWeek:F,startTime:He,endTime:He,duration:He,startRecur:F,endRecur:F},fG={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},i;return n.duration&&(i=n.duration),!i&&n.startTime&&n.endTime&&(i=hN(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:i,typeData:t}}return null},expand(n,e,t){let i=uo(e,{start:n.startRecur,end:n.endRecur});return i?pG(n.daysOfWeek,n.startTime,n.dateEnv,t,i):[]}},hG=Vr({name:"simple-recurring-event",recurringTypes:[fG],eventRefiners:dG});function pG(n,e,t,i,r){let o=n?mS(n):null,s=it(r.start),l=r.end,c=[];for(e&&(e.milliseconds<0?l=Lt(l,1):e.milliseconds>=1e3*60*60*24&&(s=Lt(s,-1)));s<l;){let d;(!o||o[s.getUTCDay()])&&(e?d=i.add(s,e):d=s,c.push(i.createMarker(t.toDate(d)))),s=Lt(s,1)}return c}var gG=Vr({name:"change-handler",optionChangeHandlers:{events(n,e){oL([n],e)},eventSources:oL}});function oL(n,e){let t=S_(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let i=[];for(let r of n){let o=!1;for(let s=0;s<t.length;s+=1)if(t[s]._raw===r){t.splice(s,1),o=!0;break}o||i.push(r)}for(let r of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of i)e.calendarApi.addEventSource(r)}function mG(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},PS(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function _G(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Lr(n,e))}var vG=[rG,sG,cG,hG,gG,Vr({name:"misc",isLoadingFuncs:[n=>dL(n.eventSources)],propSetHandlers:{dateProfile:mG,eventStore:_G}})],YS=class{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new fa(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],i;for(;i=e.shift();)this.runTask(i),t.push(i);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}};function yG(n,e,t){let i;return/^(year|month)$/.test(n.currentRangeUnit)?i=n.currentRange:i=n.activeRange,t.formatRange(i.start,i.end,Nt(e.titleFormat||bG(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function bG(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=oc(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}var j_=class{constructor(){this.resetListeners=new Set}handleInput(e,t){let i=this.dateEnv;if(e!==i&&(typeof t=="function"?this.nowFn=t:i||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,i))for(let r of this.resetListeners.values())r()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}},QS=class{constructor(e){this.computeCurrentViewData=je(this._computeCurrentViewData),this.organizeRawLocales=je(D6),this.buildLocale=je(cL),this.buildPluginHooks=T6(),this.buildDateEnv=je(wG),this.buildTheme=je(CG),this.parseToolbars=je(tG),this.buildViewSpecs=je(N6),this.buildDateProfileGenerator=dc(EG),this.buildViewApi=je(SG),this.buildViewUiProps=dc(IG),this.buildEventUiBySource=je(DG,Jn),this.buildEventUiBases=je(xG),this.parseContextBusinessHours=dc(MG),this.buildTitle=je(yG),this.nowManager=new j_,this.emitter=new fo,this.actionRunner=new YS(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=y=>{this.actionRunner.request(y)},this.props=e,this.actionRunner.pause(),this.nowManager=new j_;let t={},i=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),r=i.calendarOptions.initialView||i.pluginHooks.initialView,o=this.computeCurrentViewData(r,i,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(o.options);let s={nowManager:this.nowManager,dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=B6(i.calendarOptions,i.dateEnv,this.nowManager),c=o.dateProfileGenerator.build(l);Ar(c.activeRange,l)||(l=c.currentRange.start);for(let y of i.pluginHooks.contextInit)y(s);let d=H6(i.calendarOptions,c,s),h={dynamicOptionOverrides:t,currentViewType:r,currentDate:l,dateProfile:c,businessHours:this.parseContextBusinessHours(s),eventSources:d,eventUiBases:{},eventStore:jn(),renderableEventStore:jn(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(s).selectionConfig},p=Object.assign(Object.assign({},s),h);for(let y of i.pluginHooks.reducers)Object.assign(h,y(null,null,p));GS(h,s)&&this.emitter.trigger("loading",!0),this.state=h,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:i}=this;t===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:i,emitter:r}=this,o=z6(i.dynamicOptionOverrides,e),s=this.computeOptionsData(t.optionOverrides,o,t.calendarApi),l=V6(i.currentViewType,e),c=this.computeCurrentViewData(l,s,t.optionOverrides,o);t.calendarApi.currentDataManager=this,r.setThisContext(t.calendarApi),r.setOptions(c.options);let d={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:h,dateProfile:p}=i;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(p=c.dateProfileGenerator.build(h)),h=j6(h,e),p=U6(p,e,h,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Ar(p.currentRange,h))&&(h=p.currentRange.start);let y=$6(i.eventSources,e,p,d),_=MN(i.eventStore,e,y,p,d),I=dL(y)&&!c.options.progressiveEventRendering&&i.renderableEventStore||_,{eventUiSingleBase:x,selectionConfig:T}=this.buildViewUiProps(d),H=this.buildEventUiBySource(y),q=this.buildEventUiBases(I.defs,x,H),U={dynamicOptionOverrides:o,currentViewType:l,currentDate:h,dateProfile:p,eventSources:y,eventStore:_,renderableEventStore:I,selectionConfig:T,eventUiBases:q,businessHours:this.parseContextBusinessHours(d),dateSelection:K6(i.dateSelection,e),eventSelection:J6(i.eventSelection,e),eventDrag:X6(i.eventDrag,e),eventResize:eG(i.eventResize,e)},ae=Object.assign(Object.assign({},d),U);for(let le of s.pluginHooks.reducers)Object.assign(U,le(i,e,ae));let $e=GS(i,d),pe=GS(U,d);!$e&&pe?r.trigger("loading",!0):$e&&!pe&&r.trigger("loading",!1),this.state=U,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,i=this.data,r=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),o=this.computeCurrentViewData(t.currentViewType,r,e.optionOverrides,t.dynamicOptionOverrides),s=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,o.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),o),t),l=r.pluginHooks.optionChangeHandlers,c=i&&i.calendarOptions,d=r.calendarOptions;if(c&&c!==d){c.timeZone!==d.timeZone&&(t.eventSources=s.eventSources=W6(s.eventSources,t.dateProfile,s),t.eventStore=s.eventStore=SS(s.eventStore,i.dateEnv,s.dateEnv),t.renderableEventStore=s.renderableEventStore=SS(s.renderableEventStore,i.dateEnv,s.dateEnv));for(let h in l)(this.optionsForHandling.indexOf(h)!==-1||c[h]!==d[h])&&l[h](d[h],s)}this.optionsForHandling=[],e.onData&&e.onData(s)}computeOptionsData(e,t,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:o,localeDefaults:s,availableLocaleData:l,extra:c}=this.processRawCalendarOptions(e,t);sL(c);let d=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,o,l,r.defaultRangeSeparator),h=this.buildViewSpecs(o.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,s),p=this.buildTheme(r,o),y=this.parseToolbars(r,this.stableOptionOverrides,p,h,i);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:o,dateEnv:d,viewSpecs:h,theme:p,toolbarConfig:y,localeDefaults:s,availableRawLocales:l.map}}processRawCalendarOptions(e,t){let{locales:i,locale:r}=w_([Jo,e,t]),o=this.organizeRawLocales(i),s=o.map,l=this.buildLocale(r||o.defaultCode,s).options,c=this.buildPluginHooks(e.plugins||[],vG),d=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hS),pS),gS),c.listenerRefiners),c.optionRefiners),h={},p=w_([Jo,l,e,t]),y={},_=this.currentCalendarOptionsInput,S=this.currentCalendarOptionsRefined,I=!1;for(let x in p)this.optionsForRefining.indexOf(x)===-1&&(p[x]===_[x]||Xo[x]&&x in _&&Xo[x](_[x],p[x]))?y[x]=S[x]:d[x]?(y[x]=d[x](p[x]),I=!0):h[x]=_[x];return I&&(this.currentCalendarOptionsInput=p,this.currentCalendarOptionsRefined=y,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:o,localeDefaults:l,extra:h}}_computeCurrentViewData(e,t,i,r){let o=t.viewSpecs[e];if(!o)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:s,extra:l}=this.processRawViewOptions(o,t.pluginHooks,t.localeDefaults,i,r);sL(l),this.nowManager.handleInput(t.dateEnv,s.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,showNonCurrentDates:s.showNonCurrentDates,dayCount:s.dayCount,dateAlignment:s.dateAlignment,dateIncrement:s.dateIncrement,hiddenDays:s.hiddenDays,weekends:s.weekends,validRangeInput:s.validRange,visibleRangeInput:s.visibleRange,fixedWeekCount:s.fixedWeekCount}),d=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:o,options:s,dateProfileGenerator:c,viewApi:d}}processRawViewOptions(e,t,i,r,o){let s=w_([Jo,e.optionDefaults,i,r,e.optionOverrides,o]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hS),pS),gS),_N),t.listenerRefiners),t.optionRefiners),c={},d=this.currentViewOptionsInput,h=this.currentViewOptionsRefined,p=!1,y={};for(let _ in s)s[_]===d[_]||Xo[_]&&Xo[_](s[_],d[_])?c[_]=h[_]:(s[_]===this.currentCalendarOptionsInput[_]||Xo[_]&&Xo[_](s[_],this.currentCalendarOptionsInput[_])?_ in this.currentCalendarOptionsRefined&&(c[_]=this.currentCalendarOptionsRefined[_]):l[_]?c[_]=l[_](s[_]):y[_]=s[_],p=!0);return p&&(this.currentViewOptionsInput=s,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:y}}};function wG(n,e,t,i,r,o,s,l){let c=cL(e||s.defaultCode,s.map);return new zd({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:c,weekNumberCalculation:t,firstDay:i,weekText:r,cmdFormatter:o.cmdFormatter,defaultSeparator:l})}function CG(n,e){let t=e.themeClasses[n.themeSystem]||Fr;return new t(n)}function EG(n){let e=n.dateProfileGeneratorClass||ha;return new e(n)}function SG(n,e,t){return new ZS(n,e,t)}function DG(n){return kr(n,e=>e.ui)}function xG(n,e,t){let i={"":e};for(let r in n){let o=n[r];o.sourceId&&t[o.sourceId]&&(i[r]=t[o.sourceId])}return i}function IG(n){let{options:e}=n;return{eventUiSingleBase:hc({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:hc({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function GS(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function MG(n){return DS(n.options.businessHours,n)}function sL(n,e){for(let t in n)console.warn(`Unknown option '${t}'`+(e?` for view '${e}'`:""))}var KS=class extends pt{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return V("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:i}=this.context,r=[],o=!0;for(let s of e){let{buttonName:l,buttonClick:c,buttonText:d,buttonIcon:h,buttonHint:p}=s;if(l==="title")o=!1,r.push(V("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let y=l===t.activeButton,_=!t.isTodayEnabled&&l==="today"||!t.isPrevEnabled&&l==="prev"||!t.isNextEnabled&&l==="next",S=[`fc-${l}-button`,i.getClass("button")];y&&S.push(i.getClass("buttonActive")),r.push(V("button",{type:"button",title:typeof p=="function"?p(t.navUnit):p,disabled:_,"aria-pressed":y,className:S.join(" "),onClick:c},d||(h?V("span",{className:h,role:"img"}):"")))}}if(r.length>1){let s=o&&i.getClass("buttonGroup")||"";return V("div",{className:s},...r)}return r[0]}},B_=class extends pt{render(){let{model:e,extraClassName:t}=this.props,i=!1,r,o,s=e.sectionWidgets,l=s.center;return s.left?(i=!0,r=s.left):r=s.start,s.right?(i=!0,o=s.right):o=s.end,V("div",{className:[t||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",l||[]),this.renderSection("end",o||[]))}renderSection(e,t){let{props:i}=this;return V(KS,{key:e,widgetGroups:t,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}},JS=class extends pt{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,ui(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:i}=e,r=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",s="";return i?t.availableWidth!==null?o=t.availableWidth/i:s=`${1/i*100}%`:o=e.height||"",V("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:o,paddingBottom:s}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}},XS=class extends Ki{constructor(e){super(e),this.handleSegClick=(t,i)=>{let{component:r}=this,{context:o}=r,s=go(i);if(s&&r.isValidSegDownEl(t.target)){let l=Xt(t.target,".fc-event-forced-url"),c=l?l.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:i,event:new rt(r.context,s.eventRange.def,s.eventRange.instance),jsEvent:t,view:o.viewApi}),c&&!t.defaultPrevented&&(window.location.href=c)}},this.destroy=nS(e.el,"click",".fc-event",this.handleSegClick)}},eD=class extends Ki{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,i)=>{go(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",t,i))},this.handleSegLeave=(t,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,i))},this.removeHoverListeners=aN(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,i){let{component:r}=this,{context:o}=r,s=go(i);(!t||r.isValidSegDownEl(t.target))&&o.emitter.trigger(e,{el:i,event:new rt(o,s.eventRange.def,s.eventRange.instance),jsEvent:t,view:o.viewApi})}},tD=class extends ff{constructor(){super(...arguments),this.buildViewContext=je(CN),this.buildViewPropTransformers=je(PG),this.buildToolbarProps=je(TG),this.headerRef=ci(),this.footerRef=ci(),this.interactionsStore={},this.state={viewLabelId:ya()},this.registerInteractiveComponent=(e,t)=>{let i=kN(e,t),s=[XS,eD].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(i));this.interactionsStore[e.uid]=s,pc[e.uid]=i},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let i of t)i.destroy();delete this.interactionsStore[e.uid]}delete pc[e.uid]},this.resizeRunner=new fa(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:i}=e,r=!1,o="",s;e.isHeightAuto||e.forPrint?o="":i.height!=null?r=!0:i.contentHeight!=null?o=i.contentHeight:s=Math.max(i.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return V(po.Provider,{value:l},V(gc,{unit:"day"},d=>{let h=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,d,e.viewTitle);return V(nt,null,t.header&&V(B_,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:c},h)),V(JS,{liquid:r,height:o,aspectRatio:s,labeledById:c},this.renderView(e),this.buildAppendContent()),t.footer&&V(B_,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},h)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let i in t)t[i](e[i],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:i}=t.pluginHooks;for(let r in i)t[r]!==e[r]&&i[r](t[r],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(i=>i(e));return V(nt,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:i}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},o=this.buildViewPropTransformers(t.viewPropsTransformers);for(let l of o)Object.assign(r,l.transform(r,e));let s=i.component;return V(s,Object.assign({},r))}};function TG(n,e,t,i,r,o){let s=t.build(r,void 0,!1),l=t.buildPrev(e,i,!1),c=t.buildNext(e,i,!1);return{title:o,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:s.isValid&&!Ar(e.currentRange,r),isPrevEnabled:l.isValid,isNextEnabled:c.isValid}}function PG(n){return n.map(e=>new e)}var z_=class extends Zd{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;Ud(()=>{Go(V(qd,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(r,o,s,l)=>(this.setClassNames(r),this.setHeight(o),V(vS.Provider,{value:this.customContentRenderId},V(tD,Object.assign({isHeightAuto:s,forPrint:l},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Go(null,this.el),this.setClassNames([]),this.setHeight(""))},iN(e),this.el=e,this.renderRunner=new fa(this.handleRenderRequest),new QS({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Ud(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Or(e,this.currentClassNames)){let{classList:t}=this.el;for(let i of this.currentClassNames)t.remove(i);for(let i of e)t.add(i);this.currentClassNames=e}}setHeight(e){tS(this.el,"height",e)}};var RG=["*"],OG=["rootEl"],_c=n=>({$implicit:n});function kG(n,e){if(n&1&&(v(0,"div",2,0),to(2,3),m()),n&2){let t=A();M("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),C(2),M("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vi(4,_c,t.renderProps))}}function NG(n,e){if(n&1&&(v(0,"span",2,0),to(2,3),m()),n&2){let t=A();M("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),C(2),M("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vi(4,_c,t.renderProps))}}function LG(n,e){if(n&1&&(v(0,"a",2,0),to(2,3),m()),n&2){let t=A();M("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),C(2),M("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vi(4,_c,t.renderProps))}}function FG(n,e){if(n&1&&(v(0,"tr",2,0),to(2,3),m()),n&2){let t=A();M("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),C(2),M("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vi(4,_c,t.renderProps))}}function VG(n,e){if(n&1&&(v(0,"th",2,0),to(2,3),m()),n&2){let t=A();M("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),C(2),M("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vi(4,_c,t.renderProps))}}function jG(n,e){if(n&1&&(v(0,"td",2,0),to(2,3),m()),n&2){let t=A();M("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),C(2),M("ngTemplateOutlet",t.template)("ngTemplateOutletContext",vi(4,_c,t.renderProps))}}var BG=["dayHeaderContent"],zG=["dayCellContent"],UG=["weekNumberContent"],HG=["nowIndicatorContent"],$G=["eventContent"],WG=["slotLaneContent"],GG=["slotLabelContent"],qG=["allDayContent"],ZG=["moreLinkContent"],YG=["noEventsContent"],QG=["resourceAreaHeaderContent"],KG=["resourceGroupLabelContent"],JG=["resourceLabelContent"],XG=["resourceLaneContent"],eq=["resourceGroupLaneContent"];function tq(n,e){if(n&1&&oe(0,"transport-container",1),n&2){let t=e.$implicit;M("inPlaceOf",t.containerEl)("reportEl",t.reportNewContainerEl)("elTag",t.elTag)("elClasses",t.elClasses)("elStyle",t.elStyle)("elAttrs",t.elAttrs)("template",t.generatorMeta)("renderProps",t.renderProps)}}var mL={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},nq=["events","eventSources","resources"],iq=Object.prototype.hasOwnProperty;function H_(n){return Array.isArray(n)?n.map(H_):n instanceof Date?new Date(n.valueOf()):typeof n=="object"&&n?vL(n,H_):n}function vL(n,e){let t={};for(let i in n)iq.call(n,i)&&(t[i]=e(n[i],i));return t}function rD(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,i,r;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!rD(n[i],e[i]))return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){var o=r[i];if(!rD(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}var U_=typeof document<"u"?document.createDocumentFragment():null,rq=(()=>{class n{constructor(t){this.element=t}ngAfterViewInit(){U_&&U_.appendChild(this.element.nativeElement)}ngOnDestroy(){U_&&U_.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)($(Xe))},n.\u0275cmp=he({type:n,selectors:[["offscreen-fragment"]],standalone:!1,ngContentSelectors:RG,decls:1,vars:0,template:function(t,i){t&1&&($p(),Wp(0))},encapsulation:2}),n})(),mc=typeof document<"u"?document.createDocumentFragment():null,oq=(()=>{class n{ngAfterViewInit(){let t=this.rootElRef?.nativeElement;_L(t,this.inPlaceOf),iD(t,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(t)}ngOnChanges(t){let i=this.rootElRef?.nativeElement;if(i)if(this.inPlaceOf.parentNode!==mc)_L(i,this.inPlaceOf),iD(i,void 0,this.elAttrs),this.reportEl(i);else{let r=t.elAttrs;r&&iD(i,r.previousValue,r.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===mc&&mc&&mc.removeChild(this.inPlaceOf),this.reportEl(null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=he({type:n,selectors:[["transport-container"]],viewQuery:function(t,i){if(t&1&&vl(OG,5),t&2){let r;Et(r=St())&&(i.rootElRef=r.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},standalone:!1,features:[sn],decls:6,vars:6,consts:[["rootEl",""],[3,"ngIf"],[3,"ngClass","ngStyle"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&z(0,kG,3,6,"ng-template",1)(1,NG,3,6,"ng-template",1)(2,LG,3,6,"ng-template",1)(3,FG,3,6,"ng-template",1)(4,VG,3,6,"ng-template",1)(5,jG,3,6,"ng-template",1),t&2&&(M("ngIf",i.elTag=="div"),C(),M("ngIf",i.elTag=="span"),C(),M("ngIf",i.elTag=="a"),C(),M("ngIf",i.elTag=="tr"),C(),M("ngIf",i.elTag=="th"),C(),M("ngIf",i.elTag=="td"))},dependencies:[et,Eu,Dw,xw],encapsulation:2}),n})();function _L(n,e){e.parentNode?.insertBefore(n,e.nextSibling),mc&&mc.appendChild(e)}function iD(n,e={},t={}){for(let i in e)i in t||(n[i]=null);for(let i in t)n[i]=t[i]}var yL=(()=>{class n{constructor(t,i){this.element=t,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map;let r=new sf;r.subscribe(o=>{this.customRenderingMap=o,this.customRenderingArray=void 0,i.detectChanges()}),this.handleCustomRendering=r.handle.bind(r)}ngAfterViewInit(){let{deepChangeDetection:t}=this,i=W(W({},this.options),this.buildInputOptions());this.optionSnapshot=vL(i,(l,c)=>t&&mL[c]?H_(l):l);let r=this.element.nativeElement,o=this.calendar=new z_(r,W(W({},i),this.buildExtraOptions())),s=r.closest("ion-content");s&&s.componentOnReady?s.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{o.render()})}):o.render(),setTimeout(()=>o.updateSize())}ngDoCheck(){if(this.calendar){let{deepChangeDetection:t,optionSnapshot:i}=this,r=W(W({},this.options),this.buildInputOptions()),o={},s=[];for(let c in r)if(r.hasOwnProperty(c)){let d=r[c];t&&mL[c]?rD(i[c],d)||(i[c]=H_(d),s.push(c)):i[c]!==d&&(i[c]=d,s.push(c)),o[c]=d}let l=Object.keys(i);for(let c of l)c in r||(delete i[c],s.push(c));s.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions(W(W({},o),this.buildExtraOptions()),s))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){let t={};for(let i of nq){let r=this[i];r!=null&&(t[i]=r)}return t}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this,customRenderingReplaces:!0}}trackCustomRendering(t,i){return i.id}}return n.\u0275fac=function(t){return new(t||n)($(Xe),$(fn))},n.\u0275cmp=he({type:n,selectors:[["full-calendar"]],contentQueries:function(t,i,r){if(t&1&&(Qt(r,BG,7),Qt(r,zG,7),Qt(r,UG,7),Qt(r,HG,7),Qt(r,$G,7),Qt(r,WG,7),Qt(r,GG,7),Qt(r,qG,7),Qt(r,ZG,7),Qt(r,YG,7),Qt(r,QG,7),Qt(r,KG,7),Qt(r,JG,7),Qt(r,XG,7),Qt(r,eq,7)),t&2){let o;Et(o=St())&&(i.dayHeaderContent=o.first),Et(o=St())&&(i.dayCellContent=o.first),Et(o=St())&&(i.weekNumberContent=o.first),Et(o=St())&&(i.nowIndicatorContent=o.first),Et(o=St())&&(i.eventContent=o.first),Et(o=St())&&(i.slotLaneContent=o.first),Et(o=St())&&(i.slotLabelContent=o.first),Et(o=St())&&(i.allDayContent=o.first),Et(o=St())&&(i.moreLinkContent=o.first),Et(o=St())&&(i.noEventsContent=o.first),Et(o=St())&&(i.resourceAreaHeaderContent=o.first),Et(o=St())&&(i.resourceGroupLabelContent=o.first),Et(o=St())&&(i.resourceLabelContent=o.first),Et(o=St())&&(i.resourceLaneContent=o.first),Et(o=St())&&(i.resourceGroupLaneContent=o.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},standalone:!1,decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(t,i){t&1&&(v(0,"offscreen-fragment"),z(1,tq,1,8,"transport-container",0),m()),t&2&&(C(),M("ngForOf",i.customRenderings)("ngForTrackBy",i.trackCustomRendering))},dependencies:[rq,oq,at],encapsulation:2}),n})(),bL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zt({type:n}),n.\u0275inj=zt({imports:[[Ue]]}),n})();var oD=class extends Ji{constructor(){super(...arguments),this.headerElRef=ci()}renderSimpleLayout(e,t){let{props:i,context:r}=this,o=[],s=F_(r.options);return e&&o.push({type:"header",key:"header",isSticky:s,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),V(sc,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},V(ac,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:o}))}renderHScrollLayout(e,t,i,r){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{props:s,context:l}=this,c=!s.forPrint&&F_(l.options),d=!s.forPrint&&HS(l.options),h=[];return e&&h.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),h.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),d&&h.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:US}]}),V(sc,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},V(o,{liquid:!s.isHeightAuto&&!s.forPrint,forPrint:s.forPrint,collapsibleWidth:s.forPrint,colGroups:[{cols:[{span:i,minWidth:r}]}],sections:h}))}};function W_(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.row].push(i);return t}function $_(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.firstCol].push(i);return t}function wL(n,e){let t=[];if(n){for(let i=0;i<e;i+=1)t[i]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let i of n.segs)t[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)t[i]=null;return t}var CL=Nt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function EL(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}var G_=class extends pt{render(){let{props:e}=this;return V(lc,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:CL,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}},q_=class extends pt{render(){let{props:e,context:t}=this,{options:i}=t,{seg:r}=e,o=i.eventTimeFormat||CL,s=P_(r,o,t,!0,e.defaultDisplayEventEnd);return V(_a,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:A_(e.seg,t),defaultGenerator:aq,timeText:s,isResizing:!1,isDateSelecting:!1}))}};function aq(n){return V(nt,null,V("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&V("div",{className:"fc-event-time"},n.timeText),V("div",{className:"fc-event-title"},n.event.title||V(nt,null,"\xA0")))}var sD=class extends pt{constructor(){super(...arguments),this.compileSegs=je(lq)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return V(of,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return V(nt,null,t.map(o=>{let s=o.eventRange.instance.instanceId;return V("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:r[s]?"hidden":""}},EL(o)?V(q_,Object.assign({seg:o,isDragging:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},wa(o,e.todayRange))):V(G_,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},wa(o,e.todayRange))))}))}})}};function lq(n){let e=[],t=[];for(let i of n)e.push(i.seg),i.isVisible||t.push(i.seg);return{allSegs:e,invisibleSegs:t}}var cq=Nt({week:"narrow"}),aD=class extends Ji{constructor(){super(...arguments),this.rootElRef=ci(),this.state={dayNumberId:ya()},this.handleRootEl=e=>{ui(this.rootElRef,e),ui(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:r}=this,{options:o,dateEnv:s}=e,{date:l,dateProfile:c}=t,d=t.showDayNumber&&dq(l,c.currentRange,s);return V(cc,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:uq,date:l,dateProfile:c,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:d,extraRenderProps:t.extraRenderProps},(h,p)=>V("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&V(WS,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:_f(e,l,"week"),date:l,defaultFormat:cq}),!p.isDisabled&&(t.showDayNumber||V_(o)||t.forceDayTop)?V("div",{className:"fc-daygrid-day-top"},V(h,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},_f(e,l)),{id:i.dayNumberId})})):t.showDayNumber?V("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},V("a",{className:"fc-daygrid-day-number"},"\xA0")):void 0,V("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,V("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},V(sD,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),V("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}};function uq(n){return n.dayNumberText||V(nt,null,"\xA0")}function dq(n,e,t){let{start:i,end:r}=e,o=Rr(r,-1),s=t.getYear(i),l=t.getMonth(i),c=t.getYear(o),d=t.getMonth(o);return!(s===c&&l===d)&&(n.valueOf()===i.valueOf()||t.getDay(n)===1&&n.valueOf()<r.valueOf())}function SL(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function DL(n){return SL(n)+":"+n.lastCol}function fq(n,e,t,i,r,o,s){let l=new lD(T=>{let H=n[T.index].eventRange.instance.instanceId+":"+T.span.start+":"+(T.span.end-1);return r[H]||1});l.allowReslicing=!0,l.strictOrder=i,e===!0||t===!0?(l.maxCoord=o,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof t=="number"&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let c=[],d=[];for(let T=0;T<n.length;T+=1){let H=n[T],q=DL(H);r[q]!=null?c.push({index:T,span:{start:H.firstCol,end:H.lastCol+1}}):d.push(H)}let h=l.addSegs(c),p=l.toRects(),{singleColPlacements:y,multiColPlacements:_,leftoverMargins:S}=hq(p,n,s),I=[],x=[];for(let T of d){_[T.firstCol].push({seg:T,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let H=T.firstCol;H<=T.lastCol;H+=1)y[H].push({seg:vc(T,H,H+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let T=0;T<s.length;T+=1)I.push(0);for(let T of h){let H=n[T.index],q=T.span;_[q.start].push({seg:vc(H,q.start,q.end,s),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let U=q.start;U<q.end;U+=1)I[U]+=1,y[U].push({seg:vc(H,U,U+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let T=0;T<s.length;T+=1)x.push(S[T]);return{singleColPlacements:y,multiColPlacements:_,moreCnts:I,moreMarginTops:x}}function hq(n,e,t){let i=pq(n,t.length),r=[],o=[],s=[];for(let l=0;l<t.length;l+=1){let c=i[l],d=[],h=0,p=0;for(let _ of c){let S=e[_.index];d.push({seg:vc(S,l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:_.levelCoord,marginTop:_.levelCoord-h}),h=_.levelCoord+_.thickness}let y=[];h=0,p=0;for(let _ of c){let S=e[_.index],I=_.span.end-_.span.start>1,x=_.span.start===l;p+=_.levelCoord-h,h=_.levelCoord+_.thickness,I?(p+=_.thickness,x&&y.push({seg:vc(S,_.span.start,_.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:_.levelCoord,marginTop:0})):x&&(y.push({seg:vc(S,_.span.start,_.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:_.levelCoord,marginTop:p}),p=0)}r.push(d),o.push(y),s.push(p)}return{singleColPlacements:r,multiColPlacements:o,leftoverMargins:s}}function pq(n,e){let t=[];for(let i=0;i<e;i+=1)t.push([]);for(let i of n)for(let r=i.span.start;r<i.span.end;r+=1)t[r].push(i);return t}function vc(n,e,t,i){if(n.firstCol===e&&n.lastCol===t-1)return n;let r=n.eventRange,o=r.range,s=uo(o,{start:i[e].date,end:Lt(i[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:s},isStart:n.isStart&&s.start.valueOf()===o.start.valueOf(),isEnd:n.isEnd&&s.end.valueOf()===o.end.valueOf()})}var lD=class extends Kd{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){let t=super.addSegs(e),{entriesByLevel:i}=this,r=o=>!this.forceHidden[ma(o)];for(let o=0;o<i.length;o+=1)i[o]=i[o].filter(r);return t}handleInvalidInsertion(e,t,i){let{entriesByLevel:r,forceHidden:o}=this,{touchingEntry:s,touchingLevel:l,touchingLateral:c}=e;if(this.hiddenConsumes&&s){let d=ma(s);if(!o[d])if(this.allowReslicing){let h=Object.assign(Object.assign({},s),{span:N_(s.span,t.span)}),p=ma(h);o[p]=!0,r[l][c]=h,i.push(h),this.splitEntry(s,t,i)}else o[d]=!0,i.push(s)}super.handleInvalidInsertion(e,t,i)}},Z_=class extends Ji{constructor(){super(...arguments),this.cellElRefs=new Xi,this.frameElRefs=new Xi,this.fgElRefs=new Xi,this.segHarnessRefs=new Xi,this.rootElRef=ci(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:r}=i,o=e.cells.length,s=$_(e.businessHourSegs,o),l=$_(e.bgEventSegs,o),c=$_(this.getHighlightSegs(),o),d=$_(this.getMirrorSegs(),o),{singleColPlacements:h,multiColPlacements:p,moreCnts:y,moreMarginTops:_}=fq(IS(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),S=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return V("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((I,x)=>{let T=this.renderFgSegs(x,e.forPrint?h[x]:p[x],e.todayRange,S),H=this.renderFgSegs(x,gq(d[x],p),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return V(aD,{key:I.key,elRef:this.cellElRefs.createRef(I.key),innerElRef:this.frameElRefs.createRef(I.key),dateProfile:e.dateProfile,date:I.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&x===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:I.extraRenderProps,extraDataAttrs:I.extraDataAttrs,extraClassNames:I.extraClassNames,extraDateSpan:I.extraDateSpan,moreCnt:y[x],moreMarginTop:_[x],singlePlacements:h[x],fgContentElRef:this.fgElRefs.createRef(I.key),fgContent:V(nt,null,V(nt,null,T),V(nt,null,H)),bgContent:V(nt,null,this.renderFillSegs(c[x],"highlight"),this.renderFillSegs(s[x],"non-business"),this.renderFillSegs(l[x],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let i=this.props;this.updateSizing(!Jn(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,r,o,s,l){let{context:c}=this,{eventSelection:d}=this.props,{framePositions:h}=this.state,p=this.props.cells.length===1,y=o||s||l,_=[];if(h)for(let S of t){let{seg:I}=S,{instanceId:x}=I.eventRange.instance,T=S.isVisible&&!r[x],H=S.isAbsolute,q="",U="";H&&(c.isRtl?(U=0,q=h.lefts[I.lastCol]-h.lefts[I.firstCol]):(q=0,U=h.rights[I.firstCol]-h.rights[I.lastCol])),_.push(V("div",{className:"fc-daygrid-event-harness"+(H?" fc-daygrid-event-harness-abs":""),key:SL(I),ref:y?null:this.segHarnessRefs.createRef(DL(I)),style:{visibility:T?"":"hidden",marginTop:H?"":S.marginTop,top:H?S.absoluteTop:"",left:q,right:U}},EL(I)?V(q_,Object.assign({seg:I,isDragging:o,isSelected:x===d,defaultDisplayEventEnd:p},wa(I,i))):V(G_,Object.assign({seg:I,isDragging:o,isResizing:s,isDateSelecting:l,isSelected:x===d,defaultDisplayEventEnd:p},wa(I,i)))))}return _}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:r}=this.props,{framePositions:o}=this.state,s=[];if(o)for(let l of e){let c=i?{right:0,left:o.lefts[l.lastCol]-o.lefts[l.firstCol]}:{left:0,right:o.rights[l.firstCol]-o.rights[l.lastCol]};s.push(V("div",{key:MS(l.eventRange),className:"fc-daygrid-bg-harness",style:c},t==="bg-event"?V(rf,Object.assign({seg:l},wa(l,r))):$S(t)))}return V(nt,{},...s)}updateSizing(e){let{props:t,state:i,frameElRefs:r}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let c=t.cells.map(d=>r.currentMap[d.key]);if(c.length){let d=this.rootElRef.current,h=new Ko(d,c,!0,!1);(!i.framePositions||!i.framePositions.similarTo(h))&&this.setState({framePositions:new Ko(d,c,!0,!1)})}}let o=this.state.segHeights,s=this.querySegHeights(),l=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},o),s),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let r=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,r)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}};Z_.addStateEquality({segHeights:Jn});function gq(n,e){if(!n.length)return[];let t=mq(e);return n.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:t[i.eventRange.instance.instanceId],marginTop:0}))}function mq(n){let e={};for(let t of n)for(let i of t)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}var cD=class extends Ji{constructor(){super(...arguments),this.splitBusinessHourSegs=je(W_),this.splitBgEventSegs=je(_q),this.splitFgEventSegs=je(W_),this.splitDateSelectionSegs=je(W_),this.splitEventDrag=je(wL),this.splitEventResize=je(wL),this.rowRefs=new Xi}render(){let{props:e,context:t}=this,i=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,i),o=this.splitBgEventSegs(e.bgEventSegs,i),s=this.splitFgEventSegs(e.fgEventSegs,i),l=this.splitDateSelectionSegs(e.dateSelectionSegs,i),c=this.splitEventDrag(e.eventDrag,i),d=this.splitEventResize(e.eventResize,i),h=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return V(gc,{unit:"day"},(p,y)=>V(nt,null,e.cells.map((_,S)=>V(Z_,{ref:this.rowRefs.createRef(S),key:_.length?_[0].date.toISOString():S,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:y,dateProfile:e.dateProfile,cells:_,renderIntro:e.renderRowIntro,businessHourSegs:r[S],eventSelection:e.eventSelection,bgEventSegs:o[S],fgEventSegs:s[S],dateSelectionSegs:l[S],eventDrag:c[S],eventResize:d[S],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:h,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){let e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Ko(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Ko(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:r}=this,o=i.leftToIndex(e),s=r.topToIndex(t);if(s!=null&&o!=null){let l=this.props.cells[s][o];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(s,o),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(s,o),rect:{left:i.lefts[o],right:i.rights[o],top:r.tops[s],bottom:r.bottoms[s]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date,r=Lt(i,1);return{start:i,end:r}}};function _q(n,e){return W_(n.filter(vq),e)}function vq(n){return n.eventRange.def.allDay}var uD=class extends Ji{constructor(){super(...arguments),this.elRef=ci(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:r}=e,o=i===!0||t===!0;o&&!r&&(o=!1,t=null,i=null);let s=["fc-daygrid-body",o?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return V("div",{ref:this.elRef,className:s.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},V("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,V("tbody",{role:"presentation"},V(cD,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){let e=yq(this.elRef.current,this.props.dateProfile);if(e){let t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),r=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=r?r+1:0}this.needsScrollReset=!1}}};function yq(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${dS(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${df(e.currentDate)}"]`)),t}var dD=class extends nf{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}},fD=class extends Ji{constructor(){super(...arguments),this.slicer=new dD,this.tableRef=ci()}render(){let{props:e,context:t}=this;return V(uD,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}},Y_=class extends oD{constructor(){super(...arguments),this.buildDayTableModel=je(bq),this.headerRef=ci(),this.tableRef=ci()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,r=this.buildDayTableModel(i.dateProfile,t),o=e.dayHeaders&&V(Xd,{ref:this.headerRef,dateProfile:i.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),s=l=>V(fD,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:r,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(o,s,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(o,s)}};function bq(n,e){let t=new ef(n.renderRange,e);return new tf(t,/year|month|week/.test(n.currentRangeUnit))}var Q_=class extends ha{buildRenderRange(e,t,i){let r=super.buildRenderRange(e,t,i),{props:o}=this;return wq({currentRange:r,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:o.fixedWeekCount,dateEnv:o.dateEnv})}};function wq(n){let{dateEnv:e,currentRange:t}=n,{start:i,end:r}=t,o;if(n.snapToWeek&&(i=e.startOfWeek(i),o=e.startOfWeek(r),o.valueOf()!==r.valueOf()&&(r=b_(o,1))),n.fixedWeekCount){let s=e.startOfWeek(e.startOfMonth(Lt(t.end,-1))),l=Math.ceil(cS(s,r));r=b_(r,6-l)}return{start:i,end:r}}var Cq=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';v_(Cq);var xL=Vr({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:Y_,dateProfileGeneratorClass:Q_},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});yf.touchMouseIgnoreWait=500;var hD=0,K_=0,pD=!1,J_=class{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&Eq(t)&&this.tryStart(t)){let i=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let i=this.createEventFromMouse(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let i=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let r=t.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let i=this.createEventFromTouch(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=t=>{if(this.isDragging){let i=t.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,Sq()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,r=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:r,deltaX:i-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=e,this.emitter=new fo,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),Dq()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),xq()}tryStart(e){let t=this.querySubjectEl(e),i=e.target;return t&&(!this.handleSelector||Xt(i,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){pD=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Xt(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return hD||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(pD=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:r}}createEventFromTouch(e,t){let i=e.touches,r,o,s=0,l=0;return i&&i.length?(r=i[0].pageX,o=i[0].pageY):(r=e.pageX,o=e.pageY),t?(this.origPageX=r,this.origPageY=o):(s=r-this.origPageX,l=o-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:o,deltaX:s,deltaY:l}}};function Eq(n){return n.button===0&&!n.ctrlKey}function Sq(){hD+=1,setTimeout(()=>{hD-=1},yf.touchMouseIgnoreWait)}function Dq(){K_+=1,K_===1&&window.addEventListener("touchmove",ML,{passive:!1})}function xq(){K_-=1,K_||window.removeEventListener("touchmove",ML,{passive:!1})}function ML(n){pD&&n.preventDefault()}var gD=class{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",va(i,{left:r.left,top:r.top}),iS(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(af(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&va(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),va(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}},X_=class extends ga{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}},ev=class extends X_{constructor(e,t){super(new Yd(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return jS(this.scrollController.el)}},mD=class extends X_{constructor(e){super(new Qd,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}},IL=typeof performance=="function"?performance.now:Date.now,_D=class{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=IL();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.scrollX,r=t-window.scrollY,o=this.pointerScreenY===null?0:r-this.pointerScreenY,s=this.pointerScreenX===null?0:i-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),s<0?this.everMovedLeft=!0:s>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(IL()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:r}=this,o=r-e.distance,s=o*o/(r*r)*this.maxVelocity*t,l=1;switch(e.name){case"left":l=-1;case"right":i.setScrollLeft(i.getScrollLeft()+s*l);break;case"top":l=-1;case"bottom":i.setScrollTop(i.getScrollTop()+s*l);break}}computeBestEdge(e,t){let{edgeThreshold:i}=this,r=null,o=this.scrollCaches||[];for(let s of o){let l=s.clientRect,c=e-l.left,d=l.right-e,h=t-l.top,p=l.bottom-t;c>=0&&d>=0&&h>=0&&p>=0&&(h<=i&&this.everMovedUp&&s.canScrollUp()&&(!r||r.distance>h)&&(r={scrollCache:s,name:"top",distance:h}),p<=i&&this.everMovedDown&&s.canScrollDown()&&(!r||r.distance>p)&&(r={scrollCache:s,name:"bottom",distance:p}),c<=i&&this.everMovedLeft&&s.canScrollLeft()&&(!r||r.distance>c)&&(r={scrollCache:s,name:"left",distance:c}),d<=i&&this.everMovedRight&&s.canScrollRight()&&(!r||r.distance>d)&&(r={scrollCache:s,name:"right",distance:d}))}return r}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new mD(!1):new ev(t,!1))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)typeof i=="object"?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}},Ca=class extends Jd{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,rS(document.body),sS(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let o=this.minDistance,s,{deltaX:l,deltaY:c}=r;s=l*l+c*c,s>=o*o&&this.handleDistanceSurpassed(r)}this.isDragging&&(r.origEvent.type!=="scroll"&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,oS(document.body),aS(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new J_(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new gD,this.autoScroller=new _D}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}},vD=class{constructor(e){this.el=e,this.origRect=vf(e),this.scrollCaches=k_(e).map(t=>new ev(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let r of this.scrollCaches)if(!Iq(r.getEventTarget())&&!kS(i,r.clientRect))return!1;return!0}};function Iq(n){let e=n.tagName;return e==="HTML"||e==="BODY"}var yc=class{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):r.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new fo}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},i=t,r=e.subjectEl,o;r instanceof HTMLElement&&(o=vf(r),i=NS(i,o));let s=this.initialHit=this.queryHitForOffset(i.left,i.top);if(s){if(this.useSubjectCenter&&o){let l=R_(o,s.rect);l&&(i=LS(l))}this.coordAdjust=FS(i,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!tv(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=kr(this.droppableStore,e=>(e.component.prepareHits(),new vD(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:r}=this,o=null;for(let s in i){let l=i[s].component,c=r[s];if(c&&c.isWithinClipping(e,t)){let d=c.computeLeft(),h=c.computeTop(),p=e-d,y=t-h,{origRect:_}=c,S=_.right-_.left,I=_.bottom-_.top;if(p>=0&&p<S&&y>=0&&y<I){let x=l.queryHit(p,y,S,I);x&&fc(x.dateProfile.activeRange,x.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(p+d-window.scrollX,y+h-window.scrollY)))&&(!o||x.layer>o.layer)&&(x.componentId=s,x.context=l.context,x.rect.left+=d,x.rect.right+=d,x.rect.top+=h,x.rect.bottom+=h,o=x)}}}return o}};function tv(n,e){return!n&&!e?!0:!!n!=!!e?!1:TS(n.dateSpan,e.dateSpan)}function TL(n,e){let t={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(t,i(n,e));return Object.assign(t,Mq(n,e.dateEnv)),t}function Mq(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}var yD=class extends Ki{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:r}=this,o=i.origEvent.target;r.setIgnoreMove(!this.component.isValidDateDownEl(o))},this.handleDragEnd=i=>{let{component:r}=this,{pointer:o}=this.dragging;if(!o.wasTouchScroll){let{initialHit:s,finalHit:l}=this.hitDragging;if(s&&l&&tv(s,l)){let{context:c}=r,d=Object.assign(Object.assign({},TL(s.dateSpan,c)),{dayEl:s.dayEl,jsEvent:i.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",d)}}},this.dragging=new Ca(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new yc(this.dragging,mf(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},bD=class extends Ki{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=s=>{let{component:l,dragging:c}=this,{options:d}=l.context,h=d.selectable&&l.isValidDateDownEl(s.origEvent.target);c.setIgnoreMove(!h),c.delay=s.isTouch?Tq(l):null},this.handleDragStart=s=>{this.component.context.calendarApi.unselect(s)},this.handleHitUpdate=(s,l)=>{let{context:c}=this.component,d=null,h=!1;if(s){let p=this.hitDragging.initialHit;s.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,s)||(d=Pq(p,s,c.pluginHooks.dateSelectionTransformers)),(!d||!BS(d,s.dateProfile,c))&&(h=!0,d=null)}d?c.dispatch({type:"SELECT_DATES",selection:d}):l||c.dispatch({type:"UNSELECT_DATES"}),h?cf():uf(),l||(this.dragSelection=d)},this.handlePointerUp=s=>{this.dragSelection&&(T_(this.dragSelection,s,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,r=this.dragging=new Ca(e.el);r.touchScrollAllowed=!1,r.minDistance=i.selectMinDistance||0,r.autoScroller.isEnabled=i.dragScroll;let o=this.hitDragging=new yc(this.dragging,mf(e));o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}};function Tq(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function Pq(n,e,t){let i=n.dateSpan,r=e.dateSpan,o=[i.range.start,i.range.end,r.range.start,r.range.end];o.sort(lS);let s={};for(let l of t){let c=l(n,e);if(c===!1)return null;c&&Object.assign(s,c)}return s.range={start:o[0],end:o[3]},s.allDay=i.allDay,s}var PL=(()=>{class n extends Ki{constructor(t){super(t),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let c=l.origEvent.target,{component:d,dragging:h}=this,{mirror:p}=h,{options:y}=d.context,_=d.context;this.subjectEl=l.subjectEl;let S=this.subjectSeg=go(l.subjectEl),x=(this.eventRange=S.eventRange).instance.instanceId;this.relevantEvents=pf(_.getCurrentData().eventStore,x),h.minDistance=l.isTouch?0:y.eventDragMinDistance,h.delay=l.isTouch&&x!==d.props.eventSelection?Rq(d):null,y.fixedMirrorParent?p.parentNode=y.fixedMirrorParent:p.parentNode=Xt(c,".fc"),p.revertDuration=y.dragRevertDuration;let T=d.isValidSegDownEl(c)&&!Xt(c,".fc-event-resizer");h.setIgnoreMove(!T),this.isDragging=T&&l.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=l=>{let c=this.component.context,d=this.eventRange,h=d.instance.instanceId;l.isTouch?h!==this.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:h}):c.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(c.calendarApi.unselect(l),c.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new rt(c,d.def,d.instance),jsEvent:l.origEvent,view:c.viewApi}))},this.handleHitUpdate=(l,c)=>{if(!this.isDragging)return;let d=this.relevantEvents,h=this.hitDragging.initialHit,p=this.component.context,y=null,_=null,S=null,I=!1,x={affectedEvents:d,mutatedEvents:jn(),isEvent:!0};if(l){y=l.context;let T=y.options;p===y||T.editable&&T.droppable?(_=Aq(h,l,this.eventRange.instance.range.start,y.getCurrentData().pluginHooks.eventDragMutationMassagers),_&&(S=gf(d,y.getCurrentData().eventUiBases,_,y),x.mutatedEvents=S,L_(x,l.dateProfile,y)||(I=!0,_=null,S=null,x.mutatedEvents=jn()))):y=null}this.displayDrag(y,x),I?cf():uf(),c||(p===y&&tv(h,l)&&(_=null),this.dragging.setMirrorNeedsRevert(!_),this.dragging.setMirrorIsVisible(!l||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=y,this.validMutation=_,this.mutatedRelevantEvents=S)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=l=>{if(this.isDragging){let c=this.component.context,d=c.viewApi,{receivingContext:h,validMutation:p}=this,y=this.eventRange.def,_=this.eventRange.instance,S=new rt(c,y,_),I=this.relevantEvents,x=this.mutatedRelevantEvents,{finalHit:T}=this.hitDragging;if(this.clearDrag(),c.emitter.trigger("eventDragStop",{el:this.subjectEl,event:S,jsEvent:l.origEvent,view:d}),p){if(h===c){let H=new rt(c,x.defs[y.defId],_?x.instances[_.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:x});let q={oldEvent:S,event:H,relatedEvents:Lr(x,c,_),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:I})}},U={};for(let ae of c.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(U,ae(p,c));c.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},q),U),{el:l.subjectEl,delta:p.datesDelta,jsEvent:l.origEvent,view:d})),c.emitter.trigger("eventChange",q)}else if(h){let H={event:S,relatedEvents:Lr(I,c,_),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:I})}};c.emitter.trigger("eventLeave",Object.assign(Object.assign({},H),{draggedEl:l.subjectEl,view:d})),c.dispatch({type:"REMOVE_EVENTS",eventStore:I}),c.emitter.trigger("eventRemove",H);let q=x.defs[y.defId],U=x.instances[_.instanceId],ae=new rt(h,q,U);h.dispatch({type:"MERGE_EVENTS",eventStore:x});let $e={event:ae,relatedEvents:Lr(x,h,U),revert(){h.dispatch({type:"REMOVE_EVENTS",eventStore:x})}};h.emitter.trigger("eventAdd",$e),l.isTouch&&h.dispatch({type:"SELECT_EVENT",eventInstanceId:_.instanceId}),h.emitter.trigger("drop",Object.assign(Object.assign({},TL(T.dateSpan,h)),{draggedEl:l.subjectEl,jsEvent:l.origEvent,view:T.context.viewApi})),h.emitter.trigger("eventReceive",Object.assign(Object.assign({},$e),{draggedEl:l.subjectEl,view:T.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:i}=this,{options:r}=i.context,o=this.dragging=new Ca(t.el);o.pointer.selector=n.SELECTOR,o.touchScrollAllowed=!1,o.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new yc(this.dragging,pc);s.useSubjectCenter=t.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(t,i){let r=this.component.context,o=this.receivingContext;o&&o!==t&&(o===r?o.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:i.affectedEvents,mutatedEvents:jn(),isEvent:!0}}):o.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:i})}clearDrag(){let t=this.component.context,{receivingContext:i}=this;i&&i.dispatch({type:"UNSET_EVENT_DRAG"}),t!==i&&t.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return n.SELECTOR=".fc-event-draggable, .fc-event-resizable",n})();function Aq(n,e,t,i){let r=n.dateSpan,o=e.dateSpan,s=r.range.start,l=o.range.start,c={};r.allDay!==o.allDay&&(c.allDay=o.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,o.allDay?s=it(t):s=t);let d=Qo(s,l,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);d.milliseconds&&(c.allDay=!1);let h={datesDelta:d,standardProps:c};for(let p of i)p(h,n,e);return h}function Rq(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}var wD=class extends Ki{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let{component:s}=this,l=this.querySegEl(o),c=go(l),d=this.eventRange=c.eventRange;this.dragging.minDistance=s.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&this.component.props.eventSelection!==d.instance.instanceId)},this.handleDragStart=o=>{let{context:s}=this.component,l=this.eventRange;this.relevantEvents=pf(s.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(o);this.draggingSegEl=c,this.draggingSeg=go(c),s.calendarApi.unselect(),s.emitter.trigger("eventResizeStart",{el:c,event:new rt(s,l.def,l.instance),jsEvent:o.origEvent,view:s.viewApi})},this.handleHitUpdate=(o,s,l)=>{let{context:c}=this.component,d=this.relevantEvents,h=this.hitDragging.initialHit,p=this.eventRange.instance,y=null,_=null,S=!1,I={affectedEvents:d,mutatedEvents:jn(),isEvent:!0};o&&(o.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,o)||(y=Oq(h,o,l.subjectEl.classList.contains("fc-event-resizer-start"),p.range))),y&&(_=gf(d,c.getCurrentData().eventUiBases,y,c),I.mutatedEvents=_,L_(I,o.dateProfile,c)||(S=!0,y=null,_=null,I.mutatedEvents=null)),_?c.dispatch({type:"SET_EVENT_RESIZE",state:I}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),S?cf():uf(),s||(y&&tv(h,o)&&(y=null),this.validMutation=y,this.mutatedRelevantEvents=_)},this.handleDragEnd=o=>{let{context:s}=this.component,l=this.eventRange.def,c=this.eventRange.instance,d=new rt(s,l,c),h=this.relevantEvents,p=this.mutatedRelevantEvents;if(s.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:d,jsEvent:o.origEvent,view:s.viewApi}),this.validMutation){let y=new rt(s,p.defs[l.defId],c?p.instances[c.instanceId]:null);s.dispatch({type:"MERGE_EVENTS",eventStore:p});let _={oldEvent:d,event:y,relatedEvents:Lr(p,s,c),revert(){s.dispatch({type:"MERGE_EVENTS",eventStore:h})}};s.emitter.trigger("eventResize",Object.assign(Object.assign({},_),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||He(0),endDelta:this.validMutation.endDelta||He(0),jsEvent:o.origEvent,view:s.viewApi})),s.emitter.trigger("eventChange",_)}else s.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new Ca(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let r=this.hitDragging=new yc(this.dragging,mf(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Xt(e.subjectEl,".fc-event")}};function Oq(n,e,t,i){let r=n.context.dateEnv,o=n.dateSpan.range.start,s=e.dateSpan.range.start,l=Qo(o,s,r,n.largeUnit);if(t){if(r.add(i.start,l)<i.end)return{startDelta:l}}else if(r.add(i.end,l)>i.start)return{endDelta:l};return null}var CD=class{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let r=this.context.options.unselectCancel,o=y_(i.origEvent);this.matchesCancel=!!Xt(o,r),this.matchesEvent=!!Xt(o,PL.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:r}=this,{documentPointer:o}=this,s=r.getCurrentData();if(!o.wasTouchScroll){if(s.dateSelection&&!this.isRecentPointerDateSelect){let l=r.options.unselectAuto;l&&(!l||!this.matchesCancel)&&r.calendarApi.unselect(i)}s.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new J_(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}},kq={fixedMirrorParent:F},Nq={dateClick:F,eventDragStart:F,eventDragStop:F,eventDrop:F,eventResizeStart:F,eventResizeStop:F,eventResize:F,drop:F,eventReceive:F,eventLeave:F};yf.dataAttrPrefix="";var AL=Vr({name:"@fullcalendar/interaction",componentInteractions:[yD,bD,PL,wD],calendarInteractions:[CD],elementDraggingImpl:Ca,optionRefiners:kq,listenerRefiners:Nq});var Lq=["fc"];function Fq(n,e){if(n&1){let t=se();v(0,"button",5),B("click",function(){k(t);let r=A(2);return N(r.deleteEditor())}),w(1,"Elimina"),m()}}function Vq(n,e){if(n&1&&(v(0,"div",18),w(1),m()),n&2){let t=A(2);C(),ee(t.errorMsg)}}function jq(n,e){if(n&1){let t=se();v(0,"div",9)(1,"div",10)(2,"h3"),w(3),m(),v(4,"div",11)(5,"label"),w(6,"Titolo"),m(),v(7,"input",12),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editorModel.title,r)||(o.editorModel.title=r),N(r)}),m()(),v(8,"div",11)(9,"label"),w(10,"Data inizio"),m(),v(11,"input",13),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editorModel.start,r)||(o.editorModel.start=r),N(r)}),m()(),v(12,"div",11)(13,"label"),w(14,"Data fine"),m(),v(15,"input",13),Q("ngModelChange",function(r){k(t);let o=A();return K(o.editorModel.end,r)||(o.editorModel.end=r),N(r)}),m()(),v(16,"div",14)(17,"button",15),B("click",function(){k(t);let r=A();return N(r.saveEditor())}),w(18,"Salva"),m(),z(19,Fq,2,0,"button",16),v(20,"button",15),B("click",function(){k(t);let r=A();return N(r.openEditor=!1)}),w(21,"Annulla"),m()(),z(22,Vq,2,1,"div",17),m()()}if(n&2){let t=A();C(3),ee(t.editorModel!=null&&t.editorModel.id?"Modifica evento":"Nuovo evento"),C(4),Y("ngModel",t.editorModel.title),C(4),Y("ngModel",t.editorModel.start),C(4),Y("ngModel",t.editorModel.end),C(2),M("disabled",t.saving),C(2),M("ngIf",t.editorModel==null?null:t.editorModel.id),C(),M("disabled",t.saving),C(2),M("ngIf",t.errorMsg)}}var nv=class n{constructor(e,t,i,r){this.productService=e;this.serviceService=t;this.renderer=i;this.el=r}calendarComponent;events=[];openEditor=!1;editorModel=null;saving=!1;errorMsg="";calendarOptions={plugins:[xL,AL],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},selectable:!1,selectMirror:!1,editable:!1,eventDrop:this.handleEventDrop.bind(this),dayMaxEvents:2,views:{dayGridWeek:{dayMaxEvents:!0,dayMaxEventRows:!0},dayGridDay:{dayMaxEvents:!0,dayMaxEventRows:!0}},eventContent:this.renderEventContent.bind(this),locale:"it",firstDay:1,aspectRatio:1.5,timeZone:"Europe/Rome",initialDate:new Date,eventDisplay:"block",eventBackgroundColor:"var(--background2)",eventBorderColor:"var(--primary)",eventTextColor:"var(--text-light)",nowIndicator:!0,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1,meridiem:!1},windowResize:function(e){e.view.calendar.updateSize()}};ngOnInit(){setTimeout(()=>{this.loadEventsForMySalon(),setTimeout(()=>{this.calendarComponent?.getApi()&&this.calendarComponent.getApi().updateSize()},100),this.setupPopupCloseHandler()},300)}setupPopupCloseHandler(){let e=new MutationObserver(i=>{i.forEach(r=>{r.addedNodes.length&&r.addedNodes.forEach(o=>{if(o.nodeType===1){let s=o;if(s.classList.contains("fc-popover")){let l=s.querySelector(".fc-popover-close");l&&l.addEventListener("click",()=>{this.closePopup(s)})}}})})}),t=document.querySelector(".cal-body");t&&e.observe(t,{childList:!0,subtree:!0})}closePopup(e){e.style.opacity="0",e.style.transform="translate(-50%, -50%) scale(0.95)",e.style.transition="all 0.3s ease",setTimeout(()=>{e.remove()},300)}handleDateSelect(e){this.editorModel={title:"",start:e.startStr,end:e.endStr,allDay:e.allDay},this.openEditor=!0}handleEventClick(e){let t=e.event;this.editorModel={id:t.id,title:t.title,start:t.startStr,end:t.endStr,allDay:t.allDay,extendedProps:t.extendedProps},this.openEditor=!0}handleEventDrop(e){return D(this,null,function*(){let t=e.event;console.log("event spostato",t.id,t.startStr,t.endStr)})}saveEditor(){return D(this,null,function*(){if(this.editorModel){this.saving=!0,this.errorMsg="";try{if(this.editorModel.id){let t=this.calendarComponent.getApi().getEventById(this.editorModel.id);t&&(t.setProp("title",this.editorModel.title),t.setStart(this.editorModel.start),this.editorModel.end&&t.setEnd(this.editorModel.end))}else{let e=String(Date.now());this.calendarComponent.getApi().addEvent({id:e,title:this.editorModel.title,start:this.editorModel.start,end:this.editorModel.end,allDay:this.editorModel.allDay})}this.openEditor=!1,this.editorModel=null}catch(e){console.error("Errore salvataggio evento",e),this.errorMsg=e?.message||"Errore salvataggio"}finally{this.saving=!1}}})}deleteEditor(){return D(this,null,function*(){if(!this.editorModel?.id){this.openEditor=!1;return}this.calendarComponent.getApi().getEventById(this.editorModel.id)?.remove(),this.openEditor=!1,this.editorModel=null})}loadEventsForMySalon(){return D(this,null,function*(){try{let t=(yield this.serviceService.getMyProfile(!0))?.id;if(!t)return;let i=yield this.serviceService.getAppointmentsBySalon(t);this.events=yield Promise.all(i.map(r=>D(this,null,function*(){let s=(yield this.serviceService.getServiceById(r.service_id))?.name||"Servizio sconosciuto",l=yield this.serviceService.getProfileById(r.client_id),c=l?.full_name||"Cliente sconosciuto",d=l?.telefono||"Nessun telefono",h=l?.email||"Nessuna email",y=new Date(r.start_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Rome"});return{id:String(r.id),title:`${y} - ${s}`,start:r.start_time,end:r.end_time,allDay:!1,extendedProps:re(W({},r),{serviceName:s,clientName:c,clientPhone:d,clientEmail:h})}}))),this.calendarComponent?.getApi()&&(this.calendarComponent.getApi().removeAllEvents(),this.calendarComponent.getApi().addEventSource(this.events))}catch(e){console.error("\u{1F525} Errore caricamento eventi:",e)}})}renderEventContent(e){let i=e.event.extendedProps.payment_status==="paid"?'<div class="fc-event-status">\u2705 Pagato</div>':"";return{html:`
        <div class="fc-event-content">
          <div class="fc-event-title">${e.event.title}</div>
          <div class="fc-event-client">${e.event.extendedProps.clientName}</div>
          ${i}
        </div>
      `}}static \u0275fac=function(t){return new(t||n)($($o),$(xt),$(Sn),$(Xe))};static \u0275cmp=he({type:n,selectors:[["app-calendario"]],viewQuery:function(t,i){if(t&1&&vl(Lq,5),t&2){let r;Et(r=St())&&(i.calendarComponent=r.first)}},decls:15,vars:3,consts:[["fc",""],[1,"calendario-container"],[1,"section-title"],[1,"cal-header"],[1,"cal-actions"],[3,"click"],[1,"cal-body"],[3,"options","events"],["class","editor-backdrop",4,"ngIf"],[1,"editor-backdrop"],[1,"editor-card"],[1,"form-row"],["type","text","placeholder","Es. Taglio + piega",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],[1,"editor-actions"],[3,"click","disabled"],[3,"click",4,"ngIf"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,i){if(t&1){let r=se();v(0,"div",1)(1,"h2",2),w(2,"Calendario"),m(),v(3,"div",3)(4,"div",4)(5,"button",5),B("click",function(){return k(r),N(i.calendarComponent.getApi().today())}),w(6,"Oggi"),m(),v(7,"button",5),B("click",function(){return k(r),N(i.calendarComponent.getApi().prev())}),w(8,"\u2039"),m(),v(9,"button",5),B("click",function(){return k(r),N(i.calendarComponent.getApi().next())}),w(10,"\u203A"),m()()(),v(11,"div",6),oe(12,"full-calendar",7,0),m(),z(14,jq,23,8,"div",8),m()}t&2&&(C(12),M("options",i.calendarOptions)("events",i.events),C(2),M("ngIf",i.openEditor))},dependencies:[Ue,et,bL,yL,Ht,yt,Dt,kt,Ot],styles:['.calendario-container[_ngcontent-%COMP%]{padding:1.2rem;background:var(--background);color:var(--text-light);border-radius:12px;box-shadow:0 6px 18px #0000001f;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;min-height:80vh;display:flex;flex-direction:column}.cal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem;flex-wrap:wrap}.cal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--primary);font-size:clamp(1.2rem,2.5vw,1.5rem)}.cal-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.cal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff0d;border:1px solid rgba(255,255,255,.08);color:var(--text-light);padding:clamp(.3rem,.8vw,.4rem) clamp(.5rem,1.5vw,1.2rem);border-radius:6px;cursor:pointer;font-size:clamp(.8rem,1.5vw,.9rem);transition:all .2s ease;min-height:36px}.cal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-1px)}.cal-body[_ngcontent-%COMP%]     .fc{background:transparent;color:var(--text-light);font-size:clamp(.8rem,1.5vw,.9rem)}.cal-body[_ngcontent-%COMP%]     .fc-header-toolbar{flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}.cal-body[_ngcontent-%COMP%]     .fc-toolbar-title{font-size:clamp(1.5rem,2vw,2rem);font-weight:600;color:var(--primary)}.cal-body[_ngcontent-%COMP%]     .fc-col-header-cell{padding:clamp(.4rem,.8vw,.6rem) clamp(.2rem,.5vw,.4rem);border:1px solid var(--secondary)}.cal-body[_ngcontent-%COMP%]     .fc-col-header-cell-cushion{color:var(--primary);font-weight:600;font-size:clamp(.8rem,1.2vw,.85rem)}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-day{border:1px solid var(--secondary)}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-day-frame{min-height:clamp(80px,12vh,100px)}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-event{background:var(--background2)!important;color:var(--text-light);border:1px solid var(--primary);border-radius:4px;padding:clamp(.2rem,.5vw,.4rem) clamp(.4rem,.8vw,.6rem);margin:clamp(.1rem,.3vw,.2rem);font-size:clamp(.75rem,1.3vw,.8rem);cursor:pointer;transition:all .2s ease}.cal-body[_ngcontent-%COMP%]     .fc-event-title{font-weight:500;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--secondary)}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-event:hover{background:#d4af3740;transform:translateY(-1px);box-shadow:0 2px 6px #0000004d}.cal-body[_ngcontent-%COMP%]     .fc-event-time{font-weight:700;color:var(--primary);margin-right:clamp(.2rem,.5vw,.4rem)}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-more-link{background:#d4af3733!important;color:var(--primary)!important;border-radius:4px!important;padding:0 clamp(.2rem,.5vw,.4rem)!important;font-size:clamp(.7rem,1.2vw,.8rem)!important;font-weight:600!important;margin-top:clamp(.1rem,.3vw,.2rem)}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-more-link:hover{background:#d4af374d!important}.cal-body[_ngcontent-%COMP%]     .fc-daygrid-event.fc-event-selected{background:#d4af374d;box-shadow:0 0 0 2px var(--primary)}.cal-body[_ngcontent-%COMP%]     .fc-col-header-cell{background:#d4af3714}.cal-body[_ngcontent-%COMP%]     .fc-col-header-cell-cushion{color:var(--text-light);font-weight:600;padding:clamp(.5rem,1vw,.8rem) clamp(.3rem,.6vw,.5rem)}.editor-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000a6;display:flex;align-items:center;justify-content:center;z-index:9999;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.editor-card[_ngcontent-%COMP%]{background:var(--background);color:var(--text-light);padding:clamp(1rem,2vw,1.5rem);width:min(95vw,380px);border-radius:12px;box-shadow:0 12px 40px #00000080;border:1px solid var(--primary)}.editor-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--primary);font-size:clamp(1.1rem,2vw,1.3rem);border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:.5rem}.form-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:clamp(.6rem,1vw,.8rem)}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:clamp(.8rem,1.5vw,.9rem);margin-bottom:clamp(.2rem,.5vw,.3rem);color:var(--text-light)}.form-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#ffffff08;color:var(--text-light);border:1px solid rgba(255,255,255,.1);padding:clamp(.5rem,1vw,.6rem);border-radius:8px;font:inherit;font-size:clamp(.85rem,1.5vw,.95rem);transition:all .2s ease}.form-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px #d4af3733}.editor-actions[_ngcontent-%COMP%]{display:flex;gap:clamp(.5rem,1vw,.8rem);justify-content:flex-end;margin-top:clamp(.8rem,1.5vw,1rem)}.editor-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--primary);color:#000;border:none;padding:clamp(.5rem,1vw,.6rem) clamp(.8rem,1.5vw,1rem);border-radius:8px;cursor:pointer;font-weight:600;min-width:clamp(70px,10vw,80px);transition:all .2s ease}.editor-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}.editor-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){background:transparent;color:var(--danger);border:1px solid var(--danger)}.editor-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#ffffff0d;color:var(--text-light);border:1px solid rgba(255,255,255,.1)}.error[_ngcontent-%COMP%]{color:var(--danger);margin-top:clamp(.8rem,1.5vw,1rem);padding:clamp(.4rem,.8vw,.5rem);background:#f443361a;border-radius:6px;text-align:center;font-size:clamp(.8rem,1.5vw,.9rem)}  .fc-view-harness{transition:none!important;min-height:clamp(500px,70vh,600px)}.cal-body[_ngcontent-%COMP%]{overflow:visible!important}.cal-body[_ngcontent-%COMP%]     .fc-popover{background:var(--background2)!important;border:none!important;box-shadow:0 20px 60px #000000e6!important;border-radius:16px!important;overflow:hidden;width:min(92vw,520px)!important;max-height:min(82vh,600px)!important;display:flex;flex-direction:column;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important;z-index:10000}.cal-body[_ngcontent-%COMP%]     .fc-popover-header{background:linear-gradient(90deg,var(--background),var(--background2))!important;color:var(--primary)!important;padding:clamp(.8rem,1.5vw,1rem) clamp(1rem,2vw,1.5rem)!important;font-weight:700!important;font-size:clamp(1.1rem,1.8vw,1.3rem)!important;border-bottom:1px solid rgba(212,175,55,.4)!important;display:flex;align-items:center;justify-content:space-between;position:relative}.cal-body[_ngcontent-%COMP%]     .fc-popover-header:after{content:"";position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--primary),transparent);opacity:.4}.cal-body[_ngcontent-%COMP%]     .fc-popover-close{color:var(--text-light)!important;opacity:.8;font-size:clamp(1.4rem,2vw,1.6rem)!important;top:clamp(.8rem,1.5vw,1.2rem)!important;right:clamp(1rem,1.8vw,1.6rem)!important;width:clamp(32px,4vw,36px);height:clamp(32px,4vw,36px);display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s ease;background:var(--background);z-index:10}.cal-body[_ngcontent-%COMP%]     .fc-popover-close:hover{background:#d4af3740;color:var(--primary)!important;opacity:1;transform:scale(1.1)}.cal-body[_ngcontent-%COMP%]     .fc-popover-body{background:var(--background);padding:clamp(.8rem,1.5vw,1rem)!important;overflow-y:auto;flex-grow:1;display:grid;gap:clamp(.6rem,1.2vw,.8rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event{background:linear-gradient(to right,var(--background),var(--background2));border:1px solid var(--secondary);color:var(--text-light)!important;margin-bottom:0!important;border-radius:12px!important;padding:clamp(.8rem,1.5vw,1rem)!important;transition:all .25s ease;box-shadow:0 4px 12px #0000004d;position:relative;overflow:hidden}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event:before{content:"";position:absolute;top:0;left:0;width:clamp(3px,.4vw,4px);height:100%;background:var(--primary)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event:hover{background:linear-gradient(to right,var(--background2),var(--background));transform:translateY(-3px);box-shadow:0 8px 20px #00000080;border-color:var(--secondary)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event .fc-event-main{display:flex;flex-direction:column;gap:clamp(.4rem,.8vw,.5rem);padding-left:clamp(.4rem,.8vw,.5rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-time{font-weight:700;color:var(--primary);font-size:clamp(.9rem,1.5vw,1.05rem);display:flex;align-items:center;gap:clamp(.4rem,.8vw,.5rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-time:before{content:"\\23f1";font-size:.9em}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-title{font-weight:600;font-size:clamp(1rem,1.8vw,1.15rem);color:var(--text-light);line-height:1.3}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-client{font-size:clamp(.8rem,1.5vw,.95rem);opacity:.9;display:flex;align-items:center;gap:clamp(.4rem,.8vw,.5rem);margin-top:clamp(.2rem,.5vw,.3rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-client:before{content:"\\1f464"}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-service{font-size:clamp(.85rem,1.6vw,1rem);color:var(--primary);font-weight:600;display:flex;align-items:center;gap:clamp(.4rem,.8vw,.5rem);margin-top:clamp(.1rem,.4vw,.2rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-service:before{content:"\\1f488"}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-contacts{display:flex;flex-wrap:wrap;gap:clamp(.4rem,1vw,.6rem);margin-top:clamp(.5rem,1.2vw,.8rem);font-size:clamp(.75rem,1.4vw,.9rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-contacts span{background:#d4af3726;padding:clamp(.3rem,.8vw,.4rem) clamp(.6rem,1.2vw,.8rem);border-radius:20px;border:1px solid rgba(212,175,55,.25);display:flex;align-items:center;gap:clamp(.3rem,.6vw,.4rem)}.cal-body[_ngcontent-%COMP%]     .fc-more-popover .fc-event-contacts span:before{content:"\\1f4de"}.cal-body[_ngcontent-%COMP%]     .fc-popover-body::-webkit-scrollbar{width:clamp(6px,1vw,8px)}.cal-body[_ngcontent-%COMP%]     .fc-popover-body::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.cal-body[_ngcontent-%COMP%]     .fc-popover-body::-webkit-scrollbar-thumb{background:var(--primary);border-radius:4px;background-clip:padding-box;border:2px solid transparent}.cal-body[_ngcontent-%COMP%]     .fc-event{break-inside:avoid}']})};var iv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-clienti"]],decls:2,vars:0,template:function(t,i){t&1&&(kn(0,"p"),w(1,"clienti works!"),Nn())},encapsulation:2})};var bc=class n{constructor(e){this.supabaseService=e}getAll(){return We(this.supabaseService.getSuppliers())}getById(e){return We(this.supabaseService.getSupplierById(e))}create(e){return We(this.supabaseService.createSupplier(e))}update(e,t){let i={id:e,ragione_sociale:t.ragione_sociale,partita_iva:t.partita_iva,indirizzo:t.indirizzo,citta:t.citta,provincia:t.provincia,regione:t.regione,telefono:t.telefono,email:t.email,pec:t.pec,persona_contatto:t.persona_contatto,telefono_contatto:t.telefono_contatto,metodo_pagamento:t.metodo_pagamento,iban:t.iban};return We(this.supabaseService.updateSupplier(i))}delete(e){return We(this.supabaseService.deleteSupplier(e))}static \u0275fac=function(t){return new(t||n)(ne(xt))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function Bq(n,e){if(n&1){let t=se();v(0,"tr")(1,"td"),w(2),m(),v(3,"td"),w(4),m(),v(5,"td"),w(6),m(),v(7,"td"),w(8),m(),v(9,"td"),w(10),m(),v(11,"td"),w(12),m(),v(13,"td"),w(14),m(),v(15,"td",14)(16,"button",15),B("click",function(){let r=k(t).$implicit,o=A();return N(o.onEdit(r))}),v(17,"i",9),w(18,"edit"),m()(),v(19,"button",16),B("click",function(){let r=k(t).$implicit,o=A();return N(o.onDelete(r))}),v(20,"i",9),w(21,"delete"),m()()()()}if(n&2){let t=e.$implicit;C(2),ee(t.ragione_sociale),C(2),ee(t.partita_iva),C(2),ee(t.indirizzo),C(2),ee(t.citta),C(2),ee(t.provincia),C(2),ee(t.telefono),C(2),ee(t.email)}}var rv=class n{constructor(e,t){this.supplierService=e;this.router=t}suppliers=[];filteredSuppliers=[];searchTerm="";activeCount=0;newLast30Days=0;inactiveCount=0;ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.supplierService.getAll().subscribe({next:e=>{this.suppliers=e,this.filteredSuppliers=[...e],this.calculateKPI()},error:e=>console.error("Errore nel caricamento:",e)})}onEdit(e){e.id&&this.router.navigate(["/admin/fornitori/edita",e.id])}onDelete(e){if(!e.id){console.error("ID fornitore mancante");return}confirm("Vuoi davvero eliminare questo fornitore?")&&this.supplierService.delete(e.id).subscribe({next:()=>{this.suppliers=this.suppliers.filter(t=>t.id!==e.id),this.filteredSuppliers=this.filteredSuppliers.filter(t=>t.id!==e.id),this.calculateKPI()},error:t=>console.error("Errore eliminazione:",t)})}calculateKPI(){let e=new Date,t=new Date;t.setDate(e.getDate()-30),this.newLast30Days=this.suppliers.filter(i=>{if(!i.created_at)return!1;let r=new Date(i.created_at);return!isNaN(r.getTime())&&r>=t}).length,this.activeCount=this.suppliers.length,this.inactiveCount=0}applyFilter(){let e=this.searchTerm.trim().toLowerCase();e?this.filteredSuppliers=this.suppliers.filter(t=>{let i=(t.ragione_sociale||"").toLowerCase(),r=(t.partita_iva||"").toLowerCase(),o=(t.citta||"").toLowerCase();return i.includes(e)||r.includes(e)||o.includes(e)}):this.filteredSuppliers=[...this.suppliers]}openNewSupplier(){this.router.navigate(["/admin/fornitori/nuovo"])}static \u0275fac=function(t){return new(t||n)($(bc),$(Ve))};static \u0275cmp=he({type:n,selectors:[["app-fornitori"]],decls:55,vars:6,consts:[[1,"container"],[1,"section-title"],[1,"kpi-cards"],[1,"kpi-card"],[1,"kpi-title"],[1,"kpi-value"],[1,"filters-bar"],[1,"search-box"],["type","text","placeholder","Cerca per ragione sociale, P.IVA o citt\xE0",1,"input-field",3,"ngModelChange","input","ngModel"],[1,"material-icons"],["title","Nuovo Fornitore",1,"btn","btn-primary",3,"click"],[1,"table-responsive"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"actions"],["title","Modifica",1,"btn","btn-icon",3,"click"],["title","Elimina",1,"btn","btn-icon","btn-danger",3,"click"]],template:function(t,i){t&1&&(v(0,"div",0)(1,"h2",1),w(2,"Fornitori"),m(),v(3,"div",2)(4,"div",3)(5,"h3",4),w(6,"Fornitori Totali"),m(),v(7,"p",5),w(8),m()(),v(9,"div",3)(10,"h3",4),w(11,"Fornitori Attivi"),m(),v(12,"p",5),w(13),m()(),v(14,"div",3)(15,"h3",4),w(16,"Nuovi Fornitori (30gg)"),m(),v(17,"p",5),w(18),m()(),v(19,"div",3)(20,"h3",4),w(21,"Fornitori Inattivi"),m(),v(22,"p",5),w(23),m()()(),v(24,"div",6)(25,"div",7)(26,"input",8),Q("ngModelChange",function(o){return K(i.searchTerm,o)||(i.searchTerm=o),o}),B("input",function(){return i.applyFilter()}),m(),v(27,"i",9),w(28,"search"),m()(),v(29,"button",10),B("click",function(){return i.openNewSupplier()}),v(30,"i",9),w(31,"add"),m(),w(32," Nuovo Fornitore "),m()(),v(33,"div",11)(34,"table",12)(35,"thead")(36,"tr")(37,"th"),w(38,"Ragione Sociale"),m(),v(39,"th"),w(40,"P.IVA"),m(),v(41,"th"),w(42,"Indirizzo"),m(),v(43,"th"),w(44,"Citt\xE0"),m(),v(45,"th"),w(46,"Provincia"),m(),v(47,"th"),w(48,"Telefono"),m(),v(49,"th"),w(50,"Email"),m(),v(51,"th"),w(52,"Azioni"),m()()(),v(53,"tbody"),z(54,Bq,22,7,"tr",13),m()()()()),t&2&&(C(8),ee(i.suppliers.length),C(5),ee(i.activeCount),C(5),ee(i.newLast30Days),C(5),ee(i.inactiveCount),C(3),Y("ngModel",i.searchTerm),C(28),M("ngForOf",i.filteredSuppliers))},dependencies:[Ue,at,Ht,yt,Dt,kt,Ot],styles:[".kpi-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-bottom:1.5rem}.kpi-card[_ngcontent-%COMP%]{background:var(--background2);border-radius:var(--border-radius);padding:1rem;text-align:center;box-shadow:0 4px 6px #0000001a;border-left:4px solid var(--primary)}.kpi-title[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-muted);margin-bottom:.5rem}.kpi-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--primary)}.search-box[_ngcontent-%COMP%]{position:relative;flex-grow:1}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-muted)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px}.btn-icon[_ngcontent-%COMP%]{padding:.5rem;min-width:auto;display:inline-flex;align-items:center;justify-content:center}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.btn-danger[_ngcontent-%COMP%]{background:#f4433626;border:1px solid rgba(244,67,54,.3)}.btn-danger[_ngcontent-%COMP%]:hover{background:#f4433640}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem .6rem}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding:.4rem}"]})};var ov=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-tessera-clienti"]],decls:2,vars:0,template:function(t,i){t&1&&(kn(0,"p"),w(1,"tessera-clienti works!"),Nn())},encapsulation:2})};var sv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-home-user"]],decls:2,vars:0,template:function(t,i){t&1&&(kn(0,"p"),w(1,"home-user works!"),Nn())},encapsulation:2})};function zq(n,e){if(n&1&&(v(0,"option",29),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ee(t)}}function Uq(n,e){if(n&1&&(v(0,"option",29),w(1),m()),n&2){let t=e.$implicit;M("value",t.code),C(),zi(" ",t.name," (",t.code,") ")}}function Hq(n,e){n&1&&(v(0,"div",30)(1,"p"),w(2,"Caricamento..."),m(),oe(3,"div",31),m())}function $q(n,e){n&1&&(v(0,"div",30)(1,"p"),w(2,"Nessun risultato per i filtri selezionati."),m()())}function Wq(n,e){if(n&1&&(v(0,"div",38)(1,"a",43),w(2),m()()),n&2){let t=A().$implicit;C(),M("href",t.sito_web,_t),C(),ee(t.sito_web)}}function Gq(n,e){if(n&1){let t=se();v(0,"tr")(1,"td",35),oe(2,"img",36),m(),v(3,"td")(4,"div")(5,"strong"),w(6),m()(),z(7,Wq,3,2,"div",37),m(),v(8,"td")(9,"div"),w(10),m(),v(11,"div",38)(12,"a",39),w(13),m()()(),v(14,"td")(15,"div"),w(16),m()(),v(17,"td",40)(18,"button",41),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.viewProfile(r.id))}),w(19,"Visualizza"),m(),v(20,"button",42),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.book(r.id))}),w(21,"Prenota"),m()()()}if(n&2){let t=e.$implicit;C(2),M("alt",Os("Logo ",t.ragione_sociale))("src",t.logo_url||"/assets/default-salon.png",_t),C(4),ee(t.ragione_sociale),C(),M("ngIf",t.sito_web),C(3),ee(t.telefono||"\u2014"),C(2),M("href","mailto:"+t.email,_t),C(),ee(t.email),C(3),ee(t.indirizzo)}}function qq(n,e){if(n&1&&(v(0,"div",32)(1,"table",33)(2,"thead")(3,"tr")(4,"th"),w(5,"Logo"),m(),v(6,"th"),w(7,"Salone"),m(),v(8,"th"),w(9,"Contatti"),m(),v(10,"th"),w(11,"Indirizzo"),m(),v(12,"th"),w(13,"Azioni"),m()()(),v(14,"tbody"),z(15,Gq,22,9,"tr",34),m()()()),n&2){let t=A();C(15),M("ngForOf",t.admins)}}var av=class n{constructor(e,t){this.service=e;this.router=t}searchTerm="";selectedRegion="";selectedProvince="";selectedComune="";allProvinces=[];regions=[];filteredProvinces=[];provinceList=[];comuniList=[];admins=[];loading=!1;signingOut=!1;page=1;perPage=12;total=0;openNow=!1;filterTime=null;filteredAdmins=[];search$=new fe;destroy$=new fe;ngOnInit(){return D(this,null,function*(){this.setupSearchListener(),yield this.loadProvincesAndDefaults();let e=new Date;this.filterTime=e.toTimeString().slice(0,5),yield this.fetchAdmins()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setupSearchListener(){this.search$.pipe(Hc(400),Ya(),Mn(this.destroy$)).subscribe(()=>{this.page=1,this.fetchAdmins()})}onSearchInput(e){this.searchTerm=e,this.search$.next(e)}loadProvincesAndDefaults(){return D(this,null,function*(){try{let e=yield this.service.getProvinceList();this.allProvinces=Array.isArray(e)?e:[],this.regions=Array.from(new Set(this.allProvinces.map(i=>i.region).filter(Boolean))).sort();let t=yield this.service.getMyProfile(!0);if(t){if(t.provincia){let i=String(t.provincia).trim().toUpperCase(),r=this.findProvinceByCode(i);r||(r=this.allProvinces.find(o=>String(o.name).toLowerCase()===String(t.provincia).toLowerCase())),r&&(this.selectedProvince=r.code,this.selectedRegion=r.region)}!this.selectedRegion&&t.regione&&(this.selectedRegion=String(t.regione).trim())}if(this.filterProvinces(),this.selectedProvince)try{this.comuniList=yield this.service.getComuniByProvince(this.selectedProvince)}catch(i){console.warn("Errore caricamento comuni for default province",i),this.comuniList=[]}}catch(e){console.warn("Errore caricamento provinces/defaults",e),this.allProvinces=[],this.regions=[],this.filteredProvinces=[]}})}findProvinceByCode(e){if(e)return this.allProvinces.find(t=>String(t.code??"").toUpperCase()===e)}filterProvinces(){if(!this.selectedRegion){this.filteredProvinces=[];return}this.filteredProvinces=this.allProvinces.filter(e=>e.region===this.selectedRegion),this.selectedProvince&&(this.filteredProvinces.some(t=>t.code===this.selectedProvince)||(this.selectedProvince=""))}onRegionChange(){this.selectedProvince="",this.selectedComune="",this.comuniList=[],this.filterProvinces(),this.page=1,this.fetchAdmins()}onProvinceChange(){return D(this,null,function*(){if(this.selectedComune="",this.comuniList=[],!this.selectedProvince){this.page=1,this.fetchAdmins();return}try{this.comuniList=yield this.service.getComuniByProvince(this.selectedProvince.trim())}catch(e){console.warn("Errore caricamento comuni",e),this.comuniList=[]}finally{this.page=1,this.fetchAdmins()}})}onComuneChange(){this.page=1,this.fetchAdmins()}fetchAdmins(){return D(this,null,function*(){this.loading=!0;try{let t=(yield this.service.getAdmins({search:this.searchTerm,region:this.selectedRegion||void 0,province:this.selectedProvince||void 0,comune:this.selectedComune||void 0,limit:1e3,offset:0})).data||[];t.forEach(r=>{this.normalizeOpeningHours(r)}),this.openNow&&(t=t.filter(r=>this.isOpenNow(r)));let i=(this.page-1)*this.perPage;this.admins=t.slice(i,i+this.perPage),this.total=t.length}catch(e){console.error("Errore fetch admins",e),this.admins=[],this.total=0}finally{this.loading=!1}})}get maxPage(){if(this.perPage<=0)return 1;let e=Math.ceil((this.total||0)/this.perPage);return Math.max(1,e)}previousPage(){this.page>1&&(this.page--,this.fetchAdmins(),window.scrollTo({top:0,behavior:"smooth"}))}nextPage(){this.page<this.maxPage&&(this.page++,this.fetchAdmins(),window.scrollTo({top:0,behavior:"smooth"}))}viewProfile(e){this.router.navigate(["/user/salone",e])}book(e){this.router.navigate(["/user/nuovo-appuntamento",e])}formatPhoneNumber(e){return e?e.replace(/(\d{2})(\d{4})(\d{4})/,"$1 $2 $3"):"\u2014"}truncate(e,t=25,i="..."){return e?e.length>t?e.substring(0,t)+i:e:""}onOpenNowChange(){this.page=1,this.fetchAdmins()}coerceDayIndex(e){if(e==null)return null;let t=typeof e=="string"?parseInt(e,10):Number(e);return Number.isNaN(t)?null:t>=1&&t<=7?t:t>=0&&t<=6?t===0?7:t:null}asIntervals(e){if(!e)return[];if(typeof e=="string")try{e=JSON.parse(e)}catch{return[]}return Array.isArray(e)?e.map(t=>({start:t.start||"00:00",end:t.end||"00:00"})):[]}normalizeOpeningHours(e){if(!e)return;let t=e.opening_hours;if(!t){e.opening_hours=[];return}if(Array.isArray(t)){e.opening_hours=t.map(i=>re(W({},i),{day_index:this.coerceDayIndex(i?.day_index),intervals:this.asIntervals(i?.intervals)}));return}if(typeof t=="string")try{t=JSON.parse(t)}catch{t=[]}e.opening_hours=(Array.isArray(t)?t:[]).map(i=>re(W({},i),{day_index:this.coerceDayIndex(i?.day_index),intervals:this.asIntervals(i?.intervals)}))}isOpenAt(e,t){if(!e||!Array.isArray(e.opening_hours))return!1;let i=new Date,r=t?.trim()||i.toTimeString().slice(0,5),o=this.timeToMinutes(r);if(o===null)return!1;let s=i.getDay(),l=s===0?7:s,c=l===1?7:l-1,d=e.opening_hours.find(p=>p.day_index===l),h=e.opening_hours.find(p=>p.day_index===c);if(d?.intervals?.length)for(let p of d.intervals){let y=this.timeToMinutes(p.start),_=this.timeToMinutes(p.end);if(!(y===null||_===null)){if(y<=_){if(o>=y&&o<_)return!0}else if(o>=y||o<_)return!0}}if(h?.intervals?.length)for(let p of h.intervals){let y=this.timeToMinutes(p.start),_=this.timeToMinutes(p.end);if(!(y===null||_===null)&&y>_&&o<_)return!0}return!1}timeToMinutes(e){if(!e)return null;e=e.trim().toUpperCase();let t=e.split(":");if(t.length<2)return null;let i=parseInt(t[0],10),r=parseInt(t[1],10);return isNaN(i)||isNaN(r)||i<0||i>23||r<0||r>59?null:i*60+r}parseTimeToMinutes(e){if(!e)return null;let t=e.split(":");if(t.length<2)return null;let i=parseInt(t[0],10),r=parseInt(t[1],10);return isNaN(i)||isNaN(r)?null:i*60+r}isOpenNow(e){if(!e||!Array.isArray(e.opening_hours))return console.log(`Admin ${e?.ragione_sociale} non ha opening_hours`),!1;let t=new Date,i=t.getDay()===0?7:t.getDay(),r=t.toTimeString().slice(0,5);console.log(`Controllo salone: ${e.ragione_sociale}`),console.log(`Giorno corrente: ${i}, Ora: ${r}`);let o=e.opening_hours.find(c=>c.day_index===i);if(o&&o.intervals){if(console.log("Trovati intervalli per oggi:",o.intervals),o.intervals.some(d=>{let h=this.isTimeInInterval(r,d.start,d.end);return console.log(`Intervallo ${d.start}-${d.end}: ${h?"APERTO":"chiuso"}`),h}))return console.log(`\u2705 ${e.ragione_sociale} \xE8 aperto oggi`),!0}else console.log("Nessun intervallo trovato per oggi");let s=i===1?7:i-1,l=e.opening_hours.find(c=>c.day_index===s);return l&&l.intervals&&(console.log("Trovati intervalli per ieri:",l.intervals),l.intervals.some(d=>{let h=this.isTimeInInterval(r,d.start,d.end);return console.log(`Intervallo ieri ${d.start}-${d.end}: ${h?"APERTO":"chiuso"}`),h}))?(console.log(`\u2705 ${e.ragione_sociale} \xE8 aperto (intervallo overnight)`),!0):(console.log(`\u274C ${e.ragione_sociale} \xE8 chiuso`),!1)}isTimeInInterval(e,t,i){let r=this.timeToMinutes(e),o=this.timeToMinutes(t),s=this.timeToMinutes(i);return r===null||o===null||s===null?!1:o<=s?r>=o&&r<=s:r>=o||r<=s}static \u0275fac=function(t){return new(t||n)($(xt),$(Ve))};static \u0275cmp=he({type:n,selectors:[["app-barbieri-list"]],decls:51,vars:16,consts:[[1,"container"],[1,"card-content",2,"padding","1rem"],[1,"filters-bar"],[1,"search-box","form-group"],[1,"section-title"],[1,"search-wrapper"],["type","search","placeholder","Cerca per salone...","aria-label","Cerca per salone",1,"input-field","search-input",3,"ngModelChange","ngModel"],[1,"search-icon"],[1,"filters-inline"],[1,"form-group","compact"],["for","regionSelect",1,"vis-label"],[1,"select-wrapper"],["id","regionSelect","aria-label","Seleziona regione",1,"select-field",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","true",1,"select-icon"],["width","14","height","9","viewBox","0 0 14 9","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1 1L7 7L13 1","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["for","provinceSelect",1,"vis-label"],["id","provinceSelect","aria-label","Seleziona provincia",1,"select-field",3,"ngModelChange","change","ngModel","disabled"],[1,"checkbox-container"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"checkmark"],["style","padding:1rem;",4,"ngIf"],["class","table-responsive",4,"ngIf"],[2,"display","flex","justify-content","space-between","align-items","center","margin-top","1rem"],[2,"display","flex","gap","0.5rem","align-items","center"],[3,"click","disabled"],[2,"display","flex","align-items","center","padding","0 0.6rem"],[3,"value"],[2,"padding","1rem"],[1,"spinner"],[1,"table-responsive"],["role","table",1,"data-table"],[4,"ngFor","ngForOf"],[1,"logo-cell"],[3,"src","alt"],["style","margin-top:8px;;",4,"ngIf"],[2,"margin-top","8px"],[2,"text-decoration","none","color","var(--primary)","font-weight","500",3,"href"],[1,"actions"],[1,"btn",3,"click"],[1,"btn-primary",3,"click"],["target","_blank",1,"website-link",2,"text-decoration","none","color","var(--primary)","font-weight","500",3,"href"]],template:function(t,i){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),w(5,"Ricerca"),m(),v(6,"div",5)(7,"input",6),Q("ngModelChange",function(o){return K(i.searchTerm,o)||(i.searchTerm=o),o}),B("ngModelChange",function(o){return i.onSearchInput(o)}),m(),v(8,"span",7),w(9," \u{1F50D} "),m()()(),v(10,"div",8)(11,"div",9)(12,"label",10),w(13,"Regione"),m(),v(14,"div",11)(15,"select",12),Q("ngModelChange",function(o){return K(i.selectedRegion,o)||(i.selectedRegion=o),o}),B("change",function(){return i.onRegionChange()}),v(16,"option",13),w(17,"Tutte le regioni"),m(),z(18,zq,2,2,"option",14),m(),v(19,"span",15),pr(),v(20,"svg",16),oe(21,"path",17),m()()()(),gr(),v(22,"div",9)(23,"label",18),w(24,"Provincia"),m(),v(25,"div",11)(26,"select",19),Q("ngModelChange",function(o){return K(i.selectedProvince,o)||(i.selectedProvince=o),o}),B("change",function(){return i.onProvinceChange()}),v(27,"option",13),w(28,"Tutta la regione"),m(),z(29,Uq,2,3,"option",14),m(),v(30,"span",15),pr(),v(31,"svg",16),oe(32,"path",17),m()()()(),gr(),v(33,"label",20)(34,"input",21),Q("ngModelChange",function(o){return K(i.openNow,o)||(i.openNow=o),o}),B("change",function(){return i.onOpenNowChange()}),m(),oe(35,"span",22),w(36," Aperti ora "),m()()(),z(37,Hq,4,0,"div",23)(38,$q,3,0,"div",23)(39,qq,16,1,"div",24),v(40,"div",25)(41,"div")(42,"small"),w(43),m()(),v(44,"div",26)(45,"button",27),B("click",function(){return i.previousPage()}),w(46,"\u2190 Prev"),m(),v(47,"div",28),w(48),m(),v(49,"button",27),B("click",function(){return i.nextPage()}),w(50,"Next \u2192"),m()()()()()),t&2&&(C(7),Y("ngModel",i.searchTerm),C(8),Y("ngModel",i.selectedRegion),C(3),M("ngForOf",i.regions),C(8),Y("ngModel",i.selectedProvince),M("disabled",!i.filteredProvinces.length),C(3),M("ngForOf",i.filteredProvinces),C(5),Y("ngModel",i.openNow),C(3),M("ngIf",i.loading),C(),M("ngIf",!i.loading&&i.admins.length===0),C(),M("ngIf",i.admins.length),C(4),zi("Mostrando ",i.admins.length," di ",i.total," risultati"),C(2),M("disabled",i.page<=1),C(3),zi("",i.page," / ",i.maxPage),C(),M("disabled",i.page>=i.maxPage))},dependencies:[Ue,at,et,Ht,Zn,Yn,yt,qi,Dn,Dt,kt,Ot],styles:[".filters-bar[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:1rem}.filters-inline[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}.form-group.compact[_ngcontent-%COMP%]{min-width:200px;max-width:260px;margin-bottom:0}.search-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.search-input[_ngcontent-%COMP%]{border-radius:999px;padding-left:2.2rem;height:44px;font-size:.95rem;box-shadow:none}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:.8rem;transform:translateY(-50%);color:var(--text-light);pointer-events:none}.select-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.select-field[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;padding:.65rem 1rem;border-radius:8px;background-color:var(--background2);color:var(--text-light);border:1px solid rgba(212,175,55,.08);font-size:.95rem;height:44px;cursor:pointer;transition:border-color .18s ease,box-shadow .18s ease,transform .12s ease;box-sizing:border-box}.select-field[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px #d4af370f}.select-icon[_ngcontent-%COMP%]{position:absolute;right:10px;pointer-events:none;color:var(--text-light);display:inline-flex;align-items:center;justify-content:center}.select-spinner[_ngcontent-%COMP%]{position:absolute;right:32px;width:16px;height:16px;border-radius:50%;border:2px solid rgba(255,255,255,.12);border-top-color:var(--primary);animation:_ngcontent-%COMP%_spin .8s linear infinite}.select-field[_ngcontent-%COMP%]:disabled + .select-icon[_ngcontent-%COMP%], .select-field[disabled][_ngcontent-%COMP%] + .select-icon[_ngcontent-%COMP%]{opacity:.45}.form-group.compact[_ngcontent-%COMP%]   .vis-label[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:.4rem;color:var(--text-muted)}@media (max-width: 720px){.filters-inline[_ngcontent-%COMP%]{width:100%;gap:.5rem}.form-group.compact[_ngcontent-%COMP%]{min-width:100%;max-width:100%}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.data-table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:80px;padding:8px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:20%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:20%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:35%;min-width:200px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:25%}.logo-cell[_ngcontent-%COMP%]{width:60px;height:60px;padding:4px;text-align:center}.logo-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;border-radius:6px;display:block;margin:0 auto}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;padding:12px 8px}@media (max-width: 768px){.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:60px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:25%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:25%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:50%}}"]})};var lt=ny(kL()),Eve=ny(LL());function Zq(n,e){n&1&&(v(0,"div",19)(1,"p"),w(2,"\u{1F4CD} Per una localizzazione precisa, assicurati di aver attivato il GPS sul tuo dispositivo e di aver concesso i permessi di posizione al browser."),m()())}function Yq(n,e){if(n&1&&(v(0,"option",20),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ee(t)}}function Qq(n,e){if(n&1&&(v(0,"option",20),w(1),m()),n&2){let t=e.$implicit;M("value",t.code),C(),ee(t.name)}}function Kq(n,e){n&1&&(v(0,"div",21),oe(1,"div",22),v(2,"p"),w(3,"Caricamento saloni..."),m()())}var FL=lt.icon({iconUrl:"assets/marker-icon-gold.png",iconRetinaUrl:"assets/marker-icon-2x-gold.png",shadowUrl:"assets/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]}),Jq=lt.icon({iconUrl:"assets/marker-icon-gold.png",iconRetinaUrl:"assets/marker-icon-2x-gold.png",shadowUrl:"assets/marker-shadow.png",iconSize:[35,51],iconAnchor:[17,51],popupAnchor:[1,-44],tooltipAnchor:[16,-38],shadowSize:[51,51]}),uv=class n{constructor(e,t){this.service=e;this.router=t}map=null;markersCluster=null;destroy$=new fe;resizeObserver=null;tileLayer=null;searchTerm="";selectedRegion="";selectedProvince="";selectedComune="";openNow=!1;allProvinces=[];regions=[];filteredProvinces=[];comuniList=[];admins=[];filteredAdmins=[];loading=!0;userLocation=null;userMarker=null;watchId=null;accuracyCircle=null;search$=new fe;geocodeCache=new Map;ngOnInit(){return D(this,null,function*(){this.setupSearchListener(),yield this.loadProvincesAndDefaults(),yield this.getUserLocation(),yield this.initMap(),yield this.fetchAdmins(),this.setupResizeObserver()})}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.watchId!==null&&navigator.geolocation.clearWatch(this.watchId),this.destroy$.next(),this.destroy$.complete(),this.map&&this.map.remove()}setupResizeObserver(){let e=document.getElementById("map");e&&(this.resizeObserver=new ResizeObserver(()=>{this.map&&setTimeout(()=>{this.map.invalidateSize(),this.tileLayer&&this.tileLayer.redraw()},100)}),this.resizeObserver.observe(e))}setupSearchListener(){this.search$.pipe(Hc(400),Ya(),Mn(this.destroy$)).subscribe(()=>{this.applyFilters()})}onSearchInput(e){this.searchTerm=e,this.search$.next(e)}loadProvincesAndDefaults(){return D(this,null,function*(){try{let e=yield this.service.getProvinceList();this.allProvinces=Array.isArray(e)?e:[],this.regions=Array.from(new Set(this.allProvinces.map(i=>i.region).filter(Boolean))).sort();let t=yield this.service.getMyProfile(!0);if(t){if(t.provincia){let i=String(t.provincia).trim().toUpperCase(),r=this.findProvinceByCode(i);r||(r=this.allProvinces.find(o=>String(o.name).toLowerCase()===String(t.provincia).toLowerCase())),r&&(this.selectedProvince=r.code,this.selectedRegion=r.region)}!this.selectedRegion&&t.regione&&(this.selectedRegion=String(t.regione).trim())}if(this.filterProvinces(),this.selectedProvince)try{this.comuniList=yield this.service.getComuniByProvince(this.selectedProvince)}catch(i){console.warn("Errore caricamento comuni",i),this.comuniList=[]}}catch(e){console.warn("Errore caricamento provinces/defaults",e),this.allProvinces=[],this.regions=[],this.filteredProvinces=[]}})}findProvinceByCode(e){if(e)return this.allProvinces.find(t=>String(t.code??"").toUpperCase()===e)}filterProvinces(){if(!this.selectedRegion){this.filteredProvinces=[];return}this.filteredProvinces=this.allProvinces.filter(e=>e.region===this.selectedRegion),this.selectedProvince&&(this.filteredProvinces.some(t=>t.code===this.selectedProvince)||(this.selectedProvince=""))}onRegionChange(){return D(this,null,function*(){this.selectedProvince="",this.selectedComune="",this.comuniList=[],this.filterProvinces(),yield this.fetchAdmins()})}onProvinceChange(){return D(this,null,function*(){if(this.selectedComune="",this.comuniList=[],!this.selectedProvince){yield this.fetchAdmins();return}try{this.comuniList=yield this.service.getComuniByProvince(this.selectedProvince.trim())}catch(e){console.warn("Errore caricamento comuni",e),this.comuniList=[]}finally{if(yield this.fetchAdmins(),this.map&&this.selectedProvince){let e=yield this.getProvinceCoordinates(this.selectedProvince);e&&this.map.setView([e.lat,e.lng],10)}}})}onOpenNowChange(){return D(this,null,function*(){yield this.fetchAdmins()})}getUserLocation(){return D(this,null,function*(){return new Promise(e=>{if(!navigator.geolocation){console.warn("Geolocalizzazione non supportata dal browser"),e();return}navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(t=>{if(t.state==="denied"){console.warn("Permessi di geolocalizzazione negati"),alert("Per utilizzare la geolocalizzazione precisa, abilita i permessi di posizione nel tuo browser."),e();return}this.requestAccurateLocation(e)}).catch(()=>{this.requestAccurateLocation(e)}):this.requestAccurateLocation(e)})})}requestAccurateLocation(e){let t={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};navigator.geolocation.getCurrentPosition(i=>{if(console.log("Posizione ottenuta con accuratezza:",i.coords.accuracy,"metri"),i.coords.accuracy>1e3&&(console.warn("Posizione non precisa - potrebbe essere basata su IP"),confirm("La tua posizione non sembra precisa. Assicurati di aver attivato il GPS sul tuo dispositivo per una localizzazione accurata. Vuoi riprovare?"))){this.requestAccurateLocation(e);return}this.userLocation={lat:i.coords.latitude,lng:i.coords.longitude,accuracy:i.coords.accuracy},console.log("Posizione utente ottenuta:",this.userLocation),e()},i=>{switch(console.warn("Errore geolocalizzazione:",i),i.code){case i.PERMISSION_DENIED:alert("Permesso di geolocalizzazione negato. Attiva i permessi di posizione nel tuo browser per utilizzare questa funzione.");break;case i.POSITION_UNAVAILABLE:alert("Impossibile ottenere la posizione. Assicurati che il GPS sia attivato sul tuo dispositivo.");break;case i.TIMEOUT:alert("Tempo scaduto per ottenere la posizione. Riprova in un area con migliore copertura GPS.");break}e()},t)}initMap(){return D(this,null,function*(){let e=document.getElementById("map");if(!e){console.error("Elemento mappa non trovato nel DOM"),setTimeout(()=>this.initMap(),500);return}if(e.offsetWidth===0||e.offsetHeight===0){setTimeout(()=>this.initMap(),500);return}let t={lat:41.9028,lng:12.4964};if(this.selectedProvince){let r=yield this.getProvinceCoordinates(this.selectedProvince);r&&typeof r.lat=="number"&&typeof r.lng=="number"&&(t=r)}else this.userLocation&&typeof this.userLocation.lat=="number"&&typeof this.userLocation.lng=="number"&&(t=this.userLocation);this.map=lt.map("map",{center:[t.lat,t.lng],zoom:10,zoomControl:!1,preferCanvas:!0});let i=this;this.tileLayer=lt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19,subdomains:["a","b","c"],detectRetina:!1,crossOrigin:!0,updateWhenIdle:!0,updateInterval:150}).addTo(this.map),this.tileLayer.on("tileerror",r=>{console.warn("Errore nel caricamento del tile:",r)}),setTimeout(()=>{this.map&&this.map.invalidateSize()},300),setTimeout(()=>{if(!this.map)return;this.markersCluster=lt.markerClusterGroup({chunkedLoading:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:50,disableClusteringAtZoom:16}),this.map.addLayer(this.markersCluster),lt.control.zoom({position:"topright"}).addTo(this.map);let r=lt.Control.extend({onAdd:s=>{let l=lt.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-custom locate-control"),c=lt.DomUtil.create("button","",l);c.innerHTML="\u{1F4CD}",c.title="Attiva geolocalizzazione in tempo reale";let d=!1;return c.addEventListener("click",()=>D(this,null,function*(){if(!i.map){console.error("Mappa non disponibile");return}if(d){i.watchId!==null&&(navigator.geolocation.clearWatch(i.watchId),i.watchId=null),i.accuracyCircle&&i.map&&(i.map.removeLayer(i.accuracyCircle),i.accuracyCircle=null),i.userMarker&&i.map&&(i.map.removeLayer(i.userMarker),i.userMarker=null),c.innerHTML="\u{1F4CD}",c.title="Attiva geolocalizzazione in tempo reale",d=!1;return}c.innerHTML="\u{1F504}",c.title="Disattiva geolocalizzazione",d=!0,i.userMarker&&i.map&&(i.map.removeLayer(i.userMarker),i.userMarker=null),i.accuracyCircle&&i.map&&(i.map.removeLayer(i.accuracyCircle),i.accuracyCircle=null);try{if(navigator.permissions&&(yield navigator.permissions.query({name:"geolocation"})).state==="denied"){alert("Permessi di geolocalizzazione negati. Attivali nelle impostazioni del browser."),c.innerHTML="\u{1F4CD}",c.title="Attiva geolocalizzazione in tempo reale",d=!1;return}}catch(h){console.warn("Errore verifica permessi:",h)}i.watchId=navigator.geolocation.watchPosition(h=>{if(!i.map){console.error("Mappa non disponibile durante l'aggiornamento della posizione");return}console.log("Posizione aggiornata con accuratezza:",h.coords.accuracy,"metri");let p={lat:h.coords.latitude,lng:h.coords.longitude,accuracy:h.coords.accuracy};i.userLocation=p,i.map.setView([p.lat,p.lng],15),i.userMarker&&i.map.removeLayer(i.userMarker),i.accuracyCircle&&i.map.removeLayer(i.accuracyCircle),i.userMarker=lt.marker([p.lat,p.lng],{icon:lt.divIcon({html:'<div style="background-color: #4285F4; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.5);"></div>',className:"user-location-marker",iconSize:[16,16],iconAnchor:[8,8]}),zIndexOffset:1e3}).addTo(i.map),i.accuracyCircle=lt.circle([p.lat,p.lng],{radius:p.accuracy,color:"#4285F4",fillColor:"#4285F4",fillOpacity:.2,weight:1}).addTo(i.map)},h=>{switch(console.warn("Errore geolocalizzazione continua:",h),c.innerHTML="\u{1F4CD}",c.title="Attiva geolocalizzazione in tempo reale",d=!1,h.code){case h.PERMISSION_DENIED:alert("Permesso di geolocalizzazione negato durante il tracking.");break;case h.POSITION_UNAVAILABLE:alert("Impossibile mantenere il tracking della posizione.");break;case h.TIMEOUT:alert("Timeout nel tracking della posizione.");break}},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})})),l}}),o=lt.Control.extend({onAdd:s=>{let l=lt.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-custom province-control"),c=lt.DomUtil.create("button","",l);return c.innerHTML="\u{1F5FA}\uFE0F",c.title="Centra sulla provincia",c.addEventListener("click",()=>D(this,null,function*(){if(i.map)if(i.selectedProvince){let d=yield i.getProvinceCoordinates(i.selectedProvince);d&&i.map.setView([d.lat,d.lng],10)}else alert("Nessuna provincia selezionata. Seleziona una provincia dai filtri.")})),l}});new o({position:"topright"}).addTo(this.map),new r({position:"topright"}).addTo(this.map),this.updateMapMarkers()},500)})}getProvinceCoordinates(e){return D(this,null,function*(){try{let t=this.allProvinces.find(d=>d.code===e);if(!t)return null;let i=`province_${e}`,r=this.geocodeCache.get(i);if(r)return r;let o=`${t.name}, Italia`,s=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(o)}`,l=yield fetch(s,{headers:{"User-Agent":"BarbieriApp/1.0"}});if(!l.ok)return null;let c=yield l.json();if(c&&c.length>0&&c[0].lat&&c[0].lon){let d={lat:parseFloat(c[0].lat),lng:parseFloat(c[0].lon)};return this.geocodeCache.set(i,d),d}}catch(t){console.warn("Errore durante la geocodifica della provincia:",t)}return null})}fetchAdmins(){return D(this,null,function*(){this.loading=!0;try{let t=(yield this.service.getAdmins({search:this.searchTerm,region:this.selectedRegion||void 0,province:this.selectedProvince||void 0,comune:this.selectedComune||void 0,limit:1e3,offset:0})).data||[];this.openNow&&(t=t.filter(i=>this.isOpenNow(i))),this.admins=t,this.applyFilters()}catch(e){console.error("Errore fetch admins",e),this.admins=[]}finally{this.loading=!1}})}applyFilters(){this.filteredAdmins=this.admins.filter(e=>!this.searchTerm||e.ragione_sociale?.toLowerCase().includes(this.searchTerm.toLowerCase())||e.indirizzo?.toLowerCase().includes(this.searchTerm.toLowerCase())||e.provincia?.toLowerCase().includes(this.searchTerm.toLowerCase())),this.updateMapMarkers()}updateMapMarkers(){return D(this,null,function*(){if(!this.map||!this.markersCluster)return;this.markersCluster.clearLayers();let e=5;for(let t=0;t<this.filteredAdmins.length;t+=e){let i=this.filteredAdmins.slice(t,t+e);yield Promise.all(i.map(r=>this.addAdminMarker(r))),t+e<this.filteredAdmins.length&&(yield new Promise(r=>setTimeout(r,100)))}this.filteredAdmins.length===0&&this.userLocation&&this.map&&this.map.setView([this.userLocation.lat,this.userLocation.lng],13)})}addAdminMarker(e){return D(this,null,function*(){try{let t=null;if(e.lat&&e.lng?t={lat:e.lat,lng:e.lng}:t=yield this.geocodeAddress(e.indirizzo,e.provincia),t&&this.markersCluster){let i=lt.marker([t.lat,t.lng],{icon:FL}),r=`
        <div class="salone-popup">
          <h3>${e.ragione_sociale||"Salone"}</h3>
          <p>${e.indirizzo||""}</p>
          <p>${e.telefono?`Tel: ${e.telefono}`:""}</p>
          <div class="popup-actions">
            <button onclick="window.location.href='/user/salone/${e.id}'">Vedi profilo</button>
            <button onclick="window.location.href='/user/nuovo-appuntamento/${e.id}'">Prenota</button>
          </div>
        </div>
      `;i.bindPopup(r),i.on("mouseover",()=>{i.setIcon(Jq)}),i.on("mouseout",()=>{i.setIcon(FL)}),this.markersCluster.addLayer(i)}}catch(t){console.warn(`Impossibile aggiungere marker per ${e.ragione_sociale}:`,t)}})}geocodeAddress(e,t){return D(this,null,function*(){if(!e)return null;let i=`${e}, ${t}`,r=this.geocodeCache.get(i);if(r)return r;try{yield new Promise(d=>setTimeout(d,100));let o=`${e}, ${t}, Italia`,s=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(o)}`,l=yield fetch(s,{headers:{"User-Agent":"BarbieriApp/1.0 (info@barbieriapp.it)"}});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);let c=yield l.json();if(c&&c.length>0&&c[0].lat&&c[0].lon){let d={lat:parseFloat(c[0].lat),lng:parseFloat(c[0].lon)};return this.geocodeCache.set(i,d),d}}catch(o){console.warn("Errore durante la geocodifica:",o)}return null})}isOpenNow(e){if(!e)return!1;if(["open24","open_24","always_open","open_24_7","is_open_24h"].some(d=>e[d]===!0))return!0;let i=e.opening_hours||[],r=new Date,o=r.getDay(),s=o===0?7:o,l=r.getHours()*60+r.getMinutes(),c=i.find(d=>d.day_index===s);return!c||!c.intervals||c.intervals.length===0?!1:c.intervals.some(d=>{let h=this.timeToMinutes(d.start),p=this.timeToMinutes(d.end);return l>=h&&l<=p})}timeToMinutes(e){if(!e)return 0;let t=e.includes(":")?e:`${e.slice(0,2)}:${e.slice(2)}`,[i,r]=t.split(":").map(Number);return isNaN(i)||isNaN(r)?0:i*60+r}viewProfile(e){this.router.navigate(["/user/salone",e])}book(e){this.router.navigate(["/user/nuovo-appuntamento",e])}refreshMap(){this.map&&(this.map.invalidateSize(),this.tileLayer&&this.tileLayer.redraw())}static \u0275fac=function(t){return new(t||n)($(xt),$(Ve))};static \u0275cmp=he({type:n,selectors:[["app-mappa"]],decls:26,vars:9,consts:[["searchInput",""],[1,"container"],[1,"section-title"],["class","info-banner",4,"ngIf"],[1,"filters-container"],[1,"search-box"],["type","text","placeholder","Cerca salone, indirizzo, citt\xE0...",3,"input","ngModel"],[1,"search-icon"],[1,"filter-row"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel","disabled"],[1,"checkbox-container"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"checkmark"],[1,"map-wrapper"],["id","map",1,"map"],["class","loading-overlay",4,"ngIf"],[1,"info-banner"],[3,"value"],[1,"loading-overlay"],[1,"spinner"]],template:function(t,i){if(t&1){let r=se();v(0,"div",1)(1,"h2",2),w(2,"Mappa"),m(),z(3,Zq,3,0,"div",3),v(4,"div",4)(5,"div",5)(6,"input",6,0),B("input",function(){k(r);let s=Ne(7);return N(i.onSearchInput(s.value))}),m(),v(8,"span",7),w(9,"\u{1F50D}"),m()(),v(10,"div",8)(11,"select",9),Q("ngModelChange",function(s){return k(r),K(i.selectedRegion,s)||(i.selectedRegion=s),N(s)}),B("change",function(){return k(r),N(i.onRegionChange())}),v(12,"option",10),w(13,"Tutte le regioni"),m(),z(14,Yq,2,2,"option",11),m(),v(15,"select",12),Q("ngModelChange",function(s){return k(r),K(i.selectedProvince,s)||(i.selectedProvince=s),N(s)}),B("change",function(){return k(r),N(i.onProvinceChange())}),v(16,"option",10),w(17,"Tutte le province"),m(),z(18,Qq,2,2,"option",11),m(),v(19,"label",13)(20,"input",14),Q("ngModelChange",function(s){return k(r),K(i.openNow,s)||(i.openNow=s),N(s)}),B("change",function(){return k(r),N(i.onOpenNowChange())}),m(),oe(21,"span",15),w(22," Aperti ora "),m()()(),v(23,"div",16),oe(24,"div",17),z(25,Kq,4,0,"div",18),m()()}t&2&&(C(3),M("ngIf",!i.userLocation),C(3),M("ngModel",i.searchTerm),C(5),Y("ngModel",i.selectedRegion),C(3),M("ngForOf",i.regions),C(),Y("ngModel",i.selectedProvince),M("disabled",!i.selectedRegion),C(3),M("ngForOf",i.filteredProvinces),C(2),Y("ngModel",i.openNow),C(5),M("ngIf",i.loading))},dependencies:[Ue,at,et,Ht,Zn,Yn,yt,qi,Dn,Dt,kt,Ot,Hw],styles:[".filters-container[_ngcontent-%COMP%]{background-color:var(--background2);padding:1rem var(--padding-h);border-bottom:1px solid rgba(255,255,255,.1);z-index:1000;flex-shrink:0}.search-box[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border-radius:var(--border-radius);border:1px solid rgba(255,255,255,.2);background-color:var(--background);color:var(--text-light);font-size:var(--font-size-base);box-sizing:border-box}.search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:var(--text-muted)}.filter-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;align-items:center}.filter-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:var(--border-radius);border:1px solid rgba(255,255,255,.2);background-color:var(--background);color:var(--text-light);min-width:150px;box-sizing:border-box}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;color:var(--text-light)}.checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:.5rem}.map-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;min-height:0;overflow:hidden}#map[_ngcontent-%COMP%]{height:100%;width:100%;min-height:400px}.leaflet-container[_ngcontent-%COMP%]   .leaflet-overlay-pane[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .leaflet-container[_ngcontent-%COMP%]   .leaflet-marker-pane[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .leaflet-container[_ngcontent-%COMP%]   .leaflet-shadow-pane[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .leaflet-container[_ngcontent-%COMP%]   .leaflet-tile-pane[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.leaflet-container[_ngcontent-%COMP%]   .leaflet-tile[_ngcontent-%COMP%]{filter:inherit}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#000000b3;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top:4px solid var(--primary);animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.salone-popup[_ngcontent-%COMP%]{color:var(--background);padding:.5rem}.salone-popup[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--primary);font-size:1.1rem}.salone-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0}.popup-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}.popup-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:var(--primary);color:var(--background);border:none;border-radius:var(--border-radius);cursor:pointer;font-size:.8rem}.locate-control[_ngcontent-%COMP%]{margin:10px}.locate-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--text-light);border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;box-shadow:0 1px 5px #000000a6}.refresh-control[_ngcontent-%COMP%]{margin:50px 10px 10px}.refresh-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--text-light);border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;box-shadow:0 1px 5px #000000a6}@media (max-width: 768px){.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:unset;width:100%}.filters-container[_ngcontent-%COMP%]{padding:.5rem}.mappa-container[_ngcontent-%COMP%]{height:100%;width:100%}}.leaflet-interactive.accuracy-circle[_ngcontent-%COMP%]{stroke-dasharray:5,5;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.7}50%{opacity:.3}to{opacity:.7}}.user-location-marker[_ngcontent-%COMP%]{background:transparent!important;border:none!important}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.7}to{transform:scale(1);opacity:1}}.user-location-marker[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.accuracy-circle[_ngcontent-%COMP%]{stroke-dasharray:5,5;animation:_ngcontent-%COMP%_dash 10s linear infinite}@keyframes _ngcontent-%COMP%_dash{to{stroke-dashoffset:100}}.info-banner[_ngcontent-%COMP%]{background-color:#4285f41a;border-left:4px solid #4285F4;padding:.5rem 1rem;margin:0 var(--padding-h) 1rem;border-radius:4px}.info-banner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4285f4;font-size:.9rem}"]})};var dv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-storico-apt"]],decls:2,vars:0,template:function(t,i){t&1&&(kn(0,"p"),w(1,"storico-apt works!"),Nn())},encapsulation:2})};var fv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-calendario-user"]],decls:2,vars:0,template:function(t,i){t&1&&(kn(0,"p"),w(1,"calendario-user works!"),Nn())},encapsulation:2})};function Xq(n,e){n&1&&(v(0,"div")(1,"p"),w(2,"Caricamento dati..."),m(),oe(3,"div",8),m())}function e9(n,e){n&1&&(v(0,"div")(1,"p",9),w(2,"Impossibile caricare i dati del profilo"),m()())}function t9(n,e){if(n&1&&(ut(0),v(1,"p")(2,"strong"),w(3,"Nome:"),m(),w(4),m(),v(5,"p")(6,"strong"),w(7,"Cognome:"),m(),w(8),m(),v(9,"p")(10,"strong"),w(11,"Email:"),m(),w(12),m(),v(13,"p")(14,"strong"),w(15,"Sesso:"),m(),w(16),m(),dt()),n&2){let t=A(2);C(4),ie(" ",t.profile.first_name||"\u2014"),C(4),ie(" ",t.profile.last_name||"\u2014"),C(4),ie(" ",t.profile.email||"\u2014"),C(4),ie(" ",t.profile.sesso||"\u2014")}}function n9(n,e){if(n&1&&(ut(0),v(1,"p")(2,"strong"),w(3,"Ragione Sociale:"),m(),w(4),m(),v(5,"p")(6,"strong"),w(7,"Nome:"),m(),w(8),m(),v(9,"p")(10,"strong"),w(11,"Cognome:"),m(),w(12),m(),v(13,"p")(14,"strong"),w(15,"Email:"),m(),w(16),m(),v(17,"p")(18,"strong"),w(19,"P.IVA:"),m(),w(20),m(),v(21,"p")(22,"strong"),w(23,"Indirizzo:"),m(),w(24),m(),dt()),n&2){let t=A(2);C(4),ie(" ",t.profile.ragione_sociale||"\u2014"),C(4),ie(" ",t.profile.first_name||"\u2014"),C(4),ie(" ",t.profile.last_name||"\u2014"),C(4),ie(" ",t.profile.email||"\u2014"),C(4),ie(" ",t.profile.piva||"\u2014"),C(4),ie(" ",t.profile.indirizzo||"\u2014")}}function i9(n,e){if(n&1&&(v(0,"span"),w(1),m()),n&2){let t=A(2);C(),ee(t.profile.telefono||"\u2014")}}function r9(n,e){if(n&1){let t=se();v(0,"button",26),B("click",function(){k(t);let r=A(2);return N(r.startEditPhone())}),w(1,"Modifica"),m()}}function o9(n,e){if(n&1){let t=se();v(0,"div",27)(1,"input",28),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.newPhone,r)||(o.newPhone=r),N(r)}),m(),v(2,"button",26),B("click",function(){k(t);let r=A(2);return N(r.savePhone())}),w(3,"Salva"),m(),v(4,"button",29),B("click",function(){k(t);let r=A(2);return N(r.cancelEditPhone())}),w(5,"Annulla"),m()()}if(n&2){let t=A(2);C(),Y("ngModel",t.newPhone)}}function s9(n,e){if(n&1){let t=se();v(0,"div")(1,"p",32),w(2),m(),v(3,"button",26),B("click",function(){k(t);let r=A(3);return N(r.startEditDescription())}),w(4,"Modifica"),m()()}if(n&2){let t=A(3);C(2),ee(t.profile.descrizione||"Nessuna descrizione inserita")}}function a9(n,e){if(n&1){let t=se();v(0,"div",33)(1,"div",34)(2,"label",35),w(3,"Descrizione Aziendale"),m(),v(4,"textarea",36),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.newDescription,r)||(o.newDescription=r),N(r)}),m()(),v(5,"div",37)(6,"button",26),B("click",function(){k(t);let r=A(3);return N(r.saveDescription())}),w(7,"Salva"),m(),v(8,"button",29),B("click",function(){k(t);let r=A(3);return N(r.cancelEditDescription())}),w(9,"Annulla"),m()()()}if(n&2){let t=A(3);C(4),Y("ngModel",t.newDescription)}}function l9(n,e){if(n&1&&(v(0,"div",30)(1,"h3"),w(2,"Descrizione Aziendale"),m(),z(3,s9,5,1,"div",7)(4,a9,10,1,"div",31),m()),n&2){let t=A(2);C(3),M("ngIf",!t.editDescription),C(),M("ngIf",t.editDescription)}}function c9(n,e){if(n&1){let t=se();v(0,"div")(1,"p")(2,"strong"),w(3,"Regione:"),m(),w(4),m(),v(5,"p")(6,"strong"),w(7,"Provincia:"),m(),w(8),m(),v(9,"button",26),B("click",function(){k(t);let r=A(2);return N(r.startEditLocation())}),w(10,"Modifica"),m()()}if(n&2){let t=A(2);C(4),ie(" ",t.getRegionName(t.profile.provincia)||"\u2014"),C(4),ie(" ",t.getProvinceName(t.profile.provincia)||"\u2014")}}function u9(n,e){if(n&1&&(v(0,"option",44),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ee(t)}}function d9(n,e){if(n&1&&(v(0,"option",44),w(1),m()),n&2){let t=e.$implicit;M("value",t.code),C(),ie(" ",t.name," ")}}function f9(n,e){if(n&1){let t=se();v(0,"div",38)(1,"div",34)(2,"label"),w(3,"Regione"),m(),v(4,"select",39),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.selectedRegion,r)||(o.selectedRegion=r),N(r)}),B("change",function(){k(t);let r=A(2);return N(r.filterProvinces())}),v(5,"option",40),w(6,"Seleziona regione"),m(),z(7,u9,2,2,"option",41),m()(),v(8,"div",34)(9,"label"),w(10,"Provincia"),m(),v(11,"select",42),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.selectedProvince,r)||(o.selectedProvince=r),N(r)}),v(12,"option",40),w(13,"Seleziona provincia"),m(),z(14,d9,2,2,"option",41),m()(),v(15,"div",43)(16,"button",25),B("click",function(){k(t);let r=A(2);return N(r.saveLocation())}),w(17,"Salva"),m(),v(18,"button",29),B("click",function(){k(t);let r=A(2);return N(r.cancelEditLocation())}),w(19,"Annulla"),m()()()}if(n&2){let t=A(2);C(4),Y("ngModel",t.selectedRegion),C(3),M("ngForOf",t.regions),C(4),Y("ngModel",t.selectedProvince),M("disabled",!t.selectedRegion),C(3),M("ngForOf",t.filteredProvinces),C(2),M("disabled",!t.selectedProvince)}}function h9(n,e){if(n&1){let t=se();v(0,"div")(1,"p")(2,"strong"),w(3,"Scorte Basse:"),m(),w(4),m(),v(5,"p")(6,"strong"),w(7,"Scorte Critiche:"),m(),w(8),m(),v(9,"button",26),B("click",function(){k(t);let r=A(3);return N(r.startEditStockSettings())}),w(10,"Modifica"),m()()}if(n&2){let t=A(3);C(4),ie(" ",t.profile.scorte_basse||5),C(4),ie(" ",t.profile.scorte_critiche||2)}}function p9(n,e){if(n&1){let t=se();v(0,"div",47)(1,"div",34)(2,"label",48),w(3,"Soglia Scorte Basse"),m(),v(4,"input",49),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.scorteBasse,r)||(o.scorteBasse=r),N(r)}),m(),v(5,"small"),w(6,"Prodotti con quantit\xE0 inferiore o uguale a questo valore verranno considerati a scorta bassa"),m()(),v(7,"div",34)(8,"label",50),w(9,"Soglia Scorte Critiche"),m(),v(10,"input",51),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.scorteCritiche,r)||(o.scorteCritiche=r),N(r)}),m(),v(11,"small"),w(12,"Prodotti con quantit\xE0 inferiore o uguale a questo valore verranno considerati a scorta critica"),m()(),v(13,"div",37)(14,"button",26),B("click",function(){k(t);let r=A(3);return N(r.saveStockSettings())}),w(15,"Salva"),m(),v(16,"button",29),B("click",function(){k(t);let r=A(3);return N(r.cancelEditStockSettings())}),w(17,"Annulla"),m()()()}if(n&2){let t=A(3);C(4),Y("ngModel",t.scorteBasse),M("max",t.scorteCritiche-1),C(6),Y("ngModel",t.scorteCritiche)}}function g9(n,e){if(n&1&&(v(0,"div",45)(1,"h3"),w(2,"Impostazioni Scorte"),m(),z(3,h9,11,2,"div",7)(4,p9,18,3,"div",46),m()),n&2){let t=A(2);C(3),M("ngIf",!t.editStockSettings),C(),M("ngIf",t.editStockSettings)}}function m9(n,e){if(n&1&&(ut(0),v(1,"a",72),w(2),m(),dt()),n&2){let t=A(4);C(),M("href",t.formatUrl(t.profile.socials.facebook),_t),C(),ie(" ",t.profile.socials.facebook," ")}}function _9(n,e){n&1&&(v(0,"span",73),w(1,"Non presente"),m())}function v9(n,e){if(n&1&&(ut(0),v(1,"a",72),w(2),m(),dt()),n&2){let t=A(4);C(),M("href",t.formatUrl(t.profile.socials.instagram),_t),C(),ie(" ",t.profile.socials.instagram," ")}}function y9(n,e){n&1&&(v(0,"span",73),w(1,"Non presente"),m())}function b9(n,e){if(n&1&&(ut(0),v(1,"a",72),w(2),m(),dt()),n&2){let t=A(4);C(),M("href",t.formatUrl(t.profile.socials.linkedin),_t),C(),ie(" ",t.profile.socials.linkedin," ")}}function w9(n,e){n&1&&(v(0,"span",73),w(1,"Non presente"),m())}function C9(n,e){if(n&1&&(ut(0),v(1,"a",72),w(2),m(),dt()),n&2){let t=A(4);C(),M("href",t.profile.socials.whatsapp,_t),C(),ie(" ",t.profile.socials.whatsapp," ")}}function E9(n,e){n&1&&(v(0,"span",73),w(1,"Non presente"),m())}function S9(n,e){if(n&1){let t=se();v(0,"div")(1,"div",54),pr(),v(2,"svg",55),oe(3,"path",56),m(),gr(),v(4,"div",57),z(5,m9,3,2,"ng-container",58)(6,_9,2,0,"ng-template",null,0,dn),m()(),v(8,"div",59),pr(),v(9,"svg",55)(10,"defs")(11,"linearGradient",60),oe(12,"stop",61)(13,"stop",62)(14,"stop",63)(15,"stop",64)(16,"stop",65),m()(),oe(17,"path",66),m(),gr(),v(18,"div",57),z(19,v9,3,2,"ng-container",58)(20,y9,2,0,"ng-template",null,1,dn),m()(),v(22,"div",67),pr(),v(23,"svg",55),oe(24,"path",68),m(),gr(),v(25,"div",57),z(26,b9,3,2,"ng-container",58)(27,w9,2,0,"ng-template",null,2,dn),m()(),v(29,"div",69),pr(),v(30,"svg",55),oe(31,"path",70),m(),gr(),v(32,"div",57),z(33,C9,3,2,"ng-container",58)(34,E9,2,0,"ng-template",null,3,dn),m()(),v(36,"div",71)(37,"button",26),B("click",function(){k(t);let r=A(3);return N(r.startEditSocials())}),w(38,"Modifica Social"),m()()()}if(n&2){let t=Ne(7),i=Ne(21),r=Ne(28),o=Ne(35),s=A(3);C(5),M("ngIf",s.profile.socials==null?null:s.profile.socials.facebook)("ngIfElse",t),C(14),M("ngIf",s.profile.socials==null?null:s.profile.socials.instagram)("ngIfElse",i),C(7),M("ngIf",s.profile.socials==null?null:s.profile.socials.linkedin)("ngIfElse",r),C(7),M("ngIf",s.profile.socials==null?null:s.profile.socials.whatsapp)("ngIfElse",o)}}function D9(n,e){if(n&1){let t=se();v(0,"div",74)(1,"div",34)(2,"label"),w(3,"Facebook (URL)"),m(),v(4,"input",75),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.editableSocials.facebook,r)||(o.editableSocials.facebook=r),N(r)}),m()(),v(5,"div",34)(6,"label"),w(7,"Instagram (URL)"),m(),v(8,"input",76),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.editableSocials.instagram,r)||(o.editableSocials.instagram=r),N(r)}),m()(),v(9,"div",34)(10,"label"),w(11,"LinkedIn (URL)"),m(),v(12,"input",77),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.editableSocials.linkedin,r)||(o.editableSocials.linkedin=r),N(r)}),m()(),v(13,"div",34)(14,"label"),w(15,"WhatsApp (numero o link)"),m(),v(16,"input",78),Q("ngModelChange",function(r){k(t);let o=A(3);return K(o.editableSocials.whatsapp,r)||(o.editableSocials.whatsapp=r),N(r)}),m()(),v(17,"div",79)(18,"button",26),B("click",function(){k(t);let r=A(3);return N(r.saveSocials())}),w(19,"Salva"),m(),v(20,"button",29),B("click",function(){k(t);let r=A(3);return N(r.cancelEditSocials())}),w(21,"Annulla"),m()()()}if(n&2){let t=A(3);C(4),Y("ngModel",t.editableSocials.facebook),C(4),Y("ngModel",t.editableSocials.instagram),C(4),Y("ngModel",t.editableSocials.linkedin),C(4),Y("ngModel",t.editableSocials.whatsapp)}}function x9(n,e){if(n&1&&(v(0,"div",52)(1,"h3"),w(2,"Social"),m(),z(3,S9,39,8,"div",7)(4,D9,22,4,"div",53),m()),n&2){let t=A(2);C(3),M("ngIf",!t.editSocials),C(),M("ngIf",t.editSocials)}}function I9(n,e){if(n&1&&(v(0,"div",89),oe(1,"img",90),m()),n&2){let t=A(3);C(),M("src",t.profile.logo_url,_t)}}function M9(n,e){if(n&1){let t=se();v(0,"button",84),B("click",function(){k(t);let r=A(3);return N(r.uploadLogo())}),w(1,"Carica Logo"),m()}}function T9(n,e){n&1&&(v(0,"div"),w(1,"Caricamento in corso..."),m())}function P9(n,e){n&1&&(v(0,"div",91),w(1,"Logo caricato con successo!"),m())}function A9(n,e){n&1&&(v(0,"div",92),w(1,"Errore nel caricamento del logo."),m())}function R9(n,e){if(n&1){let t=se();v(0,"aside",80)(1,"h3"),w(2,"Logo"),m(),z(3,I9,2,1,"div",81),v(4,"div",82)(5,"input",83,4),B("change",function(r){k(t);let o=A(2);return N(o.onLogoSelected(r))}),m(),v(7,"button",84),B("click",function(){k(t);let r=Ne(6);return N(r.click())}),w(8,"Scegli un file"),m(),v(9,"span",85),w(10),m(),z(11,M9,2,0,"button",86),m(),z(12,T9,2,0,"div",7)(13,P9,2,0,"div",87)(14,A9,2,0,"div",88),m()}if(n&2){let t=A(2);C(3),M("ngIf",t.profile.logo_url),C(7),ee(t.selectedLogoFile?t.selectedLogoFile.name:"Nessun file selezionato"),C(),M("ngIf",t.selectedLogoFile),C(),M("ngIf",t.logoUploadStatus==="uploading"),C(),M("ngIf",t.logoUploadStatus==="success"),C(),M("ngIf",t.logoUploadStatus==="error")}}function O9(n,e){n&1&&(v(0,"div",97),w(1,"Caricamento orari..."),m())}function k9(n,e){if(n&1&&(v(0,"span",101),w(1),m()),n&2){let t=A().$implicit,i=A(6);C(),ie(" ",i.formatIntervals(t.intervals)," ")}}function N9(n,e){n&1&&(v(0,"span",102),w(1,"Chiuso"),m())}function L9(n,e){if(n&1&&(v(0,"div")(1,"p")(2,"strong",99),w(3),m(),z(4,k9,2,1,"span",100)(5,N9,2,0,"ng-template",null,6,dn),m()()),n&2){let t=e.$implicit,i=Ne(6);C(3),ie("",t.dayName,":"),C(),M("ngIf",t.intervals==null?null:t.intervals.length)("ngIfElse",i)}}function F9(n,e){if(n&1&&(ut(0),z(1,L9,7,3,"div",98),dt()),n&2){let t=A(5);C(),M("ngForOf",t.profile.opening_hours)}}function V9(n,e){n&1&&(v(0,"p",103),w(1,"Nessun orario presente"),m())}function j9(n,e){if(n&1){let t=se();ut(0),z(1,F9,2,1,"ng-container",58)(2,V9,2,0,"ng-template",null,5,dn),v(4,"button",26),B("click",function(){k(t);let r=A(4);return N(r.startEditHours())}),w(5,"Modifica Orari"),m(),dt()}if(n&2){let t=Ne(3),i=A(4);C(),M("ngIf",i.profile.opening_hours==null?null:i.profile.opening_hours.length)("ngIfElse",t)}}function B9(n,e){if(n&1&&(v(0,"div"),z(1,O9,2,0,"div",96)(2,j9,6,2,"ng-container",7),m()),n&2){let t=A(3);C(),M("ngIf",t.loading),C(),M("ngIf",!t.loading)}}function z9(n,e){n&1&&(v(0,"div")(1,"p"),w(2,"Attualmente chiuso"),m()())}function U9(n,e){if(n&1){let t=se();v(0,"div",110)(1,"label"),w(2,"Da"),m(),v(3,"input",111),Q("ngModelChange",function(r){let o=k(t).index,s=A().$implicit;return K(s.intervals[o].start,r)||(s.intervals[o].start=r),N(r)}),m(),v(4,"label"),w(5,"A"),m(),v(6,"input",111),Q("ngModelChange",function(r){let o=k(t).index,s=A().$implicit;return K(s.intervals[o].end,r)||(s.intervals[o].end=r),N(r)}),m(),v(7,"button",29),B("click",function(){let r=k(t).index,o=A().index,s=A(4);return N(s.removeInterval(o,r))}),w(8,"Rimuovi"),m()()}if(n&2){let t=e.index,i=A(),r=i.$implicit,o=i.index;C(3),M("name",Gp("start-",o,"-",t)),Y("ngModel",r.intervals[t].start),C(3),M("name",Gp("end-",o,"-",t)),Y("ngModel",r.intervals[t].end)}}function H9(n,e){if(n&1){let t=se();v(0,"div",106)(1,"h4"),w(2),m(),z(3,z9,3,0,"div",7)(4,U9,9,8,"div",107),v(5,"button",29),B("click",function(){let r=k(t).index,o=A(4);return N(o.addInterval(r))}),w(6,"Aggiungi intervallo"),m(),v(7,"label",108)(8,"input",109),Q("ngModelChange",function(r){let o=k(t).$implicit;return K(o.closed,r)||(o.closed=r),N(r)}),B("change",function(){let r=k(t).index,o=A(4);return N(o.toggleClosed(r))}),m(),w(9," Chiuso "),m(),oe(10,"hr"),m()}if(n&2){let t=e.$implicit;C(2),ee(t.dayName),C(),M("ngIf",t.intervals.length===0),C(),M("ngForOf",t.intervals),C(4),Y("ngModel",t.closed)}}function $9(n,e){if(n&1){let t=se();v(0,"div",104),z(1,H9,11,4,"div",105),v(2,"div",37)(3,"button",26),B("click",function(){k(t);let r=A(3);return N(r.saveHours())}),w(4,"Salva Orari"),m(),v(5,"button",29),B("click",function(){k(t);let r=A(3);return N(r.cancelEditHours())}),w(6,"Annulla"),m()()()}if(n&2){let t=A(3);C(),M("ngForOf",t.editableHours)}}function W9(n,e){if(n&1&&(v(0,"div")(1,"h2"),w(2,"Orari"),m(),v(3,"div",93)(4,"div",94),z(5,B9,3,2,"div",7)(6,$9,7,1,"div",95),m()()()),n&2){let t=A(2);C(5),M("ngIf",!t.editHours),C(),M("ngIf",t.editHours)}}function G9(n,e){if(n&1){let t=se();v(0,"div",117)(1,"label"),w(2),m(),oe(3,"div",118),v(4,"input",119),Q("ngModelChange",function(r){let o=k(t).$implicit,s=A(3);return K(s.brand[o.key],r)||(s.brand[o.key]=r),N(r)}),m()()}if(n&2){let t=e.$implicit,i=A(3);C(2),ie("",t.label,":"),C(),Rs("background",i.brand[t.key]),C(),Y("ngModel",i.brand[t.key]),M("name",t.key)}}function q9(n,e){n&1&&(v(0,"span"),w(1,"Salva Configurazione"),m())}function Z9(n,e){n&1&&(v(0,"span"),w(1,"Salvataggio..."),m())}function Y9(n,e){n&1&&(v(0,"div",91),w(1,"Configurazione salvata con successo!"),m())}function Q9(n,e){n&1&&(v(0,"div",92),w(1,"Errore durante il salvataggio!"),m())}function K9(n,e){if(n&1){let t=se();v(0,"div",112)(1,"h2"),w(2,"Personalizzazione Brand"),m(),v(3,"form",113),B("ngSubmit",function(){k(t);let r=A(2);return N(r.saveBrand())}),z(4,G9,5,5,"div",114),v(5,"div",37)(6,"button",115),z(7,q9,2,0,"span",7)(8,Z9,2,0,"span",7),m(),v(9,"button",116),B("click",function(){k(t);let r=A(2);return N(r.resetBrandColors())}),w(10,"Reset"),m()(),z(11,Y9,2,0,"div",87)(12,Q9,2,0,"div",88),m()()}if(n&2){let t=A(2);C(4),M("ngForOf",t.brandKeys),C(2),M("disabled",t.brandSaveStatus==="saving"),C(),M("ngIf",t.brandSaveStatus!=="saving"),C(),M("ngIf",t.brandSaveStatus==="saving"),C(3),M("ngIf",t.brandSaveStatus==="success"),C(),M("ngIf",t.brandSaveStatus==="error")}}function J9(n,e){n&1&&(v(0,"span"),w(1,"Disconnetti"),m())}function X9(n,e){n&1&&(v(0,"span"),w(1,"Disconnessione in corso..."),m())}function e7(n,e){if(n&1){let t=se();ut(0),v(1,"div",10)(2,"h2",11),w(3,"Dati Account"),m(),v(4,"div",12)(5,"div",13),z(6,t9,17,4,"ng-container",7)(7,n9,25,6,"ng-container",7),v(8,"div",14)(9,"p")(10,"strong"),w(11,"Telefono:"),m(),z(12,i9,2,1,"span",7),m(),z(13,r9,2,0,"button",15)(14,o9,6,1,"div",16),m(),z(15,l9,5,2,"div",17),v(16,"div",18)(17,"h3"),w(18,"Zona di Interesse"),m(),z(19,c9,11,2,"div",7)(20,f9,20,6,"div",19),m(),z(21,g9,5,2,"div",20)(22,x9,5,2,"div",21),m(),z(23,R9,15,6,"aside",22),m(),z(24,W9,7,2,"div",7)(25,K9,13,6,"div",23),v(26,"div",24)(27,"button",25),B("click",function(){k(t);let r=A();return N(r.onSignOut())}),z(28,J9,2,0,"span",7)(29,X9,2,0,"span",7),m()()(),dt()}if(n&2){let t=A();C(6),M("ngIf",!t.isAdmin()),C(),M("ngIf",t.isAdmin()),C(5),M("ngIf",!t.editPhone),C(),M("ngIf",!t.editPhone),C(),M("ngIf",t.editPhone),C(),M("ngIf",t.isAdmin()),C(4),M("ngIf",!t.editLocation),C(),M("ngIf",t.editLocation),C(),M("ngIf",t.isAdmin()),C(),M("ngIf",t.isAdmin()),C(),M("ngIf",t.isAdmin()),C(),M("ngIf",t.isAdmin()),C(),M("ngIf",t.isAdmin()),C(2),M("disabled",t.signingOut),C(),M("ngIf",!t.signingOut),C(),M("ngIf",t.signingOut)}}var bf=class n{constructor(e,t){this.service=e;this.router=t}editLocation=!1;allProvinces=[];regions=[];filteredProvinces=[];selectedRegion="";selectedProvince="";loading=!0;editPhone=!1;editWebsite=!1;brandSaveStatus="idle";logoUploadStatus="idle";websiteSaveStatus="idle";editStockSettings=!1;scorteBasse=5;scorteCritiche=2;profile={id:"",full_name:"",first_name:"",last_name:"",email:"",role:"",salon_id:null,telefono:"",piva:"",pec:"",data_nascita:null,luogo_nascita:"",ragione_sociale:"",logo_url:null,indirizzo:"",sito_web:""};newPhone="";newWebsite="";websiteError="";selectedLogoFile=null;editDescription=!1;newDescription="";brand={primary_color:"#cc9c00",secondary_color:"#8f6d00",text_color:"#eeeeee",background_color:"#000000",background2_color:"#111111ff"};brandKeys=[{key:"primary_color",label:"Primario"},{key:"secondary_color",label:"Secondario"},{key:"text_color",label:"Testo"},{key:"background_color",label:"Sfondo"},{key:"background2_color",label:"Sfondo 2"}];editSesso=!1;signingOut=!1;newSesso="";editSocials=!1;editableSocials={};editHours=!1;editableHours=[];loadingHours=!1;isAdmin(){return this.profile?typeof this.profile.is_admin=="boolean"?this.profile.is_admin:!!(this.profile.role&&String(this.profile.role).toLowerCase()==="admin"||this.profile.salon_id):!1}ngOnInit(){return D(this,null,function*(){this.loading=!0;try{let e=yield this.service.getMyProfile(!0);if(!e||!e.id){console.error("Reindirizzamento al login: sessione non valida o profilo mancante"),yield this.router.navigate(["/login"]);return}if(this.profile=e,this.scorteBasse=this.profile.scorte_basse||5,this.scorteCritiche=this.profile.scorte_critiche||2,console.log("Caricamento province in corso..."),this.allProvinces=yield this.service.getProvinceList(),(!Array.isArray(this.allProvinces)||this.allProvinces.length===0)&&(console.warn("Attenzione: il service non ha restituito province; array vuoto."),this.allProvinces=[]),console.log(`Caricate ${this.allProvinces.length} province`),this.regions=[...new Set(this.allProvinces.map(t=>t.region).filter(Boolean))].filter(t=>t!=="Tutte").sort(),this.profile.provincia){let t=String(this.profile.provincia).toUpperCase(),i=this.allProvinces.find(r=>String(r.code).toUpperCase()===t);i?(this.selectedRegion=i.region,this.filterProvinces(),this.selectedProvince=i.code):console.warn("Provincia profilo non trovata nella lista delle province:",this.profile.provincia),this.isAdmin()&&(yield this.loadOpeningHours())}this.isAdmin()&&(yield this.loadBrandSettings(),this.applyBrandColors())}catch(e){console.error("Errore caricamento dati in ngOnInit:",e)}finally{this.loading=!1}})}filterProvinces(){if(!this.selectedRegion){this.filteredProvinces=[];return}this.filteredProvinces=this.allProvinces.filter(e=>e.region===this.selectedRegion&&e.code&&e.code!==""),this.selectedProvince=""}startEditLocation(){this.selectedProvince=this.profile.provincia||"",this.editLocation=!0}saveLocation(){return D(this,null,function*(){if(console.log("Saving location:",{province:this.selectedProvince,region:this.selectedRegion}),!!this.selectedProvince)try{let e=this.selectedProvince,t=this.selectedRegion;yield this.service.updateProfileLocation(this.profile.id,e,t),this.profile.provincia=e,this.profile.regione=t,this.editLocation=!1}catch(e){console.error("Errore aggiornamento provincia:",e),alert("Errore durante il salvataggio della provincia")}})}cancelEditLocation(){this.editLocation=!1}getProvinceName(e){if(!e)return"\u2014";let t=String(e).trim().toUpperCase(),i=this.allProvinces.find(r=>String(r.code??"").toUpperCase()===t);return i?i.name:"\u2014"}getRegionName(e){if(!e)return"\u2014";let t=String(e).trim().toUpperCase(),i=this.allProvinces.find(r=>String(r.code??"").toUpperCase()===t);return i?i.region:"\u2014"}saveBrand(){return D(this,null,function*(){this.brandSaveStatus="saving";try{yield this.service.saveBrandSettings(this.profile.id,this.brand),this.brandSaveStatus="success",this.applyBrandColors(),setTimeout(()=>this.brandSaveStatus="idle",3e3)}catch(e){this.brandSaveStatus="error",console.error("Errore nel salvataggio:",e),setTimeout(()=>this.brandSaveStatus="idle",5e3)}})}loadBrandSettings(){return D(this,null,function*(){try{let e=yield this.service.getBrandSettings(this.profile.id);e&&(this.brand={primary_color:e.primary_color||this.brand.primary_color,secondary_color:e.secondary_color||this.brand.secondary_color,text_color:e.text_color||this.brand.text_color,background_color:e.background_color||this.brand.background_color,background2_color:e.background2_color||this.brand.background2_color})}catch(e){console.error("Errore nel caricamento brand settings:",e)}})}applyBrandColors(){this.isAdmin()&&requestAnimationFrame(()=>{document.documentElement.style.setProperty("--primary",this.brand.primary_color),document.documentElement.style.setProperty("--secondary",this.brand.secondary_color),document.documentElement.style.setProperty("--text-light",this.brand.text_color),document.documentElement.style.setProperty("--background",this.brand.background_color),document.documentElement.style.setProperty("--background2",this.brand.background2_color)})}resetBrandColors(){confirm("Sei sicuro di voler ripristinare i colori originali?")&&(this.brand={primary_color:"#cc9c00",secondary_color:"#8f6d00",text_color:"#eeeeee",background_color:"#000000",background2_color:"#111111ff"},this.applyBrandColors(),alert("Colori ripristinati ai valori originali. Ricordati di salvare per applicare permanentemente."))}startEditPhone(){this.newPhone=this.profile.telefono,this.editPhone=!0}savePhone(){return D(this,null,function*(){try{yield this.service.updateProfilePhone(this.profile.id,this.newPhone),this.profile.telefono=this.newPhone,this.editPhone=!1,console.log("Telefono aggiornato con successo")}catch(e){console.error("Errore aggiornamento telefono:",e)}})}cancelEditPhone(){this.editPhone=!1}startEditWebsite(){this.websiteError="",this.newWebsite=this.profile?.sito_web??"",this.editWebsite=!0}cancelEditWebsite(){this.websiteError="",this.newWebsite="",this.editWebsite=!1}isProbablyValidUrl(e){if(!e)return!1;let t=e.trim();return/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(|\/.*)$/.test(t)||/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//.test(t)}formatUrl(e){if(!e)return"";let t=String(e).trim();return/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//.test(t)?t:"https://"+t}saveWebsite(){return D(this,null,function*(){if(this.websiteError="",this.newWebsite&&!this.isProbablyValidUrl(this.newWebsite)){this.websiteError="Formato URL non valido";return}this.websiteSaveStatus="saving";let e=this.newWebsite?this.newWebsite.trim():"";try{yield this.service.updateProfileWebsite(this.profile.id,e),this.profile=re(W({},this.profile),{sito_web:e}),this.websiteSaveStatus="success",this.editWebsite=!1,console.log("Sito web aggiornato con successo")}catch(t){console.error("Errore aggiornamento sito web:",t),this.websiteSaveStatus="error",this.websiteError="Errore durante il salvataggio."}finally{setTimeout(()=>{this.websiteSaveStatus="idle",this.websiteError=""},3e3)}})}onLogoSelected(e){let t=e.target.files[0];t&&t.type.match("image.*")?(this.selectedLogoFile=t,this.logoUploadStatus="idle"):alert("Per favore seleziona un file immagine valido (JPEG, PNG, ecc.)")}uploadLogo(){return D(this,null,function*(){if(!(!this.selectedLogoFile||!this.profile.id)){this.logoUploadStatus="uploading";try{let e=yield this.service.uploadLogo(this.selectedLogoFile);this.profile.logo_url=e,this.logoUploadStatus="success",setTimeout(()=>{this.logoUploadStatus="idle",this.selectedLogoFile=null},3e3)}catch{this.logoUploadStatus="error",setTimeout(()=>this.logoUploadStatus="idle",5e3)}}})}onSignOut(){return D(this,null,function*(){if(confirm("Sei sicuro di voler uscire dall'account?")){this.signingOut=!0;try{yield this.service.signOut(),this.profile=re(W({},this.profile),{id:""}),yield this.router.navigate(["/login"])}catch(e){console.error("Errore durante logout:",e),alert("Errore durante la disconnessione. Riprova.")}finally{this.signingOut=!1}}})}startEditStockSettings(){this.isAdmin()&&(this.editStockSettings=!0,this.scorteBasse=this.profile.scorte_basse||5,this.scorteCritiche=this.profile.scorte_critiche||2)}cancelEditStockSettings(){this.editStockSettings=!1}saveStockSettings(){return D(this,null,function*(){try{yield this.service.updateStockSettings(this.profile.id,this.scorteBasse,this.scorteCritiche),this.profile.scorte_basse=this.scorteBasse,this.profile.scorte_critiche=this.scorteCritiche,this.editStockSettings=!1,console.log("Impostazioni scorte aggiornate con successo")}catch(e){console.error("Errore aggiornamento impostazioni scorte:",e),alert("Errore durante il salvataggio delle impostazioni scorte")}})}startEditSocials(){this.editableSocials=W({},this.profile.socials||{}),this.editSocials=!0}cancelEditSocials(){this.editableSocials={},this.editSocials=!1}normalizeWhatsapp(e){if(!e)return;let t=e.trim();if(/^https?:\/\//.test(t))return t;let i=t.replace(/[^\d+]/g,"");return i?`https://wa.me/${i.replace(/^\+/,"")}`:void 0}saveSocials(){return D(this,null,function*(){let e=W({},this.editableSocials||{});if(e.facebook&&!this.isProbablyValidUrl(e.facebook)){alert("URL Facebook non valido");return}if(e.instagram&&!this.isProbablyValidUrl(e.instagram)){alert("URL Instagram non valido");return}if(e.linkedin&&!this.isProbablyValidUrl(e.linkedin)){alert("URL LinkedIn non valido");return}e.whatsapp&&(e.whatsapp=this.normalizeWhatsapp(e.whatsapp));try{yield this.service.updateProfileSocials(this.profile.id,e),this.profile.socials=e,this.editSocials=!1,console.log("Social salvati con successo")}catch(t){console.error("Errore salvataggio socials:",t),alert("Errore durante il salvataggio dei link social.")}})}startEditHours(){let e=this.profile.opening_hours&&Array.isArray(this.profile.opening_hours)&&this.profile.opening_hours.length===7?this.profile.opening_hours:this.defaultWeek();this.editableHours=e.map(t=>({dayIndex:t.dayIndex,dayName:t.dayName,intervals:(t.intervals||[]).map(i=>({start:i.start,end:i.end})),closed:!(t.intervals&&t.intervals.length>0)})),this.editHours=!0}cancelEditHours(){this.editableHours=[],this.editHours=!1}addInterval(e){let t=this.editableHours[e];t&&(t.intervals.push({start:"09:00",end:"13:00"}),t.closed=!1)}removeInterval(e,t){let i=this.editableHours[e];i&&(i.intervals.splice(t,1),i.intervals.length===0&&(i.closed=!0))}toggleClosed(e){let t=this.editableHours[e];t&&(t.closed?t.intervals=[]:t.intervals=[{start:"09:00",end:"13:00"}])}validateHours(){for(let e of this.editableHours){if(!e.intervals||e.intervals.length===0)continue;let t=[...e.intervals].sort((i,r)=>i.start.localeCompare(r.start));for(let i=0;i<t.length;i++){let r=t[i];if(!r.start||!r.end||r.start>=r.end)return{ok:!1,message:`${e.dayName}: intervallo ${i+1} non valido (controlla orari)`};if(i>0){let o=t[i-1];if(r.start<o.end)return{ok:!1,message:`${e.dayName}: gli intervalli si sovrappongono`}}}}return{ok:!0}}saveHours(){return D(this,null,function*(){let e=this.validateHours();if(!e.ok){alert(e.message||"Errore negli orari");return}let t=this.editableHours.map(i=>({dayIndex:i.dayIndex,dayName:i.dayName,intervals:i.closed?[]:i.intervals.map(r=>({start:this.formatTime(r.start),end:this.formatTime(r.end)})),closed:i.closed??i.intervals.length===0}));try{yield this.service.saveOpeningHours(this.profile.id,t),this.profile.opening_hours=t,this.editHours=!1,console.log("Orari aggiornati con successo")}catch(i){console.error("Errore salvataggio orari:",i),alert("Errore durante il salvataggio degli orari.")}})}formatTime(e){let[t,i]=e.split(":");return`${t.padStart(2,"0")}:${i.padStart(2,"0")}`}formatIntervals(e=[]){return!e||e.length===0?"Chiuso":e.map(t=>`${t.start}-${t.end}`).join(" | ")}defaultWeek(){return["Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato","Domenica"].map((t,i)=>({dayIndex:i,dayName:t,intervals:[]}))}loadOpeningHours(){return D(this,null,function*(){this.loadingHours=!0;try{let e=yield this.service.getOpeningHours(this.profile.id);e&&e.length>0?this.profile.opening_hours=e.map(t=>({dayIndex:t.day_index,dayName:t.day_name,intervals:t.intervals||[]})):this.profile.opening_hours=this.defaultWeek()}catch(e){console.error("Errore caricamento orari:",e),this.profile.opening_hours=this.defaultWeek()}finally{this.loadingHours=!1}})}startEditDescription(){this.newDescription=this.profile.descrizione||"",this.editDescription=!0}cancelEditDescription(){this.editDescription=!1}saveDescription(){return D(this,null,function*(){try{yield this.service.updateProfileDescription(this.profile.id,this.newDescription),this.profile.descrizione=this.newDescription,this.editDescription=!1,console.log("Descrizione aggiornata con successo")}catch(e){console.error("Errore aggiornamento descrizione:",e),alert("Errore durante il salvataggio della descrizione")}})}startEditSesso(){this.newSesso=this.profile.sesso,this.editSesso=!0}static \u0275fac=function(t){return new(t||n)($(xt),$(Ve))};static \u0275cmp=he({type:n,selectors:[["app-impostazioni"]],decls:3,vars:3,consts:[["fbEmpty",""],["igEmpty",""],["liEmpty",""],["waEmpty",""],["fileInput",""],["noHours",""],["closed",""],[4,"ngIf"],[1,"spinner"],[1,"error"],[1,"container"],[1,"section-title"],[1,"profile-row"],[1,"profile-info"],[1,"phone-section"],["class","btn-primary",3,"click",4,"ngIf"],["class","edit-phone","role","group","aria-label","Modifica telefono",4,"ngIf"],["class","description-section",4,"ngIf"],[1,"location-section"],["class","edit-location",4,"ngIf"],["class","scorte-section",4,"ngIf"],["class","social-section",4,"ngIf"],["class","logo-upload-section",4,"ngIf"],["class","brand-settings",4,"ngIf"],[1,"logout-section",2,"margin-top","1.2rem"],[1,"btn-primary",3,"click","disabled"],[1,"btn-primary",3,"click"],["role","group","aria-label","Modifica telefono",1,"edit-phone"],["type","tel","name","phoneEdit","placeholder","Nuovo numero di telefono","aria-label","Nuovo telefono",3,"ngModelChange","ngModel"],[1,"btn",3,"click"],[1,"description-section"],["class","edit-description",4,"ngIf"],[2,"font-weight","600","color","var(--text-light)"],[1,"edit-description"],[1,"form-group"],["for","description"],["id","description","rows","5","placeholder","Inserisci una descrizione della tua attivit\xE0...",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"edit-location"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel","disabled"],[1,"location-actions"],[3,"value"],[1,"scorte-section"],["class","edit-stock-settings",4,"ngIf"],[1,"edit-stock-settings"],["for","scorteBasse"],["type","number","id","scorteBasse","min","1",3,"ngModelChange","ngModel","max"],["for","scorteCritiche"],["type","number","id","scorteCritiche","min","1",3,"ngModelChange","ngModel"],[1,"social-section"],["class","edit-socials",4,"ngIf"],["role","group","aria-label","Facebook",1,"social-row"],["viewBox","0 0 24 24","aria-hidden","true","focusable","false",1,"social-icon"],["fill","#1877F2","d","M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"],[1,"social-content"],[4,"ngIf","ngIfElse"],["role","group","aria-label","Instagram",1,"social-row"],["id","ig-gradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%","stop-color","#fdf497"],["offset","5%","stop-color","#fdf497"],["offset","45%","stop-color","#fd5949"],["offset","60%","stop-color","#d6249f"],["offset","90%","stop-color","#285AEB"],["fill","url(#ig-gradient)","d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"],["role","group","aria-label","LinkedIn",1,"social-row"],["fill","#0077B5","d","M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"],["role","group","aria-label","WhatsApp",1,"social-row"],["fill","#25D366","d","M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.864 3.49"],[2,"margin-top","0.6rem"],["target","_blank","rel","noopener noreferrer",1,"social-link",3,"href"],[1,"not-present"],[1,"edit-socials"],["type","url","name","facebookEdit","placeholder","https://facebook.com/tuapagina",3,"ngModelChange","ngModel"],["type","url","name","instagramEdit","placeholder","https://instagram.com/tuapagina",3,"ngModelChange","ngModel"],["type","url","name","linkedinEdit","placeholder","https://linkedin.com/in/tuoprofilo",3,"ngModelChange","ngModel"],["type","text","name","whatsappEdit","placeholder","es. +391234567890 o https://wa.me/391234567890",3,"ngModelChange","ngModel"],[1,"form-actions",2,"margin-top","0.6rem"],[1,"logo-upload-section"],["class","current-logo",4,"ngIf"],[1,"upload-controls"],["type","file","accept","image/*",2,"display","none",3,"change"],["type","button",3,"click"],[1,"file-name"],["type","button",3,"click",4,"ngIf"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"current-logo"],["alt","Logo attuale",3,"src"],[1,"success-message"],[1,"error-message"],[1,"color-form"],[1,"hours-section"],["class","edit-hours",4,"ngIf"],["class","loading",4,"ngIf"],[1,"loading"],[4,"ngFor","ngForOf"],[1,"day-name"],["class","has-hours",4,"ngIf","ngIfElse"],[1,"has-hours"],[1,"closed"],[1,"no-hours"],[1,"edit-hours"],["class","day-block",4,"ngFor","ngForOf"],[1,"day-block"],["class","interval-row",4,"ngFor","ngForOf"],[1,"checkbox"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"interval-row"],["type","time",3,"ngModelChange","ngModel","name"],[1,"brand-settings"],[1,"color-form",3,"ngSubmit"],["class","color-picker-group",4,"ngFor","ngForOf"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn",3,"click"],[1,"color-picker-group"],[1,"color-preview"],["type","color",3,"ngModelChange","ngModel","name"]],template:function(t,i){t&1&&z(0,Xq,4,0,"div",7)(1,e9,3,0,"div",7)(2,e7,30,16,"ng-container",7),t&2&&(M("ngIf",i.loading),C(),M("ngIf",!i.loading&&!(i.profile!=null&&i.profile.id)),C(),M("ngIf",!i.loading&&(i.profile==null?null:i.profile.id)))},dependencies:[Ht,wi,Zn,Yn,yt,qs,qi,Dn,Dt,bi,Ys,PC,kt,ro,Ue,at,et],styles:[".profile-info[_ngcontent-%COMP%]{background:var(--background2);border-radius:10px;padding:clamp(1.2rem,2vw,1.8rem);margin-bottom:clamp(1.5rem,3vw,2.5rem);border:1px solid var(--secondary);flex:1 1 360px;min-width:240px;box-sizing:border-box}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:clamp(.8rem,1.5vw,1.2rem) 0;font-size:var(--font-size-base);display:flex;flex-wrap:wrap;gap:.5rem}.profile-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--primary);font-weight:600;min-width:140px}.phone-section[_ngcontent-%COMP%]{margin:1.5rem 0;transition:all .3s ease}.phone-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:clamp(.8rem,1.5vw,1.2rem)}.edit-phone[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:clamp(.8rem,1.5vw,1.2rem);align-items:center;margin-top:clamp(1rem,1.8vw,1.5rem);padding:clamp(1rem,1.8vw,1.5rem);background:var(--background);border-radius:8px;border-left:3px solid var(--primary);animation:_ngcontent-%COMP%_fadeIn .4s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.edit-phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;min-width:200px;padding:clamp(.6rem,1.2vw,.8rem) clamp(.8rem,1.5vw,1rem);border:1.5px solid rgba(255,255,255,.15);border-radius:8px;background:var(--background2);color:var(--text-light);font-size:var(--font-size-base);transition:border-color .3s ease}.edit-phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.2)}.edit-phone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.brand-settings[_ngcontent-%COMP%]{margin-top:clamp(2rem,3vw,3rem);padding-top:clamp(1.5rem,2.5vw,2rem);border-top:1px solid rgba(255,255,255,.1)}.color-form[_ngcontent-%COMP%]{background:var(--background2);border-radius:12px;padding:clamp(1.5rem,2.5vw,2rem);border:1px solid var(--secondary)}.color-picker-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:clamp(1rem,2vw,1.5rem);margin-bottom:clamp(1.2rem,2vw,1.8rem)}.color-picker-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:100px;font-weight:600;color:var(--text-light);font-size:var(--font-size-base)}.color-preview[_ngcontent-%COMP%]{width:clamp(36px,4vw,48px);height:clamp(36px,4vw,48px);border-radius:8px;border:2px solid rgba(255,255,255,.2);box-shadow:0 3px 8px #0003;transition:transform .3s ease}.color-preview[_ngcontent-%COMP%]:hover{transform:scale(1.1)}input[type=color][_ngcontent-%COMP%]{width:clamp(50px,6vw,60px);height:clamp(40px,5vw,50px);border:none;background:none;cursor:pointer;border-radius:6px;overflow:hidden}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:4px;box-shadow:0 3px 8px #0000004d}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.save-button[_ngcontent-%COMP%]{display:block;width:100%;max-width:300px;margin:clamp(1.5rem,3vw,2.5rem) auto 0;padding:clamp(.7rem,1.5vw,.9rem);background:linear-gradient(135deg,var(--primary),var(--secondary));border:none;border-radius:10px;color:var(--text-light);font-weight:700;font-size:var(--font-size-lg);cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #00000040;letter-spacing:.05rem}.save-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 7px 20px #00000059;opacity:.95}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-top:4px solid var(--primary);border-radius:50%;margin:1.5rem auto;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error[_ngcontent-%COMP%]{color:var(--danger);padding:clamp(.8rem,1.5vw,1rem);background-color:#ff00001a;border-radius:8px;margin:clamp(1rem,2vw,1.5rem) auto;text-align:center;font-weight:600;border-left:3px solid var(--danger);max-width:500px}.success-message[_ngcontent-%COMP%]{margin-top:clamp(1rem,2vw,1.5rem);text-align:center;font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:2rem;flex-wrap:wrap}.reset-button[_ngcontent-%COMP%]{display:block;width:100%;max-width:300px;margin:clamp(1.5rem,3vw,2.5rem) auto 0;padding:clamp(.7rem,1.5vw,.9rem);background:linear-gradient(135deg,var(--primary),var(--secondary));border:none;border-radius:10px;color:var(--text-light);font-weight:700;font-size:var(--font-size-lg);cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #00000040;letter-spacing:.05rem}.reset-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 7px 20px #00000059;opacity:.95}.logo-upload-section[_ngcontent-%COMP%]{margin-bottom:2rem;flex:0 0 clamp(160px,26%,260px);min-width:140px;align-self:flex-start;padding:1rem;border-radius:8px;background:var(--background2);border:1px solid var(--secondary);box-sizing:border-box;display:flex;flex-direction:column;gap:.75rem}.current-logo[_ngcontent-%COMP%]{margin-bottom:1rem}.current-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:240px;object-fit:contain;border-radius:8px;display:block}.upload-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.file-name[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.upload-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:var(--primary);color:#fff;border:none;border-radius:4px;cursor:pointer}.upload-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--secondary)}.profile-row[_ngcontent-%COMP%]{display:flex;gap:clamp(1rem,2.5vw,2rem);align-items:flex-start;margin-bottom:clamp(1rem,2vw,1.5rem)}.location-section[_ngcontent-%COMP%], .scorte-section[_ngcontent-%COMP%], .description-section[_ngcontent-%COMP%]{margin:1.5rem 0;padding:1.5rem 0;border-top:1px solid var(--text-light)}.edit-location[_ngcontent-%COMP%]{display:grid;gap:1rem;max-width:500px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:4px}.location-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}.social-section[_ngcontent-%COMP%]{margin:1.5rem 0;padding:1.5rem 0;border-top:1px solid var(--text-light)}.social-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;padding:.25rem 0}.social-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex:0 0 20px;fill:var(--primary);opacity:.95}.social-content[_ngcontent-%COMP%]{font-size:.95rem}.social-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;word-break:break-all}.not-present[_ngcontent-%COMP%]{color:#888;font-style:italic}.social-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.hours-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:.5rem;display:inline-block}.hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]{color:var(--text-light);-webkit-text-fill-color:var(--text-light);caret-color:var(--text-light);background:transparent;border:1px solid rgba(255,255,255,.08);padding:.2rem;border-radius:6px;font-size:.95rem;line-height:1;outline:none;-webkit-appearance:textfield;appearance:textfield;margin:.5rem}.hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-webkit-datetime-edit, .hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-webkit-datetime-edit-field, .hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-webkit-datetime-edit-text, .hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-webkit-datetime-edit-hour-field, .hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-webkit-datetime-edit-minute-field, .hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-webkit-datetime-edit-ampm-field{color:var(--text-light);-webkit-text-fill-color:var(--text-light)}.hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-moz-focus-inner{color:var(--text-light)}.hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::-moz-time-field{color:var(--text-light)}.hours-section[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #cc9c001f;border-color:var(--primary)}.hours-section[_ngcontent-%COMP%]   input[type=time].contrasted[_ngcontent-%COMP%]{background-color:#ffffff08}input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer;color:var(--text-light)}.edit-hours[_ngcontent-%COMP%]   .day-block[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;padding:.2rem 0;font-size:1rem;font-weight:700;color:var(--primary)}.no-hours[_ngcontent-%COMP%]{font-weight:700;color:var(--text-light)}.hours-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{color:var(--text-light)}.hours-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .closed[_ngcontent-%COMP%], .hours-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .has-hours[_ngcontent-%COMP%]{color:var(--primary);font-weight:500}.description-section[_ngcontent-%COMP%]{margin-bottom:2rem}.edit-description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-family:inherit}"]})};var hv=class n{constructor(e){this.http=e}apiUrl="https://tuo-backend.com/api/products";getProdottoById(e){return qa(this.http.get(`${this.apiUrl}/${e}`))}createProduct(e){return qa(this.http.post(this.apiUrl,e))}updateProduct(e,t){return qa(this.http.put(`${this.apiUrl}/${e}`,t))}deleteProduct(e){return qa(this.http.delete(`${this.apiUrl}/${e}`))}static \u0275fac=function(t){return new(t||n)(ne(Sl))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function n7(n,e){if(n&1&&(v(0,"div",5),oe(1,"img",6),m()),n&2){let t=A();C(),M("src",t.prodotto.immagine,_t)("alt",t.prodotto==null?null:t.prodotto.nome)}}function i7(n,e){if(n&1&&(v(0,"p",7),w(1),Ui(2,"currency"),m()),n&2){let t=A();C(),ie("Prezzo: ",Hi(2,1,t.prodotto.prezzo,"EUR"))}}function r7(n,e){if(n&1&&(v(0,"p",8),w(1),m()),n&2){let t=A();C(),ee(t.prodotto.descrizione)}}function o7(n,e){n&1&&(v(0,"h3"),w(1," Caratteristiche tecniche "),m())}function s7(n,e){if(n&1&&(v(0,"li")(1,"strong"),w(2),m(),w(3),m()),n&2){let t=e.$implicit,i=A(2);C(2),ie("",t,":"),C(),ie(" ",i.prodotto.caratteristiche[t]," ")}}function a7(n,e){if(n&1&&(v(0,"ul"),z(1,s7,4,2,"li",9),m()),n&2){let t=A();C(),M("ngForOf",t.objectKeys(t.prodotto.caratteristiche))}}var wf=class n{constructor(e,t,i){this.route=e;this.backendService=t;this.supaService=i}prodottoId;prodotto={nome:"",immagine:"",prezzo:null,descrizione:"",caratteristiche:{}};objectKeys=Object.keys;ngOnInit(){return D(this,null,function*(){let e=this.route.snapshot.paramMap.get("type")||"mine",t=this.route.snapshot.paramMap.get("id");if(!t){console.error("ID mancante nella route");return}this.prodottoId=t;try{if(e==="franchising"){let i=yield this.supaService.getFranchisingProductById(t);if(!i){console.warn("Prodotto franchising non trovato",t);return}this.prodotto={nome:i.name??"",immagine:i.image_path?this.supaService.getPublicImageUrl(i.image_path):"",prezzo:i.price??null,descrizione:i.description??"",caratteristiche:i.attributes??{}}}else{let i=yield this.backendService.getProdottoById(t);if(!i){console.warn("Prodotto (backend) non trovato",t);return}let r=i.nome??i.name??"",o=i.immagine??i.image_path??i.imageUrl??"",s=i.prezzo??i.price??null,l=i.descrizione??i.description??i.usage??"",c=i.caratteristiche??i.attributes??{};this.prodotto={nome:r,immagine:o?this.supaService.getPublicImageUrl(o)??o:"",prezzo:s,descrizione:l,caratteristiche:c}}}catch(i){console.error("Errore caricamento dettaglio prodotto",i)}})}static \u0275fac=function(t){return new(t||n)($(ln),$(hv),$($o))};static \u0275cmp=he({type:n,selectors:[["app-product-detail"]],decls:8,vars:6,consts:[[1,"prodotto-dettaglio-container"],["class","immagine-prodotto",4,"ngIf"],["class","prezzo",4,"ngIf"],["class","descrizione",4,"ngIf"],[4,"ngIf"],[1,"immagine-prodotto"],[3,"src","alt"],[1,"prezzo"],[1,"descrizione"],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(v(0,"div",0)(1,"h2"),w(2),m(),z(3,n7,2,2,"div",1)(4,i7,3,4,"p",2)(5,r7,2,1,"p",3)(6,o7,2,0,"h3",4)(7,a7,2,1,"ul",4),m()),t&2&&(C(2),ee(i.prodotto==null?null:i.prodotto.nome),C(),M("ngIf",i.prodotto==null?null:i.prodotto.immagine),C(),M("ngIf",(i.prodotto==null?null:i.prodotto.prezzo)!==null),C(),M("ngIf",i.prodotto==null?null:i.prodotto.descrizione),C(),M("ngIf",(i.prodotto==null?null:i.prodotto.caratteristiche)&&i.objectKeys(i.prodotto.caratteristiche).length>0),C(),M("ngIf",i.prodotto==null?null:i.prodotto.caratteristiche))},dependencies:[Ue,at,et,Ls],styles:[".prodotto-dettaglio-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background-color:var(--background);color:var(--text-light);border-radius:12px;box-shadow:0 4px 12px #0000001a}.immagine-prodotto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:400px;object-fit:contain;border-radius:12px;margin-bottom:1.5rem}.prezzo[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--primary);margin-bottom:1rem}.descrizione[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem}h3[_ngcontent-%COMP%]{color:var(--primary);margin-bottom:.8rem}ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.3rem 0;font-size:1rem;border-bottom:1px solid rgba(255,255,255,.1)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--secondary)}"]})};function l7(n,e){n&1&&(v(0,"div",45),w(1,"Nome \xE8 obbligatorio"),m())}function c7(n,e){n&1&&(v(0,"div",45),w(1,"Cognome \xE8 obbligatorio"),m())}function u7(n,e){n&1&&(v(0,"div",45),w(1," Email non valida "),m())}function d7(n,e){n&1&&(v(0,"div",45),w(1," Numero di telefono non valido "),m())}function f7(n,e){n&1&&(v(0,"div",45),w(1,"Sesso \xE8 obbligatorio"),m())}function h7(n,e){if(n&1){let t=se();v(0,"div",25)(1,"label",46),w(2,"Sesso"),m(),v(3,"select",47,9),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.formData.sesso,r)||(o.formData.sesso=r),N(r)}),v(5,"option",17),w(6,"Seleziona sesso"),m(),v(7,"option",48),w(8,"Maschile"),m(),v(9,"option",49),w(10,"Femminile"),m(),v(11,"option",50),w(12,"Altro"),m()(),z(13,f7,2,0,"div",28),m()}if(n&2){let t=Ne(4),i=A(2);C(3),Y("ngModel",i.formData.sesso),C(10),M("ngIf",t.invalid&&t.touched)}}function p7(n,e){n&1&&(v(0,"div",45),w(1," Data di nascita \xE8 obbligatoria "),m())}function g7(n,e){n&1&&(v(0,"div",45),w(1," Luogo di nascita \xE8 obbligatorio "),m())}function m7(n,e){n&1&&(v(0,"div",45),w(1," Ragione sociale \xE8 obbligatoria "),m())}function _7(n,e){n&1&&(v(0,"div",45),w(1," Partita IVA non valida (11 numeri) "),m())}function v7(n,e){n&1&&(v(0,"div",45),w(1," PEC non valida "),m())}function y7(n,e){if(n&1){let t=se();v(0,"div",51)(1,"label",52),w(2,"Ragione Sociale"),m(),v(3,"input",53,10),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.formData.ragioneSociale,r)||(o.formData.ragioneSociale=r),N(r)}),m(),z(5,m7,2,0,"div",28),v(6,"label",54),w(7,"Partita IVA"),m(),v(8,"input",55,11),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.formData.piva,r)||(o.formData.piva=r),N(r)}),m(),z(10,_7,2,0,"div",28),v(11,"label",56),w(12,"PEC"),m(),v(13,"input",57,12),Q("ngModelChange",function(r){k(t);let o=A(2);return K(o.formData.pec,r)||(o.formData.pec=r),N(r)}),m(),z(15,v7,2,0,"div",28),m()}if(n&2){let t=Ne(4),i=Ne(9),r=Ne(14),o=A(2);C(3),Y("ngModel",o.formData.ragioneSociale),C(2),M("ngIf",t.invalid&&t.touched),C(3),Y("ngModel",o.formData.piva),C(2),M("ngIf",i.invalid&&i.touched),C(3),Y("ngModel",o.formData.pec),C(2),M("ngIf",r.invalid&&r.touched)}}function b7(n,e){n&1&&(v(0,"div",45),w(1,"Password richiesta (min 8)"),m())}function w7(n,e){n&1&&(v(0,"div",45),w(1," Le password non corrispondono "),m())}function C7(n,e){if(n&1){let t=se();ut(0),v(1,"div",24)(2,"div",25)(3,"label",26),w(4,"Nome"),m(),v(5,"input",27,1),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.nome,r)||(o.formData.nome=r),N(r)}),m(),z(7,l7,2,0,"div",28),m(),v(8,"div",25)(9,"label",29),w(10,"Cognome"),m(),v(11,"input",30,2),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.cognome,r)||(o.formData.cognome=r),N(r)}),m(),z(13,c7,2,0,"div",28),m()(),v(14,"label",31),w(15,"Email"),m(),v(16,"input",32,3),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.email,r)||(o.formData.email=r),N(r)}),m(),z(18,u7,2,0,"div",28),v(19,"label",33),w(20,"Numero di Telefono"),m(),v(21,"input",34,4),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.telefono,r)||(o.formData.telefono=r),N(r)}),m(),z(23,d7,2,0,"div",28),v(24,"div",24),z(25,h7,14,2,"div",35),v(26,"div",25)(27,"label",36),w(28,"Data di Nascita"),m(),v(29,"input",37,5),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.dataNascita,r)||(o.formData.dataNascita=r),N(r)}),m(),z(31,p7,2,0,"div",28),m()(),v(32,"label",38),w(33,"Luogo di Nascita"),m(),v(34,"input",39,6),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.luogoNascita,r)||(o.formData.luogoNascita=r),N(r)}),m(),z(36,g7,2,0,"div",28)(37,y7,16,6,"div",40),v(38,"label",41),w(39,"Password"),m(),v(40,"input",42,7),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.password,r)||(o.formData.password=r),N(r)}),m(),z(42,b7,2,0,"div",28),v(43,"label",43),w(44,"Conferma Password"),m(),v(45,"input",44,8),Q("ngModelChange",function(r){k(t);let o=A();return K(o.formData.confirmPassword,r)||(o.formData.confirmPassword=r),N(r)}),m(),z(47,w7,2,0,"div",28),dt()}if(n&2){let t=Ne(6),i=Ne(12),r=Ne(17),o=Ne(22),s=Ne(30),l=Ne(35),c=Ne(41),d=Ne(46),h=A();C(5),Y("ngModel",h.formData.nome),C(2),M("ngIf",t.invalid&&t.touched),C(4),Y("ngModel",h.formData.cognome),C(2),M("ngIf",i.invalid&&i.touched),C(3),Y("ngModel",h.formData.email),C(2),M("ngIf",r.invalid&&r.touched),C(3),Y("ngModel",h.formData.telefono),C(2),M("ngIf",o.invalid&&o.touched),C(2),M("ngIf",h.userType==="user"),C(4),Y("ngModel",h.formData.dataNascita),C(2),M("ngIf",s.invalid&&s.touched),C(3),Y("ngModel",h.formData.luogoNascita),C(2),M("ngIf",l.invalid&&l.touched),C(),M("ngIf",h.userType==="admin"),C(3),Y("ngModel",h.formData.password),C(2),M("ngIf",c.invalid&&c.touched),C(3),Y("ngModel",h.formData.confirmPassword),C(2),M("ngIf",d.touched&&h.formData.confirmPassword!==h.formData.password)}}function E7(n,e){if(n&1&&(v(0,"div",58),w(1),m()),n&2){let t=A();C(),ee(t.errorMsg)}}function S7(n,e){if(n&1&&(v(0,"div",59),w(1),m()),n&2){let t=A();C(),ee(t.successMsg)}}var pv=class n{userType="";formData={nome:"",cognome:"",email:"",telefono:"",sesso:"",dataNascita:"",luogoNascita:"",ragioneSociale:"",piva:"",pec:"",password:"",confirmPassword:""};loading=!1;errorMsg="";successMsg="";supabase;constructor(){this.supabase=Di(_n.supabaseUrl,_n.supabaseAnonKey)}validateForm(){if(!this.userType)return"Seleziona il tipo di utente";if(!this.formData.nome.trim()||!this.formData.cognome.trim())return"Nome e cognome sono obbligatori";if(!this.formData.email.trim())return"Email \xE8 obbligatoria";if(!this.formData.telefono.trim())return"Numero di telefono \xE8 obbligatorio";if(this.userType==="user"&&!this.formData.sesso)return"Seleziona il sesso";if(!this.formData.dataNascita)return"Seleziona la data di nascita";if(!this.formData.luogoNascita.trim())return"Inserisci il luogo di nascita";if(!this.formData.password||this.formData.password.length<8)return"La password deve contenere almeno 8 caratteri";if(this.formData.password!==this.formData.confirmPassword)return"Le password non corrispondono";if(this.userType==="admin"){if(!this.formData.ragioneSociale.trim())return"Ragione sociale \xE8 obbligatoria per admin";if(!this.formData.piva||!/^[0-9]{11}$/.test(this.formData.piva))return"Partita IVA non valida (deve contenere 11 numeri)";if(!this.formData.pec.trim())return"PEC \xE8 obbligatoria per admin"}return null}normalizeEmail(e){if(!e)return"";let t=e.toString().replace(/^"+|"+$/g,"").trim().toLowerCase();return t=t.replace(/\s+/g,""),t}validateEmailFormat(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}onSubmit(){return D(this,null,function*(){this.errorMsg="",this.successMsg="";let e=this.validateForm();if(e){this.errorMsg=e;return}this.loading=!0;try{let t=this.normalizeEmail(this.formData.email);if(!this.validateEmailFormat(t)){this.errorMsg="indirizzo email non valido. Usa un formato tipo nome@dominio.it",this.loading=!1;return}if(this.formData.email=t,this.userType==="admin"&&this.formData.pec&&(this.formData.pec=this.normalizeEmail(this.formData.pec),!this.validateEmailFormat(this.formData.pec))){this.errorMsg="PEC non valida. Controlla il formato.",this.loading=!1;return}let i={email:t,password:this.formData.password,options:{data:{first_name:this.formData.nome.trim(),last_name:this.formData.cognome.trim(),role:this.userType==="admin"?"admin":"customer"}}};console.log("[register] calling signUp with payload:",i);let{data:r,error:o}=yield this.supabase.auth.signUp(i);if(console.log("[register] signUpData:",r),console.log("[register] signUpError:",o),o){console.error("[register] signUpError full:",o),this.errorMsg=o.message||"Errore durante la registrazione",this.loading=!1;return}let s=r.user?.id||null;if(s){let c=[{id:s,first_name:this.formData.nome.trim()||null,last_name:this.formData.cognome.trim()||null,full_name:`${this.formData.nome.trim()} ${this.formData.cognome.trim()}`.trim()||null,email:t,role:this.userType==="admin"?"admin":"customer",telefono:this.formData.telefono.trim()||null,sesso:this.formData.sesso||null,data_nascita:this.formData.dataNascita?this.formData.dataNascita:null,luogo_nascita:this.formData.luogoNascita.trim()||null,ragione_sociale:this.userType==="admin"&&this.formData.ragioneSociale.trim()||null,piva:this.userType==="admin"&&this.formData.piva||null,pec:this.userType==="admin"&&this.formData.pec.trim()||null,created_at:new Date().toISOString()}];console.log("[register] profile upsert payloadArray:",JSON.stringify(c,null,2));let{data:d,error:h}=yield this.supabase.from("profiles").upsert(c,{onConflict:"id"}).select();if(console.log("[register] profile upsert response:",d,h),h){console.error("[register] profile upsert error object:",h);let p=h.details??h.message??JSON.stringify(h);this.errorMsg=`Errore durante il salvataggio del profilo: ${p}`,this.loading=!1;return}}else{this.successMsg="Registrazione effettuata. Controlla la tua email per confermare l'account. Il profilo verr\xE0 creato automaticamente dopo la conferma.",this.loading=!1;return}this.successMsg="Registrazione completata. Controlla la tua email per confermare (se richiesto).",this.formData={nome:"",cognome:"",email:"",telefono:"",sesso:"",dataNascita:"",luogoNascita:"",ragioneSociale:"",piva:"",pec:"",password:"",confirmPassword:""},this.userType=""}catch(t){console.error("[register] unexpected error",t),this.errorMsg=t?.message||"Errore imprevisto durante la registrazione"}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=he({type:n,selectors:[["app-register"]],decls:19,vars:6,consts:[["registerForm","ngForm"],["nome","ngModel"],["cognome","ngModel"],["email","ngModel"],["telefono","ngModel"],["dataNascita","ngModel"],["luogoNascita","ngModel"],["password","ngModel"],["confirmPassword","ngModel"],["sesso","ngModel"],["ragioneSociale","ngModel"],["piva","ngModel"],["pec","ngModel"],[1,"register-container"],["novalidate","",3,"ngSubmit"],["for","userType"],["id","userType","name","userType","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","user"],["value","admin"],[4,"ngIf"],["type","submit",3,"disabled"],["class","error-msg",4,"ngIf"],["class","success-msg",4,"ngIf"],[1,"row"],[1,"col"],["for","nome"],["type","text","id","nome","name","nome","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["for","cognome"],["type","text","id","cognome","name","cognome","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","email","",3,"ngModelChange","ngModel"],["for","telefono"],["type","tel","id","telefono","name","telefono","required","","pattern","^[0-9+ ]{6,15}$",3,"ngModelChange","ngModel"],["class","col",4,"ngIf"],["for","dataNascita"],["type","date","id","dataNascita","name","dataNascita","required","",3,"ngModelChange","ngModel"],["for","luogoNascita"],["type","text","id","luogoNascita","name","luogoNascita","required","",3,"ngModelChange","ngModel"],["class","admin-fields",4,"ngIf"],["for","password"],["type","password","id","password","name","password","required","","minlength","8",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","ngModel"],[1,"error"],["for","sesso"],["id","sesso","name","sesso","required","",3,"ngModelChange","ngModel"],["value","M"],["value","F"],["value","O"],[1,"admin-fields"],["for","ragioneSociale"],["type","text","id","ragioneSociale","name","ragioneSociale","required","",3,"ngModelChange","ngModel"],["for","piva"],["type","text","id","piva","name","piva","required","","pattern","^[0-9]{11}$",3,"ngModelChange","ngModel"],["for","pec"],["type","email","id","pec","name","pec","required","","email","",3,"ngModelChange","ngModel"],[1,"error-msg"],[1,"success-msg"]],template:function(t,i){if(t&1){let r=se();v(0,"div",13)(1,"h2"),w(2,"Registrazione"),m(),v(3,"form",14,0),B("ngSubmit",function(){return k(r),N(i.onSubmit())}),v(5,"label",15),w(6,"Tipo Utente"),m(),v(7,"select",16),Q("ngModelChange",function(s){return k(r),K(i.userType,s)||(i.userType=s),N(s)}),v(8,"option",17),w(9,"Seleziona tipo utente"),m(),v(10,"option",18),w(11,"Utente normale"),m(),v(12,"option",19),w(13,"Barbiere / Parrucchiere"),m()(),z(14,C7,48,18,"ng-container",20),v(15,"button",21),w(16),m(),z(17,E7,2,1,"div",22)(18,S7,2,1,"div",23),m()()}if(t&2){let r=Ne(4);C(7),Y("ngModel",i.userType),C(7),M("ngIf",i.userType),C(),M("disabled",!i.userType||r.invalid||i.loading),C(),ie(" ",i.loading?"Registrazione...":"Registrati"," "),C(),M("ngIf",i.errorMsg),C(),M("ngIf",i.successMsg)}},dependencies:[Ue,et,Ht,wi,Zn,Yn,yt,Dn,Dt,bi,oo,sd,OC,AC,kt,ro],styles:['.register-container[_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;background:transparent}.register-container[_ngcontent-%COMP%]{margin:36px auto;padding:24px;background:linear-gradient(180deg,var(--background2),rgba(0,0,0,.6));border-radius:12px;border:1px solid rgba(255,255,255,.05);color:var(--text-light);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial;box-shadow:0 6px 30px #0009}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 18px;font-size:1.4rem;color:var(--text-gold);text-align:center;letter-spacing:.6px}.register-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;font-size:.92rem;margin-bottom:8px;color:var(--gold-light);background:transparent}.row[_ngcontent-%COMP%]{display:flex;gap:14px;margin-top:8px;margin-bottom:6px;flex-wrap:wrap}.col[_ngcontent-%COMP%]{flex:1 1 220px;min-width:160px}.register-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid rgba(212,175,55,.12);color:var(--text-light);font-size:.98rem;outline:none;transition:border-color .18s ease,box-shadow .18s ease,transform .08s}.register-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#e6e6e68c}.register-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .register-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 4px 18px #cc9c001f;transform:translateY(-1px);background:transparent!important}.register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:linear-gradient(45deg,transparent 50%,var(--text-light) 50%),linear-gradient(135deg,var(--text-light) 50%,transparent 50%);background-position:calc(100% - 18px) calc(1em + 2px),calc(100% - 13px) calc(1em + 2px);background-size:5px 5px,5px 5px;background-repeat:no-repeat;padding-right:36px}.admin-fields[_ngcontent-%COMP%]{margin-top:16px;padding-top:14px;border-top:1px solid rgba(212,175,55,.06)}.register-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:20px;width:100%;padding:12px 16px;font-size:1.02rem;font-weight:700;background:linear-gradient(90deg,var(--primary),var(--secondary));color:var(--bg-black);border:none;border-radius:10px;cursor:pointer;box-shadow:0 6px 18px #c4a33c1f;transition:transform .12s ease,box-shadow .12s ease,opacity .12s}.register-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.register-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}.error[_ngcontent-%COMP%]{color:#ff7b7b;font-size:.85rem;margin-top:6px;margin-bottom:1rem}.error-msg[_ngcontent-%COMP%]{color:#ff6b6b;margin-top:14px;font-weight:700;text-align:center}.success-msg[_ngcontent-%COMP%]{color:#7fe38a;margin-top:14px;font-weight:700;text-align:center}.helper[_ngcontent-%COMP%]{font-size:.82rem;color:#e6e6e699;margin-top:6px}@media (max-width: 480px){.register-container[_ngcontent-%COMP%]{padding:18px;margin:18px}.row[_ngcontent-%COMP%]{gap:10px}.col[_ngcontent-%COMP%]{min-width:120px}}.register-container[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}input[_ngcontent-%COMP%]:-webkit-autofill{box-shadow:0 0 0 1000px transparent inset!important;-webkit-box-shadow:0 0 0px 1000px transparent inset!important;-webkit-text-fill-color:var(--text-light)!important}.register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:var(--text-light);background-color:var(--background)}.register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;padding-right:40px;position:relative}.register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--background);color:var(--text-light)}.register-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.register-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{position:relative}.register-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]:after{content:"";position:absolute;right:12px;top:50%;width:8px;height:8px;transform:translateY(-50%) rotate(45deg);border-right:2px solid var(--text-gold);border-bottom:2px solid var(--text-gold);pointer-events:none}']})};function D7(n,e){n&1&&(v(0,"div",19),w(1,"Email obbligatoria"),m())}function x7(n,e){n&1&&(v(0,"div",19),w(1,"Password richiesta (min 8)"),m())}function I7(n,e){if(n&1&&(v(0,"div",20),w(1),m()),n&2){let t=A();C(),ee(t.errorMsg)}}function M7(n,e){n&1&&(v(0,"div",21),w(1,"Non hai un account? "),v(2,"a",22),w(3,"Registrati"),m()())}var gv=class n{constructor(e){this.router=e;this.supabase=Di(_n.supabaseUrl,_n.supabaseAnonKey)}email="";password="";remember=!1;loading=!1;errorMsg="";showPassword=!1;supabase;toggleShowPassword(){this.showPassword=!this.showPassword}normalizeEmail(e){if(!e)return"";let t=e.toString().replace(/^"+|"+$/g,"").trim().toLowerCase();return t=t.replace(/\s+/g,""),t}onSubmit(e){return D(this,null,function*(){if(this.errorMsg="",e&&e.invalid){this.errorMsg="Compila tutti i campi richiesti.";return}let t=this.normalizeEmail(this.email);if(!t){this.errorMsg="Inserisci una email valida";return}if(!this.password){this.errorMsg="Inserisci la password";return}this.loading=!0;try{let{data:i,error:r}=yield this.supabase.auth.signInWithPassword({email:t,password:this.password});if(r){console.error("[login] signIn error",r),this.errorMsg=r.message||"Errore durante il login",this.loading=!1;return}let o=i?.user?.id??i?.session?.user?.id??null;if(!o){this.errorMsg="Login effettuato ma non \xE8 stato possibile recuperare l'utente. Controlla la mail di conferma se richiesta.",this.loading=!1;return}let{data:s,error:l}=yield this.supabase.from("profiles").select("role,salon_id,first_name,last_name").eq("id",o).maybeSingle();if(l){console.warn("[login] profile fetch error",l),this.router.navigate(["/user/home"]);return}(s?.role??"customer")==="admin"?yield this.router.navigate(["/admin/home"]):yield this.router.navigate(["/user/home"])}catch(i){console.error("[login] unexpected",i),this.errorMsg=i?.message||"Errore imprevisto"}finally{this.loading=!1}})}signOut(){return D(this,null,function*(){yield this.supabase.auth.signOut(),this.router.navigate(["/"])})}static \u0275fac=function(t){return new(t||n)($(Ve))};static \u0275cmp=he({type:n,selectors:[["app-login"]],decls:28,vars:11,consts:[["f","ngForm"],["emailRef","ngModel"],["pwRef","ngModel"],[1,"login-card"],["novalidate","",1,"login-form",3,"ngSubmit"],["for","email",1,"label"],["id","email","name","email","type","email","required","","placeholder","es. nome@dominio.it","autocomplete","email",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["for","password",1,"label"],[1,"password-wrapper"],["id","password","name","password","required","","minlength","8","placeholder","La tua password","autocomplete","current-password",3,"ngModelChange","type","ngModel"],["type","button","aria-label","Mostra password",1,"eye-btn",3,"click"],[1,"row-opts"],[1,"remember"],["type","checkbox","name","remember",3,"ngModelChange","ngModel"],["routerLink","/forgot-password",1,"forgot"],["type","submit",1,"btn-primary",3,"disabled"],["class","error-msg",4,"ngIf"],["class","hint",4,"ngIf"],[1,"error"],[1,"error-msg"],[1,"hint"],["routerLink","/register",2,"text-decoration","none","font-weight","800","color","rgba(233, 233, 233, 0.712)"]],template:function(t,i){if(t&1){let r=se();v(0,"div",3)(1,"h2"),w(2,"Accedi"),m(),v(3,"form",4,0),B("ngSubmit",function(){k(r);let s=Ne(4);return N(i.onSubmit(s))}),v(5,"label",5),w(6,"Email"),m(),v(7,"input",6,1),Q("ngModelChange",function(s){return k(r),K(i.email,s)||(i.email=s),N(s)}),m(),z(9,D7,2,0,"div",7),v(10,"label",8),w(11,"Password"),m(),v(12,"div",9)(13,"input",10,2),Q("ngModelChange",function(s){return k(r),K(i.password,s)||(i.password=s),N(s)}),m(),v(15,"button",11),B("click",function(){return k(r),N(i.toggleShowPassword())}),w(16),m()(),z(17,x7,2,0,"div",7),v(18,"div",12)(19,"label",13)(20,"input",14),Q("ngModelChange",function(s){return k(r),K(i.remember,s)||(i.remember=s),N(s)}),m(),w(21," Ricordami "),m(),v(22,"a",15),w(23,"Password dimenticata?"),m()(),v(24,"button",16),w(25),m(),z(26,I7,2,1,"div",17)(27,M7,4,0,"div",18),m()()}if(t&2){let r=Ne(4),o=Ne(8),s=Ne(14);C(7),Y("ngModel",i.email),C(2),M("ngIf",o.invalid&&o.touched),C(4),M("type",i.showPassword?"text":"password"),Y("ngModel",i.password),C(3),ie(" ",i.showPassword?"\u{1F648}":"\u{1F441}\uFE0F"," "),C(),M("ngIf",s.invalid&&s.touched),C(3),Y("ngModel",i.remember),C(4),M("disabled",i.loading||r.invalid),C(),ie(" ",i.loading?"Caricamento...":"Accedi"," "),C(),M("ngIf",i.errorMsg),C(),M("ngIf",!i.errorMsg)}},dependencies:[Ue,et,Ht,wi,yt,qi,Dt,bi,oo,sd,kt,ro,Ot,qn],styles:["[_ngcontent-%COMP%]:root{--card-bg: linear-gradient(180deg, var(--background2), rgba(0,0,0,.65))}.login-card[_ngcontent-%COMP%]{max-width:420px;margin:40px auto;padding:26px;border-radius:14px;background:var(--card-bg);color:var(--text-light);border:1px solid rgba(212,175,55,.06);box-shadow:0 10px 40px #0009;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 14px;color:var(--text-gold);font-size:1.4rem;text-align:center}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.login-form[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#e6e6e6ad;font-weight:600;margin-bottom:6px}.login-form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:12px 14px;border-radius:10px;border:1px solid rgba(212,175,55,.1);background:transparent;color:var(--text-light);font-size:.95rem;outline:none;transition:box-shadow .14s ease,transform .08s}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 8px 26px #cc9c001a;transform:translateY(-1px);color:#fff}.password-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-wrapper[_ngcontent-%COMP%]   .eye-btn[_ngcontent-%COMP%]{position:absolute;right:10px;background:transparent;border:none;color:var(--text-gold);font-size:1.05rem;cursor:pointer}.row-opts[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px;font-size:.9rem}.row-opts[_ngcontent-%COMP%]   .remember[_ngcontent-%COMP%]{color:#e6e6e6ad;display:flex;align-items:center;gap:8px}.row-opts[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{color:var(--gold-light);text-decoration:none;font-weight:600}.btn-submit[_ngcontent-%COMP%]{margin-top:4px;padding:12px;border-radius:10px;border:none;font-weight:700;background:linear-gradient(90deg,var(--primary),var(--gold-dark));color:var(--bg-black);cursor:pointer;box-shadow:0 8px 24px #c4a33c1f}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.error-msg[_ngcontent-%COMP%]{color:#ff6b6b;margin-top:8px;font-weight:700;text-align:center}.hint[_ngcontent-%COMP%]{color:#e6e6e699;text-align:center;margin-top:8px;font-size:.92rem}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{margin:20px;padding:18px}}"]})};var T7=n=>["/user/nuovo-appuntamento",n],P7=()=>["/user/barbieri"];function A7(n,e){n&1&&(v(0,"div",6)(1,"p"),w(2,"Caricamento informazioni del salone..."),m(),oe(3,"div",7),m())}function R7(n,e){if(n&1&&(v(0,"div",8)(1,"p"),w(2),m(),v(3,"button",9),w(4,"Torna alla lista"),m()()),n&2){let t=A();C(2),ee(t.error)}}function O7(n,e){if(n&1&&(v(0,"div",28)(1,"a",29),w(2),m()()),n&2){let t=A(2);C(),M("href",t.salone.sito_web,_t),C(),ie(" ",t.salone.sito_web," ")}}function k7(n,e){if(n&1&&(v(0,"span",36),w(1),m()),n&2){let t=A().$implicit,i=A(3);C(),ie(" ",i.formatIntervals(t.intervals)," ")}}function N7(n,e){n&1&&(v(0,"span",37),w(1,"Chiuso"),m())}function L7(n,e){if(n&1&&(v(0,"div",33)(1,"strong",34),w(2),m(),z(3,k7,2,1,"span",35)(4,N7,2,0,"ng-template",null,0,dn),m()),n&2){let t=e.$implicit,i=Ne(5);C(2),ie("",t.day_name,":"),C(),M("ngIf",t.intervals==null?null:t.intervals.length)("ngIfElse",i)}}function F7(n,e){if(n&1&&(v(0,"div",30)(1,"h2"),w(2,"Orari di Apertura"),m(),v(3,"div",31),z(4,L7,6,3,"div",32),m()()),n&2){let t=A(2);C(4),M("ngForOf",t.openingHours)}}function V7(n,e){if(n&1&&(v(0,"a",44),oe(1,"i",45),w(2," Facebook "),m()),n&2){let t=A(3);M("href",t.socials.facebook,_t)}}function j7(n,e){if(n&1&&(v(0,"a",46),oe(1,"i",47),w(2," Instagram "),m()),n&2){let t=A(3);M("href",t.socials.instagram,_t)}}function B7(n,e){if(n&1&&(v(0,"a",48),oe(1,"i",49),w(2," LinkedIn "),m()),n&2){let t=A(3);M("href",t.socials.linkedin,_t)}}function z7(n,e){if(n&1&&(v(0,"a",50),oe(1,"i",51),w(2," WhatsApp "),m()),n&2){let t=A(3);M("href","https://wa.me/"+t.socials.whatsapp,_t)}}function U7(n,e){if(n&1&&(v(0,"div",38)(1,"h2"),w(2,"Seguici sui social"),m(),v(3,"div",39),z(4,V7,3,1,"a",40)(5,j7,3,1,"a",41)(6,B7,3,1,"a",42)(7,z7,3,1,"a",43),m()()),n&2){let t=A(2);C(4),M("ngIf",t.socials.facebook),C(),M("ngIf",t.socials.instagram),C(),M("ngIf",t.socials.linkedin),C(),M("ngIf",t.socials.whatsapp)}}function H7(n,e){if(n&1&&(v(0,"div",52)(1,"h2"),w(2,"Descrizione"),m(),v(3,"p",53),w(4),m()()),n&2){let t=A(2);C(4),ee(t.salone.descrizione)}}function $7(n,e){if(n&1){let t=se();v(0,"div",57),B("click",function(){let r=k(t).index,o=A(3);return N(o.toggleFlip(r))}),v(1,"div",58)(2,"div",59)(3,"h3"),w(4),m(),v(5,"p",60),w(6),Ui(7,"currency"),m()(),v(8,"div",61)(9,"p",62),w(10),m()()()()}if(n&2){let t=e.$implicit,i=e.index,r=A(3);vt("flipped",r.flippedCards[i]),C(4),ee(t.name),C(2),ee(Hi(7,5,t.price,"EUR")),C(4),ie("",t.description||"Nessuna descrizione disponibile"," ")}}function W7(n,e){if(n&1&&(v(0,"div",54)(1,"h2"),w(2,"Servizi offerti"),m(),v(3,"div",55),z(4,$7,11,8,"div",56),m()()),n&2){let t=A(2);C(4),M("ngForOf",t.services)}}function G7(n,e){n&1&&(v(0,"div",63)(1,"p"),w(2,"Nessun servizio disponibile al momento"),m()())}function q7(n,e){if(n&1&&(v(0,"div",10)(1,"div",11)(2,"div",12),oe(3,"img",13),m(),v(4,"div",14)(5,"h1"),w(6),m(),z(7,O7,3,2,"div",15),m()(),v(8,"div",16)(9,"div",17)(10,"h2"),w(11,"Contatti"),m(),v(12,"div",18)(13,"div")(14,"strong"),w(15,"Telefono:"),m(),w(16),m(),v(17,"div")(18,"strong"),w(19,"Email:"),m(),v(20,"a",19),w(21),m()(),v(22,"div")(23,"strong"),w(24,"Indirizzo:"),m(),w(25),m()()(),z(26,F7,5,1,"div",20),m(),z(27,U7,8,4,"div",21)(28,H7,5,1,"div",22)(29,W7,5,1,"div",23)(30,G7,3,0,"div",24),v(31,"div",25)(32,"button",26),w(33," Prenota Appuntamento "),m(),v(34,"button",27),w(35," Torna indietro "),m()()()),n&2){let t=A();C(3),M("alt",Os("Logo ",t.salone.ragione_sociale))("src",t.salone.logo_url||"/assets/default-salon.png",_t),C(3),ee(t.salone.ragione_sociale),C(),M("ngIf",t.salone.sito_web),C(9),ie(" ",t.salone.telefono||"\u2014"),C(4),M("href","mailto:"+t.salone.email,_t),C(),ee(t.salone.email),C(4),ie(" ",t.salone.indirizzo),C(),M("ngIf",t.openingHours.length>0),C(),M("ngIf",t.hasSocials()),C(),M("ngIf",t.salone.descrizione),C(),M("ngIf",t.services.length),C(),M("ngIf",!t.services.length),C(2),M("routerLink",vi(16,T7,t.salone.id)),C(2),M("routerLink",nw(18,P7))}}var mv=class n{constructor(e,t,i,r){this.route=e;this.router=t;this.service=i;this.location=r}saloneId=null;salone=null;loading=!0;error=null;services=[];openingHours=[];socials={};flippedCards={};ngOnInit(){if(this.saloneId=this.route.snapshot.paramMap.get("id"),!this.saloneId){this.error="ID salone non specificato.",this.loading=!1;return}this.loadSalone(this.saloneId)}loadSalone(e){return D(this,null,function*(){try{let t=yield this.service.getAdminById(e);console.log("Dati salone:",t),this.salone=t,this.services=t.services||[],this.openingHours=yield this.service.getOpeningHours(e),console.log("Orari di apertura:",this.openingHours),this.socials=yield this.service.getProfileSocials(e),console.log("Social del salone:",this.socials),this.salone||(this.error="Salone non trovato.")}catch(t){console.error("Errore nel caricamento del salone",t),this.error="Errore nel caricamento dei dati."}finally{this.loading=!1}})}toggleFlip(e){this.flippedCards[e]=!this.flippedCards[e]}formatIntervals(e=[]){return!e||e.length===0?"Chiuso":e.map(t=>`${t.start} - ${t.end}`).join(" - ")}hasSocials(){return!!this.socials&&(!!this.socials.facebook||!!this.socials.instagram||!!this.socials.linkedin||!!this.socials.whatsapp)}static \u0275fac=function(t){return new(t||n)($(ln),$(Ve),$(xt),$(yr))};static \u0275cmp=he({type:n,selectors:[["app-salone-detail"]],decls:5,vars:3,consts:[["closed",""],[1,"container"],[1,"card-content",2,"padding","1.5rem"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","salone-profile",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"error-container"],["routerLink","/barbieri"],[1,"salone-profile"],[1,"salone-header"],[1,"salone-logo-wrap"],[1,"salone-logo",3,"src","alt"],[1,"salone-info"],["class","salone-website",4,"ngIf"],[1,"contact-hours-container"],[1,"contact-section"],[1,"contact-info"],[3,"href"],["class","opening-hours-section",4,"ngIf"],["class","social-section",4,"ngIf"],["class","description-section",4,"ngIf"],["class","services-section",4,"ngIf"],["class","no-services",4,"ngIf"],[1,"actions"],[1,"btn-primary",3,"routerLink"],[1,"btn",3,"routerLink"],[1,"salone-website"],["target","_blank",1,"website-link",3,"href"],[1,"opening-hours-section"],[1,"opening-hours"],["class","opening-day",4,"ngFor","ngForOf"],[1,"opening-day"],[1,"day-name"],["class","has-hours",4,"ngIf","ngIfElse"],[1,"has-hours"],[1,"closed"],[1,"social-section"],[1,"social-links"],["target","_blank","class","social-link facebook",3,"href",4,"ngIf"],["target","_blank","class","social-link instagram",3,"href",4,"ngIf"],["target","_blank","class","social-link linkedin",3,"href",4,"ngIf"],["target","_blank","class","social-link whatsapp",3,"href",4,"ngIf"],["target","_blank",1,"social-link","facebook",3,"href"],[1,"fab","fa-facebook"],["target","_blank",1,"social-link","instagram",3,"href"],[1,"fab","fa-instagram"],["target","_blank",1,"social-link","linkedin",3,"href"],[1,"fab","fa-linkedin"],["target","_blank",1,"social-link","whatsapp",3,"href"],[1,"fab","fa-whatsapp"],[1,"description-section"],[1,"salone-description"],[1,"services-section"],[1,"services-grid"],["class","service-card",3,"flipped","click",4,"ngFor","ngForOf"],[1,"service-card",3,"click"],[1,"card-inner"],[1,"card-front"],[1,"price"],[1,"card-back"],[1,"description"],[1,"no-services"]],template:function(t,i){t&1&&(v(0,"div",1)(1,"div",2),z(2,A7,4,0,"div",3)(3,R7,5,1,"div",4)(4,q7,36,19,"div",5),m()()),t&2&&(C(2),M("ngIf",i.loading),C(),M("ngIf",i.error),C(),M("ngIf",i.salone&&!i.loading))},dependencies:[Ue,at,et,Ot,qn,Ls],styles:[".salone-detail[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:var(--padding-v) var(--padding-h)}.salone-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:clamp(1rem,3vw,2rem);margin-bottom:clamp(1.5rem,3vw,2rem);align-items:center}.salone-logo[_ngcontent-%COMP%]{width:clamp(100px,20vw,150px);height:clamp(100px,20vw,150px);border-radius:var(--border-radius);object-fit:cover;border:2px solid var(--primary);box-shadow:0 4px 12px #0003}.salone-info[_ngcontent-%COMP%]{flex:1;min-width:min(100%,300px)}.salone-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 clamp(.5rem,1vw,.8rem) 0;color:var(--primary);font-size:var(--font-size-xl);line-height:1.2}.website-link[_ngcontent-%COMP%]{display:inline-block;color:var(--primary);font-weight:600;margin-top:clamp(.3rem,1vw,.5rem);word-break:break-all;text-decoration:none}.website-link[_ngcontent-%COMP%]:hover{text-decoration:underline;text-underline-offset:.2rem}.contact-section[_ngcontent-%COMP%]{margin-bottom:clamp(1.5rem,3vw,2rem);padding-bottom:clamp(1rem,2vw,1.5rem);border-bottom:1px solid rgba(255,255,255,.1)}.opening-hours[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.opening-day[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem;background:#ffffff08;border-radius:8px}.contact-section[_ngcontent-%COMP%], .opening-hours-section[_ngcontent-%COMP%]{flex:1;min-width:min(100%,300px)}.contact-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .description-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary);font-size:var(--font-size-lg);margin-bottom:clamp(1rem,1.5vw,1.2rem);border-bottom:2px solid var(--primary);padding-bottom:.3rem;display:inline-block}.contact-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem;margin-bottom:clamp(.8rem,1.5vw,1rem);padding:.5rem;background:#ffffff08;border-radius:8px}.contact-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text-light)}.contact-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:none;word-break:break-all}.contact-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.description-section[_ngcontent-%COMP%]{margin-bottom:clamp(1.5rem,3vw,2rem)}.salone-description[_ngcontent-%COMP%]{line-height:1.7;color:var(--text-light);padding:clamp(.8rem,1.5vw,1rem);background:#ffffff08;border-radius:8px;white-space:pre-wrap}.services-section[_ngcontent-%COMP%]{margin-top:clamp(1.5rem,3vw,2rem)}.services-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(100%,280px),1fr));gap:clamp(1rem,2vw,2rem);margin-top:1rem}.service-card[_ngcontent-%COMP%]{perspective:1000px;height:100%;min-height:100px;background:#ffffff0d;border-radius:var(--border-radius);border:1px solid rgba(212,175,55,.3);transition:all .4s ease;padding:.5rem;cursor:pointer;overflow:hidden}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 8px 20px #d4af3733;border-color:var(--primary)}.card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d}.service-card[_ngcontent-%COMP%]:hover   .card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;backface-visibility:hidden;padding:clamp(1rem,1.5vw,1.2rem);box-sizing:border-box}.card-front[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg);overflow-y:auto;background:#1e1e1ef2}.service-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 clamp(.5rem,1vw,.8rem) 0;color:var(--primary);font-size:clamp(1.1rem,1.8vw,1.3rem);line-height:1.3}.service-card[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;font-size:clamp(1.2rem,2vw,1.4rem);color:var(--text-light);margin:0}.service-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:var(--text-light);line-height:1.6;font-size:clamp(.9rem,1.5vw,1rem);margin:0}.no-services[_ngcontent-%COMP%]{text-align:center;padding:clamp(1.5rem,2vw,2rem);background:#ffffff08;border-radius:var(--border-radius);border:1px dashed rgba(255,255,255,.1);color:var(--text-muted)}.actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:clamp(.8rem,1.5vw,1rem);margin-top:clamp(1.5rem,3vw,2rem)}.btn-book[_ngcontent-%COMP%]{flex:1;min-width:min(100%,250px)}.btn-back[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--text-muted);color:var(--text-light)}.btn-back[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:var(--text-light)}@media (hover: none){.service-card[_ngcontent-%COMP%]{transform:none!important;box-shadow:none!important}.card-inner[_ngcontent-%COMP%]{transform:none!important;transition:none!important}.card-back[_ngcontent-%COMP%]{position:relative;transform:none;backface-visibility:visible;margin-top:1rem;border-top:1px solid rgba(212,175,55,.3);padding-top:1rem}}.salone-logo[_ngcontent-%COMP%]{width:clamp(100px,20vw,150px);height:auto;max-height:clamp(100px,20vw,150px);border-radius:var(--border-radius);object-fit:contain;display:block;margin:0;border:2px solid var(--primary);box-shadow:0 4px 12px #0003;background:#ffffff05;padding:4px}.contact-hours-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;margin-bottom:clamp(1.5rem,3vw,2rem);padding-bottom:clamp(1rem,2vw,1.5rem);border-bottom:1px solid rgba(255,255,255,.1)}.day-name[_ngcontent-%COMP%]{color:var(--text-light);font-weight:600}.closed[_ngcontent-%COMP%]{color:var(--text-muted);font-style:italic}.has-hours[_ngcontent-%COMP%]{color:var(--primary)}@media (max-width: 768px){.opening-day[_ngcontent-%COMP%]{flex-direction:column;gap:.3rem}}.social-section[_ngcontent-%COMP%]{margin-bottom:clamp(1.5rem,3vw,2rem);padding-bottom:clamp(1rem,2vw,1.5rem);border-bottom:1px solid rgba(255,255,255,.1)}.social-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary);font-size:var(--font-size-lg);margin-bottom:clamp(1rem,1.5vw,1.2rem);border-bottom:2px solid var(--primary);padding-bottom:.3rem;display:inline-block}.social-links[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;border-radius:8px;text-decoration:none;color:#fff;font-weight:500;transition:all .3s ease}.social-link[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}.social-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.2rem}.social-link.facebook[_ngcontent-%COMP%]{background-color:#3b5998}.social-link.instagram[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888)}.social-link.linkedin[_ngcontent-%COMP%]{background-color:#0077b5}.social-link.whatsapp[_ngcontent-%COMP%]{background-color:#25d366}@media (max-width: 768px){.social-links[_ngcontent-%COMP%]{flex-direction:column}.social-link[_ngcontent-%COMP%]{justify-content:center}}"]})};function Z7(n,e){if(n&1&&(ut(0),w(1),dt()),n&2){let t=A().$implicit;C(),ie(" \u2014 ",t.timing," min")}}function Y7(n,e){if(n&1&&(ut(0),w(1),Ui(2,"number"),dt()),n&2){let t=A().$implicit;C(),ie(" \u2014 \u20AC",Hi(2,1,t.price,"1.0-2"))}}function Q7(n,e){if(n&1&&(v(0,"option",21),w(1),z(2,Z7,2,1,"ng-container",22)(3,Y7,3,4,"ng-container",22),m()),n&2){let t=e.$implicit;M("value",t.id),C(),ie(" ",t.name," "),C(),M("ngIf",t.timing!==void 0),C(),M("ngIf",t.price!=null)}}function K7(n,e){if(n&1){let t=se();v(0,"button",19),B("click",function(){let r=k(t).$implicit,o=A(2);return N(o.pickSlot(r))}),w(1),m()}if(n&2){let t=e.$implicit;C(),ie(" ",t," ")}}function J7(n,e){if(n&1&&(v(0,"div",3)(1,"div",15)(2,"label"),w(3,"Orari disponibili"),m(),v(4,"div",23),z(5,K7,2,1,"button",24),m()()()),n&2){let t=A();C(5),M("ngForOf",t.timeslots)}}var _v=class n{constructor(e,t,i,r){this.route=e;this.fb=t;this.service=i;this.router=r}form;salonId="";services=[];timeslots=[];loadingServices=!1;loadingSlots=!1;submitting=!1;sub;ngOnInit(){this.salonId=this.route.snapshot.paramMap.get("salonId")||"",this.form=this.fb.group({service_id:["",Dr.required],date:[this.todayString(),Dr.required],time:["",Dr.required],notes:[""]}),this.loadServices();let e=this.form.get("service_id").valueChanges.pipe(Oi(this.form.value.service_id)),t=this.form.get("date").valueChanges.pipe(Oi(this.form.value.date));this.sub=fs([e,t]).subscribe(([i,r])=>{i&&r?this.loadTimeSlots(r,i):this.timeslots=[]})}ngOnDestroy(){this.sub?.unsubscribe()}todayString(){let e=new Date,t=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${e.getFullYear()}-${t}-${i}`}pickSlot(e){this.form.patchValue({time:e})}loadServices(){return D(this,null,function*(){if(this.salonId){this.loadingServices=!0;try{let e=yield this.service.getAdminById(this.salonId);this.services=Array.isArray(e.services)?e.services.filter(t=>!t.is_group).map(t=>({id:t.id,name:t.name,price:t.price??null,timing:t.timing??void 0})):[]}catch(e){console.error("Errore caricamento servizi salone",e),this.services=[]}finally{this.loadingServices=!1}}})}loadTimeSlots(e,t){return D(this,null,function*(){this.loadingSlots=!0;try{this.timeslots=this.generateGrid("09:00","19:00",30)}finally{this.loadingSlots=!1}})}generateGrid(e,t,i){let[r,o]=e.split(":").map(Number),[s,l]=t.split(":").map(Number),c=[],d=new Date;d.setHours(r,o,0,0);let h=new Date;for(h.setHours(s,l,0,0);d<=h;)c.push(`${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`),d=new Date(d.getTime()+i*60*1e3);return c}submit(){return D(this,null,function*(){if(!(this.form.invalid||this.submitting)){this.submitting=!0;try{let{service_id:e,date:t,time:i,notes:r}=this.form.value,o=this.services.find(x=>x.id===e),s=o?.timing??30,[l,c,d]=t.split("-").map(Number),[h,p]=i.split(":").map(Number),y=new Date(l,c-1,d,h,p),_=new Date(y.getTime()+s*60*1e3),I=(yield this.service.getMyProfile(!0))?.id;if(!I){alert("Devi essere autenticato per prenotare.");return}yield this.service.createAppointment({salon_id:this.salonId,client_id:I,service_id:e,start_time:y.toISOString(),end_time:_.toISOString(),price:o?.price??void 0,notes:r?.trim()||void 0}),alert("Appuntamento prenotato con successo!"),this.router.navigate(["/user/salone",this.salonId])}catch(e){console.error(e),alert("Errore nella prenotazione. Riprova.")}finally{this.submitting=!1}}})}goBack(){this.router.navigate(["/user/salone",this.salonId])}static \u0275fac=function(t){return new(t||n)($(ln),$(om),$(xt),$(Ve))};static \u0275cmp=he({type:n,selectors:[["app-nuovo-appuntamento"]],decls:37,vars:5,consts:[[1,"container"],[1,"section-title"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","service"],[1,"required"],["id","service","formControlName","service_id"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","date"],["id","date","type","date","formControlName","date"],["for","time"],["id","time","type","time","formControlName","time","step","900"],["class","form-row",4,"ngIf"],[1,"form-group",2,"flex","1"],["for","notes"],["id","notes","rows","3","placeholder","Es: preferenze taglio, richieste particolari\u2026","formControlName","notes"],[1,"form-row",2,"justify-content","flex-end","gap",".6rem"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[3,"value"],[4,"ngIf"],[1,"slots-grid",2,"display","flex","flex-wrap","wrap","gap",".5rem","align-items","center"],["type","button","class","btn",3,"click",4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(v(0,"div",0)(1,"h2",1),w(2,"Prenota Appuntamento"),m(),v(3,"form",2),B("ngSubmit",function(){return i.submit()}),v(4,"div",3)(5,"div",4)(6,"label",5),w(7,"Servizio "),v(8,"span",6),w(9,"*"),m()(),v(10,"select",7)(11,"option",8),w(12,"Seleziona un servizio"),m(),z(13,Q7,4,4,"option",9),m()(),v(14,"div",4)(15,"label",10),w(16,"Data "),v(17,"span",6),w(18,"*"),m()(),oe(19,"input",11),m(),v(20,"div",4)(21,"label",12),w(22,"Orario "),v(23,"span",6),w(24,"*"),m()(),oe(25,"input",13),m()(),z(26,J7,6,1,"div",14),v(27,"div",3)(28,"div",15)(29,"label",16),w(30,"Note"),m(),oe(31,"textarea",17),m()(),v(32,"div",18)(33,"button",19),B("click",function(){return i.goBack()}),w(34,"Annulla"),m(),v(35,"button",20),w(36),m()()()()),t&2&&(C(3),M("formGroup",i.form),C(10),M("ngForOf",i.services),C(13),M("ngIf",i.timeslots.length),C(9),M("disabled",i.form.invalid||i.submitting),C(),ie(" ",i.submitting?"Salvataggio\u2026":"Conferma Prenotazione"," "))},dependencies:[Ue,at,et,sm,wi,Zn,Yn,yt,Dn,Dt,bi,Hl,od,Su],encapsulation:2})};function X7(n,e){if(n&1&&(v(0,"option",31),w(1),m()),n&2){let t=e.$implicit;M("value",t),C(),ie(" ",t," ")}}function eZ(n,e){if(n&1&&(v(0,"option",31),w(1),m()),n&2){let t=e.$implicit;M("value",t.code),C(),zi(" ",t.code," - ",t.name," ")}}var Cf=class n{constructor(e,t,i,r,o){this.supplierService=e;this.router=t;this.route=i;this.serviceService=r;this.titleService=o}save=new xe;cancel=new xe;newSupplier={ragione_sociale:"",partita_iva:"",indirizzo:"",citta:"",provincia:"",regione:"",telefono:"",email:"",pec:"",persona_contatto:"",telefono_contatto:"",metodo_pagamento:"",iban:""};isEditMode=!1;supplierId=null;provinces=[];regions=[];filteredProvinces=[];ngOnInit(){this.provinces=this.serviceService.getProvinces(),this.regions=this.serviceService.getRegions(),this.supplierId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.supplierId,this.isEditMode?(this.loadSupplierData(),this.titleService.setTitle("Modifica Fornitore")):this.titleService.setTitle("Aggiungi Nuovo Fornitore")}loadSupplierData(){this.supplierId&&this.supplierService.getById(this.supplierId).subscribe({next:e=>{e&&(this.newSupplier={ragione_sociale:e.ragione_sociale,partita_iva:e.partita_iva,indirizzo:e.indirizzo,citta:e.citta,provincia:e.provincia,regione:e.regione||"",telefono:e.telefono||"",email:e.email||"",pec:e.pec||"",persona_contatto:e.persona_contatto||"",telefono_contatto:e.telefono_contatto||"",metodo_pagamento:e.metodo_pagamento||"",iban:e.iban||""},this.newSupplier.regione&&this.filterProvincesByRegion(this.newSupplier.regione))},error:e=>console.error("Errore nel caricamento:",e)})}onRegionChange(){this.filterProvincesByRegion(this.newSupplier.regione||""),this.newSupplier.provincia=""}filterProvincesByRegion(e){this.filteredProvinces=this.provinces.filter(t=>t.region===e)}onSubmit(){this.isEditMode&&this.supplierId?this.supplierService.update(this.supplierId,this.newSupplier).subscribe({next:()=>this.router.navigate(["/admin/fornitori"]),error:e=>console.error("Errore aggiornamento:",e)}):this.supplierService.create(this.newSupplier).subscribe({next:()=>this.router.navigate(["/admin/fornitori"]),error:e=>console.error("Errore creazione:",e)})}onCancel(){this.router.navigate(["/admin/fornitori"])}static \u0275fac=function(t){return new(t||n)($(bc),$(Ve),$(ln),$(xt),$(hg))};static \u0275cmp=he({type:n,selectors:[["app-add-profile"]],outputs:{save:"save",cancel:"cancel"},decls:90,vars:18,consts:[[1,"container"],[1,"header-row"],["routerLink","/admin/fornitori","title","Torna indietro",1,"btn","btn-icon"],[1,"material-icons"],[1,"section-title"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],[1,"required"],["type","text","name","ragione_sociale","required","",1,"input-field",3,"ngModelChange","ngModel"],["type","text","name","partita_iva","required","","maxlength","11",1,"input-field",3,"ngModelChange","ngModel"],["type","text","name","indirizzo",1,"input-field",3,"ngModelChange","ngModel"],["type","text","name","citta",1,"input-field",3,"ngModelChange","ngModel"],["name","regione",1,"input-field",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","provincia",1,"input-field",3,"ngModelChange","ngModel","disabled"],["type","tel","name","telefono",1,"input-field",3,"ngModelChange","ngModel"],["type","email","name","email",1,"input-field",3,"ngModelChange","ngModel"],["type","email","name","pec",1,"input-field",3,"ngModelChange","ngModel"],["type","text","name","persona_contatto",1,"input-field",3,"ngModelChange","ngModel"],["type","tel","name","telefono_contatto",1,"input-field",3,"ngModelChange","ngModel"],["name","metodo_pagamento",1,"input-field",3,"ngModelChange","ngModel"],["value","Bonifico"],["value","Assegno"],["value","Contanti"],["value","Carta"],["type","text","name","iban",1,"input-field",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(t,i){t&1&&(v(0,"div",0)(1,"div",1)(2,"button",2)(3,"i",3),w(4,"arrow_back"),m()(),v(5,"h2",4),w(6),m()(),v(7,"form",5),B("ngSubmit",function(){return i.onSubmit()}),v(8,"div",6)(9,"div",7)(10,"label"),w(11,"Ragione Sociale "),v(12,"span",8),w(13,"*"),m()(),v(14,"input",9),Q("ngModelChange",function(o){return K(i.newSupplier.ragione_sociale,o)||(i.newSupplier.ragione_sociale=o),o}),m()(),v(15,"div",7)(16,"label"),w(17,"Partita IVA "),v(18,"span",8),w(19,"*"),m()(),v(20,"input",10),Q("ngModelChange",function(o){return K(i.newSupplier.partita_iva,o)||(i.newSupplier.partita_iva=o),o}),m()()(),v(21,"div",6)(22,"div",7)(23,"label"),w(24,"Indirizzo"),m(),v(25,"input",11),Q("ngModelChange",function(o){return K(i.newSupplier.indirizzo,o)||(i.newSupplier.indirizzo=o),o}),m()(),v(26,"div",7)(27,"label"),w(28,"Citt\xE0"),m(),v(29,"input",12),Q("ngModelChange",function(o){return K(i.newSupplier.citta,o)||(i.newSupplier.citta=o),o}),m()()(),v(30,"div",6)(31,"div",7)(32,"label"),w(33,"Regione"),m(),v(34,"select",13),Q("ngModelChange",function(o){return K(i.newSupplier.regione,o)||(i.newSupplier.regione=o),o}),B("change",function(){return i.onRegionChange()}),v(35,"option",14),w(36,"Seleziona Regione"),m(),z(37,X7,2,2,"option",15),m()(),v(38,"div",7)(39,"label"),w(40,"Provincia (Sigla)"),m(),v(41,"select",16),Q("ngModelChange",function(o){return K(i.newSupplier.provincia,o)||(i.newSupplier.provincia=o),o}),v(42,"option",14),w(43,"Seleziona Provincia"),m(),z(44,eZ,2,3,"option",15),m()()(),v(45,"div",6)(46,"div",7)(47,"label"),w(48,"Telefono"),m(),v(49,"input",17),Q("ngModelChange",function(o){return K(i.newSupplier.telefono,o)||(i.newSupplier.telefono=o),o}),m()(),v(50,"div",7)(51,"label"),w(52,"Email"),m(),v(53,"input",18),Q("ngModelChange",function(o){return K(i.newSupplier.email,o)||(i.newSupplier.email=o),o}),m()()(),v(54,"div",6)(55,"div",7)(56,"label"),w(57,"PEC"),m(),v(58,"input",19),Q("ngModelChange",function(o){return K(i.newSupplier.pec,o)||(i.newSupplier.pec=o),o}),m()(),v(59,"div",7)(60,"label"),w(61,"Persona di Contatto"),m(),v(62,"input",20),Q("ngModelChange",function(o){return K(i.newSupplier.persona_contatto,o)||(i.newSupplier.persona_contatto=o),o}),m()()(),v(63,"div",6)(64,"div",7)(65,"label"),w(66,"Telefono Contatto"),m(),v(67,"input",21),Q("ngModelChange",function(o){return K(i.newSupplier.telefono_contatto,o)||(i.newSupplier.telefono_contatto=o),o}),m()(),v(68,"div",7)(69,"label"),w(70,"Metodo Pagamento"),m(),v(71,"select",22),Q("ngModelChange",function(o){return K(i.newSupplier.metodo_pagamento,o)||(i.newSupplier.metodo_pagamento=o),o}),v(72,"option",23),w(73,"Bonifico"),m(),v(74,"option",24),w(75,"Assegno"),m(),v(76,"option",25),w(77,"Contanti"),m(),v(78,"option",26),w(79,"Carta di Credito"),m()()()(),v(80,"div",6)(81,"div",7)(82,"label"),w(83,"IBAN"),m(),v(84,"input",27),Q("ngModelChange",function(o){return K(i.newSupplier.iban,o)||(i.newSupplier.iban=o),o}),m()()(),v(85,"div",28)(86,"button",29),B("click",function(){return i.onCancel()}),w(87,"Annulla"),m(),v(88,"button",30),w(89),m()()()()),t&2&&(C(6),ee(i.isEditMode?"Modifica Fornitore":"Aggiungi Nuovo Fornitore"),C(8),Y("ngModel",i.newSupplier.ragione_sociale),C(6),Y("ngModel",i.newSupplier.partita_iva),C(5),Y("ngModel",i.newSupplier.indirizzo),C(4),Y("ngModel",i.newSupplier.citta),C(5),Y("ngModel",i.newSupplier.regione),C(3),M("ngForOf",i.regions),C(4),Y("ngModel",i.newSupplier.provincia),M("disabled",!i.newSupplier.regione),C(3),M("ngForOf",i.filteredProvinces),C(5),Y("ngModel",i.newSupplier.telefono),C(4),Y("ngModel",i.newSupplier.email),C(5),Y("ngModel",i.newSupplier.pec),C(4),Y("ngModel",i.newSupplier.persona_contatto),C(5),Y("ngModel",i.newSupplier.telefono_contatto),C(4),Y("ngModel",i.newSupplier.metodo_pagamento),C(13),Y("ngModel",i.newSupplier.iban),C(5),ie(" ",i.isEditMode?"Aggiorna":"Salva"," "))},dependencies:[Ue,at,Ht,wi,Zn,Yn,yt,Dn,Dt,bi,oo,RC,kt,ro,Ot,qn],styles:[".header-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-light);cursor:pointer;padding:.5rem;border-radius:50%;transition:all .3s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.1)}"]})};var VL=[{path:"admin/home",component:Ug},{path:"admin/lista-prodotti",component:Nm,canDeactivate:[n=>n.canDeactivate()]},{path:"admin/servizi",component:Um},{path:"admin/calendario",component:nv},{path:"admin/clienti",component:iv},{path:"admin/fornitori",component:rv},{path:"admin/fornitori/nuovo",component:Cf},{path:"admin/fornitori/edita/:id",component:Cf},{path:"admin/tessera",component:ov},{path:"admin/impostazioni",component:bf},{path:"admin/product-detail",component:wf},{path:"admin/product-detail/:type/:id",component:wf},{path:"user/home",component:sv},{path:"user/lista-barbieri",component:av},{path:"user/mappa",component:uv},{path:"user/storico",component:dv},{path:"user/calendario",component:fv},{path:"user/impostazioni",component:bf},{path:"user/salone/:id",component:mv},{path:"user/nuovo-appuntamento/:salonId",component:_v},{path:"",redirectTo:"admin/home",pathMatch:"full"},{path:"register",component:pv},{path:"login",component:gv},{path:"**",redirectTo:""}];var jL={providers:[T0(),ow({eventCoalescing:!0}),vC(VL),fg()]};function tZ(n,e){if(n&1){let t=se();v(0,"li")(1,"a",9),B("click",function(){k(t);let r=A();return N(r.onNavClick())}),oe(2,"i"),v(3,"span"),w(4),m()()()}if(n&2){let t=e.$implicit;C(),M("routerLink",t.link),C(),tw(t.icon),C(2),ee(t.label)}}function nZ(n,e){if(n&1&&(ut(0),oe(1,"img",13),dt()),n&2){let t=A(2);C(),M("src",t.avatarUrl,_t)}}function iZ(n,e){if(n&1&&(v(0,"div",14),w(1),m()),n&2){let t=A(2);C(),ee(t.initials||"?")}}function rZ(n,e){if(n&1&&(ut(0),z(1,nZ,2,1,"ng-container",8)(2,iZ,2,1,"ng-template",null,1,dn),v(4,"div",10)(5,"div",11),w(6),m(),v(7,"div",12),w(8),m()(),dt()),n&2){let t=Ne(3),i=A();C(),M("ngIf",i.avatarUrl)("ngIfElse",t),C(5),ee(i.userName),C(2),ee(i.isAdmin?"Barbiere Admin":"Cliente")}}function oZ(n,e){n&1&&(v(0,"div",14),w(1,"G"),m(),v(2,"div",10)(3,"div",11),w(4,"Guest"),m(),v(5,"div",12),w(6,"Visitatore"),m()())}var vv=class n{constructor(e){this.router=e;this.supabase=Di(_n.supabaseUrl,_n.supabaseAnonKey)}isAdmin=!1;open=!0;toggle=new xe;navigate=new xe;logout=new xe;menuItems=[];userId=null;userName="";initials="";avatarUrl=null;supabase;authSub=null;routerSub=null;ngOnInit(){this.setContextAndMenu(this.router.url),this.routerSub=this.router.events.subscribe(e=>{e instanceof gn&&this.setContextAndMenu(e.urlAfterRedirects)}),this.initAuthHandling()}ngOnDestroy(){try{this.authSub&&typeof this.authSub.unsubscribe=="function"?this.authSub.unsubscribe():this.authSub&&typeof this.authSub=="object"&&this.authSub?.subscription&&this.authSub.subscription.unsubscribe?.()}catch{}this.routerSub?.unsubscribe?.()}setContextAndMenu(e){this.isAdmin=e.startsWith("/admin/"),this.menuItems=this.isAdmin?[{label:"Home",link:"/admin/home",icon:"fa fa-home"},{label:"Lista prodotti",link:"/admin/lista-prodotti",icon:"fa fa-box"},{label:"Lista servizi",link:"/admin/servizi",icon:"fa fa-concierge-bell"},{label:"Calendario",link:"/admin/calendario",icon:"fa fa-calendar-alt"},{label:"Clienti",link:"/admin/clienti",icon:"fa fa-users"},{label:"Fornitori",link:"/admin/fornitori",icon:"fa fa-truck"},{label:"Impostazioni",link:"/admin/impostazioni",icon:"fa fa-cog"}]:[{label:"Home",link:"/user/home",icon:"fa fa-home"},{label:"Lista barbieri",link:"/user/lista-barbieri",icon:"fa fa-user"},{label:"Mappa barbieri",link:"/user/mappa",icon:"fa fa-map-marked-alt"},{label:"Storico appuntamenti",link:"/user/storico",icon:"fa fa-history"},{label:"Impostazioni",link:"/user/impostazioni",icon:"fa fa-cog"}]}onNavClick(){this.navigate.emit()}onToggle(){this.toggle.emit()}onLogout(){return D(this,null,function*(){try{yield this.supabase.auth.signOut()}catch(e){console.warn("Logout error",e)}this.clearUser(),this.logout.emit(),this.router.navigate(["/"])})}initAuthHandling(){return D(this,null,function*(){console.log("[Sidebar] initAuthHandling start");try{let{data:e}=yield this.supabase.auth.getSession(),t=e?.session;if(console.log("[Sidebar] getSession result:",t),t?.user?.id)yield this.loadProfile(t.user.id);else{let{data:i}=yield this.supabase.auth.getUser(),r=i?.user;console.log("[Sidebar] getUser fallback result:",r),r?.id?yield this.loadProfile(r.id):this.clearUser()}}catch(e){console.warn("[Sidebar] getSession/getUser error:",e),this.clearUser()}try{let{data:e}=this.supabase.auth.onAuthStateChange((t,i)=>{console.log("[Sidebar] onAuthStateChange event:",t," session:",i),i?.user?.id?this.loadProfile(i.user.id).catch(r=>console.warn("loadProfile err",r)):this.clearUser()});this.authSub=e?.subscription??e}catch(e){console.warn("[Sidebar] onAuthStateChange subscribe error",e)}})}loadProfile(e){return D(this,null,function*(){console.log("[Sidebar] loadProfile for",e);try{let{data:t,error:i}=yield this.supabase.from("profiles").select("first_name,last_name,full_name,role,avatar_path").eq("id",e).maybeSingle();if(i){console.warn("[Sidebar] profile fetch error",i),this.clearUser();return}if(!t){console.warn("[Sidebar] profile missing for user",e),this.clearUser();return}let r=t.first_name??"",o=t.last_name??"",s=t.full_name??"",l=`${r} ${o}`.trim()||s||"Utente";this.userName=l,this.initials=this.computeInitials(l),t.avatar_path?/^https?:\/\//.test(t.avatar_path)?this.avatarUrl=t.avatar_path:this.avatarUrl=`${_n.supabaseUrl.replace(/^https?:\/\//,"https://")}/storage/v1/object/public/avatars/${t.avatar_path}`:this.avatarUrl=null,this.isAdmin=t.role==="admin",this.userId=e,console.log("[Sidebar] profile loaded",{userId:e,name:l,avatar:this.avatarUrl,role:t.role})}catch(t){console.error("[Sidebar] loadProfile unexpected error",t),this.clearUser()}})}computeInitials(e){if(!e)return"?";let t=e.split(" ").filter(Boolean);return t.length===1?t[0].slice(0,2).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()}clearUser(){this.userId=null,this.userName="",this.initials="",this.avatarUrl=null}static \u0275fac=function(t){return new(t||n)($(Ve))};static \u0275cmp=he({type:n,selectors:[["app-sidebar"]],inputs:{isAdmin:"isAdmin",open:"open"},outputs:{toggle:"toggle",navigate:"navigate",logout:"logout"},decls:12,vars:4,consts:[["guestTpl",""],["initialsTpl",""],[1,"sidebar",3,"ngClass"],[1,"sidebar__brand"],[1,"sidebar__spacer"],[1,"sidebar__nav"],[4,"ngFor","ngForOf"],[1,"sidebar__user-info"],[4,"ngIf","ngIfElse"],["routerLinkActive","active",3,"click","routerLink"],[1,"user-details"],[1,"user-name"],[1,"user-role"],["alt","Avatar",1,"user-avatar",3,"src"],[1,"user-avatar","initials"]],template:function(t,i){if(t&1&&(v(0,"aside",2)(1,"div",3)(2,"h1"),w(3,"BarberApp"),m()(),oe(4,"div",4),v(5,"nav",5)(6,"ul"),z(7,tZ,5,4,"li",6),m()(),v(8,"div",7),z(9,rZ,9,4,"ng-container",8)(10,oZ,7,0,"ng-template",null,0,dn),m()()),t&2){let r=Ne(11);M("ngClass",i.isAdmin?"admin":"user"),C(7),M("ngForOf",i.menuItems),C(2),M("ngIf",i.userName&&i.userName.length)("ngIfElse",r)}},dependencies:[Ue,Eu,at,et,Ot,qn,_C],styles:[".sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:clamp(200px,20vw,300px);height:100vh;background:var(--background);color:var(--text-light);box-shadow:2px 0 12px #0009;padding:1rem 0;font-family:Segoe UI,sans-serif}.sidebar__brand[_ngcontent-%COMP%]{text-align:center;padding:1rem}.sidebar__brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;background:linear-gradient(135deg,var(--primary),var(--secondary));background-clip:text;-webkit-background-clip:text;color:transparent;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 4px rgba(212,175,55,.7))}.sidebar__spacer[_ngcontent-%COMP%]{flex:1}.sidebar__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.sidebar__nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.2rem 0}.sidebar__nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1.5rem;color:var(--text-light);text-decoration:none;font-size:1rem;border-left:3px solid transparent;transition:background .3s,border-color .3s}.sidebar__nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem;width:1.2rem;text-align:center}.sidebar__nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar__nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#d4af371a;border-left-color:var(--text-gold);font-weight:600}.sidebar__nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:700}.sidebar__user-info[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;margin-top:1rem;margin-bottom:1rem;border-top:1px solid rgba(255,255,255,.1);border-bottom:1px solid rgba(255,255,255,.1)}.user-avatar[_ngcontent-%COMP%]{flex:0 0 40px;width:40px;height:40px;border-radius:50%;object-fit:cover}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;min-width:0;overflow:hidden}.user-name[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%;font-weight:700;color:var(--text-light)}.sidebar__footer[_ngcontent-%COMP%]{padding:1rem 1.5rem}.btn-logout[_ngcontent-%COMP%]{display:flex;align-items:center;background:none;border:none;color:var(--text-light);font-size:1rem;cursor:pointer;padding:0;transition:color .3s}.btn-logout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.btn-logout[_ngcontent-%COMP%]:hover{color:#fff}.sidebar__user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:8px}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;background:linear-gradient(180deg,#ffffff08,#ffffff03);border:1px solid rgba(255,255,255,.04)}.user-avatar.initials[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,var(--background2),#000);color:var(--text-gold);font-weight:700;font-size:.95rem}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.user-name[_ngcontent-%COMP%]{font-weight:700;color:var(--primary)!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;max-width:100%}.user-role[_ngcontent-%COMP%]{font-size:.82rem;color:#e6e6e694;margin-top:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]})};function sZ(n,e){if(n&1){let t=se();v(0,"div",6),B("click",function(){k(t);let r=A();return N(r.closeSidebar())}),m()}}var yv=class n{constructor(e){this.router=e;this.router.events.subscribe(t=>{t instanceof gn&&(this.sidebarOpen=!1)})}sidebarOpen=!0;isAdmin=!1;toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebar(){this.sidebarOpen=!1}static \u0275fac=function(t){return new(t||n)($(Ve))};static \u0275cmp=he({type:n,selectors:[["app-root"]],decls:8,vars:4,consts:[[1,"hamburger-btn",3,"click"],[1,"layout",3,"click"],[1,"sidebar-container"],[3,"navigate","logout","isAdmin"],["class","overlay",3,"click",4,"ngIf"],[1,"content-container",3,"click"],[1,"overlay",3,"click"]],template:function(t,i){t&1&&(v(0,"button",0),B("click",function(o){return i.toggleSidebar(),o.stopPropagation()}),w(1,` \u2630
`),m(),v(2,"div",1),B("click",function(){return i.closeSidebar()}),v(3,"div",2)(4,"app-sidebar",3),B("navigate",function(){return i.closeSidebar()})("logout",function(){return i.closeSidebar()}),m()(),z(5,sZ,1,0,"div",4),v(6,"div",5),B("click",function(o){return o.stopPropagation()}),oe(7,"router-outlet"),m()()),t&2&&(C(2),vt("open",i.sidebarOpen),C(2),M("isAdmin",i.isAdmin),C(),M("ngIf",i.sidebarOpen))},dependencies:[Ue,et,Ot,Gu,vv],styles:["[_ngcontent-%COMP%]:root{--bg-black: #000000;--gold: #d4af37}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;background-color:var(--background2);color:var(--primary)}.layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:0 1fr;transition:grid-template-columns .3s ease-in-out;height:100vh;margin:0;padding:0}.layout.open[_ngcontent-%COMP%]{grid-template-columns:250px 1fr}.sidebar-container[_ngcontent-%COMP%]{grid-column:1 / 2;z-index:10;overflow:hidden;border-right:2px solid var(--primary)}.hamburger-btn[_ngcontent-%COMP%]{position:fixed;top:1rem;left:1rem;background:transparent;border:none;color:var(--primary);font-size:1.5rem;padding:.5rem;border-radius:4px;z-index:20;cursor:pointer}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;z-index:5}.content-container[_ngcontent-%COMP%]{grid-column:2 / -1;padding:.5rem;overflow-y:auto;background-color:var(--background2);color:var(--gold)}"]})};Fw(yv,jL).catch(n=>console.error(n));
